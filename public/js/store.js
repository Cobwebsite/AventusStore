var npmCompilation;
(npmCompilation||(npmCompilation = {}));
(function (npmCompilation) {
	var _ = (function () {
  'use strict';

  var showdown = {exports: {}};

  (function (module) {
  	(function(){
  	/**
  	 * Created by Tivie on 13-07-2015.
  	 */

  	function getDefaultOpts (simple) {

  	  var defaultOptions = {
  	    omitExtraWLInCodeBlocks: {
  	      defaultValue: false,
  	      describe: 'Omit the default extra whiteline added to code blocks',
  	      type: 'boolean'
  	    },
  	    noHeaderId: {
  	      defaultValue: false,
  	      describe: 'Turn on/off generated header id',
  	      type: 'boolean'
  	    },
  	    prefixHeaderId: {
  	      defaultValue: false,
  	      describe: 'Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic \'section-\' prefix',
  	      type: 'string'
  	    },
  	    rawPrefixHeaderId: {
  	      defaultValue: false,
  	      describe: 'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',
  	      type: 'boolean'
  	    },
  	    ghCompatibleHeaderId: {
  	      defaultValue: false,
  	      describe: 'Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)',
  	      type: 'boolean'
  	    },
  	    rawHeaderId: {
  	      defaultValue: false,
  	      describe: 'Remove only spaces, \' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids',
  	      type: 'boolean'
  	    },
  	    headerLevelStart: {
  	      defaultValue: false,
  	      describe: 'The header blocks level start',
  	      type: 'integer'
  	    },
  	    parseImgDimensions: {
  	      defaultValue: false,
  	      describe: 'Turn on/off image dimension parsing',
  	      type: 'boolean'
  	    },
  	    simplifiedAutoLink: {
  	      defaultValue: false,
  	      describe: 'Turn on/off GFM autolink style',
  	      type: 'boolean'
  	    },
  	    excludeTrailingPunctuationFromURLs: {
  	      defaultValue: false,
  	      describe: 'Excludes trailing punctuation from links generated with autoLinking',
  	      type: 'boolean'
  	    },
  	    literalMidWordUnderscores: {
  	      defaultValue: false,
  	      describe: 'Parse midword underscores as literal underscores',
  	      type: 'boolean'
  	    },
  	    literalMidWordAsterisks: {
  	      defaultValue: false,
  	      describe: 'Parse midword asterisks as literal asterisks',
  	      type: 'boolean'
  	    },
  	    strikethrough: {
  	      defaultValue: false,
  	      describe: 'Turn on/off strikethrough support',
  	      type: 'boolean'
  	    },
  	    tables: {
  	      defaultValue: false,
  	      describe: 'Turn on/off tables support',
  	      type: 'boolean'
  	    },
  	    tablesHeaderId: {
  	      defaultValue: false,
  	      describe: 'Add an id to table headers',
  	      type: 'boolean'
  	    },
  	    ghCodeBlocks: {
  	      defaultValue: true,
  	      describe: 'Turn on/off GFM fenced code blocks support',
  	      type: 'boolean'
  	    },
  	    tasklists: {
  	      defaultValue: false,
  	      describe: 'Turn on/off GFM tasklist support',
  	      type: 'boolean'
  	    },
  	    smoothLivePreview: {
  	      defaultValue: false,
  	      describe: 'Prevents weird effects in live previews due to incomplete input',
  	      type: 'boolean'
  	    },
  	    smartIndentationFix: {
  	      defaultValue: false,
  	      describe: 'Tries to smartly fix indentation in es6 strings',
  	      type: 'boolean'
  	    },
  	    disableForced4SpacesIndentedSublists: {
  	      defaultValue: false,
  	      describe: 'Disables the requirement of indenting nested sublists by 4 spaces',
  	      type: 'boolean'
  	    },
  	    simpleLineBreaks: {
  	      defaultValue: false,
  	      describe: 'Parses simple line breaks as <br> (GFM Style)',
  	      type: 'boolean'
  	    },
  	    requireSpaceBeforeHeadingText: {
  	      defaultValue: false,
  	      describe: 'Makes adding a space between `#` and the header text mandatory (GFM Style)',
  	      type: 'boolean'
  	    },
  	    ghMentions: {
  	      defaultValue: false,
  	      describe: 'Enables github @mentions',
  	      type: 'boolean'
  	    },
  	    ghMentionsLink: {
  	      defaultValue: 'https://github.com/{u}',
  	      describe: 'Changes the link generated by @mentions. Only applies if ghMentions option is enabled.',
  	      type: 'string'
  	    },
  	    encodeEmails: {
  	      defaultValue: true,
  	      describe: 'Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities',
  	      type: 'boolean'
  	    },
  	    openLinksInNewWindow: {
  	      defaultValue: false,
  	      describe: 'Open all links in new windows',
  	      type: 'boolean'
  	    },
  	    backslashEscapesHTMLTags: {
  	      defaultValue: false,
  	      describe: 'Support for HTML Tag escaping. ex: \<div>foo\</div>',
  	      type: 'boolean'
  	    },
  	    emoji: {
  	      defaultValue: false,
  	      describe: 'Enable emoji support. Ex: `this is a :smile: emoji`',
  	      type: 'boolean'
  	    },
  	    underline: {
  	      defaultValue: false,
  	      describe: 'Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`',
  	      type: 'boolean'
  	    },
  	    ellipsis: {
  	      defaultValue: true,
  	      describe: 'Replaces three dots with the ellipsis unicode character',
  	      type: 'boolean'
  	    },
  	    completeHTMLDocument: {
  	      defaultValue: false,
  	      describe: 'Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags',
  	      type: 'boolean'
  	    },
  	    metadata: {
  	      defaultValue: false,
  	      describe: 'Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).',
  	      type: 'boolean'
  	    },
  	    splitAdjacentBlockquotes: {
  	      defaultValue: false,
  	      describe: 'Split adjacent blockquote blocks',
  	      type: 'boolean'
  	    }
  	  };
  	  if (simple === false) {
  	    return JSON.parse(JSON.stringify(defaultOptions));
  	  }
  	  var ret = {};
  	  for (var opt in defaultOptions) {
  	    if (defaultOptions.hasOwnProperty(opt)) {
  	      ret[opt] = defaultOptions[opt].defaultValue;
  	    }
  	  }
  	  return ret;
  	}

  	function allOptionsOn () {
  	  var options = getDefaultOpts(true),
  	      ret = {};
  	  for (var opt in options) {
  	    if (options.hasOwnProperty(opt)) {
  	      ret[opt] = true;
  	    }
  	  }
  	  return ret;
  	}

  	/**
  	 * Created by Tivie on 06-01-2015.
  	 */

  	// Private properties
  	var showdown = {},
  	    parsers = {},
  	    extensions = {},
  	    globalOptions = getDefaultOpts(true),
  	    setFlavor = 'vanilla',
  	    flavor = {
  	      github: {
  	        omitExtraWLInCodeBlocks:              true,
  	        simplifiedAutoLink:                   true,
  	        excludeTrailingPunctuationFromURLs:   true,
  	        literalMidWordUnderscores:            true,
  	        strikethrough:                        true,
  	        tables:                               true,
  	        tablesHeaderId:                       true,
  	        ghCodeBlocks:                         true,
  	        tasklists:                            true,
  	        disableForced4SpacesIndentedSublists: true,
  	        simpleLineBreaks:                     true,
  	        requireSpaceBeforeHeadingText:        true,
  	        ghCompatibleHeaderId:                 true,
  	        ghMentions:                           true,
  	        backslashEscapesHTMLTags:             true,
  	        emoji:                                true,
  	        splitAdjacentBlockquotes:             true
  	      },
  	      original: {
  	        noHeaderId:                           true,
  	        ghCodeBlocks:                         false
  	      },
  	      ghost: {
  	        omitExtraWLInCodeBlocks:              true,
  	        parseImgDimensions:                   true,
  	        simplifiedAutoLink:                   true,
  	        excludeTrailingPunctuationFromURLs:   true,
  	        literalMidWordUnderscores:            true,
  	        strikethrough:                        true,
  	        tables:                               true,
  	        tablesHeaderId:                       true,
  	        ghCodeBlocks:                         true,
  	        tasklists:                            true,
  	        smoothLivePreview:                    true,
  	        simpleLineBreaks:                     true,
  	        requireSpaceBeforeHeadingText:        true,
  	        ghMentions:                           false,
  	        encodeEmails:                         true
  	      },
  	      vanilla: getDefaultOpts(true),
  	      allOn: allOptionsOn()
  	    };

  	/**
  	 * helper namespace
  	 * @type {{}}
  	 */
  	showdown.helper = {};

  	/**
  	 * TODO LEGACY SUPPORT CODE
  	 * @type {{}}
  	 */
  	showdown.extensions = {};

  	/**
  	 * Set a global option
  	 * @static
  	 * @param {string} key
  	 * @param {*} value
  	 * @returns {showdown}
  	 */
  	showdown.setOption = function (key, value) {
  	  globalOptions[key] = value;
  	  return this;
  	};

  	/**
  	 * Get a global option
  	 * @static
  	 * @param {string} key
  	 * @returns {*}
  	 */
  	showdown.getOption = function (key) {
  	  return globalOptions[key];
  	};

  	/**
  	 * Get the global options
  	 * @static
  	 * @returns {{}}
  	 */
  	showdown.getOptions = function () {
  	  return globalOptions;
  	};

  	/**
  	 * Reset global options to the default values
  	 * @static
  	 */
  	showdown.resetOptions = function () {
  	  globalOptions = getDefaultOpts(true);
  	};

  	/**
  	 * Set the flavor showdown should use as default
  	 * @param {string} name
  	 */
  	showdown.setFlavor = function (name) {
  	  if (!flavor.hasOwnProperty(name)) {
  	    throw Error(name + ' flavor was not found');
  	  }
  	  showdown.resetOptions();
  	  var preset = flavor[name];
  	  setFlavor = name;
  	  for (var option in preset) {
  	    if (preset.hasOwnProperty(option)) {
  	      globalOptions[option] = preset[option];
  	    }
  	  }
  	};

  	/**
  	 * Get the currently set flavor
  	 * @returns {string}
  	 */
  	showdown.getFlavor = function () {
  	  return setFlavor;
  	};

  	/**
  	 * Get the options of a specified flavor. Returns undefined if the flavor was not found
  	 * @param {string} name Name of the flavor
  	 * @returns {{}|undefined}
  	 */
  	showdown.getFlavorOptions = function (name) {
  	  if (flavor.hasOwnProperty(name)) {
  	    return flavor[name];
  	  }
  	};

  	/**
  	 * Get the default options
  	 * @static
  	 * @param {boolean} [simple=true]
  	 * @returns {{}}
  	 */
  	showdown.getDefaultOptions = function (simple) {
  	  return getDefaultOpts(simple);
  	};

  	/**
  	 * Get or set a subParser
  	 *
  	 * subParser(name)       - Get a registered subParser
  	 * subParser(name, func) - Register a subParser
  	 * @static
  	 * @param {string} name
  	 * @param {function} [func]
  	 * @returns {*}
  	 */
  	showdown.subParser = function (name, func) {
  	  if (showdown.helper.isString(name)) {
  	    if (typeof func !== 'undefined') {
  	      parsers[name] = func;
  	    } else {
  	      if (parsers.hasOwnProperty(name)) {
  	        return parsers[name];
  	      } else {
  	        throw Error('SubParser named ' + name + ' not registered!');
  	      }
  	    }
  	  }
  	};

  	/**
  	 * Gets or registers an extension
  	 * @static
  	 * @param {string} name
  	 * @param {object|object[]|function=} ext
  	 * @returns {*}
  	 */
  	showdown.extension = function (name, ext) {

  	  if (!showdown.helper.isString(name)) {
  	    throw Error('Extension \'name\' must be a string');
  	  }

  	  name = showdown.helper.stdExtName(name);

  	  // Getter
  	  if (showdown.helper.isUndefined(ext)) {
  	    if (!extensions.hasOwnProperty(name)) {
  	      throw Error('Extension named ' + name + ' is not registered!');
  	    }
  	    return extensions[name];

  	    // Setter
  	  } else {
  	    // Expand extension if it's wrapped in a function
  	    if (typeof ext === 'function') {
  	      ext = ext();
  	    }

  	    // Ensure extension is an array
  	    if (!showdown.helper.isArray(ext)) {
  	      ext = [ext];
  	    }

  	    var validExtension = validate(ext, name);

  	    if (validExtension.valid) {
  	      extensions[name] = ext;
  	    } else {
  	      throw Error(validExtension.error);
  	    }
  	  }
  	};

  	/**
  	 * Gets all extensions registered
  	 * @returns {{}}
  	 */
  	showdown.getAllExtensions = function () {
  	  return extensions;
  	};

  	/**
  	 * Remove an extension
  	 * @param {string} name
  	 */
  	showdown.removeExtension = function (name) {
  	  delete extensions[name];
  	};

  	/**
  	 * Removes all extensions
  	 */
  	showdown.resetExtensions = function () {
  	  extensions = {};
  	};

  	/**
  	 * Validate extension
  	 * @param {array} extension
  	 * @param {string} name
  	 * @returns {{valid: boolean, error: string}}
  	 */
  	function validate (extension, name) {

  	  var errMsg = (name) ? 'Error in ' + name + ' extension->' : 'Error in unnamed extension',
  	      ret = {
  	        valid: true,
  	        error: ''
  	      };

  	  if (!showdown.helper.isArray(extension)) {
  	    extension = [extension];
  	  }

  	  for (var i = 0; i < extension.length; ++i) {
  	    var baseMsg = errMsg + ' sub-extension ' + i + ': ',
  	        ext = extension[i];
  	    if (typeof ext !== 'object') {
  	      ret.valid = false;
  	      ret.error = baseMsg + 'must be an object, but ' + typeof ext + ' given';
  	      return ret;
  	    }

  	    if (!showdown.helper.isString(ext.type)) {
  	      ret.valid = false;
  	      ret.error = baseMsg + 'property "type" must be a string, but ' + typeof ext.type + ' given';
  	      return ret;
  	    }

  	    var type = ext.type = ext.type.toLowerCase();

  	    // normalize extension type
  	    if (type === 'language') {
  	      type = ext.type = 'lang';
  	    }

  	    if (type === 'html') {
  	      type = ext.type = 'output';
  	    }

  	    if (type !== 'lang' && type !== 'output' && type !== 'listener') {
  	      ret.valid = false;
  	      ret.error = baseMsg + 'type ' + type + ' is not recognized. Valid values: "lang/language", "output/html" or "listener"';
  	      return ret;
  	    }

  	    if (type === 'listener') {
  	      if (showdown.helper.isUndefined(ext.listeners)) {
  	        ret.valid = false;
  	        ret.error = baseMsg + '. Extensions of type "listener" must have a property called "listeners"';
  	        return ret;
  	      }
  	    } else {
  	      if (showdown.helper.isUndefined(ext.filter) && showdown.helper.isUndefined(ext.regex)) {
  	        ret.valid = false;
  	        ret.error = baseMsg + type + ' extensions must define either a "regex" property or a "filter" method';
  	        return ret;
  	      }
  	    }

  	    if (ext.listeners) {
  	      if (typeof ext.listeners !== 'object') {
  	        ret.valid = false;
  	        ret.error = baseMsg + '"listeners" property must be an object but ' + typeof ext.listeners + ' given';
  	        return ret;
  	      }
  	      for (var ln in ext.listeners) {
  	        if (ext.listeners.hasOwnProperty(ln)) {
  	          if (typeof ext.listeners[ln] !== 'function') {
  	            ret.valid = false;
  	            ret.error = baseMsg + '"listeners" property must be an hash of [event name]: [callback]. listeners.' + ln +
  	              ' must be a function but ' + typeof ext.listeners[ln] + ' given';
  	            return ret;
  	          }
  	        }
  	      }
  	    }

  	    if (ext.filter) {
  	      if (typeof ext.filter !== 'function') {
  	        ret.valid = false;
  	        ret.error = baseMsg + '"filter" must be a function, but ' + typeof ext.filter + ' given';
  	        return ret;
  	      }
  	    } else if (ext.regex) {
  	      if (showdown.helper.isString(ext.regex)) {
  	        ext.regex = new RegExp(ext.regex, 'g');
  	      }
  	      if (!(ext.regex instanceof RegExp)) {
  	        ret.valid = false;
  	        ret.error = baseMsg + '"regex" property must either be a string or a RegExp object, but ' + typeof ext.regex + ' given';
  	        return ret;
  	      }
  	      if (showdown.helper.isUndefined(ext.replace)) {
  	        ret.valid = false;
  	        ret.error = baseMsg + '"regex" extensions must implement a replace string or function';
  	        return ret;
  	      }
  	    }
  	  }
  	  return ret;
  	}

  	/**
  	 * Validate extension
  	 * @param {object} ext
  	 * @returns {boolean}
  	 */
  	showdown.validateExtension = function (ext) {

  	  var validateExtension = validate(ext, null);
  	  if (!validateExtension.valid) {
  	    console.warn(validateExtension.error);
  	    return false;
  	  }
  	  return true;
  	};

  	/**
  	 * showdownjs helper functions
  	 */

  	if (!showdown.hasOwnProperty('helper')) {
  	  showdown.helper = {};
  	}

  	/**
  	 * Check if var is string
  	 * @static
  	 * @param {string} a
  	 * @returns {boolean}
  	 */
  	showdown.helper.isString = function (a) {
  	  return (typeof a === 'string' || a instanceof String);
  	};

  	/**
  	 * Check if var is a function
  	 * @static
  	 * @param {*} a
  	 * @returns {boolean}
  	 */
  	showdown.helper.isFunction = function (a) {
  	  var getType = {};
  	  return a && getType.toString.call(a) === '[object Function]';
  	};

  	/**
  	 * isArray helper function
  	 * @static
  	 * @param {*} a
  	 * @returns {boolean}
  	 */
  	showdown.helper.isArray = function (a) {
  	  return Array.isArray(a);
  	};

  	/**
  	 * Check if value is undefined
  	 * @static
  	 * @param {*} value The value to check.
  	 * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.
  	 */
  	showdown.helper.isUndefined = function (value) {
  	  return typeof value === 'undefined';
  	};

  	/**
  	 * ForEach helper function
  	 * Iterates over Arrays and Objects (own properties only)
  	 * @static
  	 * @param {*} obj
  	 * @param {function} callback Accepts 3 params: 1. value, 2. key, 3. the original array/object
  	 */
  	showdown.helper.forEach = function (obj, callback) {
  	  // check if obj is defined
  	  if (showdown.helper.isUndefined(obj)) {
  	    throw new Error('obj param is required');
  	  }

  	  if (showdown.helper.isUndefined(callback)) {
  	    throw new Error('callback param is required');
  	  }

  	  if (!showdown.helper.isFunction(callback)) {
  	    throw new Error('callback param must be a function/closure');
  	  }

  	  if (typeof obj.forEach === 'function') {
  	    obj.forEach(callback);
  	  } else if (showdown.helper.isArray(obj)) {
  	    for (var i = 0; i < obj.length; i++) {
  	      callback(obj[i], i, obj);
  	    }
  	  } else if (typeof (obj) === 'object') {
  	    for (var prop in obj) {
  	      if (obj.hasOwnProperty(prop)) {
  	        callback(obj[prop], prop, obj);
  	      }
  	    }
  	  } else {
  	    throw new Error('obj does not seem to be an array or an iterable object');
  	  }
  	};

  	/**
  	 * Standardidize extension name
  	 * @static
  	 * @param {string} s extension name
  	 * @returns {string}
  	 */
  	showdown.helper.stdExtName = function (s) {
  	  return s.replace(/[_?*+\/\\.^-]/g, '').replace(/\s/g, '').toLowerCase();
  	};

  	function escapeCharactersCallback (wholeMatch, m1) {
  	  var charCodeToEscape = m1.charCodeAt(0);
  	  return '¨E' + charCodeToEscape + 'E';
  	}

  	/**
  	 * Callback used to escape characters when passing through String.replace
  	 * @static
  	 * @param {string} wholeMatch
  	 * @param {string} m1
  	 * @returns {string}
  	 */
  	showdown.helper.escapeCharactersCallback = escapeCharactersCallback;

  	/**
  	 * Escape characters in a string
  	 * @static
  	 * @param {string} text
  	 * @param {string} charsToEscape
  	 * @param {boolean} afterBackslash
  	 * @returns {XML|string|void|*}
  	 */
  	showdown.helper.escapeCharacters = function (text, charsToEscape, afterBackslash) {
  	  // First we have to escape the escape characters so that
  	  // we can build a character class out of them
  	  var regexString = '([' + charsToEscape.replace(/([\[\]\\])/g, '\\$1') + '])';

  	  if (afterBackslash) {
  	    regexString = '\\\\' + regexString;
  	  }

  	  var regex = new RegExp(regexString, 'g');
  	  text = text.replace(regex, escapeCharactersCallback);

  	  return text;
  	};

  	/**
  	 * Unescape HTML entities
  	 * @param txt
  	 * @returns {string}
  	 */
  	showdown.helper.unescapeHTMLEntities = function (txt) {

  	  return txt
  	    .replace(/&quot;/g, '"')
  	    .replace(/&lt;/g, '<')
  	    .replace(/&gt;/g, '>')
  	    .replace(/&amp;/g, '&');
  	};

  	var rgxFindMatchPos = function (str, left, right, flags) {
  	  var f = flags || '',
  	      g = f.indexOf('g') > -1,
  	      x = new RegExp(left + '|' + right, 'g' + f.replace(/g/g, '')),
  	      l = new RegExp(left, f.replace(/g/g, '')),
  	      pos = [],
  	      t, s, m, start, end;

  	  do {
  	    t = 0;
  	    while ((m = x.exec(str))) {
  	      if (l.test(m[0])) {
  	        if (!(t++)) {
  	          s = x.lastIndex;
  	          start = s - m[0].length;
  	        }
  	      } else if (t) {
  	        if (!--t) {
  	          end = m.index + m[0].length;
  	          var obj = {
  	            left: {start: start, end: s},
  	            match: {start: s, end: m.index},
  	            right: {start: m.index, end: end},
  	            wholeMatch: {start: start, end: end}
  	          };
  	          pos.push(obj);
  	          if (!g) {
  	            return pos;
  	          }
  	        }
  	      }
  	    }
  	  } while (t && (x.lastIndex = s));

  	  return pos;
  	};

  	/**
  	 * matchRecursiveRegExp
  	 *
  	 * (c) 2007 Steven Levithan <stevenlevithan.com>
  	 * MIT License
  	 *
  	 * Accepts a string to search, a left and right format delimiter
  	 * as regex patterns, and optional regex flags. Returns an array
  	 * of matches, allowing nested instances of left/right delimiters.
  	 * Use the "g" flag to return all matches, otherwise only the
  	 * first is returned. Be careful to ensure that the left and
  	 * right format delimiters produce mutually exclusive matches.
  	 * Backreferences are not supported within the right delimiter
  	 * due to how it is internally combined with the left delimiter.
  	 * When matching strings whose format delimiters are unbalanced
  	 * to the left or right, the output is intentionally as a
  	 * conventional regex library with recursion support would
  	 * produce, e.g. "<<x>" and "<x>>" both produce ["x"] when using
  	 * "<" and ">" as the delimiters (both strings contain a single,
  	 * balanced instance of "<x>").
  	 *
  	 * examples:
  	 * matchRecursiveRegExp("test", "\\(", "\\)")
  	 * returns: []
  	 * matchRecursiveRegExp("<t<<e>><s>>t<>", "<", ">", "g")
  	 * returns: ["t<<e>><s>", ""]
  	 * matchRecursiveRegExp("<div id=\"x\">test</div>", "<div\\b[^>]*>", "</div>", "gi")
  	 * returns: ["test"]
  	 */
  	showdown.helper.matchRecursiveRegExp = function (str, left, right, flags) {

  	  var matchPos = rgxFindMatchPos (str, left, right, flags),
  	      results = [];

  	  for (var i = 0; i < matchPos.length; ++i) {
  	    results.push([
  	      str.slice(matchPos[i].wholeMatch.start, matchPos[i].wholeMatch.end),
  	      str.slice(matchPos[i].match.start, matchPos[i].match.end),
  	      str.slice(matchPos[i].left.start, matchPos[i].left.end),
  	      str.slice(matchPos[i].right.start, matchPos[i].right.end)
  	    ]);
  	  }
  	  return results;
  	};

  	/**
  	 *
  	 * @param {string} str
  	 * @param {string|function} replacement
  	 * @param {string} left
  	 * @param {string} right
  	 * @param {string} flags
  	 * @returns {string}
  	 */
  	showdown.helper.replaceRecursiveRegExp = function (str, replacement, left, right, flags) {

  	  if (!showdown.helper.isFunction(replacement)) {
  	    var repStr = replacement;
  	    replacement = function () {
  	      return repStr;
  	    };
  	  }

  	  var matchPos = rgxFindMatchPos(str, left, right, flags),
  	      finalStr = str,
  	      lng = matchPos.length;

  	  if (lng > 0) {
  	    var bits = [];
  	    if (matchPos[0].wholeMatch.start !== 0) {
  	      bits.push(str.slice(0, matchPos[0].wholeMatch.start));
  	    }
  	    for (var i = 0; i < lng; ++i) {
  	      bits.push(
  	        replacement(
  	          str.slice(matchPos[i].wholeMatch.start, matchPos[i].wholeMatch.end),
  	          str.slice(matchPos[i].match.start, matchPos[i].match.end),
  	          str.slice(matchPos[i].left.start, matchPos[i].left.end),
  	          str.slice(matchPos[i].right.start, matchPos[i].right.end)
  	        )
  	      );
  	      if (i < lng - 1) {
  	        bits.push(str.slice(matchPos[i].wholeMatch.end, matchPos[i + 1].wholeMatch.start));
  	      }
  	    }
  	    if (matchPos[lng - 1].wholeMatch.end < str.length) {
  	      bits.push(str.slice(matchPos[lng - 1].wholeMatch.end));
  	    }
  	    finalStr = bits.join('');
  	  }
  	  return finalStr;
  	};

  	/**
  	 * Returns the index within the passed String object of the first occurrence of the specified regex,
  	 * starting the search at fromIndex. Returns -1 if the value is not found.
  	 *
  	 * @param {string} str string to search
  	 * @param {RegExp} regex Regular expression to search
  	 * @param {int} [fromIndex = 0] Index to start the search
  	 * @returns {Number}
  	 * @throws InvalidArgumentError
  	 */
  	showdown.helper.regexIndexOf = function (str, regex, fromIndex) {
  	  if (!showdown.helper.isString(str)) {
  	    throw 'InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string';
  	  }
  	  if (regex instanceof RegExp === false) {
  	    throw 'InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp';
  	  }
  	  var indexOf = str.substring(fromIndex || 0).search(regex);
  	  return (indexOf >= 0) ? (indexOf + (fromIndex || 0)) : indexOf;
  	};

  	/**
  	 * Splits the passed string object at the defined index, and returns an array composed of the two substrings
  	 * @param {string} str string to split
  	 * @param {int} index index to split string at
  	 * @returns {[string,string]}
  	 * @throws InvalidArgumentError
  	 */
  	showdown.helper.splitAtIndex = function (str, index) {
  	  if (!showdown.helper.isString(str)) {
  	    throw 'InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string';
  	  }
  	  return [str.substring(0, index), str.substring(index)];
  	};

  	/**
  	 * Obfuscate an e-mail address through the use of Character Entities,
  	 * transforming ASCII characters into their equivalent decimal or hex entities.
  	 *
  	 * Since it has a random component, subsequent calls to this function produce different results
  	 *
  	 * @param {string} mail
  	 * @returns {string}
  	 */
  	showdown.helper.encodeEmailAddress = function (mail) {
  	  var encode = [
  	    function (ch) {
  	      return '&#' + ch.charCodeAt(0) + ';';
  	    },
  	    function (ch) {
  	      return '&#x' + ch.charCodeAt(0).toString(16) + ';';
  	    },
  	    function (ch) {
  	      return ch;
  	    }
  	  ];

  	  mail = mail.replace(/./g, function (ch) {
  	    if (ch === '@') {
  	      // this *must* be encoded. I insist.
  	      ch = encode[Math.floor(Math.random() * 2)](ch);
  	    } else {
  	      var r = Math.random();
  	      // roughly 10% raw, 45% hex, 45% dec
  	      ch = (
  	        r > 0.9 ? encode[2](ch) : r > 0.45 ? encode[1](ch) : encode[0](ch)
  	      );
  	    }
  	    return ch;
  	  });

  	  return mail;
  	};

  	/**
  	 *
  	 * @param str
  	 * @param targetLength
  	 * @param padString
  	 * @returns {string}
  	 */
  	showdown.helper.padEnd = function padEnd (str, targetLength, padString) {
  	  /*jshint bitwise: false*/
  	  // eslint-disable-next-line space-infix-ops
  	  targetLength = targetLength>>0; //floor if number or convert non-number to 0;
  	  /*jshint bitwise: true*/
  	  padString = String(padString || ' ');
  	  if (str.length > targetLength) {
  	    return String(str);
  	  } else {
  	    targetLength = targetLength - str.length;
  	    if (targetLength > padString.length) {
  	      padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed
  	    }
  	    return String(str) + padString.slice(0,targetLength);
  	  }
  	};

  	/**
  	 * POLYFILLS
  	 */
  	// use this instead of builtin is undefined for IE8 compatibility
  	if (typeof (console) === 'undefined') {
  	  console = {
  	    warn: function (msg) {
  	      alert(msg);
  	    },
  	    log: function (msg) {
  	      alert(msg);
  	    },
  	    error: function (msg) {
  	      throw msg;
  	    }
  	  };
  	}

  	/**
  	 * Common regexes.
  	 * We declare some common regexes to improve performance
  	 */
  	showdown.helper.regexes = {
  	  asteriskDashAndColon: /([*_:~])/g
  	};

  	/**
  	 * EMOJIS LIST
  	 */
  	showdown.helper.emojis = {
  	  '+1':'\ud83d\udc4d',
  	  '-1':'\ud83d\udc4e',
  	  '100':'\ud83d\udcaf',
  	  '1234':'\ud83d\udd22',
  	  '1st_place_medal':'\ud83e\udd47',
  	  '2nd_place_medal':'\ud83e\udd48',
  	  '3rd_place_medal':'\ud83e\udd49',
  	  '8ball':'\ud83c\udfb1',
  	  'a':'\ud83c\udd70\ufe0f',
  	  'ab':'\ud83c\udd8e',
  	  'abc':'\ud83d\udd24',
  	  'abcd':'\ud83d\udd21',
  	  'accept':'\ud83c\ude51',
  	  'aerial_tramway':'\ud83d\udea1',
  	  'airplane':'\u2708\ufe0f',
  	  'alarm_clock':'\u23f0',
  	  'alembic':'\u2697\ufe0f',
  	  'alien':'\ud83d\udc7d',
  	  'ambulance':'\ud83d\ude91',
  	  'amphora':'\ud83c\udffa',
  	  'anchor':'\u2693\ufe0f',
  	  'angel':'\ud83d\udc7c',
  	  'anger':'\ud83d\udca2',
  	  'angry':'\ud83d\ude20',
  	  'anguished':'\ud83d\ude27',
  	  'ant':'\ud83d\udc1c',
  	  'apple':'\ud83c\udf4e',
  	  'aquarius':'\u2652\ufe0f',
  	  'aries':'\u2648\ufe0f',
  	  'arrow_backward':'\u25c0\ufe0f',
  	  'arrow_double_down':'\u23ec',
  	  'arrow_double_up':'\u23eb',
  	  'arrow_down':'\u2b07\ufe0f',
  	  'arrow_down_small':'\ud83d\udd3d',
  	  'arrow_forward':'\u25b6\ufe0f',
  	  'arrow_heading_down':'\u2935\ufe0f',
  	  'arrow_heading_up':'\u2934\ufe0f',
  	  'arrow_left':'\u2b05\ufe0f',
  	  'arrow_lower_left':'\u2199\ufe0f',
  	  'arrow_lower_right':'\u2198\ufe0f',
  	  'arrow_right':'\u27a1\ufe0f',
  	  'arrow_right_hook':'\u21aa\ufe0f',
  	  'arrow_up':'\u2b06\ufe0f',
  	  'arrow_up_down':'\u2195\ufe0f',
  	  'arrow_up_small':'\ud83d\udd3c',
  	  'arrow_upper_left':'\u2196\ufe0f',
  	  'arrow_upper_right':'\u2197\ufe0f',
  	  'arrows_clockwise':'\ud83d\udd03',
  	  'arrows_counterclockwise':'\ud83d\udd04',
  	  'art':'\ud83c\udfa8',
  	  'articulated_lorry':'\ud83d\ude9b',
  	  'artificial_satellite':'\ud83d\udef0',
  	  'astonished':'\ud83d\ude32',
  	  'athletic_shoe':'\ud83d\udc5f',
  	  'atm':'\ud83c\udfe7',
  	  'atom_symbol':'\u269b\ufe0f',
  	  'avocado':'\ud83e\udd51',
  	  'b':'\ud83c\udd71\ufe0f',
  	  'baby':'\ud83d\udc76',
  	  'baby_bottle':'\ud83c\udf7c',
  	  'baby_chick':'\ud83d\udc24',
  	  'baby_symbol':'\ud83d\udebc',
  	  'back':'\ud83d\udd19',
  	  'bacon':'\ud83e\udd53',
  	  'badminton':'\ud83c\udff8',
  	  'baggage_claim':'\ud83d\udec4',
  	  'baguette_bread':'\ud83e\udd56',
  	  'balance_scale':'\u2696\ufe0f',
  	  'balloon':'\ud83c\udf88',
  	  'ballot_box':'\ud83d\uddf3',
  	  'ballot_box_with_check':'\u2611\ufe0f',
  	  'bamboo':'\ud83c\udf8d',
  	  'banana':'\ud83c\udf4c',
  	  'bangbang':'\u203c\ufe0f',
  	  'bank':'\ud83c\udfe6',
  	  'bar_chart':'\ud83d\udcca',
  	  'barber':'\ud83d\udc88',
  	  'baseball':'\u26be\ufe0f',
  	  'basketball':'\ud83c\udfc0',
  	  'basketball_man':'\u26f9\ufe0f',
  	  'basketball_woman':'\u26f9\ufe0f&zwj;\u2640\ufe0f',
  	  'bat':'\ud83e\udd87',
  	  'bath':'\ud83d\udec0',
  	  'bathtub':'\ud83d\udec1',
  	  'battery':'\ud83d\udd0b',
  	  'beach_umbrella':'\ud83c\udfd6',
  	  'bear':'\ud83d\udc3b',
  	  'bed':'\ud83d\udecf',
  	  'bee':'\ud83d\udc1d',
  	  'beer':'\ud83c\udf7a',
  	  'beers':'\ud83c\udf7b',
  	  'beetle':'\ud83d\udc1e',
  	  'beginner':'\ud83d\udd30',
  	  'bell':'\ud83d\udd14',
  	  'bellhop_bell':'\ud83d\udece',
  	  'bento':'\ud83c\udf71',
  	  'biking_man':'\ud83d\udeb4',
  	  'bike':'\ud83d\udeb2',
  	  'biking_woman':'\ud83d\udeb4&zwj;\u2640\ufe0f',
  	  'bikini':'\ud83d\udc59',
  	  'biohazard':'\u2623\ufe0f',
  	  'bird':'\ud83d\udc26',
  	  'birthday':'\ud83c\udf82',
  	  'black_circle':'\u26ab\ufe0f',
  	  'black_flag':'\ud83c\udff4',
  	  'black_heart':'\ud83d\udda4',
  	  'black_joker':'\ud83c\udccf',
  	  'black_large_square':'\u2b1b\ufe0f',
  	  'black_medium_small_square':'\u25fe\ufe0f',
  	  'black_medium_square':'\u25fc\ufe0f',
  	  'black_nib':'\u2712\ufe0f',
  	  'black_small_square':'\u25aa\ufe0f',
  	  'black_square_button':'\ud83d\udd32',
  	  'blonde_man':'\ud83d\udc71',
  	  'blonde_woman':'\ud83d\udc71&zwj;\u2640\ufe0f',
  	  'blossom':'\ud83c\udf3c',
  	  'blowfish':'\ud83d\udc21',
  	  'blue_book':'\ud83d\udcd8',
  	  'blue_car':'\ud83d\ude99',
  	  'blue_heart':'\ud83d\udc99',
  	  'blush':'\ud83d\ude0a',
  	  'boar':'\ud83d\udc17',
  	  'boat':'\u26f5\ufe0f',
  	  'bomb':'\ud83d\udca3',
  	  'book':'\ud83d\udcd6',
  	  'bookmark':'\ud83d\udd16',
  	  'bookmark_tabs':'\ud83d\udcd1',
  	  'books':'\ud83d\udcda',
  	  'boom':'\ud83d\udca5',
  	  'boot':'\ud83d\udc62',
  	  'bouquet':'\ud83d\udc90',
  	  'bowing_man':'\ud83d\ude47',
  	  'bow_and_arrow':'\ud83c\udff9',
  	  'bowing_woman':'\ud83d\ude47&zwj;\u2640\ufe0f',
  	  'bowling':'\ud83c\udfb3',
  	  'boxing_glove':'\ud83e\udd4a',
  	  'boy':'\ud83d\udc66',
  	  'bread':'\ud83c\udf5e',
  	  'bride_with_veil':'\ud83d\udc70',
  	  'bridge_at_night':'\ud83c\udf09',
  	  'briefcase':'\ud83d\udcbc',
  	  'broken_heart':'\ud83d\udc94',
  	  'bug':'\ud83d\udc1b',
  	  'building_construction':'\ud83c\udfd7',
  	  'bulb':'\ud83d\udca1',
  	  'bullettrain_front':'\ud83d\ude85',
  	  'bullettrain_side':'\ud83d\ude84',
  	  'burrito':'\ud83c\udf2f',
  	  'bus':'\ud83d\ude8c',
  	  'business_suit_levitating':'\ud83d\udd74',
  	  'busstop':'\ud83d\ude8f',
  	  'bust_in_silhouette':'\ud83d\udc64',
  	  'busts_in_silhouette':'\ud83d\udc65',
  	  'butterfly':'\ud83e\udd8b',
  	  'cactus':'\ud83c\udf35',
  	  'cake':'\ud83c\udf70',
  	  'calendar':'\ud83d\udcc6',
  	  'call_me_hand':'\ud83e\udd19',
  	  'calling':'\ud83d\udcf2',
  	  'camel':'\ud83d\udc2b',
  	  'camera':'\ud83d\udcf7',
  	  'camera_flash':'\ud83d\udcf8',
  	  'camping':'\ud83c\udfd5',
  	  'cancer':'\u264b\ufe0f',
  	  'candle':'\ud83d\udd6f',
  	  'candy':'\ud83c\udf6c',
  	  'canoe':'\ud83d\udef6',
  	  'capital_abcd':'\ud83d\udd20',
  	  'capricorn':'\u2651\ufe0f',
  	  'car':'\ud83d\ude97',
  	  'card_file_box':'\ud83d\uddc3',
  	  'card_index':'\ud83d\udcc7',
  	  'card_index_dividers':'\ud83d\uddc2',
  	  'carousel_horse':'\ud83c\udfa0',
  	  'carrot':'\ud83e\udd55',
  	  'cat':'\ud83d\udc31',
  	  'cat2':'\ud83d\udc08',
  	  'cd':'\ud83d\udcbf',
  	  'chains':'\u26d3',
  	  'champagne':'\ud83c\udf7e',
  	  'chart':'\ud83d\udcb9',
  	  'chart_with_downwards_trend':'\ud83d\udcc9',
  	  'chart_with_upwards_trend':'\ud83d\udcc8',
  	  'checkered_flag':'\ud83c\udfc1',
  	  'cheese':'\ud83e\uddc0',
  	  'cherries':'\ud83c\udf52',
  	  'cherry_blossom':'\ud83c\udf38',
  	  'chestnut':'\ud83c\udf30',
  	  'chicken':'\ud83d\udc14',
  	  'children_crossing':'\ud83d\udeb8',
  	  'chipmunk':'\ud83d\udc3f',
  	  'chocolate_bar':'\ud83c\udf6b',
  	  'christmas_tree':'\ud83c\udf84',
  	  'church':'\u26ea\ufe0f',
  	  'cinema':'\ud83c\udfa6',
  	  'circus_tent':'\ud83c\udfaa',
  	  'city_sunrise':'\ud83c\udf07',
  	  'city_sunset':'\ud83c\udf06',
  	  'cityscape':'\ud83c\udfd9',
  	  'cl':'\ud83c\udd91',
  	  'clamp':'\ud83d\udddc',
  	  'clap':'\ud83d\udc4f',
  	  'clapper':'\ud83c\udfac',
  	  'classical_building':'\ud83c\udfdb',
  	  'clinking_glasses':'\ud83e\udd42',
  	  'clipboard':'\ud83d\udccb',
  	  'clock1':'\ud83d\udd50',
  	  'clock10':'\ud83d\udd59',
  	  'clock1030':'\ud83d\udd65',
  	  'clock11':'\ud83d\udd5a',
  	  'clock1130':'\ud83d\udd66',
  	  'clock12':'\ud83d\udd5b',
  	  'clock1230':'\ud83d\udd67',
  	  'clock130':'\ud83d\udd5c',
  	  'clock2':'\ud83d\udd51',
  	  'clock230':'\ud83d\udd5d',
  	  'clock3':'\ud83d\udd52',
  	  'clock330':'\ud83d\udd5e',
  	  'clock4':'\ud83d\udd53',
  	  'clock430':'\ud83d\udd5f',
  	  'clock5':'\ud83d\udd54',
  	  'clock530':'\ud83d\udd60',
  	  'clock6':'\ud83d\udd55',
  	  'clock630':'\ud83d\udd61',
  	  'clock7':'\ud83d\udd56',
  	  'clock730':'\ud83d\udd62',
  	  'clock8':'\ud83d\udd57',
  	  'clock830':'\ud83d\udd63',
  	  'clock9':'\ud83d\udd58',
  	  'clock930':'\ud83d\udd64',
  	  'closed_book':'\ud83d\udcd5',
  	  'closed_lock_with_key':'\ud83d\udd10',
  	  'closed_umbrella':'\ud83c\udf02',
  	  'cloud':'\u2601\ufe0f',
  	  'cloud_with_lightning':'\ud83c\udf29',
  	  'cloud_with_lightning_and_rain':'\u26c8',
  	  'cloud_with_rain':'\ud83c\udf27',
  	  'cloud_with_snow':'\ud83c\udf28',
  	  'clown_face':'\ud83e\udd21',
  	  'clubs':'\u2663\ufe0f',
  	  'cocktail':'\ud83c\udf78',
  	  'coffee':'\u2615\ufe0f',
  	  'coffin':'\u26b0\ufe0f',
  	  'cold_sweat':'\ud83d\ude30',
  	  'comet':'\u2604\ufe0f',
  	  'computer':'\ud83d\udcbb',
  	  'computer_mouse':'\ud83d\uddb1',
  	  'confetti_ball':'\ud83c\udf8a',
  	  'confounded':'\ud83d\ude16',
  	  'confused':'\ud83d\ude15',
  	  'congratulations':'\u3297\ufe0f',
  	  'construction':'\ud83d\udea7',
  	  'construction_worker_man':'\ud83d\udc77',
  	  'construction_worker_woman':'\ud83d\udc77&zwj;\u2640\ufe0f',
  	  'control_knobs':'\ud83c\udf9b',
  	  'convenience_store':'\ud83c\udfea',
  	  'cookie':'\ud83c\udf6a',
  	  'cool':'\ud83c\udd92',
  	  'policeman':'\ud83d\udc6e',
  	  'copyright':'\u00a9\ufe0f',
  	  'corn':'\ud83c\udf3d',
  	  'couch_and_lamp':'\ud83d\udecb',
  	  'couple':'\ud83d\udc6b',
  	  'couple_with_heart_woman_man':'\ud83d\udc91',
  	  'couple_with_heart_man_man':'\ud83d\udc68&zwj;\u2764\ufe0f&zwj;\ud83d\udc68',
  	  'couple_with_heart_woman_woman':'\ud83d\udc69&zwj;\u2764\ufe0f&zwj;\ud83d\udc69',
  	  'couplekiss_man_man':'\ud83d\udc68&zwj;\u2764\ufe0f&zwj;\ud83d\udc8b&zwj;\ud83d\udc68',
  	  'couplekiss_man_woman':'\ud83d\udc8f',
  	  'couplekiss_woman_woman':'\ud83d\udc69&zwj;\u2764\ufe0f&zwj;\ud83d\udc8b&zwj;\ud83d\udc69',
  	  'cow':'\ud83d\udc2e',
  	  'cow2':'\ud83d\udc04',
  	  'cowboy_hat_face':'\ud83e\udd20',
  	  'crab':'\ud83e\udd80',
  	  'crayon':'\ud83d\udd8d',
  	  'credit_card':'\ud83d\udcb3',
  	  'crescent_moon':'\ud83c\udf19',
  	  'cricket':'\ud83c\udfcf',
  	  'crocodile':'\ud83d\udc0a',
  	  'croissant':'\ud83e\udd50',
  	  'crossed_fingers':'\ud83e\udd1e',
  	  'crossed_flags':'\ud83c\udf8c',
  	  'crossed_swords':'\u2694\ufe0f',
  	  'crown':'\ud83d\udc51',
  	  'cry':'\ud83d\ude22',
  	  'crying_cat_face':'\ud83d\ude3f',
  	  'crystal_ball':'\ud83d\udd2e',
  	  'cucumber':'\ud83e\udd52',
  	  'cupid':'\ud83d\udc98',
  	  'curly_loop':'\u27b0',
  	  'currency_exchange':'\ud83d\udcb1',
  	  'curry':'\ud83c\udf5b',
  	  'custard':'\ud83c\udf6e',
  	  'customs':'\ud83d\udec3',
  	  'cyclone':'\ud83c\udf00',
  	  'dagger':'\ud83d\udde1',
  	  'dancer':'\ud83d\udc83',
  	  'dancing_women':'\ud83d\udc6f',
  	  'dancing_men':'\ud83d\udc6f&zwj;\u2642\ufe0f',
  	  'dango':'\ud83c\udf61',
  	  'dark_sunglasses':'\ud83d\udd76',
  	  'dart':'\ud83c\udfaf',
  	  'dash':'\ud83d\udca8',
  	  'date':'\ud83d\udcc5',
  	  'deciduous_tree':'\ud83c\udf33',
  	  'deer':'\ud83e\udd8c',
  	  'department_store':'\ud83c\udfec',
  	  'derelict_house':'\ud83c\udfda',
  	  'desert':'\ud83c\udfdc',
  	  'desert_island':'\ud83c\udfdd',
  	  'desktop_computer':'\ud83d\udda5',
  	  'male_detective':'\ud83d\udd75\ufe0f',
  	  'diamond_shape_with_a_dot_inside':'\ud83d\udca0',
  	  'diamonds':'\u2666\ufe0f',
  	  'disappointed':'\ud83d\ude1e',
  	  'disappointed_relieved':'\ud83d\ude25',
  	  'dizzy':'\ud83d\udcab',
  	  'dizzy_face':'\ud83d\ude35',
  	  'do_not_litter':'\ud83d\udeaf',
  	  'dog':'\ud83d\udc36',
  	  'dog2':'\ud83d\udc15',
  	  'dollar':'\ud83d\udcb5',
  	  'dolls':'\ud83c\udf8e',
  	  'dolphin':'\ud83d\udc2c',
  	  'door':'\ud83d\udeaa',
  	  'doughnut':'\ud83c\udf69',
  	  'dove':'\ud83d\udd4a',
  	  'dragon':'\ud83d\udc09',
  	  'dragon_face':'\ud83d\udc32',
  	  'dress':'\ud83d\udc57',
  	  'dromedary_camel':'\ud83d\udc2a',
  	  'drooling_face':'\ud83e\udd24',
  	  'droplet':'\ud83d\udca7',
  	  'drum':'\ud83e\udd41',
  	  'duck':'\ud83e\udd86',
  	  'dvd':'\ud83d\udcc0',
  	  'e-mail':'\ud83d\udce7',
  	  'eagle':'\ud83e\udd85',
  	  'ear':'\ud83d\udc42',
  	  'ear_of_rice':'\ud83c\udf3e',
  	  'earth_africa':'\ud83c\udf0d',
  	  'earth_americas':'\ud83c\udf0e',
  	  'earth_asia':'\ud83c\udf0f',
  	  'egg':'\ud83e\udd5a',
  	  'eggplant':'\ud83c\udf46',
  	  'eight_pointed_black_star':'\u2734\ufe0f',
  	  'eight_spoked_asterisk':'\u2733\ufe0f',
  	  'electric_plug':'\ud83d\udd0c',
  	  'elephant':'\ud83d\udc18',
  	  'email':'\u2709\ufe0f',
  	  'end':'\ud83d\udd1a',
  	  'envelope_with_arrow':'\ud83d\udce9',
  	  'euro':'\ud83d\udcb6',
  	  'european_castle':'\ud83c\udff0',
  	  'european_post_office':'\ud83c\udfe4',
  	  'evergreen_tree':'\ud83c\udf32',
  	  'exclamation':'\u2757\ufe0f',
  	  'expressionless':'\ud83d\ude11',
  	  'eye':'\ud83d\udc41',
  	  'eye_speech_bubble':'\ud83d\udc41&zwj;\ud83d\udde8',
  	  'eyeglasses':'\ud83d\udc53',
  	  'eyes':'\ud83d\udc40',
  	  'face_with_head_bandage':'\ud83e\udd15',
  	  'face_with_thermometer':'\ud83e\udd12',
  	  'fist_oncoming':'\ud83d\udc4a',
  	  'factory':'\ud83c\udfed',
  	  'fallen_leaf':'\ud83c\udf42',
  	  'family_man_woman_boy':'\ud83d\udc6a',
  	  'family_man_boy':'\ud83d\udc68&zwj;\ud83d\udc66',
  	  'family_man_boy_boy':'\ud83d\udc68&zwj;\ud83d\udc66&zwj;\ud83d\udc66',
  	  'family_man_girl':'\ud83d\udc68&zwj;\ud83d\udc67',
  	  'family_man_girl_boy':'\ud83d\udc68&zwj;\ud83d\udc67&zwj;\ud83d\udc66',
  	  'family_man_girl_girl':'\ud83d\udc68&zwj;\ud83d\udc67&zwj;\ud83d\udc67',
  	  'family_man_man_boy':'\ud83d\udc68&zwj;\ud83d\udc68&zwj;\ud83d\udc66',
  	  'family_man_man_boy_boy':'\ud83d\udc68&zwj;\ud83d\udc68&zwj;\ud83d\udc66&zwj;\ud83d\udc66',
  	  'family_man_man_girl':'\ud83d\udc68&zwj;\ud83d\udc68&zwj;\ud83d\udc67',
  	  'family_man_man_girl_boy':'\ud83d\udc68&zwj;\ud83d\udc68&zwj;\ud83d\udc67&zwj;\ud83d\udc66',
  	  'family_man_man_girl_girl':'\ud83d\udc68&zwj;\ud83d\udc68&zwj;\ud83d\udc67&zwj;\ud83d\udc67',
  	  'family_man_woman_boy_boy':'\ud83d\udc68&zwj;\ud83d\udc69&zwj;\ud83d\udc66&zwj;\ud83d\udc66',
  	  'family_man_woman_girl':'\ud83d\udc68&zwj;\ud83d\udc69&zwj;\ud83d\udc67',
  	  'family_man_woman_girl_boy':'\ud83d\udc68&zwj;\ud83d\udc69&zwj;\ud83d\udc67&zwj;\ud83d\udc66',
  	  'family_man_woman_girl_girl':'\ud83d\udc68&zwj;\ud83d\udc69&zwj;\ud83d\udc67&zwj;\ud83d\udc67',
  	  'family_woman_boy':'\ud83d\udc69&zwj;\ud83d\udc66',
  	  'family_woman_boy_boy':'\ud83d\udc69&zwj;\ud83d\udc66&zwj;\ud83d\udc66',
  	  'family_woman_girl':'\ud83d\udc69&zwj;\ud83d\udc67',
  	  'family_woman_girl_boy':'\ud83d\udc69&zwj;\ud83d\udc67&zwj;\ud83d\udc66',
  	  'family_woman_girl_girl':'\ud83d\udc69&zwj;\ud83d\udc67&zwj;\ud83d\udc67',
  	  'family_woman_woman_boy':'\ud83d\udc69&zwj;\ud83d\udc69&zwj;\ud83d\udc66',
  	  'family_woman_woman_boy_boy':'\ud83d\udc69&zwj;\ud83d\udc69&zwj;\ud83d\udc66&zwj;\ud83d\udc66',
  	  'family_woman_woman_girl':'\ud83d\udc69&zwj;\ud83d\udc69&zwj;\ud83d\udc67',
  	  'family_woman_woman_girl_boy':'\ud83d\udc69&zwj;\ud83d\udc69&zwj;\ud83d\udc67&zwj;\ud83d\udc66',
  	  'family_woman_woman_girl_girl':'\ud83d\udc69&zwj;\ud83d\udc69&zwj;\ud83d\udc67&zwj;\ud83d\udc67',
  	  'fast_forward':'\u23e9',
  	  'fax':'\ud83d\udce0',
  	  'fearful':'\ud83d\ude28',
  	  'feet':'\ud83d\udc3e',
  	  'female_detective':'\ud83d\udd75\ufe0f&zwj;\u2640\ufe0f',
  	  'ferris_wheel':'\ud83c\udfa1',
  	  'ferry':'\u26f4',
  	  'field_hockey':'\ud83c\udfd1',
  	  'file_cabinet':'\ud83d\uddc4',
  	  'file_folder':'\ud83d\udcc1',
  	  'film_projector':'\ud83d\udcfd',
  	  'film_strip':'\ud83c\udf9e',
  	  'fire':'\ud83d\udd25',
  	  'fire_engine':'\ud83d\ude92',
  	  'fireworks':'\ud83c\udf86',
  	  'first_quarter_moon':'\ud83c\udf13',
  	  'first_quarter_moon_with_face':'\ud83c\udf1b',
  	  'fish':'\ud83d\udc1f',
  	  'fish_cake':'\ud83c\udf65',
  	  'fishing_pole_and_fish':'\ud83c\udfa3',
  	  'fist_raised':'\u270a',
  	  'fist_left':'\ud83e\udd1b',
  	  'fist_right':'\ud83e\udd1c',
  	  'flags':'\ud83c\udf8f',
  	  'flashlight':'\ud83d\udd26',
  	  'fleur_de_lis':'\u269c\ufe0f',
  	  'flight_arrival':'\ud83d\udeec',
  	  'flight_departure':'\ud83d\udeeb',
  	  'floppy_disk':'\ud83d\udcbe',
  	  'flower_playing_cards':'\ud83c\udfb4',
  	  'flushed':'\ud83d\ude33',
  	  'fog':'\ud83c\udf2b',
  	  'foggy':'\ud83c\udf01',
  	  'football':'\ud83c\udfc8',
  	  'footprints':'\ud83d\udc63',
  	  'fork_and_knife':'\ud83c\udf74',
  	  'fountain':'\u26f2\ufe0f',
  	  'fountain_pen':'\ud83d\udd8b',
  	  'four_leaf_clover':'\ud83c\udf40',
  	  'fox_face':'\ud83e\udd8a',
  	  'framed_picture':'\ud83d\uddbc',
  	  'free':'\ud83c\udd93',
  	  'fried_egg':'\ud83c\udf73',
  	  'fried_shrimp':'\ud83c\udf64',
  	  'fries':'\ud83c\udf5f',
  	  'frog':'\ud83d\udc38',
  	  'frowning':'\ud83d\ude26',
  	  'frowning_face':'\u2639\ufe0f',
  	  'frowning_man':'\ud83d\ude4d&zwj;\u2642\ufe0f',
  	  'frowning_woman':'\ud83d\ude4d',
  	  'middle_finger':'\ud83d\udd95',
  	  'fuelpump':'\u26fd\ufe0f',
  	  'full_moon':'\ud83c\udf15',
  	  'full_moon_with_face':'\ud83c\udf1d',
  	  'funeral_urn':'\u26b1\ufe0f',
  	  'game_die':'\ud83c\udfb2',
  	  'gear':'\u2699\ufe0f',
  	  'gem':'\ud83d\udc8e',
  	  'gemini':'\u264a\ufe0f',
  	  'ghost':'\ud83d\udc7b',
  	  'gift':'\ud83c\udf81',
  	  'gift_heart':'\ud83d\udc9d',
  	  'girl':'\ud83d\udc67',
  	  'globe_with_meridians':'\ud83c\udf10',
  	  'goal_net':'\ud83e\udd45',
  	  'goat':'\ud83d\udc10',
  	  'golf':'\u26f3\ufe0f',
  	  'golfing_man':'\ud83c\udfcc\ufe0f',
  	  'golfing_woman':'\ud83c\udfcc\ufe0f&zwj;\u2640\ufe0f',
  	  'gorilla':'\ud83e\udd8d',
  	  'grapes':'\ud83c\udf47',
  	  'green_apple':'\ud83c\udf4f',
  	  'green_book':'\ud83d\udcd7',
  	  'green_heart':'\ud83d\udc9a',
  	  'green_salad':'\ud83e\udd57',
  	  'grey_exclamation':'\u2755',
  	  'grey_question':'\u2754',
  	  'grimacing':'\ud83d\ude2c',
  	  'grin':'\ud83d\ude01',
  	  'grinning':'\ud83d\ude00',
  	  'guardsman':'\ud83d\udc82',
  	  'guardswoman':'\ud83d\udc82&zwj;\u2640\ufe0f',
  	  'guitar':'\ud83c\udfb8',
  	  'gun':'\ud83d\udd2b',
  	  'haircut_woman':'\ud83d\udc87',
  	  'haircut_man':'\ud83d\udc87&zwj;\u2642\ufe0f',
  	  'hamburger':'\ud83c\udf54',
  	  'hammer':'\ud83d\udd28',
  	  'hammer_and_pick':'\u2692',
  	  'hammer_and_wrench':'\ud83d\udee0',
  	  'hamster':'\ud83d\udc39',
  	  'hand':'\u270b',
  	  'handbag':'\ud83d\udc5c',
  	  'handshake':'\ud83e\udd1d',
  	  'hankey':'\ud83d\udca9',
  	  'hatched_chick':'\ud83d\udc25',
  	  'hatching_chick':'\ud83d\udc23',
  	  'headphones':'\ud83c\udfa7',
  	  'hear_no_evil':'\ud83d\ude49',
  	  'heart':'\u2764\ufe0f',
  	  'heart_decoration':'\ud83d\udc9f',
  	  'heart_eyes':'\ud83d\ude0d',
  	  'heart_eyes_cat':'\ud83d\ude3b',
  	  'heartbeat':'\ud83d\udc93',
  	  'heartpulse':'\ud83d\udc97',
  	  'hearts':'\u2665\ufe0f',
  	  'heavy_check_mark':'\u2714\ufe0f',
  	  'heavy_division_sign':'\u2797',
  	  'heavy_dollar_sign':'\ud83d\udcb2',
  	  'heavy_heart_exclamation':'\u2763\ufe0f',
  	  'heavy_minus_sign':'\u2796',
  	  'heavy_multiplication_x':'\u2716\ufe0f',
  	  'heavy_plus_sign':'\u2795',
  	  'helicopter':'\ud83d\ude81',
  	  'herb':'\ud83c\udf3f',
  	  'hibiscus':'\ud83c\udf3a',
  	  'high_brightness':'\ud83d\udd06',
  	  'high_heel':'\ud83d\udc60',
  	  'hocho':'\ud83d\udd2a',
  	  'hole':'\ud83d\udd73',
  	  'honey_pot':'\ud83c\udf6f',
  	  'horse':'\ud83d\udc34',
  	  'horse_racing':'\ud83c\udfc7',
  	  'hospital':'\ud83c\udfe5',
  	  'hot_pepper':'\ud83c\udf36',
  	  'hotdog':'\ud83c\udf2d',
  	  'hotel':'\ud83c\udfe8',
  	  'hotsprings':'\u2668\ufe0f',
  	  'hourglass':'\u231b\ufe0f',
  	  'hourglass_flowing_sand':'\u23f3',
  	  'house':'\ud83c\udfe0',
  	  'house_with_garden':'\ud83c\udfe1',
  	  'houses':'\ud83c\udfd8',
  	  'hugs':'\ud83e\udd17',
  	  'hushed':'\ud83d\ude2f',
  	  'ice_cream':'\ud83c\udf68',
  	  'ice_hockey':'\ud83c\udfd2',
  	  'ice_skate':'\u26f8',
  	  'icecream':'\ud83c\udf66',
  	  'id':'\ud83c\udd94',
  	  'ideograph_advantage':'\ud83c\ude50',
  	  'imp':'\ud83d\udc7f',
  	  'inbox_tray':'\ud83d\udce5',
  	  'incoming_envelope':'\ud83d\udce8',
  	  'tipping_hand_woman':'\ud83d\udc81',
  	  'information_source':'\u2139\ufe0f',
  	  'innocent':'\ud83d\ude07',
  	  'interrobang':'\u2049\ufe0f',
  	  'iphone':'\ud83d\udcf1',
  	  'izakaya_lantern':'\ud83c\udfee',
  	  'jack_o_lantern':'\ud83c\udf83',
  	  'japan':'\ud83d\uddfe',
  	  'japanese_castle':'\ud83c\udfef',
  	  'japanese_goblin':'\ud83d\udc7a',
  	  'japanese_ogre':'\ud83d\udc79',
  	  'jeans':'\ud83d\udc56',
  	  'joy':'\ud83d\ude02',
  	  'joy_cat':'\ud83d\ude39',
  	  'joystick':'\ud83d\udd79',
  	  'kaaba':'\ud83d\udd4b',
  	  'key':'\ud83d\udd11',
  	  'keyboard':'\u2328\ufe0f',
  	  'keycap_ten':'\ud83d\udd1f',
  	  'kick_scooter':'\ud83d\udef4',
  	  'kimono':'\ud83d\udc58',
  	  'kiss':'\ud83d\udc8b',
  	  'kissing':'\ud83d\ude17',
  	  'kissing_cat':'\ud83d\ude3d',
  	  'kissing_closed_eyes':'\ud83d\ude1a',
  	  'kissing_heart':'\ud83d\ude18',
  	  'kissing_smiling_eyes':'\ud83d\ude19',
  	  'kiwi_fruit':'\ud83e\udd5d',
  	  'koala':'\ud83d\udc28',
  	  'koko':'\ud83c\ude01',
  	  'label':'\ud83c\udff7',
  	  'large_blue_circle':'\ud83d\udd35',
  	  'large_blue_diamond':'\ud83d\udd37',
  	  'large_orange_diamond':'\ud83d\udd36',
  	  'last_quarter_moon':'\ud83c\udf17',
  	  'last_quarter_moon_with_face':'\ud83c\udf1c',
  	  'latin_cross':'\u271d\ufe0f',
  	  'laughing':'\ud83d\ude06',
  	  'leaves':'\ud83c\udf43',
  	  'ledger':'\ud83d\udcd2',
  	  'left_luggage':'\ud83d\udec5',
  	  'left_right_arrow':'\u2194\ufe0f',
  	  'leftwards_arrow_with_hook':'\u21a9\ufe0f',
  	  'lemon':'\ud83c\udf4b',
  	  'leo':'\u264c\ufe0f',
  	  'leopard':'\ud83d\udc06',
  	  'level_slider':'\ud83c\udf9a',
  	  'libra':'\u264e\ufe0f',
  	  'light_rail':'\ud83d\ude88',
  	  'link':'\ud83d\udd17',
  	  'lion':'\ud83e\udd81',
  	  'lips':'\ud83d\udc44',
  	  'lipstick':'\ud83d\udc84',
  	  'lizard':'\ud83e\udd8e',
  	  'lock':'\ud83d\udd12',
  	  'lock_with_ink_pen':'\ud83d\udd0f',
  	  'lollipop':'\ud83c\udf6d',
  	  'loop':'\u27bf',
  	  'loud_sound':'\ud83d\udd0a',
  	  'loudspeaker':'\ud83d\udce2',
  	  'love_hotel':'\ud83c\udfe9',
  	  'love_letter':'\ud83d\udc8c',
  	  'low_brightness':'\ud83d\udd05',
  	  'lying_face':'\ud83e\udd25',
  	  'm':'\u24c2\ufe0f',
  	  'mag':'\ud83d\udd0d',
  	  'mag_right':'\ud83d\udd0e',
  	  'mahjong':'\ud83c\udc04\ufe0f',
  	  'mailbox':'\ud83d\udceb',
  	  'mailbox_closed':'\ud83d\udcea',
  	  'mailbox_with_mail':'\ud83d\udcec',
  	  'mailbox_with_no_mail':'\ud83d\udced',
  	  'man':'\ud83d\udc68',
  	  'man_artist':'\ud83d\udc68&zwj;\ud83c\udfa8',
  	  'man_astronaut':'\ud83d\udc68&zwj;\ud83d\ude80',
  	  'man_cartwheeling':'\ud83e\udd38&zwj;\u2642\ufe0f',
  	  'man_cook':'\ud83d\udc68&zwj;\ud83c\udf73',
  	  'man_dancing':'\ud83d\udd7a',
  	  'man_facepalming':'\ud83e\udd26&zwj;\u2642\ufe0f',
  	  'man_factory_worker':'\ud83d\udc68&zwj;\ud83c\udfed',
  	  'man_farmer':'\ud83d\udc68&zwj;\ud83c\udf3e',
  	  'man_firefighter':'\ud83d\udc68&zwj;\ud83d\ude92',
  	  'man_health_worker':'\ud83d\udc68&zwj;\u2695\ufe0f',
  	  'man_in_tuxedo':'\ud83e\udd35',
  	  'man_judge':'\ud83d\udc68&zwj;\u2696\ufe0f',
  	  'man_juggling':'\ud83e\udd39&zwj;\u2642\ufe0f',
  	  'man_mechanic':'\ud83d\udc68&zwj;\ud83d\udd27',
  	  'man_office_worker':'\ud83d\udc68&zwj;\ud83d\udcbc',
  	  'man_pilot':'\ud83d\udc68&zwj;\u2708\ufe0f',
  	  'man_playing_handball':'\ud83e\udd3e&zwj;\u2642\ufe0f',
  	  'man_playing_water_polo':'\ud83e\udd3d&zwj;\u2642\ufe0f',
  	  'man_scientist':'\ud83d\udc68&zwj;\ud83d\udd2c',
  	  'man_shrugging':'\ud83e\udd37&zwj;\u2642\ufe0f',
  	  'man_singer':'\ud83d\udc68&zwj;\ud83c\udfa4',
  	  'man_student':'\ud83d\udc68&zwj;\ud83c\udf93',
  	  'man_teacher':'\ud83d\udc68&zwj;\ud83c\udfeb',
  	  'man_technologist':'\ud83d\udc68&zwj;\ud83d\udcbb',
  	  'man_with_gua_pi_mao':'\ud83d\udc72',
  	  'man_with_turban':'\ud83d\udc73',
  	  'tangerine':'\ud83c\udf4a',
  	  'mans_shoe':'\ud83d\udc5e',
  	  'mantelpiece_clock':'\ud83d\udd70',
  	  'maple_leaf':'\ud83c\udf41',
  	  'martial_arts_uniform':'\ud83e\udd4b',
  	  'mask':'\ud83d\ude37',
  	  'massage_woman':'\ud83d\udc86',
  	  'massage_man':'\ud83d\udc86&zwj;\u2642\ufe0f',
  	  'meat_on_bone':'\ud83c\udf56',
  	  'medal_military':'\ud83c\udf96',
  	  'medal_sports':'\ud83c\udfc5',
  	  'mega':'\ud83d\udce3',
  	  'melon':'\ud83c\udf48',
  	  'memo':'\ud83d\udcdd',
  	  'men_wrestling':'\ud83e\udd3c&zwj;\u2642\ufe0f',
  	  'menorah':'\ud83d\udd4e',
  	  'mens':'\ud83d\udeb9',
  	  'metal':'\ud83e\udd18',
  	  'metro':'\ud83d\ude87',
  	  'microphone':'\ud83c\udfa4',
  	  'microscope':'\ud83d\udd2c',
  	  'milk_glass':'\ud83e\udd5b',
  	  'milky_way':'\ud83c\udf0c',
  	  'minibus':'\ud83d\ude90',
  	  'minidisc':'\ud83d\udcbd',
  	  'mobile_phone_off':'\ud83d\udcf4',
  	  'money_mouth_face':'\ud83e\udd11',
  	  'money_with_wings':'\ud83d\udcb8',
  	  'moneybag':'\ud83d\udcb0',
  	  'monkey':'\ud83d\udc12',
  	  'monkey_face':'\ud83d\udc35',
  	  'monorail':'\ud83d\ude9d',
  	  'moon':'\ud83c\udf14',
  	  'mortar_board':'\ud83c\udf93',
  	  'mosque':'\ud83d\udd4c',
  	  'motor_boat':'\ud83d\udee5',
  	  'motor_scooter':'\ud83d\udef5',
  	  'motorcycle':'\ud83c\udfcd',
  	  'motorway':'\ud83d\udee3',
  	  'mount_fuji':'\ud83d\uddfb',
  	  'mountain':'\u26f0',
  	  'mountain_biking_man':'\ud83d\udeb5',
  	  'mountain_biking_woman':'\ud83d\udeb5&zwj;\u2640\ufe0f',
  	  'mountain_cableway':'\ud83d\udea0',
  	  'mountain_railway':'\ud83d\ude9e',
  	  'mountain_snow':'\ud83c\udfd4',
  	  'mouse':'\ud83d\udc2d',
  	  'mouse2':'\ud83d\udc01',
  	  'movie_camera':'\ud83c\udfa5',
  	  'moyai':'\ud83d\uddff',
  	  'mrs_claus':'\ud83e\udd36',
  	  'muscle':'\ud83d\udcaa',
  	  'mushroom':'\ud83c\udf44',
  	  'musical_keyboard':'\ud83c\udfb9',
  	  'musical_note':'\ud83c\udfb5',
  	  'musical_score':'\ud83c\udfbc',
  	  'mute':'\ud83d\udd07',
  	  'nail_care':'\ud83d\udc85',
  	  'name_badge':'\ud83d\udcdb',
  	  'national_park':'\ud83c\udfde',
  	  'nauseated_face':'\ud83e\udd22',
  	  'necktie':'\ud83d\udc54',
  	  'negative_squared_cross_mark':'\u274e',
  	  'nerd_face':'\ud83e\udd13',
  	  'neutral_face':'\ud83d\ude10',
  	  'new':'\ud83c\udd95',
  	  'new_moon':'\ud83c\udf11',
  	  'new_moon_with_face':'\ud83c\udf1a',
  	  'newspaper':'\ud83d\udcf0',
  	  'newspaper_roll':'\ud83d\uddde',
  	  'next_track_button':'\u23ed',
  	  'ng':'\ud83c\udd96',
  	  'no_good_man':'\ud83d\ude45&zwj;\u2642\ufe0f',
  	  'no_good_woman':'\ud83d\ude45',
  	  'night_with_stars':'\ud83c\udf03',
  	  'no_bell':'\ud83d\udd15',
  	  'no_bicycles':'\ud83d\udeb3',
  	  'no_entry':'\u26d4\ufe0f',
  	  'no_entry_sign':'\ud83d\udeab',
  	  'no_mobile_phones':'\ud83d\udcf5',
  	  'no_mouth':'\ud83d\ude36',
  	  'no_pedestrians':'\ud83d\udeb7',
  	  'no_smoking':'\ud83d\udead',
  	  'non-potable_water':'\ud83d\udeb1',
  	  'nose':'\ud83d\udc43',
  	  'notebook':'\ud83d\udcd3',
  	  'notebook_with_decorative_cover':'\ud83d\udcd4',
  	  'notes':'\ud83c\udfb6',
  	  'nut_and_bolt':'\ud83d\udd29',
  	  'o':'\u2b55\ufe0f',
  	  'o2':'\ud83c\udd7e\ufe0f',
  	  'ocean':'\ud83c\udf0a',
  	  'octopus':'\ud83d\udc19',
  	  'oden':'\ud83c\udf62',
  	  'office':'\ud83c\udfe2',
  	  'oil_drum':'\ud83d\udee2',
  	  'ok':'\ud83c\udd97',
  	  'ok_hand':'\ud83d\udc4c',
  	  'ok_man':'\ud83d\ude46&zwj;\u2642\ufe0f',
  	  'ok_woman':'\ud83d\ude46',
  	  'old_key':'\ud83d\udddd',
  	  'older_man':'\ud83d\udc74',
  	  'older_woman':'\ud83d\udc75',
  	  'om':'\ud83d\udd49',
  	  'on':'\ud83d\udd1b',
  	  'oncoming_automobile':'\ud83d\ude98',
  	  'oncoming_bus':'\ud83d\ude8d',
  	  'oncoming_police_car':'\ud83d\ude94',
  	  'oncoming_taxi':'\ud83d\ude96',
  	  'open_file_folder':'\ud83d\udcc2',
  	  'open_hands':'\ud83d\udc50',
  	  'open_mouth':'\ud83d\ude2e',
  	  'open_umbrella':'\u2602\ufe0f',
  	  'ophiuchus':'\u26ce',
  	  'orange_book':'\ud83d\udcd9',
  	  'orthodox_cross':'\u2626\ufe0f',
  	  'outbox_tray':'\ud83d\udce4',
  	  'owl':'\ud83e\udd89',
  	  'ox':'\ud83d\udc02',
  	  'package':'\ud83d\udce6',
  	  'page_facing_up':'\ud83d\udcc4',
  	  'page_with_curl':'\ud83d\udcc3',
  	  'pager':'\ud83d\udcdf',
  	  'paintbrush':'\ud83d\udd8c',
  	  'palm_tree':'\ud83c\udf34',
  	  'pancakes':'\ud83e\udd5e',
  	  'panda_face':'\ud83d\udc3c',
  	  'paperclip':'\ud83d\udcce',
  	  'paperclips':'\ud83d\udd87',
  	  'parasol_on_ground':'\u26f1',
  	  'parking':'\ud83c\udd7f\ufe0f',
  	  'part_alternation_mark':'\u303d\ufe0f',
  	  'partly_sunny':'\u26c5\ufe0f',
  	  'passenger_ship':'\ud83d\udef3',
  	  'passport_control':'\ud83d\udec2',
  	  'pause_button':'\u23f8',
  	  'peace_symbol':'\u262e\ufe0f',
  	  'peach':'\ud83c\udf51',
  	  'peanuts':'\ud83e\udd5c',
  	  'pear':'\ud83c\udf50',
  	  'pen':'\ud83d\udd8a',
  	  'pencil2':'\u270f\ufe0f',
  	  'penguin':'\ud83d\udc27',
  	  'pensive':'\ud83d\ude14',
  	  'performing_arts':'\ud83c\udfad',
  	  'persevere':'\ud83d\ude23',
  	  'person_fencing':'\ud83e\udd3a',
  	  'pouting_woman':'\ud83d\ude4e',
  	  'phone':'\u260e\ufe0f',
  	  'pick':'\u26cf',
  	  'pig':'\ud83d\udc37',
  	  'pig2':'\ud83d\udc16',
  	  'pig_nose':'\ud83d\udc3d',
  	  'pill':'\ud83d\udc8a',
  	  'pineapple':'\ud83c\udf4d',
  	  'ping_pong':'\ud83c\udfd3',
  	  'pisces':'\u2653\ufe0f',
  	  'pizza':'\ud83c\udf55',
  	  'place_of_worship':'\ud83d\uded0',
  	  'plate_with_cutlery':'\ud83c\udf7d',
  	  'play_or_pause_button':'\u23ef',
  	  'point_down':'\ud83d\udc47',
  	  'point_left':'\ud83d\udc48',
  	  'point_right':'\ud83d\udc49',
  	  'point_up':'\u261d\ufe0f',
  	  'point_up_2':'\ud83d\udc46',
  	  'police_car':'\ud83d\ude93',
  	  'policewoman':'\ud83d\udc6e&zwj;\u2640\ufe0f',
  	  'poodle':'\ud83d\udc29',
  	  'popcorn':'\ud83c\udf7f',
  	  'post_office':'\ud83c\udfe3',
  	  'postal_horn':'\ud83d\udcef',
  	  'postbox':'\ud83d\udcee',
  	  'potable_water':'\ud83d\udeb0',
  	  'potato':'\ud83e\udd54',
  	  'pouch':'\ud83d\udc5d',
  	  'poultry_leg':'\ud83c\udf57',
  	  'pound':'\ud83d\udcb7',
  	  'rage':'\ud83d\ude21',
  	  'pouting_cat':'\ud83d\ude3e',
  	  'pouting_man':'\ud83d\ude4e&zwj;\u2642\ufe0f',
  	  'pray':'\ud83d\ude4f',
  	  'prayer_beads':'\ud83d\udcff',
  	  'pregnant_woman':'\ud83e\udd30',
  	  'previous_track_button':'\u23ee',
  	  'prince':'\ud83e\udd34',
  	  'princess':'\ud83d\udc78',
  	  'printer':'\ud83d\udda8',
  	  'purple_heart':'\ud83d\udc9c',
  	  'purse':'\ud83d\udc5b',
  	  'pushpin':'\ud83d\udccc',
  	  'put_litter_in_its_place':'\ud83d\udeae',
  	  'question':'\u2753',
  	  'rabbit':'\ud83d\udc30',
  	  'rabbit2':'\ud83d\udc07',
  	  'racehorse':'\ud83d\udc0e',
  	  'racing_car':'\ud83c\udfce',
  	  'radio':'\ud83d\udcfb',
  	  'radio_button':'\ud83d\udd18',
  	  'radioactive':'\u2622\ufe0f',
  	  'railway_car':'\ud83d\ude83',
  	  'railway_track':'\ud83d\udee4',
  	  'rainbow':'\ud83c\udf08',
  	  'rainbow_flag':'\ud83c\udff3\ufe0f&zwj;\ud83c\udf08',
  	  'raised_back_of_hand':'\ud83e\udd1a',
  	  'raised_hand_with_fingers_splayed':'\ud83d\udd90',
  	  'raised_hands':'\ud83d\ude4c',
  	  'raising_hand_woman':'\ud83d\ude4b',
  	  'raising_hand_man':'\ud83d\ude4b&zwj;\u2642\ufe0f',
  	  'ram':'\ud83d\udc0f',
  	  'ramen':'\ud83c\udf5c',
  	  'rat':'\ud83d\udc00',
  	  'record_button':'\u23fa',
  	  'recycle':'\u267b\ufe0f',
  	  'red_circle':'\ud83d\udd34',
  	  'registered':'\u00ae\ufe0f',
  	  'relaxed':'\u263a\ufe0f',
  	  'relieved':'\ud83d\ude0c',
  	  'reminder_ribbon':'\ud83c\udf97',
  	  'repeat':'\ud83d\udd01',
  	  'repeat_one':'\ud83d\udd02',
  	  'rescue_worker_helmet':'\u26d1',
  	  'restroom':'\ud83d\udebb',
  	  'revolving_hearts':'\ud83d\udc9e',
  	  'rewind':'\u23ea',
  	  'rhinoceros':'\ud83e\udd8f',
  	  'ribbon':'\ud83c\udf80',
  	  'rice':'\ud83c\udf5a',
  	  'rice_ball':'\ud83c\udf59',
  	  'rice_cracker':'\ud83c\udf58',
  	  'rice_scene':'\ud83c\udf91',
  	  'right_anger_bubble':'\ud83d\uddef',
  	  'ring':'\ud83d\udc8d',
  	  'robot':'\ud83e\udd16',
  	  'rocket':'\ud83d\ude80',
  	  'rofl':'\ud83e\udd23',
  	  'roll_eyes':'\ud83d\ude44',
  	  'roller_coaster':'\ud83c\udfa2',
  	  'rooster':'\ud83d\udc13',
  	  'rose':'\ud83c\udf39',
  	  'rosette':'\ud83c\udff5',
  	  'rotating_light':'\ud83d\udea8',
  	  'round_pushpin':'\ud83d\udccd',
  	  'rowing_man':'\ud83d\udea3',
  	  'rowing_woman':'\ud83d\udea3&zwj;\u2640\ufe0f',
  	  'rugby_football':'\ud83c\udfc9',
  	  'running_man':'\ud83c\udfc3',
  	  'running_shirt_with_sash':'\ud83c\udfbd',
  	  'running_woman':'\ud83c\udfc3&zwj;\u2640\ufe0f',
  	  'sa':'\ud83c\ude02\ufe0f',
  	  'sagittarius':'\u2650\ufe0f',
  	  'sake':'\ud83c\udf76',
  	  'sandal':'\ud83d\udc61',
  	  'santa':'\ud83c\udf85',
  	  'satellite':'\ud83d\udce1',
  	  'saxophone':'\ud83c\udfb7',
  	  'school':'\ud83c\udfeb',
  	  'school_satchel':'\ud83c\udf92',
  	  'scissors':'\u2702\ufe0f',
  	  'scorpion':'\ud83e\udd82',
  	  'scorpius':'\u264f\ufe0f',
  	  'scream':'\ud83d\ude31',
  	  'scream_cat':'\ud83d\ude40',
  	  'scroll':'\ud83d\udcdc',
  	  'seat':'\ud83d\udcba',
  	  'secret':'\u3299\ufe0f',
  	  'see_no_evil':'\ud83d\ude48',
  	  'seedling':'\ud83c\udf31',
  	  'selfie':'\ud83e\udd33',
  	  'shallow_pan_of_food':'\ud83e\udd58',
  	  'shamrock':'\u2618\ufe0f',
  	  'shark':'\ud83e\udd88',
  	  'shaved_ice':'\ud83c\udf67',
  	  'sheep':'\ud83d\udc11',
  	  'shell':'\ud83d\udc1a',
  	  'shield':'\ud83d\udee1',
  	  'shinto_shrine':'\u26e9',
  	  'ship':'\ud83d\udea2',
  	  'shirt':'\ud83d\udc55',
  	  'shopping':'\ud83d\udecd',
  	  'shopping_cart':'\ud83d\uded2',
  	  'shower':'\ud83d\udebf',
  	  'shrimp':'\ud83e\udd90',
  	  'signal_strength':'\ud83d\udcf6',
  	  'six_pointed_star':'\ud83d\udd2f',
  	  'ski':'\ud83c\udfbf',
  	  'skier':'\u26f7',
  	  'skull':'\ud83d\udc80',
  	  'skull_and_crossbones':'\u2620\ufe0f',
  	  'sleeping':'\ud83d\ude34',
  	  'sleeping_bed':'\ud83d\udecc',
  	  'sleepy':'\ud83d\ude2a',
  	  'slightly_frowning_face':'\ud83d\ude41',
  	  'slightly_smiling_face':'\ud83d\ude42',
  	  'slot_machine':'\ud83c\udfb0',
  	  'small_airplane':'\ud83d\udee9',
  	  'small_blue_diamond':'\ud83d\udd39',
  	  'small_orange_diamond':'\ud83d\udd38',
  	  'small_red_triangle':'\ud83d\udd3a',
  	  'small_red_triangle_down':'\ud83d\udd3b',
  	  'smile':'\ud83d\ude04',
  	  'smile_cat':'\ud83d\ude38',
  	  'smiley':'\ud83d\ude03',
  	  'smiley_cat':'\ud83d\ude3a',
  	  'smiling_imp':'\ud83d\ude08',
  	  'smirk':'\ud83d\ude0f',
  	  'smirk_cat':'\ud83d\ude3c',
  	  'smoking':'\ud83d\udeac',
  	  'snail':'\ud83d\udc0c',
  	  'snake':'\ud83d\udc0d',
  	  'sneezing_face':'\ud83e\udd27',
  	  'snowboarder':'\ud83c\udfc2',
  	  'snowflake':'\u2744\ufe0f',
  	  'snowman':'\u26c4\ufe0f',
  	  'snowman_with_snow':'\u2603\ufe0f',
  	  'sob':'\ud83d\ude2d',
  	  'soccer':'\u26bd\ufe0f',
  	  'soon':'\ud83d\udd1c',
  	  'sos':'\ud83c\udd98',
  	  'sound':'\ud83d\udd09',
  	  'space_invader':'\ud83d\udc7e',
  	  'spades':'\u2660\ufe0f',
  	  'spaghetti':'\ud83c\udf5d',
  	  'sparkle':'\u2747\ufe0f',
  	  'sparkler':'\ud83c\udf87',
  	  'sparkles':'\u2728',
  	  'sparkling_heart':'\ud83d\udc96',
  	  'speak_no_evil':'\ud83d\ude4a',
  	  'speaker':'\ud83d\udd08',
  	  'speaking_head':'\ud83d\udde3',
  	  'speech_balloon':'\ud83d\udcac',
  	  'speedboat':'\ud83d\udea4',
  	  'spider':'\ud83d\udd77',
  	  'spider_web':'\ud83d\udd78',
  	  'spiral_calendar':'\ud83d\uddd3',
  	  'spiral_notepad':'\ud83d\uddd2',
  	  'spoon':'\ud83e\udd44',
  	  'squid':'\ud83e\udd91',
  	  'stadium':'\ud83c\udfdf',
  	  'star':'\u2b50\ufe0f',
  	  'star2':'\ud83c\udf1f',
  	  'star_and_crescent':'\u262a\ufe0f',
  	  'star_of_david':'\u2721\ufe0f',
  	  'stars':'\ud83c\udf20',
  	  'station':'\ud83d\ude89',
  	  'statue_of_liberty':'\ud83d\uddfd',
  	  'steam_locomotive':'\ud83d\ude82',
  	  'stew':'\ud83c\udf72',
  	  'stop_button':'\u23f9',
  	  'stop_sign':'\ud83d\uded1',
  	  'stopwatch':'\u23f1',
  	  'straight_ruler':'\ud83d\udccf',
  	  'strawberry':'\ud83c\udf53',
  	  'stuck_out_tongue':'\ud83d\ude1b',
  	  'stuck_out_tongue_closed_eyes':'\ud83d\ude1d',
  	  'stuck_out_tongue_winking_eye':'\ud83d\ude1c',
  	  'studio_microphone':'\ud83c\udf99',
  	  'stuffed_flatbread':'\ud83e\udd59',
  	  'sun_behind_large_cloud':'\ud83c\udf25',
  	  'sun_behind_rain_cloud':'\ud83c\udf26',
  	  'sun_behind_small_cloud':'\ud83c\udf24',
  	  'sun_with_face':'\ud83c\udf1e',
  	  'sunflower':'\ud83c\udf3b',
  	  'sunglasses':'\ud83d\ude0e',
  	  'sunny':'\u2600\ufe0f',
  	  'sunrise':'\ud83c\udf05',
  	  'sunrise_over_mountains':'\ud83c\udf04',
  	  'surfing_man':'\ud83c\udfc4',
  	  'surfing_woman':'\ud83c\udfc4&zwj;\u2640\ufe0f',
  	  'sushi':'\ud83c\udf63',
  	  'suspension_railway':'\ud83d\ude9f',
  	  'sweat':'\ud83d\ude13',
  	  'sweat_drops':'\ud83d\udca6',
  	  'sweat_smile':'\ud83d\ude05',
  	  'sweet_potato':'\ud83c\udf60',
  	  'swimming_man':'\ud83c\udfca',
  	  'swimming_woman':'\ud83c\udfca&zwj;\u2640\ufe0f',
  	  'symbols':'\ud83d\udd23',
  	  'synagogue':'\ud83d\udd4d',
  	  'syringe':'\ud83d\udc89',
  	  'taco':'\ud83c\udf2e',
  	  'tada':'\ud83c\udf89',
  	  'tanabata_tree':'\ud83c\udf8b',
  	  'taurus':'\u2649\ufe0f',
  	  'taxi':'\ud83d\ude95',
  	  'tea':'\ud83c\udf75',
  	  'telephone_receiver':'\ud83d\udcde',
  	  'telescope':'\ud83d\udd2d',
  	  'tennis':'\ud83c\udfbe',
  	  'tent':'\u26fa\ufe0f',
  	  'thermometer':'\ud83c\udf21',
  	  'thinking':'\ud83e\udd14',
  	  'thought_balloon':'\ud83d\udcad',
  	  'ticket':'\ud83c\udfab',
  	  'tickets':'\ud83c\udf9f',
  	  'tiger':'\ud83d\udc2f',
  	  'tiger2':'\ud83d\udc05',
  	  'timer_clock':'\u23f2',
  	  'tipping_hand_man':'\ud83d\udc81&zwj;\u2642\ufe0f',
  	  'tired_face':'\ud83d\ude2b',
  	  'tm':'\u2122\ufe0f',
  	  'toilet':'\ud83d\udebd',
  	  'tokyo_tower':'\ud83d\uddfc',
  	  'tomato':'\ud83c\udf45',
  	  'tongue':'\ud83d\udc45',
  	  'top':'\ud83d\udd1d',
  	  'tophat':'\ud83c\udfa9',
  	  'tornado':'\ud83c\udf2a',
  	  'trackball':'\ud83d\uddb2',
  	  'tractor':'\ud83d\ude9c',
  	  'traffic_light':'\ud83d\udea5',
  	  'train':'\ud83d\ude8b',
  	  'train2':'\ud83d\ude86',
  	  'tram':'\ud83d\ude8a',
  	  'triangular_flag_on_post':'\ud83d\udea9',
  	  'triangular_ruler':'\ud83d\udcd0',
  	  'trident':'\ud83d\udd31',
  	  'triumph':'\ud83d\ude24',
  	  'trolleybus':'\ud83d\ude8e',
  	  'trophy':'\ud83c\udfc6',
  	  'tropical_drink':'\ud83c\udf79',
  	  'tropical_fish':'\ud83d\udc20',
  	  'truck':'\ud83d\ude9a',
  	  'trumpet':'\ud83c\udfba',
  	  'tulip':'\ud83c\udf37',
  	  'tumbler_glass':'\ud83e\udd43',
  	  'turkey':'\ud83e\udd83',
  	  'turtle':'\ud83d\udc22',
  	  'tv':'\ud83d\udcfa',
  	  'twisted_rightwards_arrows':'\ud83d\udd00',
  	  'two_hearts':'\ud83d\udc95',
  	  'two_men_holding_hands':'\ud83d\udc6c',
  	  'two_women_holding_hands':'\ud83d\udc6d',
  	  'u5272':'\ud83c\ude39',
  	  'u5408':'\ud83c\ude34',
  	  'u55b6':'\ud83c\ude3a',
  	  'u6307':'\ud83c\ude2f\ufe0f',
  	  'u6708':'\ud83c\ude37\ufe0f',
  	  'u6709':'\ud83c\ude36',
  	  'u6e80':'\ud83c\ude35',
  	  'u7121':'\ud83c\ude1a\ufe0f',
  	  'u7533':'\ud83c\ude38',
  	  'u7981':'\ud83c\ude32',
  	  'u7a7a':'\ud83c\ude33',
  	  'umbrella':'\u2614\ufe0f',
  	  'unamused':'\ud83d\ude12',
  	  'underage':'\ud83d\udd1e',
  	  'unicorn':'\ud83e\udd84',
  	  'unlock':'\ud83d\udd13',
  	  'up':'\ud83c\udd99',
  	  'upside_down_face':'\ud83d\ude43',
  	  'v':'\u270c\ufe0f',
  	  'vertical_traffic_light':'\ud83d\udea6',
  	  'vhs':'\ud83d\udcfc',
  	  'vibration_mode':'\ud83d\udcf3',
  	  'video_camera':'\ud83d\udcf9',
  	  'video_game':'\ud83c\udfae',
  	  'violin':'\ud83c\udfbb',
  	  'virgo':'\u264d\ufe0f',
  	  'volcano':'\ud83c\udf0b',
  	  'volleyball':'\ud83c\udfd0',
  	  'vs':'\ud83c\udd9a',
  	  'vulcan_salute':'\ud83d\udd96',
  	  'walking_man':'\ud83d\udeb6',
  	  'walking_woman':'\ud83d\udeb6&zwj;\u2640\ufe0f',
  	  'waning_crescent_moon':'\ud83c\udf18',
  	  'waning_gibbous_moon':'\ud83c\udf16',
  	  'warning':'\u26a0\ufe0f',
  	  'wastebasket':'\ud83d\uddd1',
  	  'watch':'\u231a\ufe0f',
  	  'water_buffalo':'\ud83d\udc03',
  	  'watermelon':'\ud83c\udf49',
  	  'wave':'\ud83d\udc4b',
  	  'wavy_dash':'\u3030\ufe0f',
  	  'waxing_crescent_moon':'\ud83c\udf12',
  	  'wc':'\ud83d\udebe',
  	  'weary':'\ud83d\ude29',
  	  'wedding':'\ud83d\udc92',
  	  'weight_lifting_man':'\ud83c\udfcb\ufe0f',
  	  'weight_lifting_woman':'\ud83c\udfcb\ufe0f&zwj;\u2640\ufe0f',
  	  'whale':'\ud83d\udc33',
  	  'whale2':'\ud83d\udc0b',
  	  'wheel_of_dharma':'\u2638\ufe0f',
  	  'wheelchair':'\u267f\ufe0f',
  	  'white_check_mark':'\u2705',
  	  'white_circle':'\u26aa\ufe0f',
  	  'white_flag':'\ud83c\udff3\ufe0f',
  	  'white_flower':'\ud83d\udcae',
  	  'white_large_square':'\u2b1c\ufe0f',
  	  'white_medium_small_square':'\u25fd\ufe0f',
  	  'white_medium_square':'\u25fb\ufe0f',
  	  'white_small_square':'\u25ab\ufe0f',
  	  'white_square_button':'\ud83d\udd33',
  	  'wilted_flower':'\ud83e\udd40',
  	  'wind_chime':'\ud83c\udf90',
  	  'wind_face':'\ud83c\udf2c',
  	  'wine_glass':'\ud83c\udf77',
  	  'wink':'\ud83d\ude09',
  	  'wolf':'\ud83d\udc3a',
  	  'woman':'\ud83d\udc69',
  	  'woman_artist':'\ud83d\udc69&zwj;\ud83c\udfa8',
  	  'woman_astronaut':'\ud83d\udc69&zwj;\ud83d\ude80',
  	  'woman_cartwheeling':'\ud83e\udd38&zwj;\u2640\ufe0f',
  	  'woman_cook':'\ud83d\udc69&zwj;\ud83c\udf73',
  	  'woman_facepalming':'\ud83e\udd26&zwj;\u2640\ufe0f',
  	  'woman_factory_worker':'\ud83d\udc69&zwj;\ud83c\udfed',
  	  'woman_farmer':'\ud83d\udc69&zwj;\ud83c\udf3e',
  	  'woman_firefighter':'\ud83d\udc69&zwj;\ud83d\ude92',
  	  'woman_health_worker':'\ud83d\udc69&zwj;\u2695\ufe0f',
  	  'woman_judge':'\ud83d\udc69&zwj;\u2696\ufe0f',
  	  'woman_juggling':'\ud83e\udd39&zwj;\u2640\ufe0f',
  	  'woman_mechanic':'\ud83d\udc69&zwj;\ud83d\udd27',
  	  'woman_office_worker':'\ud83d\udc69&zwj;\ud83d\udcbc',
  	  'woman_pilot':'\ud83d\udc69&zwj;\u2708\ufe0f',
  	  'woman_playing_handball':'\ud83e\udd3e&zwj;\u2640\ufe0f',
  	  'woman_playing_water_polo':'\ud83e\udd3d&zwj;\u2640\ufe0f',
  	  'woman_scientist':'\ud83d\udc69&zwj;\ud83d\udd2c',
  	  'woman_shrugging':'\ud83e\udd37&zwj;\u2640\ufe0f',
  	  'woman_singer':'\ud83d\udc69&zwj;\ud83c\udfa4',
  	  'woman_student':'\ud83d\udc69&zwj;\ud83c\udf93',
  	  'woman_teacher':'\ud83d\udc69&zwj;\ud83c\udfeb',
  	  'woman_technologist':'\ud83d\udc69&zwj;\ud83d\udcbb',
  	  'woman_with_turban':'\ud83d\udc73&zwj;\u2640\ufe0f',
  	  'womans_clothes':'\ud83d\udc5a',
  	  'womans_hat':'\ud83d\udc52',
  	  'women_wrestling':'\ud83e\udd3c&zwj;\u2640\ufe0f',
  	  'womens':'\ud83d\udeba',
  	  'world_map':'\ud83d\uddfa',
  	  'worried':'\ud83d\ude1f',
  	  'wrench':'\ud83d\udd27',
  	  'writing_hand':'\u270d\ufe0f',
  	  'x':'\u274c',
  	  'yellow_heart':'\ud83d\udc9b',
  	  'yen':'\ud83d\udcb4',
  	  'yin_yang':'\u262f\ufe0f',
  	  'yum':'\ud83d\ude0b',
  	  'zap':'\u26a1\ufe0f',
  	  'zipper_mouth_face':'\ud83e\udd10',
  	  'zzz':'\ud83d\udca4',

  	  /* special emojis :P */
  	  'octocat':  '<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',
  	  'showdown': '<span style="font-family: \'Anonymous Pro\', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>'
  	};

  	/**
  	 * Created by Estevao on 31-05-2015.
  	 */

  	/**
  	 * Showdown Converter class
  	 * @class
  	 * @param {object} [converterOptions]
  	 * @returns {Converter}
  	 */
  	showdown.Converter = function (converterOptions) {

  	  var
  	      /**
  	       * Options used by this converter
  	       * @private
  	       * @type {{}}
  	       */
  	      options = {},

  	      /**
  	       * Language extensions used by this converter
  	       * @private
  	       * @type {Array}
  	       */
  	      langExtensions = [],

  	      /**
  	       * Output modifiers extensions used by this converter
  	       * @private
  	       * @type {Array}
  	       */
  	      outputModifiers = [],

  	      /**
  	       * Event listeners
  	       * @private
  	       * @type {{}}
  	       */
  	      listeners = {},

  	      /**
  	       * The flavor set in this converter
  	       */
  	      setConvFlavor = setFlavor,

  	      /**
  	       * Metadata of the document
  	       * @type {{parsed: {}, raw: string, format: string}}
  	       */
  	      metadata = {
  	        parsed: {},
  	        raw: '',
  	        format: ''
  	      };

  	  _constructor();

  	  /**
  	   * Converter constructor
  	   * @private
  	   */
  	  function _constructor () {
  	    converterOptions = converterOptions || {};

  	    for (var gOpt in globalOptions) {
  	      if (globalOptions.hasOwnProperty(gOpt)) {
  	        options[gOpt] = globalOptions[gOpt];
  	      }
  	    }

  	    // Merge options
  	    if (typeof converterOptions === 'object') {
  	      for (var opt in converterOptions) {
  	        if (converterOptions.hasOwnProperty(opt)) {
  	          options[opt] = converterOptions[opt];
  	        }
  	      }
  	    } else {
  	      throw Error('Converter expects the passed parameter to be an object, but ' + typeof converterOptions +
  	      ' was passed instead.');
  	    }

  	    if (options.extensions) {
  	      showdown.helper.forEach(options.extensions, _parseExtension);
  	    }
  	  }

  	  /**
  	   * Parse extension
  	   * @param {*} ext
  	   * @param {string} [name='']
  	   * @private
  	   */
  	  function _parseExtension (ext, name) {

  	    name = name || null;
  	    // If it's a string, the extension was previously loaded
  	    if (showdown.helper.isString(ext)) {
  	      ext = showdown.helper.stdExtName(ext);
  	      name = ext;

  	      // LEGACY_SUPPORT CODE
  	      if (showdown.extensions[ext]) {
  	        console.warn('DEPRECATION WARNING: ' + ext + ' is an old extension that uses a deprecated loading method.' +
  	          'Please inform the developer that the extension should be updated!');
  	        legacyExtensionLoading(showdown.extensions[ext], ext);
  	        return;
  	        // END LEGACY SUPPORT CODE

  	      } else if (!showdown.helper.isUndefined(extensions[ext])) {
  	        ext = extensions[ext];

  	      } else {
  	        throw Error('Extension "' + ext + '" could not be loaded. It was either not found or is not a valid extension.');
  	      }
  	    }

  	    if (typeof ext === 'function') {
  	      ext = ext();
  	    }

  	    if (!showdown.helper.isArray(ext)) {
  	      ext = [ext];
  	    }

  	    var validExt = validate(ext, name);
  	    if (!validExt.valid) {
  	      throw Error(validExt.error);
  	    }

  	    for (var i = 0; i < ext.length; ++i) {
  	      switch (ext[i].type) {

  	        case 'lang':
  	          langExtensions.push(ext[i]);
  	          break;

  	        case 'output':
  	          outputModifiers.push(ext[i]);
  	          break;
  	      }
  	      if (ext[i].hasOwnProperty('listeners')) {
  	        for (var ln in ext[i].listeners) {
  	          if (ext[i].listeners.hasOwnProperty(ln)) {
  	            listen(ln, ext[i].listeners[ln]);
  	          }
  	        }
  	      }
  	    }

  	  }

  	  /**
  	   * LEGACY_SUPPORT
  	   * @param {*} ext
  	   * @param {string} name
  	   */
  	  function legacyExtensionLoading (ext, name) {
  	    if (typeof ext === 'function') {
  	      ext = ext(new showdown.Converter());
  	    }
  	    if (!showdown.helper.isArray(ext)) {
  	      ext = [ext];
  	    }
  	    var valid = validate(ext, name);

  	    if (!valid.valid) {
  	      throw Error(valid.error);
  	    }

  	    for (var i = 0; i < ext.length; ++i) {
  	      switch (ext[i].type) {
  	        case 'lang':
  	          langExtensions.push(ext[i]);
  	          break;
  	        case 'output':
  	          outputModifiers.push(ext[i]);
  	          break;
  	        default:// should never reach here
  	          throw Error('Extension loader error: Type unrecognized!!!');
  	      }
  	    }
  	  }

  	  /**
  	   * Listen to an event
  	   * @param {string} name
  	   * @param {function} callback
  	   */
  	  function listen (name, callback) {
  	    if (!showdown.helper.isString(name)) {
  	      throw Error('Invalid argument in converter.listen() method: name must be a string, but ' + typeof name + ' given');
  	    }

  	    if (typeof callback !== 'function') {
  	      throw Error('Invalid argument in converter.listen() method: callback must be a function, but ' + typeof callback + ' given');
  	    }

  	    if (!listeners.hasOwnProperty(name)) {
  	      listeners[name] = [];
  	    }
  	    listeners[name].push(callback);
  	  }

  	  function rTrimInputText (text) {
  	    var rsp = text.match(/^\s*/)[0].length,
  	        rgx = new RegExp('^\\s{0,' + rsp + '}', 'gm');
  	    return text.replace(rgx, '');
  	  }

  	  /**
  	   * Dispatch an event
  	   * @private
  	   * @param {string} evtName Event name
  	   * @param {string} text Text
  	   * @param {{}} options Converter Options
  	   * @param {{}} globals
  	   * @returns {string}
  	   */
  	  this._dispatch = function dispatch (evtName, text, options, globals) {
  	    if (listeners.hasOwnProperty(evtName)) {
  	      for (var ei = 0; ei < listeners[evtName].length; ++ei) {
  	        var nText = listeners[evtName][ei](evtName, text, this, options, globals);
  	        if (nText && typeof nText !== 'undefined') {
  	          text = nText;
  	        }
  	      }
  	    }
  	    return text;
  	  };

  	  /**
  	   * Listen to an event
  	   * @param {string} name
  	   * @param {function} callback
  	   * @returns {showdown.Converter}
  	   */
  	  this.listen = function (name, callback) {
  	    listen(name, callback);
  	    return this;
  	  };

  	  /**
  	   * Converts a markdown string into HTML
  	   * @param {string} text
  	   * @returns {*}
  	   */
  	  this.makeHtml = function (text) {
  	    //check if text is not falsy
  	    if (!text) {
  	      return text;
  	    }

  	    var globals = {
  	      gHtmlBlocks:     [],
  	      gHtmlMdBlocks:   [],
  	      gHtmlSpans:      [],
  	      gUrls:           {},
  	      gTitles:         {},
  	      gDimensions:     {},
  	      gListLevel:      0,
  	      hashLinkCounts:  {},
  	      langExtensions:  langExtensions,
  	      outputModifiers: outputModifiers,
  	      converter:       this,
  	      ghCodeBlocks:    [],
  	      metadata: {
  	        parsed: {},
  	        raw: '',
  	        format: ''
  	      }
  	    };

  	    // This lets us use ¨ trema as an escape char to avoid md5 hashes
  	    // The choice of character is arbitrary; anything that isn't
  	    // magic in Markdown will work.
  	    text = text.replace(/¨/g, '¨T');

  	    // Replace $ with ¨D
  	    // RegExp interprets $ as a special character
  	    // when it's in a replacement string
  	    text = text.replace(/\$/g, '¨D');

  	    // Standardize line endings
  	    text = text.replace(/\r\n/g, '\n'); // DOS to Unix
  	    text = text.replace(/\r/g, '\n'); // Mac to Unix

  	    // Stardardize line spaces
  	    text = text.replace(/\u00A0/g, '&nbsp;');

  	    if (options.smartIndentationFix) {
  	      text = rTrimInputText(text);
  	    }

  	    // Make sure text begins and ends with a couple of newlines:
  	    text = '\n\n' + text + '\n\n';

  	    // detab
  	    text = showdown.subParser('detab')(text, options, globals);

  	    /**
  	     * Strip any lines consisting only of spaces and tabs.
  	     * This makes subsequent regexs easier to write, because we can
  	     * match consecutive blank lines with /\n+/ instead of something
  	     * contorted like /[ \t]*\n+/
  	     */
  	    text = text.replace(/^[ \t]+$/mg, '');

  	    //run languageExtensions
  	    showdown.helper.forEach(langExtensions, function (ext) {
  	      text = showdown.subParser('runExtension')(ext, text, options, globals);
  	    });

  	    // run the sub parsers
  	    text = showdown.subParser('metadata')(text, options, globals);
  	    text = showdown.subParser('hashPreCodeTags')(text, options, globals);
  	    text = showdown.subParser('githubCodeBlocks')(text, options, globals);
  	    text = showdown.subParser('hashHTMLBlocks')(text, options, globals);
  	    text = showdown.subParser('hashCodeTags')(text, options, globals);
  	    text = showdown.subParser('stripLinkDefinitions')(text, options, globals);
  	    text = showdown.subParser('blockGamut')(text, options, globals);
  	    text = showdown.subParser('unhashHTMLSpans')(text, options, globals);
  	    text = showdown.subParser('unescapeSpecialChars')(text, options, globals);

  	    // attacklab: Restore dollar signs
  	    text = text.replace(/¨D/g, '$$');

  	    // attacklab: Restore tremas
  	    text = text.replace(/¨T/g, '¨');

  	    // render a complete html document instead of a partial if the option is enabled
  	    text = showdown.subParser('completeHTMLDocument')(text, options, globals);

  	    // Run output modifiers
  	    showdown.helper.forEach(outputModifiers, function (ext) {
  	      text = showdown.subParser('runExtension')(ext, text, options, globals);
  	    });

  	    // update metadata
  	    metadata = globals.metadata;
  	    return text;
  	  };

  	  /**
  	   * Converts an HTML string into a markdown string
  	   * @param src
  	   * @param [HTMLParser] A WHATWG DOM and HTML parser, such as JSDOM. If none is supplied, window.document will be used.
  	   * @returns {string}
  	   */
  	  this.makeMarkdown = this.makeMd = function (src, HTMLParser) {

  	    // replace \r\n with \n
  	    src = src.replace(/\r\n/g, '\n');
  	    src = src.replace(/\r/g, '\n'); // old macs

  	    // due to an edge case, we need to find this: > <
  	    // to prevent removing of non silent white spaces
  	    // ex: <em>this is</em> <strong>sparta</strong>
  	    src = src.replace(/>[ \t]+</, '>¨NBSP;<');

  	    if (!HTMLParser) {
  	      if (window && window.document) {
  	        HTMLParser = window.document;
  	      } else {
  	        throw new Error('HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM');
  	      }
  	    }

  	    var doc = HTMLParser.createElement('div');
  	    doc.innerHTML = src;

  	    var globals = {
  	      preList: substitutePreCodeTags(doc)
  	    };

  	    // remove all newlines and collapse spaces
  	    clean(doc);

  	    // some stuff, like accidental reference links must now be escaped
  	    // TODO
  	    // doc.innerHTML = doc.innerHTML.replace(/\[[\S\t ]]/);

  	    var nodes = doc.childNodes,
  	        mdDoc = '';

  	    for (var i = 0; i < nodes.length; i++) {
  	      mdDoc += showdown.subParser('makeMarkdown.node')(nodes[i], globals);
  	    }

  	    function clean (node) {
  	      for (var n = 0; n < node.childNodes.length; ++n) {
  	        var child = node.childNodes[n];
  	        if (child.nodeType === 3) {
  	          if (!/\S/.test(child.nodeValue) && !/^[ ]+$/.test(child.nodeValue)) {
  	            node.removeChild(child);
  	            --n;
  	          } else {
  	            child.nodeValue = child.nodeValue.split('\n').join(' ');
  	            child.nodeValue = child.nodeValue.replace(/(\s)+/g, '$1');
  	          }
  	        } else if (child.nodeType === 1) {
  	          clean(child);
  	        }
  	      }
  	    }

  	    // find all pre tags and replace contents with placeholder
  	    // we need this so that we can remove all indentation from html
  	    // to ease up parsing
  	    function substitutePreCodeTags (doc) {

  	      var pres = doc.querySelectorAll('pre'),
  	          presPH = [];

  	      for (var i = 0; i < pres.length; ++i) {

  	        if (pres[i].childElementCount === 1 && pres[i].firstChild.tagName.toLowerCase() === 'code') {
  	          var content = pres[i].firstChild.innerHTML.trim(),
  	              language = pres[i].firstChild.getAttribute('data-language') || '';

  	          // if data-language attribute is not defined, then we look for class language-*
  	          if (language === '') {
  	            var classes = pres[i].firstChild.className.split(' ');
  	            for (var c = 0; c < classes.length; ++c) {
  	              var matches = classes[c].match(/^language-(.+)$/);
  	              if (matches !== null) {
  	                language = matches[1];
  	                break;
  	              }
  	            }
  	          }

  	          // unescape html entities in content
  	          content = showdown.helper.unescapeHTMLEntities(content);

  	          presPH.push(content);
  	          pres[i].outerHTML = '<precode language="' + language + '" precodenum="' + i.toString() + '"></precode>';
  	        } else {
  	          presPH.push(pres[i].innerHTML);
  	          pres[i].innerHTML = '';
  	          pres[i].setAttribute('prenum', i.toString());
  	        }
  	      }
  	      return presPH;
  	    }

  	    return mdDoc;
  	  };

  	  /**
  	   * Set an option of this Converter instance
  	   * @param {string} key
  	   * @param {*} value
  	   */
  	  this.setOption = function (key, value) {
  	    options[key] = value;
  	  };

  	  /**
  	   * Get the option of this Converter instance
  	   * @param {string} key
  	   * @returns {*}
  	   */
  	  this.getOption = function (key) {
  	    return options[key];
  	  };

  	  /**
  	   * Get the options of this Converter instance
  	   * @returns {{}}
  	   */
  	  this.getOptions = function () {
  	    return options;
  	  };

  	  /**
  	   * Add extension to THIS converter
  	   * @param {{}} extension
  	   * @param {string} [name=null]
  	   */
  	  this.addExtension = function (extension, name) {
  	    name = name || null;
  	    _parseExtension(extension, name);
  	  };

  	  /**
  	   * Use a global registered extension with THIS converter
  	   * @param {string} extensionName Name of the previously registered extension
  	   */
  	  this.useExtension = function (extensionName) {
  	    _parseExtension(extensionName);
  	  };

  	  /**
  	   * Set the flavor THIS converter should use
  	   * @param {string} name
  	   */
  	  this.setFlavor = function (name) {
  	    if (!flavor.hasOwnProperty(name)) {
  	      throw Error(name + ' flavor was not found');
  	    }
  	    var preset = flavor[name];
  	    setConvFlavor = name;
  	    for (var option in preset) {
  	      if (preset.hasOwnProperty(option)) {
  	        options[option] = preset[option];
  	      }
  	    }
  	  };

  	  /**
  	   * Get the currently set flavor of this converter
  	   * @returns {string}
  	   */
  	  this.getFlavor = function () {
  	    return setConvFlavor;
  	  };

  	  /**
  	   * Remove an extension from THIS converter.
  	   * Note: This is a costly operation. It's better to initialize a new converter
  	   * and specify the extensions you wish to use
  	   * @param {Array} extension
  	   */
  	  this.removeExtension = function (extension) {
  	    if (!showdown.helper.isArray(extension)) {
  	      extension = [extension];
  	    }
  	    for (var a = 0; a < extension.length; ++a) {
  	      var ext = extension[a];
  	      for (var i = 0; i < langExtensions.length; ++i) {
  	        if (langExtensions[i] === ext) {
  	          langExtensions.splice(i, 1);
  	        }
  	      }
  	      for (var ii = 0; ii < outputModifiers.length; ++ii) {
  	        if (outputModifiers[ii] === ext) {
  	          outputModifiers.splice(ii, 1);
  	        }
  	      }
  	    }
  	  };

  	  /**
  	   * Get all extension of THIS converter
  	   * @returns {{language: Array, output: Array}}
  	   */
  	  this.getAllExtensions = function () {
  	    return {
  	      language: langExtensions,
  	      output: outputModifiers
  	    };
  	  };

  	  /**
  	   * Get the metadata of the previously parsed document
  	   * @param raw
  	   * @returns {string|{}}
  	   */
  	  this.getMetadata = function (raw) {
  	    if (raw) {
  	      return metadata.raw;
  	    } else {
  	      return metadata.parsed;
  	    }
  	  };

  	  /**
  	   * Get the metadata format of the previously parsed document
  	   * @returns {string}
  	   */
  	  this.getMetadataFormat = function () {
  	    return metadata.format;
  	  };

  	  /**
  	   * Private: set a single key, value metadata pair
  	   * @param {string} key
  	   * @param {string} value
  	   */
  	  this._setMetadataPair = function (key, value) {
  	    metadata.parsed[key] = value;
  	  };

  	  /**
  	   * Private: set metadata format
  	   * @param {string} format
  	   */
  	  this._setMetadataFormat = function (format) {
  	    metadata.format = format;
  	  };

  	  /**
  	   * Private: set metadata raw text
  	   * @param {string} raw
  	   */
  	  this._setMetadataRaw = function (raw) {
  	    metadata.raw = raw;
  	  };
  	};

  	/**
  	 * Turn Markdown link shortcuts into XHTML <a> tags.
  	 */
  	showdown.subParser('anchors', function (text, options, globals) {

  	  text = globals.converter._dispatch('anchors.before', text, options, globals);

  	  var writeAnchorTag = function (wholeMatch, linkText, linkId, url, m5, m6, title) {
  	    if (showdown.helper.isUndefined(title)) {
  	      title = '';
  	    }
  	    linkId = linkId.toLowerCase();

  	    // Special case for explicit empty url
  	    if (wholeMatch.search(/\(<?\s*>? ?(['"].*['"])?\)$/m) > -1) {
  	      url = '';
  	    } else if (!url) {
  	      if (!linkId) {
  	        // lower-case and turn embedded newlines into spaces
  	        linkId = linkText.toLowerCase().replace(/ ?\n/g, ' ');
  	      }
  	      url = '#' + linkId;

  	      if (!showdown.helper.isUndefined(globals.gUrls[linkId])) {
  	        url = globals.gUrls[linkId];
  	        if (!showdown.helper.isUndefined(globals.gTitles[linkId])) {
  	          title = globals.gTitles[linkId];
  	        }
  	      } else {
  	        return wholeMatch;
  	      }
  	    }

  	    //url = showdown.helper.escapeCharacters(url, '*_', false); // replaced line to improve performance
  	    url = url.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);

  	    var result = '<a href="' + url + '"';

  	    if (title !== '' && title !== null) {
  	      title = title.replace(/"/g, '&quot;');
  	      //title = showdown.helper.escapeCharacters(title, '*_', false); // replaced line to improve performance
  	      title = title.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);
  	      result += ' title="' + title + '"';
  	    }

  	    // optionLinksInNewWindow only applies
  	    // to external links. Hash links (#) open in same page
  	    if (options.openLinksInNewWindow && !/^#/.test(url)) {
  	      // escaped _
  	      result += ' rel="noopener noreferrer" target="¨E95Eblank"';
  	    }

  	    result += '>' + linkText + '</a>';

  	    return result;
  	  };

  	  // First, handle reference-style links: [link text] [id]
  	  text = text.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g, writeAnchorTag);

  	  // Next, inline-style links: [link text](url "optional title")
  	  // cases with crazy urls like ./image/cat1).png
  	  text = text.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,
  	    writeAnchorTag);

  	  // normal cases
  	  text = text.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,
  	    writeAnchorTag);

  	  // handle reference-style shortcuts: [link text]
  	  // These must come last in case you've also got [link test][1]
  	  // or [link test](/foo)
  	  text = text.replace(/\[([^\[\]]+)]()()()()()/g, writeAnchorTag);

  	  // Lastly handle GithubMentions if option is enabled
  	  if (options.ghMentions) {
  	    text = text.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi, function (wm, st, escape, mentions, username) {
  	      if (escape === '\\') {
  	        return st + mentions;
  	      }

  	      //check if options.ghMentionsLink is a string
  	      if (!showdown.helper.isString(options.ghMentionsLink)) {
  	        throw new Error('ghMentionsLink option must be a string');
  	      }
  	      var lnk = options.ghMentionsLink.replace(/\{u}/g, username),
  	          target = '';
  	      if (options.openLinksInNewWindow) {
  	        target = ' rel="noopener noreferrer" target="¨E95Eblank"';
  	      }
  	      return st + '<a href="' + lnk + '"' + target + '>' + mentions + '</a>';
  	    });
  	  }

  	  text = globals.converter._dispatch('anchors.after', text, options, globals);
  	  return text;
  	});

  	// url allowed chars [a-z\d_.~:/?#[]@!$&'()*+,;=-]

  	var simpleURLRegex  = /([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,
  	    simpleURLRegex2 = /([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,
  	    delimUrlRegex   = /()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,
  	    simpleMailRegex = /(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,
  	    delimMailRegex  = /<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,

  	    replaceLink = function (options) {
  	      return function (wm, leadingMagicChars, link, m2, m3, trailingPunctuation, trailingMagicChars) {
  	        link = link.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);
  	        var lnkTxt = link,
  	            append = '',
  	            target = '',
  	            lmc    = leadingMagicChars || '',
  	            tmc    = trailingMagicChars || '';
  	        if (/^www\./i.test(link)) {
  	          link = link.replace(/^www\./i, 'http://www.');
  	        }
  	        if (options.excludeTrailingPunctuationFromURLs && trailingPunctuation) {
  	          append = trailingPunctuation;
  	        }
  	        if (options.openLinksInNewWindow) {
  	          target = ' rel="noopener noreferrer" target="¨E95Eblank"';
  	        }
  	        return lmc + '<a href="' + link + '"' + target + '>' + lnkTxt + '</a>' + append + tmc;
  	      };
  	    },

  	    replaceMail = function (options, globals) {
  	      return function (wholeMatch, b, mail) {
  	        var href = 'mailto:';
  	        b = b || '';
  	        mail = showdown.subParser('unescapeSpecialChars')(mail, options, globals);
  	        if (options.encodeEmails) {
  	          href = showdown.helper.encodeEmailAddress(href + mail);
  	          mail = showdown.helper.encodeEmailAddress(mail);
  	        } else {
  	          href = href + mail;
  	        }
  	        return b + '<a href="' + href + '">' + mail + '</a>';
  	      };
  	    };

  	showdown.subParser('autoLinks', function (text, options, globals) {

  	  text = globals.converter._dispatch('autoLinks.before', text, options, globals);

  	  text = text.replace(delimUrlRegex, replaceLink(options));
  	  text = text.replace(delimMailRegex, replaceMail(options, globals));

  	  text = globals.converter._dispatch('autoLinks.after', text, options, globals);

  	  return text;
  	});

  	showdown.subParser('simplifiedAutoLinks', function (text, options, globals) {

  	  if (!options.simplifiedAutoLink) {
  	    return text;
  	  }

  	  text = globals.converter._dispatch('simplifiedAutoLinks.before', text, options, globals);

  	  if (options.excludeTrailingPunctuationFromURLs) {
  	    text = text.replace(simpleURLRegex2, replaceLink(options));
  	  } else {
  	    text = text.replace(simpleURLRegex, replaceLink(options));
  	  }
  	  text = text.replace(simpleMailRegex, replaceMail(options, globals));

  	  text = globals.converter._dispatch('simplifiedAutoLinks.after', text, options, globals);

  	  return text;
  	});

  	/**
  	 * These are all the transformations that form block-level
  	 * tags like paragraphs, headers, and list items.
  	 */
  	showdown.subParser('blockGamut', function (text, options, globals) {

  	  text = globals.converter._dispatch('blockGamut.before', text, options, globals);

  	  // we parse blockquotes first so that we can have headings and hrs
  	  // inside blockquotes
  	  text = showdown.subParser('blockQuotes')(text, options, globals);
  	  text = showdown.subParser('headers')(text, options, globals);

  	  // Do Horizontal Rules:
  	  text = showdown.subParser('horizontalRule')(text, options, globals);

  	  text = showdown.subParser('lists')(text, options, globals);
  	  text = showdown.subParser('codeBlocks')(text, options, globals);
  	  text = showdown.subParser('tables')(text, options, globals);

  	  // We already ran _HashHTMLBlocks() before, in Markdown(), but that
  	  // was to escape raw HTML in the original Markdown source. This time,
  	  // we're escaping the markup we've just created, so that we don't wrap
  	  // <p> tags around block-level tags.
  	  text = showdown.subParser('hashHTMLBlocks')(text, options, globals);
  	  text = showdown.subParser('paragraphs')(text, options, globals);

  	  text = globals.converter._dispatch('blockGamut.after', text, options, globals);

  	  return text;
  	});

  	showdown.subParser('blockQuotes', function (text, options, globals) {

  	  text = globals.converter._dispatch('blockQuotes.before', text, options, globals);

  	  // add a couple extra lines after the text and endtext mark
  	  text = text + '\n\n';

  	  var rgx = /(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;

  	  if (options.splitAdjacentBlockquotes) {
  	    rgx = /^ {0,3}>[\s\S]*?(?:\n\n)/gm;
  	  }

  	  text = text.replace(rgx, function (bq) {
  	    // attacklab: hack around Konqueror 3.5.4 bug:
  	    // "----------bug".replace(/^-/g,"") == "bug"
  	    bq = bq.replace(/^[ \t]*>[ \t]?/gm, ''); // trim one level of quoting

  	    // attacklab: clean up hack
  	    bq = bq.replace(/¨0/g, '');

  	    bq = bq.replace(/^[ \t]+$/gm, ''); // trim whitespace-only lines
  	    bq = showdown.subParser('githubCodeBlocks')(bq, options, globals);
  	    bq = showdown.subParser('blockGamut')(bq, options, globals); // recurse

  	    bq = bq.replace(/(^|\n)/g, '$1  ');
  	    // These leading spaces screw with <pre> content, so we need to fix that:
  	    bq = bq.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm, function (wholeMatch, m1) {
  	      var pre = m1;
  	      // attacklab: hack around Konqueror 3.5.4 bug:
  	      pre = pre.replace(/^  /mg, '¨0');
  	      pre = pre.replace(/¨0/g, '');
  	      return pre;
  	    });

  	    return showdown.subParser('hashBlock')('<blockquote>\n' + bq + '\n</blockquote>', options, globals);
  	  });

  	  text = globals.converter._dispatch('blockQuotes.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Process Markdown `<pre><code>` blocks.
  	 */
  	showdown.subParser('codeBlocks', function (text, options, globals) {

  	  text = globals.converter._dispatch('codeBlocks.before', text, options, globals);

  	  // sentinel workarounds for lack of \A and \Z, safari\khtml bug
  	  text += '¨0';

  	  var pattern = /(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g;
  	  text = text.replace(pattern, function (wholeMatch, m1, m2) {
  	    var codeblock = m1,
  	        nextChar = m2,
  	        end = '\n';

  	    codeblock = showdown.subParser('outdent')(codeblock, options, globals);
  	    codeblock = showdown.subParser('encodeCode')(codeblock, options, globals);
  	    codeblock = showdown.subParser('detab')(codeblock, options, globals);
  	    codeblock = codeblock.replace(/^\n+/g, ''); // trim leading newlines
  	    codeblock = codeblock.replace(/\n+$/g, ''); // trim trailing newlines

  	    if (options.omitExtraWLInCodeBlocks) {
  	      end = '';
  	    }

  	    codeblock = '<pre><code>' + codeblock + end + '</code></pre>';

  	    return showdown.subParser('hashBlock')(codeblock, options, globals) + nextChar;
  	  });

  	  // strip sentinel
  	  text = text.replace(/¨0/, '');

  	  text = globals.converter._dispatch('codeBlocks.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 *
  	 *   *  Backtick quotes are used for <code></code> spans.
  	 *
  	 *   *  You can use multiple backticks as the delimiters if you want to
  	 *     include literal backticks in the code span. So, this input:
  	 *
  	 *         Just type ``foo `bar` baz`` at the prompt.
  	 *
  	 *       Will translate to:
  	 *
  	 *         <p>Just type <code>foo `bar` baz</code> at the prompt.</p>
  	 *
  	 *    There's no arbitrary limit to the number of backticks you
  	 *    can use as delimters. If you need three consecutive backticks
  	 *    in your code, use four for delimiters, etc.
  	 *
  	 *  *  You can use spaces to get literal backticks at the edges:
  	 *
  	 *         ... type `` `bar` `` ...
  	 *
  	 *       Turns to:
  	 *
  	 *         ... type <code>`bar`</code> ...
  	 */
  	showdown.subParser('codeSpans', function (text, options, globals) {

  	  text = globals.converter._dispatch('codeSpans.before', text, options, globals);

  	  if (typeof (text) === 'undefined') {
  	    text = '';
  	  }
  	  text = text.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,
  	    function (wholeMatch, m1, m2, m3) {
  	      var c = m3;
  	      c = c.replace(/^([ \t]*)/g, '');	// leading whitespace
  	      c = c.replace(/[ \t]*$/g, '');	// trailing whitespace
  	      c = showdown.subParser('encodeCode')(c, options, globals);
  	      c = m1 + '<code>' + c + '</code>';
  	      c = showdown.subParser('hashHTMLSpans')(c, options, globals);
  	      return c;
  	    }
  	  );

  	  text = globals.converter._dispatch('codeSpans.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Create a full HTML document from the processed markdown
  	 */
  	showdown.subParser('completeHTMLDocument', function (text, options, globals) {

  	  if (!options.completeHTMLDocument) {
  	    return text;
  	  }

  	  text = globals.converter._dispatch('completeHTMLDocument.before', text, options, globals);

  	  var doctype = 'html',
  	      doctypeParsed = '<!DOCTYPE HTML>\n',
  	      title = '',
  	      charset = '<meta charset="utf-8">\n',
  	      lang = '',
  	      metadata = '';

  	  if (typeof globals.metadata.parsed.doctype !== 'undefined') {
  	    doctypeParsed = '<!DOCTYPE ' +  globals.metadata.parsed.doctype + '>\n';
  	    doctype = globals.metadata.parsed.doctype.toString().toLowerCase();
  	    if (doctype === 'html' || doctype === 'html5') {
  	      charset = '<meta charset="utf-8">';
  	    }
  	  }

  	  for (var meta in globals.metadata.parsed) {
  	    if (globals.metadata.parsed.hasOwnProperty(meta)) {
  	      switch (meta.toLowerCase()) {
  	        case 'doctype':
  	          break;

  	        case 'title':
  	          title = '<title>' +  globals.metadata.parsed.title + '</title>\n';
  	          break;

  	        case 'charset':
  	          if (doctype === 'html' || doctype === 'html5') {
  	            charset = '<meta charset="' + globals.metadata.parsed.charset + '">\n';
  	          } else {
  	            charset = '<meta name="charset" content="' + globals.metadata.parsed.charset + '">\n';
  	          }
  	          break;

  	        case 'language':
  	        case 'lang':
  	          lang = ' lang="' + globals.metadata.parsed[meta] + '"';
  	          metadata += '<meta name="' + meta + '" content="' + globals.metadata.parsed[meta] + '">\n';
  	          break;

  	        default:
  	          metadata += '<meta name="' + meta + '" content="' + globals.metadata.parsed[meta] + '">\n';
  	      }
  	    }
  	  }

  	  text = doctypeParsed + '<html' + lang + '>\n<head>\n' + title + charset + metadata + '</head>\n<body>\n' + text.trim() + '\n</body>\n</html>';

  	  text = globals.converter._dispatch('completeHTMLDocument.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Convert all tabs to spaces
  	 */
  	showdown.subParser('detab', function (text, options, globals) {
  	  text = globals.converter._dispatch('detab.before', text, options, globals);

  	  // expand first n-1 tabs
  	  text = text.replace(/\t(?=\t)/g, '    '); // g_tab_width

  	  // replace the nth with two sentinels
  	  text = text.replace(/\t/g, '¨A¨B');

  	  // use the sentinel to anchor our regex so it doesn't explode
  	  text = text.replace(/¨B(.+?)¨A/g, function (wholeMatch, m1) {
  	    var leadingText = m1,
  	        numSpaces = 4 - leadingText.length % 4;  // g_tab_width

  	    // there *must* be a better way to do this:
  	    for (var i = 0; i < numSpaces; i++) {
  	      leadingText += ' ';
  	    }

  	    return leadingText;
  	  });

  	  // clean up sentinels
  	  text = text.replace(/¨A/g, '    ');  // g_tab_width
  	  text = text.replace(/¨B/g, '');

  	  text = globals.converter._dispatch('detab.after', text, options, globals);
  	  return text;
  	});

  	showdown.subParser('ellipsis', function (text, options, globals) {

  	  if (!options.ellipsis) {
  	    return text;
  	  }

  	  text = globals.converter._dispatch('ellipsis.before', text, options, globals);

  	  text = text.replace(/\.\.\./g, '…');

  	  text = globals.converter._dispatch('ellipsis.after', text, options, globals);

  	  return text;
  	});

  	/**
  	 * Turn emoji codes into emojis
  	 *
  	 * List of supported emojis: https://github.com/showdownjs/showdown/wiki/Emojis
  	 */
  	showdown.subParser('emoji', function (text, options, globals) {

  	  if (!options.emoji) {
  	    return text;
  	  }

  	  text = globals.converter._dispatch('emoji.before', text, options, globals);

  	  var emojiRgx = /:([\S]+?):/g;

  	  text = text.replace(emojiRgx, function (wm, emojiCode) {
  	    if (showdown.helper.emojis.hasOwnProperty(emojiCode)) {
  	      return showdown.helper.emojis[emojiCode];
  	    }
  	    return wm;
  	  });

  	  text = globals.converter._dispatch('emoji.after', text, options, globals);

  	  return text;
  	});

  	/**
  	 * Smart processing for ampersands and angle brackets that need to be encoded.
  	 */
  	showdown.subParser('encodeAmpsAndAngles', function (text, options, globals) {
  	  text = globals.converter._dispatch('encodeAmpsAndAngles.before', text, options, globals);

  	  // Ampersand-encoding based entirely on Nat Irons's Amputator MT plugin:
  	  // http://bumppo.net/projects/amputator/
  	  text = text.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g, '&amp;');

  	  // Encode naked <'s
  	  text = text.replace(/<(?![a-z\/?$!])/gi, '&lt;');

  	  // Encode <
  	  text = text.replace(/</g, '&lt;');

  	  // Encode >
  	  text = text.replace(/>/g, '&gt;');

  	  text = globals.converter._dispatch('encodeAmpsAndAngles.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Returns the string, with after processing the following backslash escape sequences.
  	 *
  	 * attacklab: The polite way to do this is with the new escapeCharacters() function:
  	 *
  	 *    text = escapeCharacters(text,"\\",true);
  	 *    text = escapeCharacters(text,"`*_{}[]()>#+-.!",true);
  	 *
  	 * ...but we're sidestepping its use of the (slow) RegExp constructor
  	 * as an optimization for Firefox.  This function gets called a LOT.
  	 */
  	showdown.subParser('encodeBackslashEscapes', function (text, options, globals) {
  	  text = globals.converter._dispatch('encodeBackslashEscapes.before', text, options, globals);

  	  text = text.replace(/\\(\\)/g, showdown.helper.escapeCharactersCallback);
  	  text = text.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g, showdown.helper.escapeCharactersCallback);

  	  text = globals.converter._dispatch('encodeBackslashEscapes.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Encode/escape certain characters inside Markdown code runs.
  	 * The point is that in code, these characters are literals,
  	 * and lose their special Markdown meanings.
  	 */
  	showdown.subParser('encodeCode', function (text, options, globals) {

  	  text = globals.converter._dispatch('encodeCode.before', text, options, globals);

  	  // Encode all ampersands; HTML entities are not
  	  // entities within a Markdown code span.
  	  text = text
  	    .replace(/&/g, '&amp;')
  	  // Do the angle bracket song and dance:
  	    .replace(/</g, '&lt;')
  	    .replace(/>/g, '&gt;')
  	  // Now, escape characters that are magic in Markdown:
  	    .replace(/([*_{}\[\]\\=~-])/g, showdown.helper.escapeCharactersCallback);

  	  text = globals.converter._dispatch('encodeCode.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Within tags -- meaning between < and > -- encode [\ ` * _ ~ =] so they
  	 * don't conflict with their use in Markdown for code, italics and strong.
  	 */
  	showdown.subParser('escapeSpecialCharsWithinTagAttributes', function (text, options, globals) {
  	  text = globals.converter._dispatch('escapeSpecialCharsWithinTagAttributes.before', text, options, globals);

  	  // Build a regex to find HTML tags.
  	  var tags     = /<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,
  	      comments = /<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;

  	  text = text.replace(tags, function (wholeMatch) {
  	    return wholeMatch
  	      .replace(/(.)<\/?code>(?=.)/g, '$1`')
  	      .replace(/([\\`*_~=|])/g, showdown.helper.escapeCharactersCallback);
  	  });

  	  text = text.replace(comments, function (wholeMatch) {
  	    return wholeMatch
  	      .replace(/([\\`*_~=|])/g, showdown.helper.escapeCharactersCallback);
  	  });

  	  text = globals.converter._dispatch('escapeSpecialCharsWithinTagAttributes.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Handle github codeblocks prior to running HashHTML so that
  	 * HTML contained within the codeblock gets escaped properly
  	 * Example:
  	 * ```ruby
  	 *     def hello_world(x)
  	 *       puts "Hello, #{x}"
  	 *     end
  	 * ```
  	 */
  	showdown.subParser('githubCodeBlocks', function (text, options, globals) {

  	  // early exit if option is not enabled
  	  if (!options.ghCodeBlocks) {
  	    return text;
  	  }

  	  text = globals.converter._dispatch('githubCodeBlocks.before', text, options, globals);

  	  text += '¨0';

  	  text = text.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g, function (wholeMatch, delim, language, codeblock) {
  	    var end = (options.omitExtraWLInCodeBlocks) ? '' : '\n';

  	    // First parse the github code block
  	    codeblock = showdown.subParser('encodeCode')(codeblock, options, globals);
  	    codeblock = showdown.subParser('detab')(codeblock, options, globals);
  	    codeblock = codeblock.replace(/^\n+/g, ''); // trim leading newlines
  	    codeblock = codeblock.replace(/\n+$/g, ''); // trim trailing whitespace

  	    codeblock = '<pre><code' + (language ? ' class="' + language + ' language-' + language + '"' : '') + '>' + codeblock + end + '</code></pre>';

  	    codeblock = showdown.subParser('hashBlock')(codeblock, options, globals);

  	    // Since GHCodeblocks can be false positives, we need to
  	    // store the primitive text and the parsed text in a global var,
  	    // and then return a token
  	    return '\n\n¨G' + (globals.ghCodeBlocks.push({text: wholeMatch, codeblock: codeblock}) - 1) + 'G\n\n';
  	  });

  	  // attacklab: strip sentinel
  	  text = text.replace(/¨0/, '');

  	  return globals.converter._dispatch('githubCodeBlocks.after', text, options, globals);
  	});

  	showdown.subParser('hashBlock', function (text, options, globals) {
  	  text = globals.converter._dispatch('hashBlock.before', text, options, globals);
  	  text = text.replace(/(^\n+|\n+$)/g, '');
  	  text = '\n\n¨K' + (globals.gHtmlBlocks.push(text) - 1) + 'K\n\n';
  	  text = globals.converter._dispatch('hashBlock.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Hash and escape <code> elements that should not be parsed as markdown
  	 */
  	showdown.subParser('hashCodeTags', function (text, options, globals) {
  	  text = globals.converter._dispatch('hashCodeTags.before', text, options, globals);

  	  var repFunc = function (wholeMatch, match, left, right) {
  	    var codeblock = left + showdown.subParser('encodeCode')(match, options, globals) + right;
  	    return '¨C' + (globals.gHtmlSpans.push(codeblock) - 1) + 'C';
  	  };

  	  // Hash naked <code>
  	  text = showdown.helper.replaceRecursiveRegExp(text, repFunc, '<code\\b[^>]*>', '</code>', 'gim');

  	  text = globals.converter._dispatch('hashCodeTags.after', text, options, globals);
  	  return text;
  	});

  	showdown.subParser('hashElement', function (text, options, globals) {

  	  return function (wholeMatch, m1) {
  	    var blockText = m1;

  	    // Undo double lines
  	    blockText = blockText.replace(/\n\n/g, '\n');
  	    blockText = blockText.replace(/^\n/, '');

  	    // strip trailing blank lines
  	    blockText = blockText.replace(/\n+$/g, '');

  	    // Replace the element text with a marker ("¨KxK" where x is its key)
  	    blockText = '\n\n¨K' + (globals.gHtmlBlocks.push(blockText) - 1) + 'K\n\n';

  	    return blockText;
  	  };
  	});

  	showdown.subParser('hashHTMLBlocks', function (text, options, globals) {
  	  text = globals.converter._dispatch('hashHTMLBlocks.before', text, options, globals);

  	  var blockTags = [
  	        'pre',
  	        'div',
  	        'h1',
  	        'h2',
  	        'h3',
  	        'h4',
  	        'h5',
  	        'h6',
  	        'blockquote',
  	        'table',
  	        'dl',
  	        'ol',
  	        'ul',
  	        'script',
  	        'noscript',
  	        'form',
  	        'fieldset',
  	        'iframe',
  	        'math',
  	        'style',
  	        'section',
  	        'header',
  	        'footer',
  	        'nav',
  	        'article',
  	        'aside',
  	        'address',
  	        'audio',
  	        'canvas',
  	        'figure',
  	        'hgroup',
  	        'output',
  	        'video',
  	        'p'
  	      ],
  	      repFunc = function (wholeMatch, match, left, right) {
  	        var txt = wholeMatch;
  	        // check if this html element is marked as markdown
  	        // if so, it's contents should be parsed as markdown
  	        if (left.search(/\bmarkdown\b/) !== -1) {
  	          txt = left + globals.converter.makeHtml(match) + right;
  	        }
  	        return '\n\n¨K' + (globals.gHtmlBlocks.push(txt) - 1) + 'K\n\n';
  	      };

  	  if (options.backslashEscapesHTMLTags) {
  	    // encode backslash escaped HTML tags
  	    text = text.replace(/\\<(\/?[^>]+?)>/g, function (wm, inside) {
  	      return '&lt;' + inside + '&gt;';
  	    });
  	  }

  	  // hash HTML Blocks
  	  for (var i = 0; i < blockTags.length; ++i) {

  	    var opTagPos,
  	        rgx1     = new RegExp('^ {0,3}(<' + blockTags[i] + '\\b[^>]*>)', 'im'),
  	        patLeft  = '<' + blockTags[i] + '\\b[^>]*>',
  	        patRight = '</' + blockTags[i] + '>';
  	    // 1. Look for the first position of the first opening HTML tag in the text
  	    while ((opTagPos = showdown.helper.regexIndexOf(text, rgx1)) !== -1) {

  	      // if the HTML tag is \ escaped, we need to escape it and break


  	      //2. Split the text in that position
  	      var subTexts = showdown.helper.splitAtIndex(text, opTagPos),
  	          //3. Match recursively
  	          newSubText1 = showdown.helper.replaceRecursiveRegExp(subTexts[1], repFunc, patLeft, patRight, 'im');

  	      // prevent an infinite loop
  	      if (newSubText1 === subTexts[1]) {
  	        break;
  	      }
  	      text = subTexts[0].concat(newSubText1);
  	    }
  	  }
  	  // HR SPECIAL CASE
  	  text = text.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,
  	    showdown.subParser('hashElement')(text, options, globals));

  	  // Special case for standalone HTML comments
  	  text = showdown.helper.replaceRecursiveRegExp(text, function (txt) {
  	    return '\n\n¨K' + (globals.gHtmlBlocks.push(txt) - 1) + 'K\n\n';
  	  }, '^ {0,3}<!--', '-->', 'gm');

  	  // PHP and ASP-style processor instructions (<?...?> and <%...%>)
  	  text = text.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,
  	    showdown.subParser('hashElement')(text, options, globals));

  	  text = globals.converter._dispatch('hashHTMLBlocks.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Hash span elements that should not be parsed as markdown
  	 */
  	showdown.subParser('hashHTMLSpans', function (text, options, globals) {
  	  text = globals.converter._dispatch('hashHTMLSpans.before', text, options, globals);

  	  function hashHTMLSpan (html) {
  	    return '¨C' + (globals.gHtmlSpans.push(html) - 1) + 'C';
  	  }

  	  // Hash Self Closing tags
  	  text = text.replace(/<[^>]+?\/>/gi, function (wm) {
  	    return hashHTMLSpan(wm);
  	  });

  	  // Hash tags without properties
  	  text = text.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g, function (wm) {
  	    return hashHTMLSpan(wm);
  	  });

  	  // Hash tags with properties
  	  text = text.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g, function (wm) {
  	    return hashHTMLSpan(wm);
  	  });

  	  // Hash self closing tags without />
  	  text = text.replace(/<[^>]+?>/gi, function (wm) {
  	    return hashHTMLSpan(wm);
  	  });

  	  /*showdown.helper.matchRecursiveRegExp(text, '<code\\b[^>]*>', '</code>', 'gi');*/

  	  text = globals.converter._dispatch('hashHTMLSpans.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Unhash HTML spans
  	 */
  	showdown.subParser('unhashHTMLSpans', function (text, options, globals) {
  	  text = globals.converter._dispatch('unhashHTMLSpans.before', text, options, globals);

  	  for (var i = 0; i < globals.gHtmlSpans.length; ++i) {
  	    var repText = globals.gHtmlSpans[i],
  	        // limiter to prevent infinite loop (assume 10 as limit for recurse)
  	        limit = 0;

  	    while (/¨C(\d+)C/.test(repText)) {
  	      var num = RegExp.$1;
  	      repText = repText.replace('¨C' + num + 'C', globals.gHtmlSpans[num]);
  	      if (limit === 10) {
  	        console.error('maximum nesting of 10 spans reached!!!');
  	        break;
  	      }
  	      ++limit;
  	    }
  	    text = text.replace('¨C' + i + 'C', repText);
  	  }

  	  text = globals.converter._dispatch('unhashHTMLSpans.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Hash and escape <pre><code> elements that should not be parsed as markdown
  	 */
  	showdown.subParser('hashPreCodeTags', function (text, options, globals) {
  	  text = globals.converter._dispatch('hashPreCodeTags.before', text, options, globals);

  	  var repFunc = function (wholeMatch, match, left, right) {
  	    // encode html entities
  	    var codeblock = left + showdown.subParser('encodeCode')(match, options, globals) + right;
  	    return '\n\n¨G' + (globals.ghCodeBlocks.push({text: wholeMatch, codeblock: codeblock}) - 1) + 'G\n\n';
  	  };

  	  // Hash <pre><code>
  	  text = showdown.helper.replaceRecursiveRegExp(text, repFunc, '^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>', '^ {0,3}</code>\\s*</pre>', 'gim');

  	  text = globals.converter._dispatch('hashPreCodeTags.after', text, options, globals);
  	  return text;
  	});

  	showdown.subParser('headers', function (text, options, globals) {

  	  text = globals.converter._dispatch('headers.before', text, options, globals);

  	  var headerLevelStart = (isNaN(parseInt(options.headerLevelStart))) ? 1 : parseInt(options.headerLevelStart),

  	      // Set text-style headers:
  	      //	Header 1
  	      //	========
  	      //
  	      //	Header 2
  	      //	--------
  	      //
  	      setextRegexH1 = (options.smoothLivePreview) ? /^(.+)[ \t]*\n={2,}[ \t]*\n+/gm : /^(.+)[ \t]*\n=+[ \t]*\n+/gm,
  	      setextRegexH2 = (options.smoothLivePreview) ? /^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm : /^(.+)[ \t]*\n-+[ \t]*\n+/gm;

  	  text = text.replace(setextRegexH1, function (wholeMatch, m1) {

  	    var spanGamut = showdown.subParser('spanGamut')(m1, options, globals),
  	        hID = (options.noHeaderId) ? '' : ' id="' + headerId(m1) + '"',
  	        hLevel = headerLevelStart,
  	        hashBlock = '<h' + hLevel + hID + '>' + spanGamut + '</h' + hLevel + '>';
  	    return showdown.subParser('hashBlock')(hashBlock, options, globals);
  	  });

  	  text = text.replace(setextRegexH2, function (matchFound, m1) {
  	    var spanGamut = showdown.subParser('spanGamut')(m1, options, globals),
  	        hID = (options.noHeaderId) ? '' : ' id="' + headerId(m1) + '"',
  	        hLevel = headerLevelStart + 1,
  	        hashBlock = '<h' + hLevel + hID + '>' + spanGamut + '</h' + hLevel + '>';
  	    return showdown.subParser('hashBlock')(hashBlock, options, globals);
  	  });

  	  // atx-style headers:
  	  //  # Header 1
  	  //  ## Header 2
  	  //  ## Header 2 with closing hashes ##
  	  //  ...
  	  //  ###### Header 6
  	  //
  	  var atxStyle = (options.requireSpaceBeforeHeadingText) ? /^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm : /^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;

  	  text = text.replace(atxStyle, function (wholeMatch, m1, m2) {
  	    var hText = m2;
  	    if (options.customizedHeaderId) {
  	      hText = m2.replace(/\s?\{([^{]+?)}\s*$/, '');
  	    }

  	    var span = showdown.subParser('spanGamut')(hText, options, globals),
  	        hID = (options.noHeaderId) ? '' : ' id="' + headerId(m2) + '"',
  	        hLevel = headerLevelStart - 1 + m1.length,
  	        header = '<h' + hLevel + hID + '>' + span + '</h' + hLevel + '>';

  	    return showdown.subParser('hashBlock')(header, options, globals);
  	  });

  	  function headerId (m) {
  	    var title,
  	        prefix;

  	    // It is separate from other options to allow combining prefix and customized
  	    if (options.customizedHeaderId) {
  	      var match = m.match(/\{([^{]+?)}\s*$/);
  	      if (match && match[1]) {
  	        m = match[1];
  	      }
  	    }

  	    title = m;

  	    // Prefix id to prevent causing inadvertent pre-existing style matches.
  	    if (showdown.helper.isString(options.prefixHeaderId)) {
  	      prefix = options.prefixHeaderId;
  	    } else if (options.prefixHeaderId === true) {
  	      prefix = 'section-';
  	    } else {
  	      prefix = '';
  	    }

  	    if (!options.rawPrefixHeaderId) {
  	      title = prefix + title;
  	    }

  	    if (options.ghCompatibleHeaderId) {
  	      title = title
  	        .replace(/ /g, '-')
  	        // replace previously escaped chars (&, ¨ and $)
  	        .replace(/&amp;/g, '')
  	        .replace(/¨T/g, '')
  	        .replace(/¨D/g, '')
  	        // replace rest of the chars (&~$ are repeated as they might have been escaped)
  	        // borrowed from github's redcarpet (some they should produce similar results)
  	        .replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g, '')
  	        .toLowerCase();
  	    } else if (options.rawHeaderId) {
  	      title = title
  	        .replace(/ /g, '-')
  	        // replace previously escaped chars (&, ¨ and $)
  	        .replace(/&amp;/g, '&')
  	        .replace(/¨T/g, '¨')
  	        .replace(/¨D/g, '$')
  	        // replace " and '
  	        .replace(/["']/g, '-')
  	        .toLowerCase();
  	    } else {
  	      title = title
  	        .replace(/[^\w]/g, '')
  	        .toLowerCase();
  	    }

  	    if (options.rawPrefixHeaderId) {
  	      title = prefix + title;
  	    }

  	    if (globals.hashLinkCounts[title]) {
  	      title = title + '-' + (globals.hashLinkCounts[title]++);
  	    } else {
  	      globals.hashLinkCounts[title] = 1;
  	    }
  	    return title;
  	  }

  	  text = globals.converter._dispatch('headers.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Turn Markdown link shortcuts into XHTML <a> tags.
  	 */
  	showdown.subParser('horizontalRule', function (text, options, globals) {
  	  text = globals.converter._dispatch('horizontalRule.before', text, options, globals);

  	  var key = showdown.subParser('hashBlock')('<hr />', options, globals);
  	  text = text.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm, key);
  	  text = text.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm, key);
  	  text = text.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm, key);

  	  text = globals.converter._dispatch('horizontalRule.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Turn Markdown image shortcuts into <img> tags.
  	 */
  	showdown.subParser('images', function (text, options, globals) {

  	  text = globals.converter._dispatch('images.before', text, options, globals);

  	  var inlineRegExp      = /!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,
  	      crazyRegExp       = /!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,
  	      base64RegExp      = /!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,
  	      referenceRegExp   = /!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,
  	      refShortcutRegExp = /!\[([^\[\]]+)]()()()()()/g;

  	  function writeImageTagBase64 (wholeMatch, altText, linkId, url, width, height, m5, title) {
  	    url = url.replace(/\s/g, '');
  	    return writeImageTag (wholeMatch, altText, linkId, url, width, height, m5, title);
  	  }

  	  function writeImageTag (wholeMatch, altText, linkId, url, width, height, m5, title) {

  	    var gUrls   = globals.gUrls,
  	        gTitles = globals.gTitles,
  	        gDims   = globals.gDimensions;

  	    linkId = linkId.toLowerCase();

  	    if (!title) {
  	      title = '';
  	    }
  	    // Special case for explicit empty url
  	    if (wholeMatch.search(/\(<?\s*>? ?(['"].*['"])?\)$/m) > -1) {
  	      url = '';

  	    } else if (url === '' || url === null) {
  	      if (linkId === '' || linkId === null) {
  	        // lower-case and turn embedded newlines into spaces
  	        linkId = altText.toLowerCase().replace(/ ?\n/g, ' ');
  	      }
  	      url = '#' + linkId;

  	      if (!showdown.helper.isUndefined(gUrls[linkId])) {
  	        url = gUrls[linkId];
  	        if (!showdown.helper.isUndefined(gTitles[linkId])) {
  	          title = gTitles[linkId];
  	        }
  	        if (!showdown.helper.isUndefined(gDims[linkId])) {
  	          width = gDims[linkId].width;
  	          height = gDims[linkId].height;
  	        }
  	      } else {
  	        return wholeMatch;
  	      }
  	    }

  	    altText = altText
  	      .replace(/"/g, '&quot;')
  	    //altText = showdown.helper.escapeCharacters(altText, '*_', false);
  	      .replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);
  	    //url = showdown.helper.escapeCharacters(url, '*_', false);
  	    url = url.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);
  	    var result = '<img src="' + url + '" alt="' + altText + '"';

  	    if (title && showdown.helper.isString(title)) {
  	      title = title
  	        .replace(/"/g, '&quot;')
  	      //title = showdown.helper.escapeCharacters(title, '*_', false);
  	        .replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);
  	      result += ' title="' + title + '"';
  	    }

  	    if (width && height) {
  	      width  = (width === '*') ? 'auto' : width;
  	      height = (height === '*') ? 'auto' : height;

  	      result += ' width="' + width + '"';
  	      result += ' height="' + height + '"';
  	    }

  	    result += ' />';

  	    return result;
  	  }

  	  // First, handle reference-style labeled images: ![alt text][id]
  	  text = text.replace(referenceRegExp, writeImageTag);

  	  // Next, handle inline images:  ![alt text](url =<width>x<height> "optional title")

  	  // base64 encoded images
  	  text = text.replace(base64RegExp, writeImageTagBase64);

  	  // cases with crazy urls like ./image/cat1).png
  	  text = text.replace(crazyRegExp, writeImageTag);

  	  // normal cases
  	  text = text.replace(inlineRegExp, writeImageTag);

  	  // handle reference-style shortcuts: ![img text]
  	  text = text.replace(refShortcutRegExp, writeImageTag);

  	  text = globals.converter._dispatch('images.after', text, options, globals);
  	  return text;
  	});

  	showdown.subParser('italicsAndBold', function (text, options, globals) {

  	  text = globals.converter._dispatch('italicsAndBold.before', text, options, globals);

  	  // it's faster to have 3 separate regexes for each case than have just one
  	  // because of backtracing, in some cases, it could lead to an exponential effect
  	  // called "catastrophic backtrace". Ominous!

  	  function parseInside (txt, left, right) {
  	    /*
  	    if (options.simplifiedAutoLink) {
  	      txt = showdown.subParser('simplifiedAutoLinks')(txt, options, globals);
  	    }
  	    */
  	    return left + txt + right;
  	  }

  	  // Parse underscores
  	  if (options.literalMidWordUnderscores) {
  	    text = text.replace(/\b___(\S[\s\S]*?)___\b/g, function (wm, txt) {
  	      return parseInside (txt, '<strong><em>', '</em></strong>');
  	    });
  	    text = text.replace(/\b__(\S[\s\S]*?)__\b/g, function (wm, txt) {
  	      return parseInside (txt, '<strong>', '</strong>');
  	    });
  	    text = text.replace(/\b_(\S[\s\S]*?)_\b/g, function (wm, txt) {
  	      return parseInside (txt, '<em>', '</em>');
  	    });
  	  } else {
  	    text = text.replace(/___(\S[\s\S]*?)___/g, function (wm, m) {
  	      return (/\S$/.test(m)) ? parseInside (m, '<strong><em>', '</em></strong>') : wm;
  	    });
  	    text = text.replace(/__(\S[\s\S]*?)__/g, function (wm, m) {
  	      return (/\S$/.test(m)) ? parseInside (m, '<strong>', '</strong>') : wm;
  	    });
  	    text = text.replace(/_([^\s_][\s\S]*?)_/g, function (wm, m) {
  	      // !/^_[^_]/.test(m) - test if it doesn't start with __ (since it seems redundant, we removed it)
  	      return (/\S$/.test(m)) ? parseInside (m, '<em>', '</em>') : wm;
  	    });
  	  }

  	  // Now parse asterisks
  	  if (options.literalMidWordAsterisks) {
  	    text = text.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g, function (wm, lead, txt) {
  	      return parseInside (txt, lead + '<strong><em>', '</em></strong>');
  	    });
  	    text = text.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g, function (wm, lead, txt) {
  	      return parseInside (txt, lead + '<strong>', '</strong>');
  	    });
  	    text = text.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g, function (wm, lead, txt) {
  	      return parseInside (txt, lead + '<em>', '</em>');
  	    });
  	  } else {
  	    text = text.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g, function (wm, m) {
  	      return (/\S$/.test(m)) ? parseInside (m, '<strong><em>', '</em></strong>') : wm;
  	    });
  	    text = text.replace(/\*\*(\S[\s\S]*?)\*\*/g, function (wm, m) {
  	      return (/\S$/.test(m)) ? parseInside (m, '<strong>', '</strong>') : wm;
  	    });
  	    text = text.replace(/\*([^\s*][\s\S]*?)\*/g, function (wm, m) {
  	      // !/^\*[^*]/.test(m) - test if it doesn't start with ** (since it seems redundant, we removed it)
  	      return (/\S$/.test(m)) ? parseInside (m, '<em>', '</em>') : wm;
  	    });
  	  }


  	  text = globals.converter._dispatch('italicsAndBold.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Form HTML ordered (numbered) and unordered (bulleted) lists.
  	 */
  	showdown.subParser('lists', function (text, options, globals) {

  	  /**
  	   * Process the contents of a single ordered or unordered list, splitting it
  	   * into individual list items.
  	   * @param {string} listStr
  	   * @param {boolean} trimTrailing
  	   * @returns {string}
  	   */
  	  function processListItems (listStr, trimTrailing) {
  	    // The $g_list_level global keeps track of when we're inside a list.
  	    // Each time we enter a list, we increment it; when we leave a list,
  	    // we decrement. If it's zero, we're not in a list anymore.
  	    //
  	    // We do this because when we're not inside a list, we want to treat
  	    // something like this:
  	    //
  	    //    I recommend upgrading to version
  	    //    8. Oops, now this line is treated
  	    //    as a sub-list.
  	    //
  	    // As a single paragraph, despite the fact that the second line starts
  	    // with a digit-period-space sequence.
  	    //
  	    // Whereas when we're inside a list (or sub-list), that line will be
  	    // treated as the start of a sub-list. What a kludge, huh? This is
  	    // an aspect of Markdown's syntax that's hard to parse perfectly
  	    // without resorting to mind-reading. Perhaps the solution is to
  	    // change the syntax rules such that sub-lists must start with a
  	    // starting cardinal number; e.g. "1." or "a.".
  	    globals.gListLevel++;

  	    // trim trailing blank lines:
  	    listStr = listStr.replace(/\n{2,}$/, '\n');

  	    // attacklab: add sentinel to emulate \z
  	    listStr += '¨0';

  	    var rgx = /(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,
  	        isParagraphed = (/\n[ \t]*\n(?!¨0)/.test(listStr));

  	    // Since version 1.5, nesting sublists requires 4 spaces (or 1 tab) indentation,
  	    // which is a syntax breaking change
  	    // activating this option reverts to old behavior
  	    if (options.disableForced4SpacesIndentedSublists) {
  	      rgx = /(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm;
  	    }

  	    listStr = listStr.replace(rgx, function (wholeMatch, m1, m2, m3, m4, taskbtn, checked) {
  	      checked = (checked && checked.trim() !== '');

  	      var item = showdown.subParser('outdent')(m4, options, globals),
  	          bulletStyle = '';

  	      // Support for github tasklists
  	      if (taskbtn && options.tasklists) {
  	        bulletStyle = ' class="task-list-item" style="list-style-type: none;"';
  	        item = item.replace(/^[ \t]*\[(x|X| )?]/m, function () {
  	          var otp = '<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';
  	          if (checked) {
  	            otp += ' checked';
  	          }
  	          otp += '>';
  	          return otp;
  	        });
  	      }

  	      // ISSUE #312
  	      // This input: - - - a
  	      // causes trouble to the parser, since it interprets it as:
  	      // <ul><li><li><li>a</li></li></li></ul>
  	      // instead of:
  	      // <ul><li>- - a</li></ul>
  	      // So, to prevent it, we will put a marker (¨A)in the beginning of the line
  	      // Kind of hackish/monkey patching, but seems more effective than overcomplicating the list parser
  	      item = item.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g, function (wm2) {
  	        return '¨A' + wm2;
  	      });

  	      // m1 - Leading line or
  	      // Has a double return (multi paragraph) or
  	      // Has sublist
  	      if (m1 || (item.search(/\n{2,}/) > -1)) {
  	        item = showdown.subParser('githubCodeBlocks')(item, options, globals);
  	        item = showdown.subParser('blockGamut')(item, options, globals);
  	      } else {
  	        // Recursion for sub-lists:
  	        item = showdown.subParser('lists')(item, options, globals);
  	        item = item.replace(/\n$/, ''); // chomp(item)
  	        item = showdown.subParser('hashHTMLBlocks')(item, options, globals);

  	        // Colapse double linebreaks
  	        item = item.replace(/\n\n+/g, '\n\n');
  	        if (isParagraphed) {
  	          item = showdown.subParser('paragraphs')(item, options, globals);
  	        } else {
  	          item = showdown.subParser('spanGamut')(item, options, globals);
  	        }
  	      }

  	      // now we need to remove the marker (¨A)
  	      item = item.replace('¨A', '');
  	      // we can finally wrap the line in list item tags
  	      item =  '<li' + bulletStyle + '>' + item + '</li>\n';

  	      return item;
  	    });

  	    // attacklab: strip sentinel
  	    listStr = listStr.replace(/¨0/g, '');

  	    globals.gListLevel--;

  	    if (trimTrailing) {
  	      listStr = listStr.replace(/\s+$/, '');
  	    }

  	    return listStr;
  	  }

  	  function styleStartNumber (list, listType) {
  	    // check if ol and starts by a number different than 1
  	    if (listType === 'ol') {
  	      var res = list.match(/^ *(\d+)\./);
  	      if (res && res[1] !== '1') {
  	        return ' start="' + res[1] + '"';
  	      }
  	    }
  	    return '';
  	  }

  	  /**
  	   * Check and parse consecutive lists (better fix for issue #142)
  	   * @param {string} list
  	   * @param {string} listType
  	   * @param {boolean} trimTrailing
  	   * @returns {string}
  	   */
  	  function parseConsecutiveLists (list, listType, trimTrailing) {
  	    // check if we caught 2 or more consecutive lists by mistake
  	    // we use the counterRgx, meaning if listType is UL we look for OL and vice versa
  	    var olRgx = (options.disableForced4SpacesIndentedSublists) ? /^ ?\d+\.[ \t]/gm : /^ {0,3}\d+\.[ \t]/gm,
  	        ulRgx = (options.disableForced4SpacesIndentedSublists) ? /^ ?[*+-][ \t]/gm : /^ {0,3}[*+-][ \t]/gm,
  	        counterRxg = (listType === 'ul') ? olRgx : ulRgx,
  	        result = '';

  	    if (list.search(counterRxg) !== -1) {
  	      (function parseCL (txt) {
  	        var pos = txt.search(counterRxg),
  	            style = styleStartNumber(list, listType);
  	        if (pos !== -1) {
  	          // slice
  	          result += '\n\n<' + listType + style + '>\n' + processListItems(txt.slice(0, pos), !!trimTrailing) + '</' + listType + '>\n';

  	          // invert counterType and listType
  	          listType = (listType === 'ul') ? 'ol' : 'ul';
  	          counterRxg = (listType === 'ul') ? olRgx : ulRgx;

  	          //recurse
  	          parseCL(txt.slice(pos));
  	        } else {
  	          result += '\n\n<' + listType + style + '>\n' + processListItems(txt, !!trimTrailing) + '</' + listType + '>\n';
  	        }
  	      })(list);
  	    } else {
  	      var style = styleStartNumber(list, listType);
  	      result = '\n\n<' + listType + style + '>\n' + processListItems(list, !!trimTrailing) + '</' + listType + '>\n';
  	    }

  	    return result;
  	  }

  	  /** Start of list parsing **/
  	  text = globals.converter._dispatch('lists.before', text, options, globals);
  	  // add sentinel to hack around khtml/safari bug:
  	  // http://bugs.webkit.org/show_bug.cgi?id=11231
  	  text += '¨0';

  	  if (globals.gListLevel) {
  	    text = text.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,
  	      function (wholeMatch, list, m2) {
  	        var listType = (m2.search(/[*+-]/g) > -1) ? 'ul' : 'ol';
  	        return parseConsecutiveLists(list, listType, true);
  	      }
  	    );
  	  } else {
  	    text = text.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,
  	      function (wholeMatch, m1, list, m3) {
  	        var listType = (m3.search(/[*+-]/g) > -1) ? 'ul' : 'ol';
  	        return parseConsecutiveLists(list, listType, false);
  	      }
  	    );
  	  }

  	  // strip sentinel
  	  text = text.replace(/¨0/, '');
  	  text = globals.converter._dispatch('lists.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Parse metadata at the top of the document
  	 */
  	showdown.subParser('metadata', function (text, options, globals) {

  	  if (!options.metadata) {
  	    return text;
  	  }

  	  text = globals.converter._dispatch('metadata.before', text, options, globals);

  	  function parseMetadataContents (content) {
  	    // raw is raw so it's not changed in any way
  	    globals.metadata.raw = content;

  	    // escape chars forbidden in html attributes
  	    // double quotes
  	    content = content
  	      // ampersand first
  	      .replace(/&/g, '&amp;')
  	      // double quotes
  	      .replace(/"/g, '&quot;');

  	    content = content.replace(/\n {4}/g, ' ');
  	    content.replace(/^([\S ]+): +([\s\S]+?)$/gm, function (wm, key, value) {
  	      globals.metadata.parsed[key] = value;
  	      return '';
  	    });
  	  }

  	  text = text.replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/, function (wholematch, format, content) {
  	    parseMetadataContents(content);
  	    return '¨M';
  	  });

  	  text = text.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/, function (wholematch, format, content) {
  	    if (format) {
  	      globals.metadata.format = format;
  	    }
  	    parseMetadataContents(content);
  	    return '¨M';
  	  });

  	  text = text.replace(/¨M/g, '');

  	  text = globals.converter._dispatch('metadata.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 * Remove one level of line-leading tabs or spaces
  	 */
  	showdown.subParser('outdent', function (text, options, globals) {
  	  text = globals.converter._dispatch('outdent.before', text, options, globals);

  	  // attacklab: hack around Konqueror 3.5.4 bug:
  	  // "----------bug".replace(/^-/g,"") == "bug"
  	  text = text.replace(/^(\t|[ ]{1,4})/gm, '¨0'); // attacklab: g_tab_width

  	  // attacklab: clean up hack
  	  text = text.replace(/¨0/g, '');

  	  text = globals.converter._dispatch('outdent.after', text, options, globals);
  	  return text;
  	});

  	/**
  	 *
  	 */
  	showdown.subParser('paragraphs', function (text, options, globals) {

  	  text = globals.converter._dispatch('paragraphs.before', text, options, globals);
  	  // Strip leading and trailing lines:
  	  text = text.replace(/^\n+/g, '');
  	  text = text.replace(/\n+$/g, '');

  	  var grafs = text.split(/\n{2,}/g),
  	      grafsOut = [],
  	      end = grafs.length; // Wrap <p> tags

  	  for (var i = 0; i < end; i++) {
  	    var str = grafs[i];
  	    // if this is an HTML marker, copy it
  	    if (str.search(/¨(K|G)(\d+)\1/g) >= 0) {
  	      grafsOut.push(str);

  	    // test for presence of characters to prevent empty lines being parsed
  	    // as paragraphs (resulting in undesired extra empty paragraphs)
  	    } else if (str.search(/\S/) >= 0) {
  	      str = showdown.subParser('spanGamut')(str, options, globals);
  	      str = str.replace(/^([ \t]*)/g, '<p>');
  	      str += '</p>';
  	      grafsOut.push(str);
  	    }
  	  }

  	  /** Unhashify HTML blocks */
  	  end = grafsOut.length;
  	  for (i = 0; i < end; i++) {
  	    var blockText = '',
  	        grafsOutIt = grafsOut[i],
  	        codeFlag = false;
  	    // if this is a marker for an html block...
  	    // use RegExp.test instead of string.search because of QML bug
  	    while (/¨(K|G)(\d+)\1/.test(grafsOutIt)) {
  	      var delim = RegExp.$1,
  	          num   = RegExp.$2;

  	      if (delim === 'K') {
  	        blockText = globals.gHtmlBlocks[num];
  	      } else {
  	        // we need to check if ghBlock is a false positive
  	        if (codeFlag) {
  	          // use encoded version of all text
  	          blockText = showdown.subParser('encodeCode')(globals.ghCodeBlocks[num].text, options, globals);
  	        } else {
  	          blockText = globals.ghCodeBlocks[num].codeblock;
  	        }
  	      }
  	      blockText = blockText.replace(/\$/g, '$$$$'); // Escape any dollar signs

  	      grafsOutIt = grafsOutIt.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/, blockText);
  	      // Check if grafsOutIt is a pre->code
  	      if (/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(grafsOutIt)) {
  	        codeFlag = true;
  	      }
  	    }
  	    grafsOut[i] = grafsOutIt;
  	  }
  	  text = grafsOut.join('\n');
  	  // Strip leading and trailing lines:
  	  text = text.replace(/^\n+/g, '');
  	  text = text.replace(/\n+$/g, '');
  	  return globals.converter._dispatch('paragraphs.after', text, options, globals);
  	});

  	/**
  	 * Run extension
  	 */
  	showdown.subParser('runExtension', function (ext, text, options, globals) {

  	  if (ext.filter) {
  	    text = ext.filter(text, globals.converter, options);

  	  } else if (ext.regex) {
  	    // TODO remove this when old extension loading mechanism is deprecated
  	    var re = ext.regex;
  	    if (!(re instanceof RegExp)) {
  	      re = new RegExp(re, 'g');
  	    }
  	    text = text.replace(re, ext.replace);
  	  }

  	  return text;
  	});

  	/**
  	 * These are all the transformations that occur *within* block-level
  	 * tags like paragraphs, headers, and list items.
  	 */
  	showdown.subParser('spanGamut', function (text, options, globals) {

  	  text = globals.converter._dispatch('spanGamut.before', text, options, globals);
  	  text = showdown.subParser('codeSpans')(text, options, globals);
  	  text = showdown.subParser('escapeSpecialCharsWithinTagAttributes')(text, options, globals);
  	  text = showdown.subParser('encodeBackslashEscapes')(text, options, globals);

  	  // Process anchor and image tags. Images must come first,
  	  // because ![foo][f] looks like an anchor.
  	  text = showdown.subParser('images')(text, options, globals);
  	  text = showdown.subParser('anchors')(text, options, globals);

  	  // Make links out of things like `<http://example.com/>`
  	  // Must come after anchors, because you can use < and >
  	  // delimiters in inline links like [this](<url>).
  	  text = showdown.subParser('autoLinks')(text, options, globals);
  	  text = showdown.subParser('simplifiedAutoLinks')(text, options, globals);
  	  text = showdown.subParser('emoji')(text, options, globals);
  	  text = showdown.subParser('underline')(text, options, globals);
  	  text = showdown.subParser('italicsAndBold')(text, options, globals);
  	  text = showdown.subParser('strikethrough')(text, options, globals);
  	  text = showdown.subParser('ellipsis')(text, options, globals);

  	  // we need to hash HTML tags inside spans
  	  text = showdown.subParser('hashHTMLSpans')(text, options, globals);

  	  // now we encode amps and angles
  	  text = showdown.subParser('encodeAmpsAndAngles')(text, options, globals);

  	  // Do hard breaks
  	  if (options.simpleLineBreaks) {
  	    // GFM style hard breaks
  	    // only add line breaks if the text does not contain a block (special case for lists)
  	    if (!/\n\n¨K/.test(text)) {
  	      text = text.replace(/\n+/g, '<br />\n');
  	    }
  	  } else {
  	    // Vanilla hard breaks
  	    text = text.replace(/  +\n/g, '<br />\n');
  	  }

  	  text = globals.converter._dispatch('spanGamut.after', text, options, globals);
  	  return text;
  	});

  	showdown.subParser('strikethrough', function (text, options, globals) {

  	  function parseInside (txt) {
  	    if (options.simplifiedAutoLink) {
  	      txt = showdown.subParser('simplifiedAutoLinks')(txt, options, globals);
  	    }
  	    return '<del>' + txt + '</del>';
  	  }

  	  if (options.strikethrough) {
  	    text = globals.converter._dispatch('strikethrough.before', text, options, globals);
  	    text = text.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g, function (wm, txt) { return parseInside(txt); });
  	    text = globals.converter._dispatch('strikethrough.after', text, options, globals);
  	  }

  	  return text;
  	});

  	/**
  	 * Strips link definitions from text, stores the URLs and titles in
  	 * hash references.
  	 * Link defs are in the form: ^[id]: url "optional title"
  	 */
  	showdown.subParser('stripLinkDefinitions', function (text, options, globals) {

  	  var regex       = /^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,
  	      base64Regex = /^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm;

  	  // attacklab: sentinel workarounds for lack of \A and \Z, safari\khtml bug
  	  text += '¨0';

  	  var replaceFunc = function (wholeMatch, linkId, url, width, height, blankLines, title) {

  	    // if there aren't two instances of linkId it must not be a reference link so back out
  	    linkId = linkId.toLowerCase();
  	    if (text.toLowerCase().split(linkId).length - 1 < 2) {
  	      return wholeMatch;
  	    }
  	    if (url.match(/^data:.+?\/.+?;base64,/)) {
  	      // remove newlines
  	      globals.gUrls[linkId] = url.replace(/\s/g, '');
  	    } else {
  	      globals.gUrls[linkId] = showdown.subParser('encodeAmpsAndAngles')(url, options, globals);  // Link IDs are case-insensitive
  	    }

  	    if (blankLines) {
  	      // Oops, found blank lines, so it's not a title.
  	      // Put back the parenthetical statement we stole.
  	      return blankLines + title;

  	    } else {
  	      if (title) {
  	        globals.gTitles[linkId] = title.replace(/"|'/g, '&quot;');
  	      }
  	      if (options.parseImgDimensions && width && height) {
  	        globals.gDimensions[linkId] = {
  	          width:  width,
  	          height: height
  	        };
  	      }
  	    }
  	    // Completely remove the definition from the text
  	    return '';
  	  };

  	  // first we try to find base64 link references
  	  text = text.replace(base64Regex, replaceFunc);

  	  text = text.replace(regex, replaceFunc);

  	  // attacklab: strip sentinel
  	  text = text.replace(/¨0/, '');

  	  return text;
  	});

  	showdown.subParser('tables', function (text, options, globals) {

  	  if (!options.tables) {
  	    return text;
  	  }

  	  var tableRgx       = /^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,
  	      //singeColTblRgx = /^ {0,3}\|.+\|\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n(?: {0,3}\|.+\|\n)+(?:\n\n|¨0)/gm;
  	      singeColTblRgx = /^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm;

  	  function parseStyles (sLine) {
  	    if (/^:[ \t]*--*$/.test(sLine)) {
  	      return ' style="text-align:left;"';
  	    } else if (/^--*[ \t]*:[ \t]*$/.test(sLine)) {
  	      return ' style="text-align:right;"';
  	    } else if (/^:[ \t]*--*[ \t]*:$/.test(sLine)) {
  	      return ' style="text-align:center;"';
  	    } else {
  	      return '';
  	    }
  	  }

  	  function parseHeaders (header, style) {
  	    var id = '';
  	    header = header.trim();
  	    // support both tablesHeaderId and tableHeaderId due to error in documentation so we don't break backwards compatibility
  	    if (options.tablesHeaderId || options.tableHeaderId) {
  	      id = ' id="' + header.replace(/ /g, '_').toLowerCase() + '"';
  	    }
  	    header = showdown.subParser('spanGamut')(header, options, globals);

  	    return '<th' + id + style + '>' + header + '</th>\n';
  	  }

  	  function parseCells (cell, style) {
  	    var subText = showdown.subParser('spanGamut')(cell, options, globals);
  	    return '<td' + style + '>' + subText + '</td>\n';
  	  }

  	  function buildTable (headers, cells) {
  	    var tb = '<table>\n<thead>\n<tr>\n',
  	        tblLgn = headers.length;

  	    for (var i = 0; i < tblLgn; ++i) {
  	      tb += headers[i];
  	    }
  	    tb += '</tr>\n</thead>\n<tbody>\n';

  	    for (i = 0; i < cells.length; ++i) {
  	      tb += '<tr>\n';
  	      for (var ii = 0; ii < tblLgn; ++ii) {
  	        tb += cells[i][ii];
  	      }
  	      tb += '</tr>\n';
  	    }
  	    tb += '</tbody>\n</table>\n';
  	    return tb;
  	  }

  	  function parseTable (rawTable) {
  	    var i, tableLines = rawTable.split('\n');

  	    for (i = 0; i < tableLines.length; ++i) {
  	      // strip wrong first and last column if wrapped tables are used
  	      if (/^ {0,3}\|/.test(tableLines[i])) {
  	        tableLines[i] = tableLines[i].replace(/^ {0,3}\|/, '');
  	      }
  	      if (/\|[ \t]*$/.test(tableLines[i])) {
  	        tableLines[i] = tableLines[i].replace(/\|[ \t]*$/, '');
  	      }
  	      // parse code spans first, but we only support one line code spans
  	      tableLines[i] = showdown.subParser('codeSpans')(tableLines[i], options, globals);
  	    }

  	    var rawHeaders = tableLines[0].split('|').map(function (s) { return s.trim();}),
  	        rawStyles = tableLines[1].split('|').map(function (s) { return s.trim();}),
  	        rawCells = [],
  	        headers = [],
  	        styles = [],
  	        cells = [];

  	    tableLines.shift();
  	    tableLines.shift();

  	    for (i = 0; i < tableLines.length; ++i) {
  	      if (tableLines[i].trim() === '') {
  	        continue;
  	      }
  	      rawCells.push(
  	        tableLines[i]
  	          .split('|')
  	          .map(function (s) {
  	            return s.trim();
  	          })
  	      );
  	    }

  	    if (rawHeaders.length < rawStyles.length) {
  	      return rawTable;
  	    }

  	    for (i = 0; i < rawStyles.length; ++i) {
  	      styles.push(parseStyles(rawStyles[i]));
  	    }

  	    for (i = 0; i < rawHeaders.length; ++i) {
  	      if (showdown.helper.isUndefined(styles[i])) {
  	        styles[i] = '';
  	      }
  	      headers.push(parseHeaders(rawHeaders[i], styles[i]));
  	    }

  	    for (i = 0; i < rawCells.length; ++i) {
  	      var row = [];
  	      for (var ii = 0; ii < headers.length; ++ii) {
  	        if (showdown.helper.isUndefined(rawCells[i][ii])) ;
  	        row.push(parseCells(rawCells[i][ii], styles[ii]));
  	      }
  	      cells.push(row);
  	    }

  	    return buildTable(headers, cells);
  	  }

  	  text = globals.converter._dispatch('tables.before', text, options, globals);

  	  // find escaped pipe characters
  	  text = text.replace(/\\(\|)/g, showdown.helper.escapeCharactersCallback);

  	  // parse multi column tables
  	  text = text.replace(tableRgx, parseTable);

  	  // parse one column tables
  	  text = text.replace(singeColTblRgx, parseTable);

  	  text = globals.converter._dispatch('tables.after', text, options, globals);

  	  return text;
  	});

  	showdown.subParser('underline', function (text, options, globals) {

  	  if (!options.underline) {
  	    return text;
  	  }

  	  text = globals.converter._dispatch('underline.before', text, options, globals);

  	  if (options.literalMidWordUnderscores) {
  	    text = text.replace(/\b___(\S[\s\S]*?)___\b/g, function (wm, txt) {
  	      return '<u>' + txt + '</u>';
  	    });
  	    text = text.replace(/\b__(\S[\s\S]*?)__\b/g, function (wm, txt) {
  	      return '<u>' + txt + '</u>';
  	    });
  	  } else {
  	    text = text.replace(/___(\S[\s\S]*?)___/g, function (wm, m) {
  	      return (/\S$/.test(m)) ? '<u>' + m + '</u>' : wm;
  	    });
  	    text = text.replace(/__(\S[\s\S]*?)__/g, function (wm, m) {
  	      return (/\S$/.test(m)) ? '<u>' + m + '</u>' : wm;
  	    });
  	  }

  	  // escape remaining underscores to prevent them being parsed by italic and bold
  	  text = text.replace(/(_)/g, showdown.helper.escapeCharactersCallback);

  	  text = globals.converter._dispatch('underline.after', text, options, globals);

  	  return text;
  	});

  	/**
  	 * Swap back in all the special characters we've hidden.
  	 */
  	showdown.subParser('unescapeSpecialChars', function (text, options, globals) {
  	  text = globals.converter._dispatch('unescapeSpecialChars.before', text, options, globals);

  	  text = text.replace(/¨E(\d+)E/g, function (wholeMatch, m1) {
  	    var charCodeToReplace = parseInt(m1);
  	    return String.fromCharCode(charCodeToReplace);
  	  });

  	  text = globals.converter._dispatch('unescapeSpecialChars.after', text, options, globals);
  	  return text;
  	});

  	showdown.subParser('makeMarkdown.blockquote', function (node, globals) {

  	  var txt = '';
  	  if (node.hasChildNodes()) {
  	    var children = node.childNodes,
  	        childrenLength = children.length;

  	    for (var i = 0; i < childrenLength; ++i) {
  	      var innerTxt = showdown.subParser('makeMarkdown.node')(children[i], globals);

  	      if (innerTxt === '') {
  	        continue;
  	      }
  	      txt += innerTxt;
  	    }
  	  }
  	  // cleanup
  	  txt = txt.trim();
  	  txt = '> ' + txt.split('\n').join('\n> ');
  	  return txt;
  	});

  	showdown.subParser('makeMarkdown.codeBlock', function (node, globals) {

  	  var lang = node.getAttribute('language'),
  	      num  = node.getAttribute('precodenum');
  	  return '```' + lang + '\n' + globals.preList[num] + '\n```';
  	});

  	showdown.subParser('makeMarkdown.codeSpan', function (node) {

  	  return '`' + node.innerHTML + '`';
  	});

  	showdown.subParser('makeMarkdown.emphasis', function (node, globals) {

  	  var txt = '';
  	  if (node.hasChildNodes()) {
  	    txt += '*';
  	    var children = node.childNodes,
  	        childrenLength = children.length;
  	    for (var i = 0; i < childrenLength; ++i) {
  	      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);
  	    }
  	    txt += '*';
  	  }
  	  return txt;
  	});

  	showdown.subParser('makeMarkdown.header', function (node, globals, headerLevel) {

  	  var headerMark = new Array(headerLevel + 1).join('#'),
  	      txt = '';

  	  if (node.hasChildNodes()) {
  	    txt = headerMark + ' ';
  	    var children = node.childNodes,
  	        childrenLength = children.length;

  	    for (var i = 0; i < childrenLength; ++i) {
  	      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);
  	    }
  	  }
  	  return txt;
  	});

  	showdown.subParser('makeMarkdown.hr', function () {

  	  return '---';
  	});

  	showdown.subParser('makeMarkdown.image', function (node) {

  	  var txt = '';
  	  if (node.hasAttribute('src')) {
  	    txt += '![' + node.getAttribute('alt') + '](';
  	    txt += '<' + node.getAttribute('src') + '>';
  	    if (node.hasAttribute('width') && node.hasAttribute('height')) {
  	      txt += ' =' + node.getAttribute('width') + 'x' + node.getAttribute('height');
  	    }

  	    if (node.hasAttribute('title')) {
  	      txt += ' "' + node.getAttribute('title') + '"';
  	    }
  	    txt += ')';
  	  }
  	  return txt;
  	});

  	showdown.subParser('makeMarkdown.links', function (node, globals) {

  	  var txt = '';
  	  if (node.hasChildNodes() && node.hasAttribute('href')) {
  	    var children = node.childNodes,
  	        childrenLength = children.length;
  	    txt = '[';
  	    for (var i = 0; i < childrenLength; ++i) {
  	      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);
  	    }
  	    txt += '](';
  	    txt += '<' + node.getAttribute('href') + '>';
  	    if (node.hasAttribute('title')) {
  	      txt += ' "' + node.getAttribute('title') + '"';
  	    }
  	    txt += ')';
  	  }
  	  return txt;
  	});

  	showdown.subParser('makeMarkdown.list', function (node, globals, type) {

  	  var txt = '';
  	  if (!node.hasChildNodes()) {
  	    return '';
  	  }
  	  var listItems       = node.childNodes,
  	      listItemsLenght = listItems.length,
  	      listNum = node.getAttribute('start') || 1;

  	  for (var i = 0; i < listItemsLenght; ++i) {
  	    if (typeof listItems[i].tagName === 'undefined' || listItems[i].tagName.toLowerCase() !== 'li') {
  	      continue;
  	    }

  	    // define the bullet to use in list
  	    var bullet = '';
  	    if (type === 'ol') {
  	      bullet = listNum.toString() + '. ';
  	    } else {
  	      bullet = '- ';
  	    }

  	    // parse list item
  	    txt += bullet + showdown.subParser('makeMarkdown.listItem')(listItems[i], globals);
  	    ++listNum;
  	  }

  	  // add comment at the end to prevent consecutive lists to be parsed as one
  	  txt += '\n<!-- -->\n';
  	  return txt.trim();
  	});

  	showdown.subParser('makeMarkdown.listItem', function (node, globals) {

  	  var listItemTxt = '';

  	  var children = node.childNodes,
  	      childrenLenght = children.length;

  	  for (var i = 0; i < childrenLenght; ++i) {
  	    listItemTxt += showdown.subParser('makeMarkdown.node')(children[i], globals);
  	  }
  	  // if it's only one liner, we need to add a newline at the end
  	  if (!/\n$/.test(listItemTxt)) {
  	    listItemTxt += '\n';
  	  } else {
  	    // it's multiparagraph, so we need to indent
  	    listItemTxt = listItemTxt
  	      .split('\n')
  	      .join('\n    ')
  	      .replace(/^ {4}$/gm, '')
  	      .replace(/\n\n+/g, '\n\n');
  	  }

  	  return listItemTxt;
  	});



  	showdown.subParser('makeMarkdown.node', function (node, globals, spansOnly) {

  	  spansOnly = spansOnly || false;

  	  var txt = '';

  	  // edge case of text without wrapper paragraph
  	  if (node.nodeType === 3) {
  	    return showdown.subParser('makeMarkdown.txt')(node, globals);
  	  }

  	  // HTML comment
  	  if (node.nodeType === 8) {
  	    return '<!--' + node.data + '-->\n\n';
  	  }

  	  // process only node elements
  	  if (node.nodeType !== 1) {
  	    return '';
  	  }

  	  var tagName = node.tagName.toLowerCase();

  	  switch (tagName) {

  	    //
  	    // BLOCKS
  	    //
  	    case 'h1':
  	      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 1) + '\n\n'; }
  	      break;
  	    case 'h2':
  	      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 2) + '\n\n'; }
  	      break;
  	    case 'h3':
  	      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 3) + '\n\n'; }
  	      break;
  	    case 'h4':
  	      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 4) + '\n\n'; }
  	      break;
  	    case 'h5':
  	      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 5) + '\n\n'; }
  	      break;
  	    case 'h6':
  	      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 6) + '\n\n'; }
  	      break;

  	    case 'p':
  	      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.paragraph')(node, globals) + '\n\n'; }
  	      break;

  	    case 'blockquote':
  	      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.blockquote')(node, globals) + '\n\n'; }
  	      break;

  	    case 'hr':
  	      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.hr')(node, globals) + '\n\n'; }
  	      break;

  	    case 'ol':
  	      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.list')(node, globals, 'ol') + '\n\n'; }
  	      break;

  	    case 'ul':
  	      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.list')(node, globals, 'ul') + '\n\n'; }
  	      break;

  	    case 'precode':
  	      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.codeBlock')(node, globals) + '\n\n'; }
  	      break;

  	    case 'pre':
  	      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.pre')(node, globals) + '\n\n'; }
  	      break;

  	    case 'table':
  	      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.table')(node, globals) + '\n\n'; }
  	      break;

  	    //
  	    // SPANS
  	    //
  	    case 'code':
  	      txt = showdown.subParser('makeMarkdown.codeSpan')(node, globals);
  	      break;

  	    case 'em':
  	    case 'i':
  	      txt = showdown.subParser('makeMarkdown.emphasis')(node, globals);
  	      break;

  	    case 'strong':
  	    case 'b':
  	      txt = showdown.subParser('makeMarkdown.strong')(node, globals);
  	      break;

  	    case 'del':
  	      txt = showdown.subParser('makeMarkdown.strikethrough')(node, globals);
  	      break;

  	    case 'a':
  	      txt = showdown.subParser('makeMarkdown.links')(node, globals);
  	      break;

  	    case 'img':
  	      txt = showdown.subParser('makeMarkdown.image')(node, globals);
  	      break;

  	    default:
  	      txt = node.outerHTML + '\n\n';
  	  }

  	  // common normalization
  	  // TODO eventually

  	  return txt;
  	});

  	showdown.subParser('makeMarkdown.paragraph', function (node, globals) {

  	  var txt = '';
  	  if (node.hasChildNodes()) {
  	    var children = node.childNodes,
  	        childrenLength = children.length;
  	    for (var i = 0; i < childrenLength; ++i) {
  	      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);
  	    }
  	  }

  	  // some text normalization
  	  txt = txt.trim();

  	  return txt;
  	});

  	showdown.subParser('makeMarkdown.pre', function (node, globals) {

  	  var num  = node.getAttribute('prenum');
  	  return '<pre>' + globals.preList[num] + '</pre>';
  	});

  	showdown.subParser('makeMarkdown.strikethrough', function (node, globals) {

  	  var txt = '';
  	  if (node.hasChildNodes()) {
  	    txt += '~~';
  	    var children = node.childNodes,
  	        childrenLength = children.length;
  	    for (var i = 0; i < childrenLength; ++i) {
  	      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);
  	    }
  	    txt += '~~';
  	  }
  	  return txt;
  	});

  	showdown.subParser('makeMarkdown.strong', function (node, globals) {

  	  var txt = '';
  	  if (node.hasChildNodes()) {
  	    txt += '**';
  	    var children = node.childNodes,
  	        childrenLength = children.length;
  	    for (var i = 0; i < childrenLength; ++i) {
  	      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);
  	    }
  	    txt += '**';
  	  }
  	  return txt;
  	});

  	showdown.subParser('makeMarkdown.table', function (node, globals) {

  	  var txt = '',
  	      tableArray = [[], []],
  	      headings   = node.querySelectorAll('thead>tr>th'),
  	      rows       = node.querySelectorAll('tbody>tr'),
  	      i, ii;
  	  for (i = 0; i < headings.length; ++i) {
  	    var headContent = showdown.subParser('makeMarkdown.tableCell')(headings[i], globals),
  	        allign = '---';

  	    if (headings[i].hasAttribute('style')) {
  	      var style = headings[i].getAttribute('style').toLowerCase().replace(/\s/g, '');
  	      switch (style) {
  	        case 'text-align:left;':
  	          allign = ':---';
  	          break;
  	        case 'text-align:right;':
  	          allign = '---:';
  	          break;
  	        case 'text-align:center;':
  	          allign = ':---:';
  	          break;
  	      }
  	    }
  	    tableArray[0][i] = headContent.trim();
  	    tableArray[1][i] = allign;
  	  }

  	  for (i = 0; i < rows.length; ++i) {
  	    var r = tableArray.push([]) - 1,
  	        cols = rows[i].getElementsByTagName('td');

  	    for (ii = 0; ii < headings.length; ++ii) {
  	      var cellContent = ' ';
  	      if (typeof cols[ii] !== 'undefined') {
  	        cellContent = showdown.subParser('makeMarkdown.tableCell')(cols[ii], globals);
  	      }
  	      tableArray[r].push(cellContent);
  	    }
  	  }

  	  var cellSpacesCount = 3;
  	  for (i = 0; i < tableArray.length; ++i) {
  	    for (ii = 0; ii < tableArray[i].length; ++ii) {
  	      var strLen = tableArray[i][ii].length;
  	      if (strLen > cellSpacesCount) {
  	        cellSpacesCount = strLen;
  	      }
  	    }
  	  }

  	  for (i = 0; i < tableArray.length; ++i) {
  	    for (ii = 0; ii < tableArray[i].length; ++ii) {
  	      if (i === 1) {
  	        if (tableArray[i][ii].slice(-1) === ':') {
  	          tableArray[i][ii] = showdown.helper.padEnd(tableArray[i][ii].slice(-1), cellSpacesCount - 1, '-') + ':';
  	        } else {
  	          tableArray[i][ii] = showdown.helper.padEnd(tableArray[i][ii], cellSpacesCount, '-');
  	        }
  	      } else {
  	        tableArray[i][ii] = showdown.helper.padEnd(tableArray[i][ii], cellSpacesCount);
  	      }
  	    }
  	    txt += '| ' + tableArray[i].join(' | ') + ' |\n';
  	  }

  	  return txt.trim();
  	});

  	showdown.subParser('makeMarkdown.tableCell', function (node, globals) {

  	  var txt = '';
  	  if (!node.hasChildNodes()) {
  	    return '';
  	  }
  	  var children = node.childNodes,
  	      childrenLength = children.length;

  	  for (var i = 0; i < childrenLength; ++i) {
  	    txt += showdown.subParser('makeMarkdown.node')(children[i], globals, true);
  	  }
  	  return txt.trim();
  	});

  	showdown.subParser('makeMarkdown.txt', function (node) {

  	  var txt = node.nodeValue;

  	  // multiple spaces are collapsed
  	  txt = txt.replace(/ +/g, ' ');

  	  // replace the custom ¨NBSP; with a space
  	  txt = txt.replace(/¨NBSP;/g, ' ');

  	  // ", <, > and & should replace escaped html entities
  	  txt = showdown.helper.unescapeHTMLEntities(txt);

  	  // escape markdown magic characters
  	  // emphasis, strong and strikethrough - can appear everywhere
  	  // we also escape pipe (|) because of tables
  	  // and escape ` because of code blocks and spans
  	  txt = txt.replace(/([*_~|`])/g, '\\$1');

  	  // escape > because of blockquotes
  	  txt = txt.replace(/^(\s*)>/g, '\\$1>');

  	  // hash character, only troublesome at the beginning of a line because of headers
  	  txt = txt.replace(/^#/gm, '\\#');

  	  // horizontal rules
  	  txt = txt.replace(/^(\s*)([-=]{3,})(\s*)$/, '$1\\$2$3');

  	  // dot, because of ordered lists, only troublesome at the beginning of a line when preceded by an integer
  	  txt = txt.replace(/^( {0,3}\d+)\./gm, '$1\\.');

  	  // +, * and -, at the beginning of a line becomes a list, so we need to escape them also (asterisk was already escaped)
  	  txt = txt.replace(/^( {0,3})([+-])/gm, '$1\\$2');

  	  // images and links, ] followed by ( is problematic, so we escape it
  	  txt = txt.replace(/]([\s]*)\(/g, '\\]$1\\(');

  	  // reference URIs must also be escaped
  	  txt = txt.replace(/^ {0,3}\[([\S \t]*?)]:/gm, '\\[$1]:');

  	  return txt;
  	});

  	var root = this;

  	// AMD Loader
  	if (module.exports) {
  	  module.exports = showdown;

  	// Regular Browser loader
  	} else {
  	  root.showdown = showdown;
  	}
  	}).call(this);

  	
  } (showdown));

  var showdownExports = showdown.exports;

  var _virtual_index = { Converter: showdownExports.Converter };

  return _virtual_index;

})();


	npmCompilation['115c87258963fd94d34e6a96a9c4d27d'] = {};
npmCompilation['115c87258963fd94d34e6a96a9c4d27d']['Converter'] = _['Converter'];

})(npmCompilation);
if(!Object.hasOwn(window, "AvInstance")) {
	Object.defineProperty(window, "AvInstance", {
		get() {return Aventus.Instance;}
	});

	(() => {
		Map.prototype._defaultHas = Map.prototype.has;
		Map.prototype._defaultSet = Map.prototype.set;
		Map.prototype._defaultGet = Map.prototype.get;
		Map.prototype.has = function(key) {
			if(Aventus.Watcher?.is(key)) {
				return Map.prototype._defaultHas.call(this,key.getTarget())
			}
			return Map.prototype._defaultHas.call(this,key);
		}

		Map.prototype.set = function(key, value) {
			if(Aventus.Watcher?.is(key)) {
				return Map.prototype._defaultSet.call(this, key.getTarget(), value)
			}
			return Map.prototype._defaultSet.call(this, key, value);
		}
		Map.prototype.get = function(key) {
			if(Aventus.Watcher?.is(key)) {
				return Map.prototype._defaultGet.call(this, key.getTarget())
			}
			return Map.prototype._defaultGet.call(this, key);
		}
	})();
}
var Aventus;
(Aventus||(Aventus = {}));
(function (Aventus) {
const __as1 = (o, k, c) => { if (o[k] !== undefined) for (let w in o[k]) { c[w] = o[k][w] } o[k] = c; }
const moduleName = `Aventus`;
const _ = {};


let _n;
let isClass=function isClass(v) {
    return typeof v === 'function' && /^\s*class\s+/.test(v.toString());
}
__as1(_, 'isClass', isClass);

let sleep=function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}
__as1(_, 'sleep', sleep);

let ActionGuard=class ActionGuard {
    /**
     * Map to store actions that are currently running.
     * @type {Map<any[], ((res: any) => void)[]>}
     * @private
     */
    runningAction = new Map();
    run(keys, action) {
        return new Promise(async (resolve) => {
            if (typeof keys == 'function') {
                action = keys;
                keys = [];
            }
            if (!action) {
                throw "No action inside the Mutex.run";
            }
            let actions = undefined;
            let runningKeys = Array.from(this.runningAction.keys());
            for (let runningKey of runningKeys) {
                if (runningKey.length == keys.length) {
                    let found = true;
                    for (let i = 0; i < keys.length; i++) {
                        if (runningKey[i] != keys[i]) {
                            found = false;
                            break;
                        }
                    }
                    if (found) {
                        actions = this.runningAction.get(runningKey);
                        break;
                    }
                }
            }
            if (actions) {
                actions.push((res) => {
                    resolve(res);
                });
            }
            else {
                this.runningAction.set(keys, []);
                let res = await action();
                let actions = this.runningAction.get(keys);
                if (actions) {
                    for (let action of actions) {
                        action(res);
                    }
                }
                this.runningAction.delete(keys);
                resolve(res);
            }
        });
    }
}
ActionGuard.Namespace=`Aventus`;
__as1(_, 'ActionGuard', ActionGuard);

let DragElementXYType= [SVGGElement, SVGRectElement, SVGEllipseElement, SVGTextElement];
__as1(_, 'DragElementXYType', DragElementXYType);

let DragElementLeftTopType= [HTMLElement, SVGSVGElement];
__as1(_, 'DragElementLeftTopType', DragElementLeftTopType);

let ElementExtension=class ElementExtension {
    /**
     * Find a parent by custom check
     */
    static findParent(element, check, untilNode) {
        let el = element;
        if (el) {
            if (el instanceof ShadowRoot) {
                el = el.host;
            }
            else {
                el = el.parentNode;
            }
        }
        while (el) {
            if (check(el)) {
                return el;
            }
            if (el instanceof ShadowRoot) {
                el = el.host;
            }
            else {
                el = el.parentNode;
            }
            if (el == untilNode) {
                break;
            }
        }
        return null;
    }
    /**
     * Find a list of parent by custom check
     */
    static findParents(element, check, untilNode) {
        let result = [];
        let el = element;
        if (el) {
            if (el instanceof ShadowRoot) {
                el = el.host;
            }
            else {
                el = el.parentNode;
            }
        }
        while (el) {
            if (check(el)) {
                result.push(el);
            }
            if (el instanceof ShadowRoot) {
                el = el.host;
            }
            else {
                el = el.parentNode;
            }
            if (el == untilNode) {
                break;
            }
        }
        return result;
    }
    /**
     * Find a parent by tagname if exist Static.findParentByTag(this, "av-img")
     */
    static findParentByTag(element, tagname, untilNode) {
        if (Array.isArray(tagname)) {
            for (let i = 0; i < tagname.length; i++) {
                tagname[i] = tagname[i].toLowerCase();
            }
        }
        else {
            tagname = [tagname.toLowerCase()];
        }
        const checkFunc = (el) => {
            return tagname.indexOf((el.nodeName || el.tagName).toLowerCase()) != -1;
        };
        return this.findParent(element, checkFunc, untilNode);
    }
    /**
     * Find a parent by class name if exist Static.findParentByClass(this, "my-class-img") = querySelector('.my-class-img')
     */
    static findParentByClass(element, classname, untilNode) {
        if (!Array.isArray(classname)) {
            classname = [classname];
        }
        const check = (el) => {
            for (let classnameTemp of classname) {
                if (el['classList'] && el['classList'].contains(classnameTemp)) {
                    return true;
                }
            }
            return false;
        };
        return this.findParent(element, check, untilNode);
    }
    static findParentByType(element, types, untilNode) {
        if (!Array.isArray(types)) {
            types = [types];
        }
        let isValid = true;
        for (let type of types) {
            if (typeof type == "function" && type['prototype']['constructor'])
                continue;
            isValid = false;
        }
        if (isValid) {
            let checkFunc = (el) => {
                for (let type of types) {
                    const t = type;
                    if (el instanceof t) {
                        return true;
                    }
                }
                return false;
            };
            return this.findParent(element, checkFunc, untilNode);
        }
        console.error("you must provide a class inside this function");
        return null;
    }
    /**
     * Find list of parents by tagname
     */
    static findParentsByTag(element, tagname, untilNode) {
        let el = element;
        if (Array.isArray(tagname)) {
            for (let i = 0; i < tagname.length; i++) {
                tagname[i] = tagname[i].toLowerCase();
            }
        }
        else {
            tagname = [tagname.toLowerCase()];
        }
        let check = (el) => {
            return tagname.indexOf((el.nodeName || el['tagName']).toLowerCase()) != -1;
        };
        return this.findParents(element, check, untilNode);
    }
    /**
     * Check if element contains a child
     */
    static containsChild(element, child) {
        var rootScope = element.getRootNode();
        var elScope = child.getRootNode();
        while (elScope != rootScope) {
            if (!elScope['host']) {
                return false;
            }
            child = elScope['host'];
            elScope = elScope['host'].getRootNode();
        }
        return element.contains(child);
    }
    /**
     * Get element inside slot
     */
    static getElementsInSlot(element, slotName) {
        let result = [];
        if (element.shadowRoot) {
            let slotEl;
            if (slotName) {
                slotEl = element.shadowRoot.querySelector('slot[name="' + slotName + '"]');
            }
            else {
                slotEl = element.shadowRoot.querySelector("slot:not([name])");
                if (!slotEl) {
                    slotEl = element.shadowRoot.querySelector("slot");
                }
            }
            while (true) {
                if (!slotEl) {
                    return result;
                }
                var listChild = Array.from(slotEl.assignedElements());
                if (!listChild) {
                    return result;
                }
                let slotFound = false;
                for (let i = 0; i < listChild.length; i++) {
                    let child = listChild[i];
                    if (listChild[i].nodeName == "SLOT") {
                        slotEl = listChild[i];
                        slotFound = true;
                    }
                    else if (child instanceof HTMLElement) {
                        result.push(child);
                    }
                }
                if (!slotFound) {
                    return result;
                }
            }
        }
        return result;
    }
    /**
     * Get element inside slot
     */
    static getNodesInSlot(element, slotName) {
        let result = [];
        if (element.shadowRoot) {
            let slotEl;
            if (slotName) {
                slotEl = element.shadowRoot.querySelector('slot[name="' + slotName + '"]');
            }
            else {
                slotEl = element.shadowRoot.querySelector("slot:not([name])");
                if (!slotEl) {
                    slotEl = element.shadowRoot.querySelector("slot");
                }
            }
            while (true) {
                if (!slotEl) {
                    return result;
                }
                var listChild = Array.from(slotEl.assignedNodes());
                if (!listChild) {
                    return result;
                }
                let slotFound = false;
                for (let i = 0; i < listChild.length; i++) {
                    let child = listChild[i];
                    if (listChild[i].nodeName == "SLOT") {
                        slotEl = listChild[i];
                        slotFound = true;
                    }
                    else if (child instanceof Node) {
                        result.push(child);
                    }
                }
                if (!slotFound) {
                    return result;
                }
            }
        }
        return result;
    }
    /**
     * Get deeper element inside dom at the position X and Y
     */
    static getElementAtPosition(x, y, startFrom) {
        var _realTarget = (el, i = 0) => {
            if (i == 50) {
                debugger;
            }
            if (el.shadowRoot && x !== undefined && y !== undefined) {
                const elements = el.shadowRoot.elementsFromPoint(x, y);
                var newEl = elements.length > 0 ? elements[0] : null;
                if (newEl && newEl != el && (el.shadowRoot.contains(newEl) || el.contains(newEl))) {
                    return _realTarget(newEl, i + 1);
                }
            }
            return el;
        };
        if (startFrom == null) {
            startFrom = document.body;
        }
        return _realTarget(startFrom);
    }
    /**
     * Get active element from the define root
     */
    static getActiveElement(root = document) {
        if (!root)
            return null;
        let el = root.activeElement;
        while (el instanceof WebComponent) {
            let elTemp = el.shadowRoot?.activeElement;
            if (!elTemp)
                return el;
            el = elTemp;
        }
        return el;
    }
}
ElementExtension.Namespace=`Aventus`;
__as1(_, 'ElementExtension', ElementExtension);

let Style=class Style {
    static instance;
    static noAnimation;
    static defaultStyleSheets = {
        "@default": `:host{display:inline-block;box-sizing:border-box}:host *{box-sizing:border-box}`,
    };
    static store(name, content) {
        this.getInstance().store(name, content);
    }
    static get(name) {
        return this.getInstance().get(name);
    }
    static getAsString(name) {
        return this.getInstance().getAsString(name);
    }
    static sheetToString(stylesheet) {
        return this.getInstance().sheetToString(stylesheet);
    }
    static load(name, url) {
        return this.getInstance().load(name, url);
    }
    static appendToHead(name) {
        if (!document.head.querySelector(`style[data-name="${name}"]`)) {
            const styleNode = document.createElement('style');
            styleNode.setAttribute(`data-name`, name);
            styleNode.innerHTML = Style.getAsString(name);
            document.getElementsByTagName('head')[0].appendChild(styleNode);
        }
    }
    static refreshHead(name) {
        const styleNode = document.head.querySelector(`style[data-name="${name}"]`);
        if (styleNode) {
            styleNode.innerHTML = Style.getAsString(name);
        }
    }
    static getInstance() {
        if (!this.instance) {
            this.instance = new Style();
        }
        return this.instance;
    }
    constructor() {
        for (let name in Style.defaultStyleSheets) {
            this.store(name, Style.defaultStyleSheets[name]);
        }
        Style.noAnimation = new CSSStyleSheet();
        Style.noAnimation.replaceSync(`:host{-webkit-transition: none !important;-moz-transition: none !important;-ms-transition: none !important;-o-transition: none !important;transition: none !important;}:host *{-webkit-transition: none !important;-moz-transition: none !important;-ms-transition: none !important;-o-transition: none !important;transition: none !important;}`);
    }
    stylesheets = new Map();
    async load(name, url) {
        try {
            let style = this.stylesheets.get(name);
            if (!style || style.cssRules.length == 0) {
                let txt = await (await fetch(url)).text();
                this.store(name, txt);
            }
        }
        catch (e) {
        }
    }
    store(name, content) {
        let style = this.stylesheets.get(name);
        if (!style) {
            const sheet = new CSSStyleSheet();
            sheet.replaceSync(content);
            this.stylesheets.set(name, sheet);
            return sheet;
        }
        else {
            style.replaceSync(content);
            Style.refreshHead(name);
            return style;
        }
    }
    get(name) {
        let style = this.stylesheets.get(name);
        if (!style) {
            style = this.store(name, "");
        }
        return style;
    }
    getAsString(name) {
        return this.sheetToString(this.get(name));
    }
    sheetToString(stylesheet) {
        return stylesheet.cssRules
            ? Array.from(stylesheet.cssRules)
                .map(rule => rule.cssText || '')
                .join('\n')
            : '';
    }
}
Style.Namespace=`Aventus`;
__as1(_, 'Style', Style);

let setValueToObject=function setValueToObject(path, obj, value) {
    path = path.replace(/\[(.*?)\]/g, '.$1');
    const val = (key) => {
        if (obj instanceof Map) {
            return obj.get(key);
        }
        return obj[key];
    };
    let splitted = path.split(".");
    for (let i = 0; i < splitted.length - 1; i++) {
        let split = splitted[i];
        let value = val(split);
        if (!value) {
            obj[split] = {};
            value = obj[split];
        }
        obj = value;
    }
    if (obj instanceof Map) {
        obj.set(splitted[splitted.length - 1], value);
    }
    else {
        obj[splitted[splitted.length - 1]] = value;
    }
}
__as1(_, 'setValueToObject', setValueToObject);

let Mutex=class Mutex {
    /**
     * Array to store functions waiting for the mutex to become available.
     * @type {((run: boolean) => void)[]}
     */
    waitingList = [];
    /**
    * Indicates whether the mutex is currently locked or not.
    * @type {boolean}
    */
    isLocked = false;
    /**
    * Waits for the mutex to become available and then acquires it.
    * @returns {Promise<boolean>} A Promise that resolves to true if the mutex was acquired successfully.
    */
    waitOne() {
        return new Promise((resolve) => {
            if (this.isLocked) {
                this.waitingList.push((run) => {
                    resolve(run);
                });
            }
            else {
                this.isLocked = true;
                resolve(true);
            }
        });
    }
    /**
     * Release the mutex
     */
    release() {
        let nextFct = this.waitingList.shift();
        if (nextFct) {
            nextFct(true);
        }
        else {
            this.isLocked = false;
        }
    }
    /**
     * Releases the mutex, allowing only the last function in the waiting list to acquire it.
     */
    releaseOnlyLast() {
        if (this.waitingList.length > 0) {
            let lastFct = this.waitingList.pop();
            for (let fct of this.waitingList) {
                fct(false);
            }
            this.waitingList = [];
            if (lastFct) {
                lastFct(true);
            }
        }
        else {
            this.isLocked = false;
        }
    }
    /**
     * Clears the mutex, removing all waiting functions and releasing the lock.
     */
    dispose() {
        this.waitingList = [];
        this.isLocked = false;
    }
    /**
     * Executes a callback function safely within the mutex lock and releases the lock afterward.
     * @template T - The type of the return value of the callback function.
     * @param {() => T} cb - The callback function to execute.
     * @returns {Promise<T | null>} A Promise that resolves to the result of the callback function or null if an error occurs.
     */
    async safeRun(cb) {
        let result = null;
        await this.waitOne();
        try {
            result = cb.apply(null, []);
        }
        catch (e) {
            console.error(e);
        }
        await this.release();
        return result;
    }
    /**
     * Executes an asynchronous callback function safely within the mutex lock and releases the lock afterward.
     * @template T - The type of the return value of the asynchronous callback function.
     * @param {() => Promise<T>} cb - The asynchronous callback function to execute.
     * @returns {Promise<T | null>} A Promise that resolves to the result of the asynchronous callback function or null if an error occurs.
     */
    async safeRunAsync(cb) {
        let result = null;
        await this.waitOne();
        try {
            result = await cb.apply(null, []);
        }
        catch (e) {
            console.error(e);
        }
        await this.release();
        return result;
    }
    /**
     * Executes a callback function safely within the mutex lock, allowing only the last function in the waiting list to acquire the lock, and releases the lock afterward.
     * @template T - The type of the return value of the callback function.
     * @param {() => T} cb - The callback function to execute.
     * @returns {Promise<T | null>} A Promise that resolves to the result of the callback function or null if an error occurs.
     */
    async safeRunLast(cb) {
        let result = null;
        if (await this.waitOne()) {
            try {
                result = cb.apply(null, []);
            }
            catch (e) {
                console.error(e);
            }
            await this.releaseOnlyLast();
        }
        return result;
    }
    /**
     * Executes an asynchronous callback function safely within the mutex lock, allowing only the last function in the waiting list to acquire the lock, and releases the lock afterward.
     * @template T - The type of the return value of the asynchronous callback function.
     * @param {() => Promise<T>} cb - The asynchronous callback function to execute.
     * @returns {Promise<T | undefined>} A Promise that resolves to the result of the asynchronous callback function or undefined if an error occurs.
     */
    async safeRunLastAsync(cb) {
        let result;
        if (await this.waitOne()) {
            try {
                result = await cb.apply(null, []);
            }
            catch (e) {
                console.error(e);
            }
            await this.releaseOnlyLast();
        }
        return result;
    }
}
Mutex.Namespace=`Aventus`;
__as1(_, 'Mutex', Mutex);

let NormalizedEvent=class NormalizedEvent {
    _event;
    get event() {
        return this._event;
    }
    constructor(event) {
        this._event = event;
    }
    getProp(prop) {
        if (prop in this.event) {
            return this.event[prop];
        }
        return undefined;
    }
    stopImmediatePropagation() {
        this.event.stopImmediatePropagation();
    }
    get clientX() {
        if ('clientX' in this.event) {
            return this.event.clientX;
        }
        else if ('touches' in this.event && this.event.touches.length > 0) {
            return this.event.touches[0].clientX;
        }
        return 0;
    }
    get clientY() {
        if ('clientY' in this.event) {
            return this.event.clientY;
        }
        else if ('touches' in this.event && this.event.touches.length > 0) {
            return this.event.touches[0].clientY;
        }
        return 0;
    }
    get pageX() {
        if ('pageX' in this.event) {
            return this.event.pageX;
        }
        else if ('touches' in this.event && this.event.touches.length > 0) {
            return this.event.touches[0].pageX;
        }
        return 0;
    }
    get pageY() {
        if ('pageY' in this.event) {
            return this.event.pageY;
        }
        else if ('touches' in this.event && this.event.touches.length > 0) {
            return this.event.touches[0].pageY;
        }
        return 0;
    }
    get type() {
        return this.event.type;
    }
    get target() {
        return this.event.target;
    }
    get timeStamp() {
        return this.event.timeStamp;
    }
    get pointerType() {
        if ('TouchEvent' in window && this._event instanceof TouchEvent)
            return "touch";
        return this.getProp("pointerType");
    }
    get button() {
        return this.getProp("button");
    }
    get isTouch() {
        if ('TouchEvent' in window && this._event instanceof TouchEvent)
            return true;
        return this._event.pointerType == "touch";
    }
}
NormalizedEvent.Namespace=`Aventus`;
__as1(_, 'NormalizedEvent', NormalizedEvent);

let Callback=class Callback {
    callbacks = new Map();
    /**
     * Clear all callbacks
     */
    clear() {
        this.callbacks.clear();
    }
    /**
     * Add a callback
     */
    add(cb, scope = null) {
        if (!this.callbacks.has(cb)) {
            this.callbacks.set(cb, scope);
        }
    }
    /**
     * Remove a callback
     */
    remove(cb) {
        this.callbacks.delete(cb);
    }
    /**
     * Trigger all callbacks
     */
    trigger(...args) {
        let result = [];
        let cbs = [...this.callbacks];
        for (let [cb, scope] of cbs) {
            result.push(cb.apply(scope, args));
        }
        return result;
    }
}
Callback.Namespace=`Aventus`;
__as1(_, 'Callback', Callback);

var HttpErrorCode;
(function (HttpErrorCode) {
    HttpErrorCode[HttpErrorCode["unknow"] = 0] = "unknow";
})(HttpErrorCode || (HttpErrorCode = {}));
__as1(_, 'HttpErrorCode', HttpErrorCode);

let compareObject=function compareObject(obj1, obj2) {
    if (Array.isArray(obj1)) {
        if (!Array.isArray(obj2)) {
            return false;
        }
        obj2 = obj2.slice();
        if (obj1.length !== obj2.length) {
            return false;
        }
        for (let i = 0; i < obj1.length; i++) {
            let foundElement = false;
            for (let j = 0; j < obj2.length; j++) {
                if (compareObject(obj1[i], obj2[j])) {
                    obj2.splice(j, 1);
                    foundElement = true;
                    break;
                }
            }
            if (!foundElement) {
                return false;
            }
        }
        return true;
    }
    else if (typeof obj1 === 'object' && obj1 !== undefined && obj1 !== null) {
        if (typeof obj2 !== 'object' || obj2 === undefined || obj2 === null) {
            return false;
        }
        if (obj1 == obj2) {
            return true;
        }
        if (obj1 instanceof HTMLElement || obj2 instanceof HTMLElement) {
            return false;
        }
        if (obj1 instanceof Date || obj2 instanceof Date) {
            return obj1.toString() === obj2.toString();
        }
        let oneProxy = false;
        if (Watcher.is(obj1)) {
            oneProxy = true;
            obj1 = Watcher.extract(obj1, false);
        }
        if (Watcher.is(obj2)) {
            oneProxy = true;
            obj2 = Watcher.extract(obj2, false);
        }
        if (obj1 instanceof Map && obj2 instanceof Map) {
            if (obj1.size != obj2.size) {
                return false;
            }
            const keys = obj1.keys();
            for (let key in keys) {
                if (!obj2.has(key)) {
                    return false;
                }
                if (!compareObject(obj1.get(key), obj2.get(key))) {
                    return false;
                }
            }
            return true;
        }
        else {
            if (Object.keys(obj1).length !== Object.keys(obj2).length) {
                return false;
            }
            for (let key in obj1) {
                if (oneProxy && Watcher['__reservedName'][key]) {
                    continue;
                }
                if (!(key in obj2)) {
                    return false;
                }
                if (!compareObject(obj1[key], obj2[key])) {
                    return false;
                }
            }
            return true;
        }
    }
    else {
        return obj1 === obj2;
    }
}
__as1(_, 'compareObject', compareObject);

let getValueFromObject=function getValueFromObject(path, obj) {
    if (path === undefined) {
        path = '';
    }
    path = path.replace(/\[(.*?)\]/g, '.$1');
    if (path == "") {
        return obj;
    }
    const val = (key) => {
        if (obj instanceof Map) {
            return obj.get(key);
        }
        return obj[key];
    };
    let splitted = path.split(".");
    for (let i = 0; i < splitted.length - 1; i++) {
        let split = splitted[i];
        let value = val(split);
        if (!value || typeof value !== 'object') {
            return undefined;
        }
        obj = value;
    }
    if (!obj || typeof obj !== 'object') {
        return undefined;
    }
    return val(splitted[splitted.length - 1]);
}
__as1(_, 'getValueFromObject', getValueFromObject);

var WatchAction;
(function (WatchAction) {
    WatchAction[WatchAction["CREATED"] = 0] = "CREATED";
    WatchAction[WatchAction["UPDATED"] = 1] = "UPDATED";
    WatchAction[WatchAction["DELETED"] = 2] = "DELETED";
})(WatchAction || (WatchAction = {}));
__as1(_, 'WatchAction', WatchAction);

let Signal=class Signal {
    __subscribes = [];
    _value;
    _onChange;
    get value() {
        Watcher._register?.register(this, "*", Watcher._register.version, "*");
        return this._value;
    }
    set value(item) {
        const oldValue = this._value;
        this._value = item;
        if (oldValue != item) {
            if (this._onChange) {
                this._onChange();
            }
            for (let fct of this.__subscribes) {
                fct(WatchAction.UPDATED, "*", item, []);
            }
        }
    }
    constructor(item, onChange) {
        this._value = item;
        this._onChange = onChange;
    }
    subscribe(fct) {
        let index = this.__subscribes.indexOf(fct);
        if (index == -1) {
            this.__subscribes.push(fct);
        }
    }
    unsubscribe(fct) {
        let index = this.__subscribes.indexOf(fct);
        if (index > -1) {
            this.__subscribes.splice(index, 1);
        }
    }
    destroy() {
        this.__subscribes = [];
    }
}
Signal.Namespace=`Aventus`;
__as1(_, 'Signal', Signal);

let DateConverter=class DateConverter {
    static __converter = new DateConverter();
    static get converter() {
        return this.__converter;
    }
    static set converter(value) {
        this.__converter = value;
    }
    isStringDate(txt) {
        return /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d{3,6})Z$/.exec(txt) !== null;
    }
    fromString(txt) {
        return new Date(txt);
    }
    toString(date) {
        if (date.getFullYear() < 100) {
            return "0001-01-01T00:00:00.000Z";
        }
        return date.toISOString();
    }
}
DateConverter.Namespace=`Aventus`;
__as1(_, 'DateConverter', DateConverter);

var HttpMethod;
(function (HttpMethod) {
    HttpMethod["GET"] = "GET";
    HttpMethod["POST"] = "POST";
    HttpMethod["DELETE"] = "DELETE";
    HttpMethod["PUT"] = "PUT";
    HttpMethod["OPTION"] = "OPTION";
})(HttpMethod || (HttpMethod = {}));
__as1(_, 'HttpMethod', HttpMethod);

let GenericError=class GenericError {
    /**
     * Code for the error
     */
    code;
    /**
     * Description of the error
     */
    message;
    /**
     * Additional details related to the error.
     */
    details = [];
    /**
     * Creates a new instance of GenericError.
     * @param {EnumValue<T>} code - The error code.
     * @param {string} message - The error message.
     */
    constructor(code, message) {
        this.code = code;
        this.message = message + '';
    }
}
GenericError.Namespace=`Aventus`;
__as1(_, 'GenericError', GenericError);

let VoidWithError=class VoidWithError {
    /**
     * Determine if the action is a success
     */
    get success() {
        return this.errors.length == 0;
    }
    /**
     * List of errors
     */
    errors = [];
    /**
     * Converts the current instance to a VoidWithError object.
     * @returns {VoidWithError} A new instance of VoidWithError with the same error list.
     */
    toGeneric() {
        const result = new VoidWithError();
        result.errors = this.errors;
        return result;
    }
    /**
    * Checks if the error list contains a specific error code.
    * @template U - The type of error, extending GenericError.
    * @template T - The type of the error code, which extends either number or Enum.
    * @param {EnumValue<T>} code - The error code to check for.
    * @param {new (...args: any[]) => U} [type] - Optional constructor function of the error type.
    * @returns {boolean} True if the error list contains the specified error code, otherwise false.
    */
    containsCode(code, type) {
        if (type) {
            for (let error of this.errors) {
                if (error instanceof type) {
                    if (error.code == code) {
                        return true;
                    }
                }
            }
        }
        else {
            for (let error of this.errors) {
                if (error.code == code) {
                    return true;
                }
            }
        }
        return false;
    }
}
VoidWithError.Namespace=`Aventus`;
__as1(_, 'VoidWithError', VoidWithError);

let ResultWithError=class ResultWithError extends VoidWithError {
    /**
      * The result value of the action.
      * @type {U | undefined}
      */
    result;
    /**
     * Converts the current instance to a ResultWithError object.
     * @returns {ResultWithError<U>} A new instance of ResultWithError with the same error list and result value.
     */
    toGeneric() {
        const result = new ResultWithError();
        result.errors = this.errors;
        result.result = this.result;
        return result;
    }
}
ResultWithError.Namespace=`Aventus`;
__as1(_, 'ResultWithError', ResultWithError);

let Effect=class Effect {
    callbacks = [];
    isInit = false;
    isDestroy = false;
    __subscribes = [];
    __allowChanged = [];
    version = 0;
    fct;
    constructor(fct) {
        this.fct = fct;
        if (this.autoInit()) {
            this.init();
        }
    }
    autoInit() {
        return true;
    }
    init() {
        this.isInit = true;
        this.run();
    }
    run() {
        this.version++;
        Watcher._registering.push(this);
        let result = this.fct();
        Watcher._registering.splice(Watcher._registering.length - 1, 1);
        for (let i = 0; i < this.callbacks.length; i++) {
            if (this.callbacks[i].version != this.version) {
                this.callbacks[i].receiver.unsubscribe(this.callbacks[i].cb);
                this.callbacks.splice(i, 1);
                i--;
            }
        }
        return result;
    }
    register(receiver, path, version, fullPath) {
        for (let info of this.callbacks) {
            if (info.receiver == receiver && info.path == path && receiver.__path == info.registerPath) {
                info.version = version;
                info.fullPath = fullPath;
                return;
            }
        }
        let cb;
        if (path == "*") {
            cb = (action, changePath, value, dones) => { this.onChange(action, changePath, value, dones); };
        }
        else {
            cb = (action, changePath, value, dones) => {
                // if(changePath == path || changePath.startsWith(path + ".") || changePath.startsWith(path + "[")) {
                if (changePath == path) {
                    this.onChange(action, changePath, value, dones);
                }
            };
        }
        this.callbacks.push({
            receiver,
            path,
            registerPath: receiver.__path,
            cb,
            version,
            fullPath
        });
        receiver.subscribe(cb);
    }
    canChange(fct) {
        this.__allowChanged.push(fct);
    }
    checkCanChange(action, changePath, value, dones) {
        if (this.isDestroy) {
            return false;
        }
        for (let fct of this.__allowChanged) {
            if (!fct(action, changePath, value, dones)) {
                return false;
            }
        }
        return true;
    }
    onChange(action, changePath, value, dones) {
        if (!this.checkCanChange(action, changePath, value, dones)) {
            return;
        }
        this.run();
        for (let fct of this.__subscribes) {
            fct(action, changePath, value, dones);
        }
    }
    destroy() {
        this.isDestroy = true;
        this.clearCallbacks();
        this.isInit = false;
    }
    clearCallbacks() {
        for (let pair of this.callbacks) {
            pair.receiver.unsubscribe(pair.cb);
        }
        this.callbacks = [];
    }
    subscribe(fct) {
        let index = this.__subscribes.indexOf(fct);
        if (index == -1) {
            this.__subscribes.push(fct);
        }
    }
    unsubscribe(fct) {
        let index = this.__subscribes.indexOf(fct);
        if (index > -1) {
            this.__subscribes.splice(index, 1);
        }
    }
}
Effect.Namespace=`Aventus`;
__as1(_, 'Effect', Effect);

let Computed=class Computed extends Effect {
    _value;
    __path = "*";
    get value() {
        if (!this.isInit) {
            this.init();
        }
        Watcher._register?.register(this, "*", Watcher._register.version, "*");
        return this._value;
    }
    autoInit() {
        return false;
    }
    constructor(fct) {
        super(fct);
    }
    init() {
        this.isInit = true;
        this.computedValue();
    }
    computedValue() {
        this._value = this.run();
    }
    onChange(action, changePath, value, dones) {
        if (!this.checkCanChange(action, changePath, value, dones)) {
            return;
        }
        let oldValue = this._value;
        this.computedValue();
        if (oldValue === this._value) {
            return;
        }
        for (let fct of this.__subscribes) {
            fct(action, changePath, value, dones);
        }
    }
}
Computed.Namespace=`Aventus`;
__as1(_, 'Computed', Computed);

let Watcher=class Watcher {
    constructor() { }
    ;
    static __reservedName = {
        __path: '__path',
    };
    static __triggerForced = false;
    static _registering = [];
    static get _register() {
        return this._registering[this._registering.length - 1];
    }
    /**
     * Transform object into a watcher
     */
    static get(obj, onDataChanged) {
        if (obj == undefined) {
            console.error("You must define an objet / array for your proxy");
            return;
        }
        if (obj.__isProxy) {
            if (onDataChanged)
                obj.subscribe(onDataChanged);
            return obj;
        }
        const reservedName = this.__reservedName;
        const clearReservedNames = (data) => {
            if (data instanceof Object && !data.__isProxy) {
                for (let key in reservedName) {
                    delete data[key];
                }
                for (let key in data) {
                    clearReservedNames(data[key]);
                }
            }
        };
        const setProxyPath = (newProxy, newPath) => {
            if (newProxy instanceof Object && newProxy.__isProxy) {
                newProxy.__path = newPath;
            }
        };
        const jsonReplacer = (key, value) => {
            if (reservedName[key])
                return undefined;
            return value;
        };
        const addAlias = (otherBaseData, name, cb) => {
            let cbs = aliases.get(otherBaseData);
            if (!cbs) {
                cbs = [];
                aliases.set(otherBaseData, cbs);
            }
            cbs.push({
                name: name,
                fct: cb
            });
        };
        const deleteAlias = (otherBaseData, name) => {
            let cbs = aliases.get(otherBaseData);
            if (!cbs)
                return;
            for (let i = 0; i < cbs.length; i++) {
                if (cbs[i].name == name) {
                    cbs.splice(i, 1);
                    if (cbs.length == 0) {
                        aliases.delete(otherBaseData);
                    }
                    return;
                }
            }
        };
        const replaceByAlias = (target, element, prop, receiver, apply, out = {}) => {
            let fullInternalPath = "";
            if (Array.isArray(receiver)) {
                if (prop != "length") {
                    if (target.__path) {
                        fullInternalPath = target.__path;
                    }
                    fullInternalPath += "[" + prop + "]";
                }
            }
            else {
                if (target.__path) {
                    fullInternalPath = target.__path + '.';
                }
                fullInternalPath += prop;
            }
            if (receiver && internalAliases[fullInternalPath]) {
                internalAliases[fullInternalPath].unbind();
            }
            if (element instanceof Object && element.__isProxy) {
                let root = element.__root;
                if (root != proxyData.baseData) {
                    element.__validatePath();
                    let oldPath = element.__path ?? '';
                    let unbindElement = Watcher.extract(getValueFromObject(oldPath, root));
                    if (unbindElement === undefined) {
                        return element;
                    }
                    if (receiver == null) {
                        receiver = getValueFromObject(target.__path, realProxy);
                        if (internalAliases[fullInternalPath]) {
                            internalAliases[fullInternalPath].unbind();
                        }
                    }
                    if (apply) {
                        let result = Reflect.set(target, prop, unbindElement, receiver);
                    }
                    element.__addAlias(proxyData.baseData, oldPath, (type, target, receiver2, value, prop2, dones) => {
                        let triggerPath;
                        if (prop2.startsWith("[") || fullInternalPath == "" || prop2 == "") {
                            triggerPath = fullInternalPath + prop2;
                        }
                        else {
                            triggerPath = fullInternalPath + "." + prop2;
                        }
                        if (type == 'DELETED' && internalAliases[triggerPath]) {
                            internalAliases[triggerPath].unbind();
                        }
                        triggerPath = triggerPath.replace(/\[(.*?)\]/g, '.$1');
                        let splitted = triggerPath.split(".");
                        let newProp = splitted.pop();
                        let newReceiver = getValueFromObject(splitted.join("."), realProxy);
                        if (newReceiver.getTarget(false) == target)
                            trigger(type, target, newReceiver, value, newProp, dones);
                    });
                    internalAliases[fullInternalPath] = {
                        unbind: () => {
                            delete internalAliases[fullInternalPath];
                            element.__deleteAlias(proxyData.baseData, oldPath);
                            deleteAlias(root, fullInternalPath);
                        }
                    };
                    addAlias(root, fullInternalPath, (type, target, receiver2, value, prop2, dones) => {
                        const pathSave = element.__path;
                        let proxy = element.__getProxy;
                        let triggerPath;
                        if (prop2.startsWith("[") || oldPath == "" || prop2 == "") {
                            triggerPath = oldPath + prop2;
                        }
                        else {
                            triggerPath = oldPath + "." + prop2;
                        }
                        triggerPath = triggerPath.replace(/\[(.*?)\]/g, '.$1');
                        let splitted = triggerPath.split(".");
                        let newProp = splitted.pop();
                        let newReceiver = getValueFromObject(splitted.join("."), proxy);
                        if (newReceiver.getTarget(false) == target)
                            element.__trigger(type, target, newReceiver, value, newProp, dones);
                        element.__path = pathSave;
                    });
                    out.otherRoot = root;
                    return unbindElement;
                }
            }
            return element;
        };
        let currentTrace = new Error().stack?.split("\n") ?? [];
        currentTrace.shift();
        currentTrace.shift();
        const aliases = new Map();
        const internalAliases = {};
        let proxyData = {
            baseData: {},
            callbacks: {},
            callbacksReverse: new Map(),
            avoidUpdate: [],
            pathToRemove: [],
            injectedDones: null,
            history: [{
                    object: JSON.parse(JSON.stringify(obj, jsonReplacer)),
                    trace: currentTrace,
                    action: 'init',
                    path: ''
                }],
            useHistory: false,
            getProxyObject(target, element, prop) {
                let newProxy;
                element = replaceByAlias(target, element, prop, null, true);
                if (element instanceof Object && element.__isProxy) {
                    newProxy = element;
                }
                else {
                    try {
                        if (element instanceof Computed) {
                            return element;
                        }
                        if (element instanceof HTMLElement) {
                            return element;
                        }
                        if (element instanceof Object) {
                            newProxy = new Proxy(element, this);
                        }
                        else {
                            return element;
                        }
                    }
                    catch {
                        return element;
                    }
                }
                let newPath = '';
                if (Array.isArray(target)) {
                    if (/^[0-9]*$/g.exec(prop)) {
                        if (target.__path) {
                            newPath = target.__path;
                        }
                        newPath += "[" + prop + "]";
                        setProxyPath(newProxy, newPath);
                    }
                    else {
                        newPath += "." + prop;
                        setProxyPath(newProxy, newPath);
                    }
                }
                else if (element instanceof Date) {
                    return element;
                }
                else {
                    if (target.__path) {
                        newPath = target.__path + '.';
                    }
                    newPath += prop;
                    setProxyPath(newProxy, newPath);
                }
                return newProxy;
            },
            tryCustomFunction(target, prop, receiver) {
                if (prop == "__isProxy") {
                    return true;
                }
                else if (prop == "__getProxy") {
                    return realProxy;
                }
                else if (prop == "__root") {
                    return this.baseData;
                }
                else if (prop == "__validatePath") {
                    return () => {
                        if (this.baseData == target) {
                            target.__path = "";
                        }
                    };
                }
                else if (prop == "__callbacks") {
                    return this.callbacks;
                }
                else if (prop == "subscribe") {
                    let path = receiver.__path;
                    return (cb) => {
                        if (!this.callbacks[path]) {
                            this.callbacks[path] = [];
                        }
                        this.callbacks[path].push(cb);
                        this.callbacksReverse.set(cb, path);
                    };
                }
                else if (prop == "unsubscribe") {
                    return (cb) => {
                        let oldPath = this.callbacksReverse.get(cb);
                        if (oldPath === undefined)
                            return;
                        if (!this.callbacks[oldPath]) {
                            return;
                        }
                        let index = this.callbacks[oldPath].indexOf(cb);
                        if (index > -1) {
                            this.callbacks[oldPath].splice(index, 1);
                        }
                        this.callbacksReverse.delete(cb);
                    };
                }
                else if (prop == "getHistory") {
                    return () => {
                        return this.history;
                    };
                }
                else if (prop == "clearHistory") {
                    this.history = [];
                }
                else if (prop == "enableHistory") {
                    return () => {
                        this.useHistory = true;
                    };
                }
                else if (prop == "disableHistory") {
                    return () => {
                        this.useHistory = false;
                    };
                }
                else if (prop == "getTarget") {
                    return (clear = true) => {
                        if (clear)
                            clearReservedNames(target);
                        return target;
                    };
                }
                else if (prop == "toJSON") {
                    if (target.toJSON) {
                        return target.toJSON;
                    }
                    if (Array.isArray(receiver)) {
                        return () => {
                            let result = [];
                            for (let element of target) {
                                result.push(element);
                            }
                            return result;
                        };
                    }
                    return () => {
                        let result = {};
                        for (let key of Object.keys(target)) {
                            if (reservedName[key]) {
                                continue;
                            }
                            result[key] = target[key];
                        }
                        return result;
                    };
                }
                else if (prop == "__addAlias") {
                    return addAlias;
                }
                else if (prop == "__deleteAlias") {
                    return deleteAlias;
                }
                else if (prop == "__injectedDones") {
                    return (dones) => {
                        this.injectedDones = dones;
                    };
                }
                else if (prop == "__trigger") {
                    return trigger;
                }
                else if (prop == "__static_trigger") {
                    return (type) => {
                        Watcher.__triggerForced = true;
                        trigger(type, target, receiver, target, '');
                        Watcher.__triggerForced = false;
                    };
                }
                return undefined;
            },
            get(target, prop, receiver) {
                if (typeof prop == 'symbol') {
                    return Reflect.get(target, prop, receiver);
                }
                if (reservedName[prop]) {
                    return target[prop];
                }
                let customResult = this.tryCustomFunction(target, prop, receiver);
                if (customResult !== undefined) {
                    return customResult;
                }
                let element = target[prop];
                if (typeof (element) == 'function') {
                    if (Array.isArray(receiver)) {
                        let result;
                        if (prop == 'push') {
                            if (target.__isProxy) {
                                result = (el) => {
                                    let index = target.push(el);
                                    return index;
                                };
                            }
                            else {
                                result = (el) => {
                                    let index = target.length;
                                    let out = {};
                                    el = replaceByAlias(target, el, target.length + '', receiver, false, out);
                                    target.push(el);
                                    const dones = [];
                                    if (out.otherRoot) {
                                        dones.push(out.otherRoot);
                                    }
                                    trigger('CREATED', target, receiver, receiver[index], "[" + (index) + "]", dones);
                                    trigger('UPDATED', target, receiver, target.length, "length", dones);
                                    return index;
                                };
                            }
                        }
                        else if (prop == 'splice') {
                            if (target.__isProxy) {
                                result = (index, nbRemove, ...insert) => {
                                    let res = target.splice(index, nbRemove, ...insert);
                                    return res;
                                };
                            }
                            else {
                                result = (index, nbRemove, ...insert) => {
                                    let oldValues = [];
                                    const extReceiver = Watcher.extract(receiver);
                                    for (let i = index; i < index + nbRemove; i++) {
                                        oldValues.push(extReceiver[i]);
                                    }
                                    let updateLength = nbRemove != insert.length;
                                    for (let i = 0; i < oldValues.length; i++) {
                                        target.splice((index + i), 1);
                                        trigger('DELETED', target, receiver, oldValues[i], "[" + index + "]");
                                    }
                                    for (let i = 0; i < insert.length; i++) {
                                        const out = {};
                                        let value = replaceByAlias(target, insert[i], (index + i) + '', receiver, false, out);
                                        const dones = out.otherRoot ? [out.otherRoot] : [];
                                        target.splice((index + i), 0, value);
                                        trigger('CREATED', target, receiver, receiver[(index + i)], "[" + (index + i) + "]", dones);
                                    }
                                    if (updateLength)
                                        trigger('UPDATED', target, receiver, target.length, "length");
                                    return target;
                                };
                            }
                        }
                        else if (prop == 'pop') {
                            if (target.__isProxy) {
                                result = () => {
                                    let res = target.pop();
                                    return res;
                                };
                            }
                            else {
                                result = () => {
                                    let index = target.length - 1;
                                    let oldValue = receiver.length ? receiver[receiver.length] : undefined;
                                    let res = target.pop();
                                    trigger('DELETED', target, receiver, oldValue, "[" + index + "]");
                                    trigger('UPDATED', target, receiver, target.length, "length");
                                    return res;
                                };
                            }
                        }
                        else {
                            result = element.bind(target);
                        }
                        return result;
                    }
                    else if (target instanceof Map) {
                        let result;
                        if (prop == "set") {
                            if (target.__isProxy) {
                                result = (key, value) => {
                                    return target.set(key, value);
                                };
                            }
                            else {
                                result = (key, value) => {
                                    const out = {};
                                    let dones = [];
                                    key = Watcher.extract(key);
                                    value = replaceByAlias(target, value, key + '', receiver, false, out);
                                    if (out.otherRoot)
                                        dones.push(out.otherRoot);
                                    let result = target.set(key, value);
                                    trigger('CREATED', target, receiver, receiver.get(key), key + '', dones);
                                    trigger('UPDATED', target, receiver, target.size, "size", dones);
                                    return result;
                                };
                            }
                        }
                        else if (prop == "clear") {
                            if (target.__isProxy) {
                                result = () => {
                                    return target.clear();
                                };
                            }
                            else {
                                result = () => {
                                    let keys = target.keys();
                                    for (let key of keys) {
                                        let oldValue = receiver.get(key);
                                        target.delete(key);
                                        trigger('DELETED', target, receiver, oldValue, key);
                                        trigger('UPDATED', target, receiver, target.size, "size");
                                    }
                                };
                            }
                        }
                        else if (prop == "delete") {
                            if (target.__isProxy) {
                                result = (key) => {
                                    return target.delete(key);
                                };
                            }
                            else {
                                result = (key) => {
                                    key = Watcher.extract(key);
                                    let oldValue = receiver.get(key);
                                    let res = target.delete(key);
                                    trigger('DELETED', target, receiver, oldValue, key + '');
                                    trigger('UPDATED', target, receiver, target.size, "size");
                                    return res;
                                };
                            }
                        }
                        else {
                            result = element.bind(target);
                        }
                        return result;
                    }
                    return element.bind(target);
                }
                if (element instanceof Computed) {
                    return element.value;
                }
                if (Watcher._registering.length > 0) {
                    let currentPath;
                    let fullPath;
                    let isArray = Array.isArray(receiver);
                    if (isArray && /^[0-9]*$/g.exec(prop)) {
                        fullPath = receiver.__path + "[" + prop + "]";
                        currentPath = "[" + prop + "]";
                    }
                    else {
                        fullPath = receiver.__path ? receiver.__path + '.' + prop : prop;
                        currentPath = prop;
                    }
                    Watcher._register?.register(receiver, currentPath, Watcher._register.version, fullPath);
                }
                if (typeof (element) == 'object') {
                    return this.getProxyObject(target, element, prop);
                }
                return Reflect.get(target, prop, receiver);
            },
            set(target, prop, value, receiver) {
                if (typeof prop == 'symbol') {
                    return Reflect.set(target, prop, value, receiver);
                }
                let oldValue = Reflect.get(target, prop, receiver);
                value = replaceByAlias(target, value, prop, receiver, true);
                if (value instanceof Signal) {
                    value = value.value;
                }
                let triggerChange = false;
                if (!reservedName[prop]) {
                    if (Array.isArray(receiver)) {
                        if (prop != "length") {
                            triggerChange = true;
                        }
                    }
                    else {
                        if (!compareObject(value, oldValue)) {
                            triggerChange = true;
                        }
                    }
                    if (Watcher.__triggerForced) {
                        triggerChange = true;
                    }
                }
                let result = Reflect.set(target, prop, value, receiver);
                if (triggerChange) {
                    let index = this.avoidUpdate.indexOf(prop);
                    if (index == -1) {
                        let dones = this.injectedDones ?? [];
                        this.injectedDones = null;
                        trigger('UPDATED', target, receiver, value, prop, dones);
                    }
                    else {
                        this.avoidUpdate.splice(index, 1);
                    }
                }
                return result;
            },
            deleteProperty(target, prop) {
                if (typeof prop == 'symbol') {
                    return Reflect.deleteProperty(target, prop);
                }
                let triggerChange = false;
                let pathToDelete = '';
                if (!reservedName[prop]) {
                    if (Array.isArray(target)) {
                        if (prop != "length") {
                            if (target.__path) {
                                pathToDelete = target.__path;
                            }
                            pathToDelete += "[" + prop + "]";
                            triggerChange = true;
                        }
                    }
                    else {
                        if (target.__path) {
                            pathToDelete = target.__path + '.';
                        }
                        pathToDelete += prop;
                        triggerChange = true;
                    }
                }
                if (internalAliases[pathToDelete]) {
                    internalAliases[pathToDelete].unbind();
                }
                if (target.hasOwnProperty(prop)) {
                    let oldValue = target[prop];
                    if (oldValue instanceof Effect || oldValue instanceof Signal) {
                        oldValue.destroy();
                    }
                    delete target[prop];
                    if (triggerChange) {
                        clearReservedNames(oldValue);
                        trigger('DELETED', target, null, oldValue, prop);
                    }
                    return true;
                }
                return false;
            },
            defineProperty(target, prop, descriptor) {
                if (typeof prop == 'symbol') {
                    return Reflect.defineProperty(target, prop, descriptor);
                }
                let triggerChange = false;
                let newPath = '';
                if (!reservedName[prop]) {
                    if (Array.isArray(target)) {
                        if (prop != "length") {
                            if (target.__path) {
                                newPath = target.__path;
                            }
                            newPath += "[" + prop + "]";
                            if (!target.hasOwnProperty(prop)) {
                                triggerChange = true;
                            }
                        }
                    }
                    else {
                        if (target.__path) {
                            newPath = target.__path + '.';
                        }
                        newPath += prop;
                        if (!target.hasOwnProperty(prop)) {
                            triggerChange = true;
                        }
                    }
                }
                let result = Reflect.defineProperty(target, prop, descriptor);
                if (triggerChange) {
                    this.avoidUpdate.push(prop);
                    let proxyEl = this.getProxyObject(target, descriptor.value, prop);
                    target[prop] = proxyEl;
                    trigger('CREATED', target, null, proxyEl, prop);
                }
                return result;
            },
            ownKeys(target) {
                let result = Reflect.ownKeys(target);
                for (let i = 0; i < result.length; i++) {
                    let key = result[i];
                    if (typeof key == 'string') {
                        if (reservedName[key]) {
                            result.splice(i, 1);
                            i--;
                        }
                    }
                }
                return result;
            },
        };
        if (onDataChanged) {
            proxyData.callbacks[''] = [onDataChanged];
        }
        const trigger = (type, target, receiver, value, prop, dones = []) => {
            if (dones.includes(proxyData.baseData)) {
                return;
            }
            if (target.__isProxy) {
                return;
            }
            let rootPath;
            if (receiver == null) {
                rootPath = target.__path;
            }
            else {
                rootPath = receiver.__path;
            }
            if (rootPath != "") {
                if (Array.isArray(receiver)) {
                    if (prop && !prop.startsWith("[")) {
                        if (/^[0-9]*$/g.exec(prop)) {
                            rootPath += "[" + prop + "]";
                        }
                        else {
                            rootPath += "." + prop;
                        }
                    }
                    else {
                        rootPath += prop;
                    }
                }
                else {
                    if (prop && !prop.startsWith("[")) {
                        rootPath += ".";
                    }
                    rootPath += prop;
                }
            }
            else {
                rootPath = prop;
            }
            let stacks = [];
            if (proxyData.useHistory) {
                let allStacks = new Error().stack?.split("\n") ?? [];
                for (let i = allStacks.length - 1; i >= 0; i--) {
                    let current = allStacks[i].trim().replace("at ", "");
                    if (current.startsWith("Object.set") || current.startsWith("Proxy.result")) {
                        break;
                    }
                    stacks.push(current);
                }
            }
            dones.push(proxyData.baseData);
            let aliasesDone = [];
            for (let name in proxyData.callbacks) {
                let pathToSend = rootPath;
                if (name !== "") {
                    let regex = new RegExp("^" + name.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, '\\$&') + "(\\.|(\\[)|$)");
                    if (!regex.test(rootPath)) {
                        let regex2 = new RegExp("^" + rootPath.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, '\\$&') + "(\\.|(\\[)|$)");
                        if (!regex2.test(name)) {
                            continue;
                        }
                        else {
                            pathToSend = "";
                        }
                    }
                    else {
                        pathToSend = rootPath.replace(regex, "$2");
                    }
                }
                if (name === "" && proxyData.useHistory) {
                    proxyData.history.push({
                        object: JSON.parse(JSON.stringify(proxyData.baseData, jsonReplacer)),
                        trace: stacks.reverse(),
                        action: WatchAction[type],
                        path: pathToSend
                    });
                }
                let cbs = [...proxyData.callbacks[name]];
                for (let cb of cbs) {
                    try {
                        cb(WatchAction[type], pathToSend, value, dones);
                    }
                    catch (e) {
                        if (e != 'impossible')
                            console.error(e);
                    }
                }
                for (let [key, infos] of aliases) {
                    if (!dones.includes(key)) {
                        for (let info of infos) {
                            if (info.name == name) {
                                aliasesDone.push(key);
                                if (target.__path) {
                                    let oldPath = target.__path;
                                    info.fct(type, target, receiver, value, prop, dones);
                                    target.__path = oldPath;
                                }
                                else {
                                    info.fct(type, target, receiver, value, prop, dones);
                                }
                            }
                        }
                    }
                }
            }
            for (let [key, infos] of aliases) {
                if (!dones.includes(key) && !aliasesDone.includes(key)) {
                    for (let info of infos) {
                        let regex = new RegExp("^" + info.name.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, '\\$&') + "(\\.|(\\[)|$)");
                        if (!regex.test(rootPath)) {
                            continue;
                        }
                        let newProp = rootPath.replace(info.name, "");
                        if (newProp.startsWith(".")) {
                            newProp = newProp.slice(1);
                        }
                        if (target.__path) {
                            let oldPath = target.__path;
                            info.fct(type, target, receiver, value, newProp, dones);
                            target.__path = oldPath;
                        }
                        else {
                            info.fct(type, target, receiver, value, newProp, dones);
                        }
                    }
                }
            }
        };
        var realProxy = new Proxy(obj, proxyData);
        proxyData.baseData = obj;
        setProxyPath(realProxy, '');
        return realProxy;
    }
    static is(obj) {
        return typeof obj == 'object' && obj.__isProxy;
    }
    static extract(obj, clearPath = false) {
        if (this.is(obj)) {
            return obj.getTarget(clearPath);
        }
        else {
            if (obj instanceof Object) {
                for (let key in this.__reservedName) {
                    delete obj[key];
                }
            }
        }
        return obj;
    }
    static trigger(type, target) {
        if (this.is(target)) {
            target.__static_trigger(type);
        }
    }
    /**
     * Create a computed variable that will watch any changes
     */
    static computed(fct) {
        const comp = new Computed(fct);
        return comp;
    }
    /**
     * Create an effect variable that will watch any changes
     */
    static effect(fct) {
        const comp = new Effect(fct);
        return comp;
    }
    /**
     * Create an effect variable that will watch any changes inside the fct and trigger the cb on change
     */
    static watch(fct, cb) {
        const comp = new Effect(fct);
        comp.subscribe(cb);
        return comp;
    }
    /**
     * Create a signal variable
     */
    static signal(item, onChange) {
        return new Signal(item, onChange);
    }
}
Watcher.Namespace=`Aventus`;
__as1(_, 'Watcher', Watcher);

let ComputedNoRecomputed=class ComputedNoRecomputed extends Computed {
    init() {
        this.isInit = true;
        Watcher._registering.push(this);
        this._value = this.fct();
        Watcher._registering.splice(Watcher._registering.length - 1, 1);
    }
    computedValue() {
        if (this.isInit)
            this._value = this.fct();
        else
            this.init();
    }
    run() { }
}
ComputedNoRecomputed.Namespace=`Aventus`;
__as1(_, 'ComputedNoRecomputed', ComputedNoRecomputed);

let HttpError=class HttpError extends GenericError {
}
HttpError.Namespace=`Aventus`;
__as1(_, 'HttpError', HttpError);

let Json=class Json {
    /**
     * Converts a JavaScript class instance to a JSON object.
     * @template T - The type of the object to convert.
     * @param {T} obj - The object to convert to JSON.
     * @param {JsonToOptions} [options] - Options for JSON conversion.
     * @returns {{ [key: string | number]: any; }} Returns the JSON representation of the object.
     */
    static classToJson(obj, options) {
        const realOptions = {
            isValidKey: options?.isValidKey ?? (() => true),
            replaceKey: options?.replaceKey ?? ((key) => key),
            transformValue: options?.transformValue ?? ((key, value) => value),
            beforeEnd: options?.beforeEnd ?? ((res) => res)
        };
        return this.__classToJson(obj, realOptions);
    }
    static __classToJson(obj, options) {
        let result = {};
        let descriptors = Object.getOwnPropertyDescriptors(obj);
        for (let key in descriptors) {
            if (options.isValidKey(key))
                result[options.replaceKey(key)] = options.transformValue(key, descriptors[key].value);
        }
        let cst = obj.constructor;
        while (cst.prototype && cst != Object.prototype) {
            let descriptorsClass = Object.getOwnPropertyDescriptors(cst.prototype);
            for (let key in descriptorsClass) {
                if (options.isValidKey(key)) {
                    let descriptor = descriptorsClass[key];
                    if (descriptor?.get) {
                        result[options.replaceKey(key)] = options.transformValue(key, obj[key]);
                    }
                }
            }
            cst = Object.getPrototypeOf(cst);
        }
        result = options.beforeEnd(result);
        return result;
    }
    /**
    * Converts a JSON object to a JavaScript class instance.
    * @template T - The type of the object to convert.
    * @param {T} obj - The object to populate with JSON data.
    * @param {*} data - The JSON data to populate the object with.
    * @param {JsonFromOptions} [options] - Options for JSON deserialization.
    * @returns {T} Returns the populated object.
    */
    static classFromJson(obj, data, options) {
        let realOptions = {
            transformValue: options?.transformValue ?? ((key, value) => value),
            replaceUndefined: options?.replaceUndefined ?? false,
            replaceUndefinedWithKey: options?.replaceUndefinedWithKey ?? false,
        };
        return this.__classFromJson(obj, data, realOptions);
    }
    static __classFromJson(obj, data, options) {
        let props = Object.getOwnPropertyNames(obj);
        for (let prop of props) {
            let propUpperFirst = prop[0].toUpperCase() + prop.slice(1);
            let value = data[prop] === undefined ? data[propUpperFirst] : data[prop];
            if (value !== undefined || options.replaceUndefined || (options.replaceUndefinedWithKey && (Object.hasOwn(data, prop) || Object.hasOwn(data, propUpperFirst)))) {
                let propInfo = Object.getOwnPropertyDescriptor(obj, prop);
                if (propInfo?.writable) {
                    obj[prop] = options.transformValue(prop, value);
                }
            }
        }
        let cstTemp = obj.constructor;
        while (cstTemp.prototype && cstTemp != Object.prototype) {
            props = Object.getOwnPropertyNames(cstTemp.prototype);
            for (let prop of props) {
                let propUpperFirst = prop[0].toUpperCase() + prop.slice(1);
                let value = data[prop] === undefined ? data[propUpperFirst] : data[prop];
                if (value !== undefined || options.replaceUndefined || (options.replaceUndefinedWithKey && (Object.hasOwn(data, prop) || Object.hasOwn(data, propUpperFirst)))) {
                    let propInfo = Object.getOwnPropertyDescriptor(cstTemp.prototype, prop);
                    if (propInfo?.set) {
                        obj[prop] = options.transformValue(prop, value);
                    }
                }
            }
            cstTemp = Object.getPrototypeOf(cstTemp);
        }
        return obj;
    }
}
Json.Namespace=`Aventus`;
__as1(_, 'Json', Json);

let Data=class Data {
    /**
     * The schema for the class
     */
    static $schema;
    /**
     * The current namespace
     */
    static Namespace = "";
    /**
     * Get the unique type for the data. Define it as the namespace + class name
     */
    static get Fullname() { return this.Namespace + "." + this.name; }
    /**
     * The current namespace
     */
    get namespace() {
        return this.constructor['Namespace'];
    }
    /**
     * Get the unique type for the data. Define it as the namespace + class name
     */
    get $type() {
        return this.constructor['Fullname'];
    }
    /**
     * Get the name of the class
     */
    get className() {
        return this.constructor.name;
    }
    /**
     * Get a JSON for the current object
     */
    toJSON() {
        let toAvoid = ['className', 'namespace'];
        return Json.classToJson(this, {
            isValidKey: (key) => !toAvoid.includes(key)
        });
    }
    /**
     * Clone the object by transforming a parsed JSON string back into the original type
     */
    clone() {
        return Converter.transform(JSON.parse(JSON.stringify(this)));
    }
}
Data.Namespace=`Aventus`;
__as1(_, 'Data', Data);

let ConverterTransform=class ConverterTransform {
    transform(data) {
        return this.transformLoop(data);
    }
    createInstance(data) {
        if (data.$type) {
            let cst = Converter.info.get(data.$type);
            if (cst) {
                return new cst();
            }
        }
        return undefined;
    }
    beforeTransformObject(obj) {
    }
    afterTransformObject(obj) {
    }
    transformLoop(data) {
        if (data === null) {
            return data;
        }
        if (Array.isArray(data)) {
            let result = [];
            for (let element of data) {
                result.push(this.transformLoop(element));
            }
            return result;
        }
        if (data instanceof Date) {
            return data;
        }
        if (typeof data === 'object' && !/^\s*class\s+/.test(data.toString())) {
            let objTemp = this.createInstance(data);
            if (objTemp) {
                if (objTemp instanceof Map) {
                    if (data.values) {
                        for (const keyValue of data.values) {
                            objTemp.set(this.transformLoop(keyValue[0]), this.transformLoop(keyValue[1]));
                        }
                    }
                    return objTemp;
                }
                let obj = objTemp;
                this.beforeTransformObject(obj);
                if (obj.fromJSON) {
                    obj = obj.fromJSON(data);
                }
                else {
                    obj = Json.classFromJson(obj, data, {
                        transformValue: (key, value) => {
                            if (obj[key] instanceof Date) {
                                return value ? new Date(value) : null;
                            }
                            else if (typeof value == 'string' && DateConverter.converter.isStringDate(value)) {
                                return value ? DateConverter.converter.fromString(value) : null;
                            }
                            else if (obj[key] instanceof Map) {
                                let map = new Map();
                                if ("$type" in value && value['$type'] == "Aventus.Map") {
                                    value = value.values;
                                }
                                for (const keyValue of value) {
                                    map.set(this.transformLoop(keyValue[0]), this.transformLoop(keyValue[1]));
                                }
                                return map;
                            }
                            else if (obj instanceof Data) {
                                let cst = obj.constructor;
                                if (cst.$schema[key] == 'boolean') {
                                    return value ? true : false;
                                }
                                else if (cst.$schema[key] == 'number') {
                                    return isNaN(Number(value)) ? 0 : Number(value);
                                }
                                else if (cst.$schema[key] == 'number') {
                                    return isNaN(Number(value)) ? 0 : Number(value);
                                }
                                else if (cst.$schema[key] == 'Date') {
                                    return value ? new Date(value) : null;
                                }
                            }
                            return this.transformLoop(value);
                        }
                    });
                }
                this.afterTransformObject(obj);
                return obj;
            }
            let result = {};
            for (let key in data) {
                result[key] = this.transformLoop(data[key]);
            }
            return result;
        }
        if (typeof data == 'string' && /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d{3})Z$/.exec(data)) {
            return new Date(data);
        }
        return data;
    }
    copyValuesClass(target, src, options) {
        const realOptions = {
            isValidKey: options?.isValidKey ?? (() => true),
            replaceKey: options?.replaceKey ?? ((key) => key),
            transformValue: options?.transformValue ?? ((key, value) => value),
        };
        this.__classCopyValues(target, src, realOptions);
    }
    __classCopyValues(target, src, options) {
        let props = Object.getOwnPropertyNames(target);
        for (let prop of props) {
            let propInfo = Object.getOwnPropertyDescriptor(target, prop);
            if (propInfo?.writable) {
                if (options.isValidKey(prop))
                    target[options.replaceKey(prop)] = options.transformValue(prop, src[prop]);
            }
        }
        let cstTemp = target.constructor;
        while (cstTemp.prototype && cstTemp != Object.prototype) {
            props = Object.getOwnPropertyNames(cstTemp.prototype);
            for (let prop of props) {
                let propInfo = Object.getOwnPropertyDescriptor(cstTemp.prototype, prop);
                if (propInfo?.set && propInfo.get) {
                    if (options.isValidKey(prop))
                        target[options.replaceKey(prop)] = options.transformValue(prop, src[prop]);
                }
            }
            cstTemp = Object.getPrototypeOf(cstTemp);
        }
    }
}
ConverterTransform.Namespace=`Aventus`;
__as1(_, 'ConverterTransform', ConverterTransform);

let Converter=class Converter {
    /**
    * Map storing information about registered types.
    */
    static info = new Map([["Aventus.Map", Map]]);
    /**
    * Map storing schemas for registered types.
    */
    static schema = new Map();
    /**
     * Internal converter instance.
     */
    static __converter = new ConverterTransform();
    /**
     * Getter for the internal converter instance.
     */
    static get converterTransform() {
        return this.__converter;
    }
    /**
    * Sets the converter instance.
    * @param converter The converter instance to set.
    */
    static setConverter(converter) {
        this.__converter = converter;
    }
    /**
    * Registers a unique string type for any class.
    * @param $type The unique string type identifier.
    * @param cst The constructor function for the class.
    * @param schema Optional schema for the registered type.
    */
    static register($type, cst, schema) {
        this.info.set($type, cst);
        if (schema) {
            this.schema.set($type, schema);
        }
    }
    /**
     * Transforms the provided data using the current converter instance.
     * @template T
     * @param {*} data The data to transform.
     * @param {IConverterTransform} [converter] Optional converter instance to use for transformation.
     * @returns {T} Returns the transformed data.
     */
    static transform(data, converter) {
        if (!converter) {
            converter = this.converterTransform;
        }
        return converter.transform(data);
    }
    /**
     * Copies values from one class instance to another using the current converter instance.
     * @template T
     * @param {T} to The destination class instance to copy values into.
     * @param {T} from The source class instance to copy values from.
     * @param {ClassCopyOptions} [options] Optional options for the copy operation.
     * @param {IConverterTransform} [converter] Optional converter instance to use for the copy operation.
     * @returns {T} Returns the destination class instance with copied values.
     */
    static copyValuesClass(to, from, options, converter) {
        if (!converter) {
            converter = this.converterTransform;
        }
        return converter.copyValuesClass(to, from, options);
    }
}
Converter.Namespace=`Aventus`;
__as1(_, 'Converter', Converter);

let HttpRequest=class HttpRequest {
    static options;
    static configure(options) {
        this.options = options;
    }
    request;
    url;
    methodSpoofing = false;
    constructor(url, method = HttpMethod.GET, body, methodSpoofing = false) {
        this.url = url;
        this.request = {};
        this.methodSpoofing = methodSpoofing;
        this.setMethod(method);
        this.prepareBody(body);
    }
    setUrl(url) {
        this.url = url;
    }
    toString() {
        return this.url + " : " + JSON.stringify(this.request);
    }
    setBody(body) {
        this.prepareBody(body);
    }
    setMethod(method) {
        this.request.method = method;
    }
    /**
     * Replace method Put/Delete by _method:"put" inside a form
     */
    enableMethodSpoofing() {
        this.methodSpoofing = true;
    }
    objectToFormData(obj, formData, parentKey) {
        formData = formData || new FormData();
        let byPass = obj;
        if (byPass.__isProxy) {
            obj = byPass.getTarget();
        }
        const keys = obj.toJSON ? Object.keys(obj.toJSON()) : Object.keys(obj);
        for (let i = 0; i < keys.length; i++) {
            const key = keys[i];
            let value = obj[key];
            const newKey = parentKey ? `${parentKey}[${key}]` : key;
            if (value instanceof Date) {
                formData.append(newKey, DateConverter.converter.toString(value));
            }
            else if (typeof value === 'object' &&
                value !== null &&
                !(value instanceof File)) {
                if (Array.isArray(value)) {
                    for (let j = 0; j < value.length; j++) {
                        const arrayKey = `${newKey}[${j}]`;
                        this.objectToFormData({ [arrayKey]: value[j] }, formData);
                    }
                }
                else {
                    this.objectToFormData(value, formData, newKey);
                }
            }
            else {
                if (value === undefined || value === null) {
                    value = "";
                }
                else if (Watcher.is(value)) {
                    value = Watcher.extract(value);
                }
                formData.append(newKey, value);
            }
        }
        return formData;
    }
    jsonReplacer(key, value) {
        if (this[key] instanceof Date) {
            return DateConverter.converter.toString(this[key]);
        }
        return value;
    }
    prepareBody(data) {
        if (!data) {
            return;
        }
        else if (data instanceof FormData) {
            this.request.body = data;
        }
        else {
            let useFormData = false;
            const analyseFormData = (obj) => {
                for (let key in obj) {
                    if (obj[key] instanceof File) {
                        useFormData = true;
                        break;
                    }
                    else if (Array.isArray(obj[key]) && obj[key].length > 0 && obj[key][0] instanceof File) {
                        useFormData = true;
                        break;
                    }
                    else if (typeof obj[key] == 'object' && !Array.isArray(obj[key]) && !(obj[key] instanceof Date)) {
                        analyseFormData(obj[key]);
                        if (useFormData) {
                            break;
                        }
                    }
                }
            };
            analyseFormData(data);
            if (useFormData) {
                this.request.body = this.objectToFormData(data);
            }
            else {
                this.request.body = JSON.stringify(data, this.jsonReplacer);
                this.setHeader("Content-Type", "Application/json");
            }
        }
        if (this.methodSpoofing) {
            if (this.request.method?.toUpperCase() == Aventus.HttpMethod.PUT) {
                if (this.request.body instanceof FormData) {
                    this.request.body.append("_method", Aventus.HttpMethod.PUT);
                    this.request.method = Aventus.HttpMethod.POST;
                }
            }
            else if (this.request.method?.toUpperCase() == Aventus.HttpMethod.DELETE) {
                if (this.request.body instanceof FormData) {
                    this.request.body.append("_method", Aventus.HttpMethod.DELETE);
                    this.request.method = Aventus.HttpMethod.POST;
                }
            }
        }
    }
    setHeader(name, value) {
        if (!this.request.headers) {
            this.request.headers = [];
        }
        this.request.headers.push([name, value]);
    }
    setCredentials(credentials) {
        this.request.credentials = credentials;
    }
    async _query(router) {
        let result = new ResultWithError();
        try {
            const isFull = this.url.match("https?://");
            if (!this.url.startsWith("/") && !isFull) {
                this.url = "/" + this.url;
            }
            if (HttpRequest.options?.beforeSend) {
                const beforeSendResult = await HttpRequest.options.beforeSend(this);
                result.errors = beforeSendResult.errors;
            }
            const fullUrl = isFull ? this.url : router ? router.options.url + this.url : this.url;
            result.result = await fetch(fullUrl, this.request);
        }
        catch (e) {
            result.errors.push(new HttpError(HttpErrorCode.unknow, e));
        }
        return result;
    }
    async query(router) {
        let result = await this._query(router);
        if (HttpRequest.options?.responseMiddleware) {
            result = await HttpRequest.options.responseMiddleware(result, this);
        }
        return result;
    }
    async queryVoid(router) {
        let resultTemp = await this.query(router);
        let result = new VoidWithError();
        if (!resultTemp.success) {
            result.errors = resultTemp.errors;
            return result;
        }
        try {
            if (!resultTemp.result) {
                return result;
            }
            if (resultTemp.result.status != 204) {
                let tempResult = Converter.transform(await resultTemp.result.json());
                if (tempResult instanceof VoidWithError) {
                    for (let error of tempResult.errors) {
                        result.errors.push(error);
                    }
                }
            }
        }
        catch (e) {
        }
        return result;
    }
    async queryJSON(router) {
        let resultTemp = await this.query(router);
        let result = new ResultWithError();
        if (!resultTemp.success) {
            result.errors = resultTemp.errors;
            return result;
        }
        try {
            if (!resultTemp.result) {
                return result;
            }
            let tempResult = Converter.transform(await resultTemp.result.json());
            if (tempResult instanceof VoidWithError) {
                for (let error of tempResult.errors) {
                    result.errors.push(error);
                }
                if (tempResult instanceof ResultWithError) {
                    result.result = tempResult.result;
                }
            }
            else {
                result.result = tempResult;
            }
        }
        catch (e) {
            result.errors.push(new HttpError(HttpErrorCode.unknow, e));
        }
        return result;
    }
    async queryTxt(router) {
        let resultTemp = await this.query(router);
        let result = new ResultWithError();
        if (!resultTemp.success) {
            result.errors = resultTemp.errors;
            return result;
        }
        try {
            if (!resultTemp.result) {
                return result;
            }
            result.result = await resultTemp.result.text();
        }
        catch (e) {
            result.errors.push(new HttpError(HttpErrorCode.unknow, e));
        }
        return result;
    }
    async queryBlob(router) {
        let resultTemp = await this.query(router);
        let result = new ResultWithError();
        if (!resultTemp.success) {
            result.errors = resultTemp.errors;
            return result;
        }
        try {
            if (!resultTemp.result) {
                return result;
            }
            result.result = await resultTemp.result.blob();
        }
        catch (e) {
            result.errors.push(new HttpError(HttpErrorCode.unknow, e));
        }
        return result;
    }
}
HttpRequest.Namespace=`Aventus`;
__as1(_, 'HttpRequest', HttpRequest);

let HttpRouter=class HttpRouter {
    options;
    constructor() {
        this.options = this.defineOptions(this.defaultOptionsValue());
    }
    defaultOptionsValue() {
        return {
            url: location.protocol + "//" + location.host
        };
    }
    defineOptions(options) {
        return options;
    }
    async get(url) {
        return await new HttpRequest(url).queryJSON(this);
    }
    async post(url, data) {
        return await new HttpRequest(url, HttpMethod.POST, data).queryJSON(this);
    }
    async put(url, data) {
        return await new HttpRequest(url, HttpMethod.PUT, data).queryJSON(this);
    }
    async delete(url, data) {
        return await new HttpRequest(url, HttpMethod.DELETE, data).queryJSON(this);
    }
    async option(url, data) {
        return await new HttpRequest(url, HttpMethod.OPTION, data).queryJSON(this);
    }
}
HttpRouter.Namespace=`Aventus`;
__as1(_, 'HttpRouter', HttpRouter);

let HttpRoute=class HttpRoute {
    router;
    constructor(router) {
        this.router = router ?? new HttpRouter();
    }
    getPrefix() {
        return "";
    }
}
HttpRoute.Namespace=`Aventus`;
__as1(_, 'HttpRoute', HttpRoute);

let PressManager=class PressManager {
    static globalConfig = {
        delayDblPress: 250,
        delayLongPress: 700,
        offsetDrag: 20
    };
    static configure(options) {
        this.globalConfig = options;
    }
    static create(options) {
        if (Array.isArray(options.element)) {
            let result = [];
            for (let el of options.element) {
                let cloneOpt = { ...options };
                cloneOpt.element = el;
                result.push(new PressManager(cloneOpt));
            }
            return result;
        }
        else {
            return new PressManager(options);
        }
    }
    static onEvent = new Callback();
    options;
    element;
    delayDblPress;
    delayLongPress;
    nbPress = 0;
    offsetDrag;
    dragDirection;
    state = {
        oneActionTriggered: null,
    };
    startPosition = { x: 0, y: 0 };
    customFcts = {};
    timeoutDblPress = 0;
    timeoutLongPress = 0;
    downEventSaved;
    useDblPress = false;
    stopPropagation = () => true;
    pointersRecord = {};
    functionsBinded = {
        downAction: (e) => { },
        downActionDelay: (e) => { },
        upAction: (e) => { },
        moveAction: (e) => { },
        childPressStart: (e) => { },
        childPressEnd: (e) => { },
        childPressMove: (e) => { }
    };
    /**
     * @param {*} options - The options
     * @param {HTMLElement | HTMLElement[]} options.element - The element to manage
     */
    constructor(options) {
        if (options.element === void 0) {
            throw 'You must provide an element';
        }
        this.offsetDrag = PressManager.globalConfig.offsetDrag !== undefined ? PressManager.globalConfig.offsetDrag : 20;
        this.dragDirection = 'XY';
        this.delayLongPress = PressManager.globalConfig.delayLongPress ?? 700;
        this.delayDblPress = PressManager.globalConfig.delayDblPress ?? 150;
        this.element = options.element;
        this.checkDragConstraint(options);
        this.assignValueOption(options);
        this.options = options;
        this.init();
    }
    /**
     * Get the current element focused by the PressManager
     */
    getElement() {
        return this.element;
    }
    checkDragConstraint(options) {
        if (options.onDrag !== void 0) {
            if (options.onDragStart === void 0) {
                options.onDragStart = (e) => { };
            }
            if (options.onDragEnd === void 0) {
                options.onDragEnd = (e) => { };
            }
        }
        if (options.onDragStart !== void 0) {
            if (options.onDrag === void 0) {
                options.onDrag = (e) => { };
            }
            if (options.onDragEnd === void 0) {
                options.onDragEnd = (e) => { };
            }
        }
        if (options.onDragEnd !== void 0) {
            if (options.onDragStart === void 0) {
                options.onDragStart = (e) => { };
            }
            if (options.onDrag === void 0) {
                options.onDrag = (e) => { };
            }
        }
    }
    assignValueOption(options) {
        if (PressManager.globalConfig.delayDblPress !== undefined) {
            this.delayDblPress = PressManager.globalConfig.delayDblPress;
        }
        if (options.delayDblPress !== undefined) {
            this.delayDblPress = options.delayDblPress;
        }
        if (PressManager.globalConfig.delayLongPress !== undefined) {
            this.delayLongPress = PressManager.globalConfig.delayLongPress;
        }
        if (options.delayLongPress !== undefined) {
            this.delayLongPress = options.delayLongPress;
        }
        if (PressManager.globalConfig.offsetDrag !== undefined) {
            this.offsetDrag = PressManager.globalConfig.offsetDrag;
        }
        if (options.offsetDrag !== undefined) {
            this.offsetDrag = options.offsetDrag;
        }
        if (options.dragDirection !== undefined) {
            this.dragDirection = options.dragDirection;
        }
        if (options.onDblPress !== undefined) {
            this.useDblPress = true;
        }
        if (PressManager.globalConfig.forceDblPress !== undefined) {
            this.useDblPress = PressManager.globalConfig.forceDblPress;
        }
        if (options.forceDblPress !== undefined) {
            this.useDblPress = options.forceDblPress;
        }
        if (typeof PressManager.globalConfig.stopPropagation == 'function') {
            this.stopPropagation = PressManager.globalConfig.stopPropagation;
        }
        else if (options.stopPropagation === false) {
            this.stopPropagation = () => false;
        }
        if (typeof options.stopPropagation == 'function') {
            this.stopPropagation = options.stopPropagation;
        }
        else if (options.stopPropagation === false) {
            this.stopPropagation = () => false;
        }
        if (!options.buttonAllowed)
            options.buttonAllowed = PressManager.globalConfig.buttonAllowed;
        if (!options.buttonAllowed)
            options.buttonAllowed = [0];
        if (!options.onEvent)
            options.onEvent = PressManager.globalConfig.onEvent;
    }
    bindAllFunction() {
        this.functionsBinded.downAction = this.downAction.bind(this);
        this.functionsBinded.downActionDelay = this.downActionDelay.bind(this);
        this.functionsBinded.moveAction = this.moveAction.bind(this);
        this.functionsBinded.upAction = this.upAction.bind(this);
        this.functionsBinded.childPressStart = this.childPressStart.bind(this);
        this.functionsBinded.childPressEnd = this.childPressEnd.bind(this);
        this.functionsBinded.childPressMove = this.childPressMove.bind(this);
    }
    init() {
        this.bindAllFunction();
        this.element.addEventListener("pointerdown", this.functionsBinded.downAction);
        this.element.addEventListener("touchstart", this.functionsBinded.downActionDelay);
        this.element.addEventListener("trigger_pointer_pressstart", this.functionsBinded.childPressStart);
        this.element.addEventListener("trigger_pointer_pressend", this.functionsBinded.childPressEnd);
        this.element.addEventListener("trigger_pointer_pressmove", this.functionsBinded.childPressMove);
    }
    identifyEvent(touch) {
        if ('Touch' in window && touch instanceof Touch)
            return touch.identifier;
        return touch.pointerId;
    }
    registerEvent(ev) {
        if ('TouchEvent' in window && ev instanceof TouchEvent) {
            for (let touch of ev.targetTouches) {
                const id = this.identifyEvent(touch);
                if (this.pointersRecord[id]) {
                    return false;
                }
                this.pointersRecord[id] = ev;
            }
            return true;
        }
        else {
            const id = this.identifyEvent(ev);
            if (this.pointersRecord[id]) {
                return false;
            }
            this.pointersRecord[id] = ev;
            return true;
        }
    }
    unregisterEvent(ev) {
        let result = true;
        if ('TouchEvent' in window && ev instanceof TouchEvent) {
            for (let touch of ev.changedTouches) {
                const id = this.identifyEvent(touch);
                if (!this.pointersRecord[id]) {
                    result = false;
                }
                else {
                    delete this.pointersRecord[id];
                }
            }
        }
        else {
            const id = this.identifyEvent(ev);
            if (!this.pointersRecord[id]) {
                result = false;
            }
            else {
                delete this.pointersRecord[id];
            }
        }
        return result;
    }
    genericDownAction(state, e) {
        this.downEventSaved = e;
        this.startPosition = { x: e.pageX, y: e.pageY };
        if (this.options.onLongPress) {
            this.timeoutLongPress = setTimeout(() => {
                if (!state.oneActionTriggered) {
                    if (this.options.onLongPress) {
                        if (this.options.onLongPress(e, this) !== false) {
                            state.oneActionTriggered = this;
                        }
                    }
                }
            }, this.delayLongPress);
        }
    }
    pointerEventTriggered = false;
    downActionDelay(ev) {
        if (!this.pointerEventTriggered) {
            this.downAction(ev);
        }
        else {
            ev.stopImmediatePropagation();
        }
        setTimeout(() => {
            this.pointerEventTriggered = false;
        }, 0);
    }
    downAction(ev) {
        this.pointerEventTriggered = true;
        const isFirst = Object.values(this.pointersRecord).length == 0;
        if (!this.registerEvent(ev)) {
            if (this.stopPropagation()) {
                ev.stopImmediatePropagation();
            }
            return;
        }
        const e = new NormalizedEvent(ev);
        if (this.options.onEvent) {
            this.options.onEvent(e);
        }
        PressManager.onEvent.trigger(e, this);
        if (e.button != undefined && !this.options.buttonAllowed?.includes(e.button)) {
            this.unregisterEvent(ev);
            return;
        }
        if (this.stopPropagation()) {
            e.stopImmediatePropagation();
        }
        this.customFcts = {};
        if (this.nbPress == 0 && isFirst) {
            this.state.oneActionTriggered = null;
            clearTimeout(this.timeoutDblPress);
        }
        if (isFirst) {
            document.addEventListener("pointerup", this.functionsBinded.upAction);
            document.addEventListener("pointercancel", this.functionsBinded.upAction);
            document.addEventListener("touchend", this.functionsBinded.upAction);
            document.addEventListener("touchcancel", this.functionsBinded.upAction);
            document.addEventListener("pointermove", this.functionsBinded.moveAction);
        }
        this.genericDownAction(this.state, e);
        if (this.options.onPressStart) {
            this.options.onPressStart(e, this);
            this.lastEmitEvent = e;
            // this.emitTriggerFunctionParent("pressstart", e);
        }
        this.emitTriggerFunction("pressstart", e);
    }
    genericUpAction(state, e) {
        clearTimeout(this.timeoutLongPress);
        if (state.oneActionTriggered == this) {
            if (this.options.onDragEnd) {
                this.options.onDragEnd(e, this);
            }
            else if (this.customFcts.src && this.customFcts.onDragEnd) {
                this.customFcts.onDragEnd(e, this.customFcts.src);
            }
        }
        else {
            if (this.useDblPress) {
                this.nbPress++;
                if (this.nbPress == 2) {
                    if (!state.oneActionTriggered) {
                        this.nbPress = 0;
                        if (this.options.onDblPress) {
                            if (this.options.onDblPress(e, this) !== false) {
                                state.oneActionTriggered = this;
                            }
                        }
                    }
                }
                else if (this.nbPress == 1) {
                    this.timeoutDblPress = setTimeout(() => {
                        this.nbPress = 0;
                        if (!state.oneActionTriggered) {
                            if (this.options.onPress) {
                                if (this.options.onPress(e, this) !== false) {
                                    state.oneActionTriggered = this;
                                }
                            }
                        }
                    }, this.delayDblPress);
                }
            }
            else {
                if (!state.oneActionTriggered) {
                    if (this.options.onPress) {
                        if (this.options.onPress(e, this) !== false) {
                            state.oneActionTriggered = this;
                        }
                    }
                }
            }
        }
    }
    upAction(ev) {
        if (!this.unregisterEvent(ev)) {
            if (this.stopPropagation()) {
                ev.stopImmediatePropagation();
            }
            return;
        }
        const e = new NormalizedEvent(ev);
        if (this.options.onEvent) {
            this.options.onEvent(e);
        }
        PressManager.onEvent.trigger(e, this);
        if (this.stopPropagation()) {
            e.stopImmediatePropagation();
        }
        if (Object.values(this.pointersRecord).length == 0) {
            document.removeEventListener("pointerup", this.functionsBinded.upAction);
            document.removeEventListener("pointercancel", this.functionsBinded.upAction);
            document.removeEventListener("touchend", this.functionsBinded.upAction);
            document.removeEventListener("touchcancel", this.functionsBinded.upAction);
            document.removeEventListener("pointermove", this.functionsBinded.moveAction);
        }
        this.genericUpAction(this.state, e);
        if (this.options.onPressEnd) {
            this.options.onPressEnd(e, this);
            this.lastEmitEvent = e;
            // this.emitTriggerFunctionParent("pressend", e);
        }
        this.emitTriggerFunction("pressend", e);
    }
    genericMoveAction(state, e) {
        if (!state.oneActionTriggered) {
            let xDist = e.pageX - this.startPosition.x;
            let yDist = e.pageY - this.startPosition.y;
            let distance = 0;
            if (this.dragDirection == 'XY')
                distance = Math.sqrt(xDist * xDist + yDist * yDist);
            else if (this.dragDirection == 'X')
                distance = Math.abs(xDist);
            else
                distance = Math.abs(yDist);
            if (distance > this.offsetDrag && this.downEventSaved) {
                if (this.options.onDragStart) {
                    if (this.options.onDragStart(this.downEventSaved, this) !== false) {
                        state.oneActionTriggered = this;
                    }
                }
            }
        }
        else if (state.oneActionTriggered == this) {
            if (this.options.onDrag) {
                this.options.onDrag(e, this);
            }
            else if (this.customFcts.src && this.customFcts.onDrag) {
                this.customFcts.onDrag(e, this.customFcts.src);
            }
        }
    }
    moveAction(ev) {
        const e = new NormalizedEvent(ev);
        if (this.options.onEvent) {
            this.options.onEvent(e);
        }
        PressManager.onEvent.trigger(e, this);
        if (this.stopPropagation()) {
            e.stopImmediatePropagation();
        }
        this.genericMoveAction(this.state, e);
        this.lastEmitEvent = e;
        // if(this.options.onDrag) {
        //     this.emitTriggerFunctionParent("pressmove", e);
        this.emitTriggerFunction("pressmove", e);
    }
    childPressStart(e) {
        if (this.lastEmitEvent == e.detail.realEvent)
            return;
        this.genericDownAction(e.detail.state, e.detail.realEvent);
        if (this.options.onPressStart) {
            this.options.onPressStart(e.detail.realEvent, this);
        }
    }
    childPressEnd(e) {
        this.unregisterEvent(e.detail.realEvent.event);
        if (Object.values(this.pointersRecord).length == 0) {
            document.removeEventListener("pointerup", this.functionsBinded.upAction);
            document.removeEventListener("pointercancel", this.functionsBinded.upAction);
            document.removeEventListener("touchend", this.functionsBinded.upAction);
            document.removeEventListener("touchcancel", this.functionsBinded.upAction);
            document.removeEventListener("pointermove", this.functionsBinded.moveAction);
        }
        if (this.lastEmitEvent == e.detail.realEvent)
            return;
        this.genericUpAction(e.detail.state, e.detail.realEvent);
        if (this.options.onPressEnd) {
            this.options.onPressEnd(e.detail.realEvent, this);
        }
    }
    childPressMove(e) {
        if (this.lastEmitEvent == e.detail.realEvent)
            return;
        this.genericMoveAction(e.detail.state, e.detail.realEvent);
    }
    lastEmitEvent;
    emitTriggerFunction(action, e, el) {
        let ev = new CustomEvent("trigger_pointer_" + action, {
            bubbles: true,
            cancelable: true,
            composed: true,
            detail: {
                state: this.state,
                customFcts: this.customFcts,
                realEvent: e
            }
        });
        this.lastEmitEvent = e;
        if (!el) {
            el = this.element;
        }
        el.dispatchEvent(ev);
    }
    /**
     * Destroy the Press instance byremoving all events
     */
    destroy() {
        if (this.element) {
            this.element.removeEventListener("pointerdown", this.functionsBinded.downAction);
            this.element.removeEventListener("touchstart", this.functionsBinded.downActionDelay);
            this.element.removeEventListener("trigger_pointer_pressstart", this.functionsBinded.childPressStart);
            this.element.removeEventListener("trigger_pointer_pressend", this.functionsBinded.childPressEnd);
            this.element.removeEventListener("trigger_pointer_pressmove", this.functionsBinded.childPressMove);
            document.removeEventListener("pointerup", this.functionsBinded.upAction);
            document.removeEventListener("pointercancel", this.functionsBinded.upAction);
            document.removeEventListener("touchend", this.functionsBinded.upAction);
            document.removeEventListener("touchcancel", this.functionsBinded.upAction);
            document.removeEventListener("pointermove", this.functionsBinded.moveAction);
        }
    }
}
PressManager.Namespace=`Aventus`;
__as1(_, 'PressManager', PressManager);

let Uri=class Uri {
    static prepare(uri) {
        let params = [];
        let i = 0;
        let regexState = uri.replace(/{.*?}/g, (group, position) => {
            group = group.slice(1, -1);
            let splitted = group.split(":");
            let name = splitted[0].trim();
            let type = "string";
            let result = "([^\\/]+)";
            i++;
            if (splitted.length > 1) {
                if (splitted[1].trim() == "number") {
                    result = "([0-9]+)";
                    type = "number";
                }
            }
            params.push({
                name,
                type,
                position: i
            });
            return result;
        });
        regexState = regexState.replace(/\*/g, ".*?").toLowerCase();
        regexState = "^" + regexState + '$';
        return {
            regex: new RegExp(regexState),
            params
        };
    }
    static getParams(from, current) {
        if (typeof from == "string") {
            from = this.prepare(from);
        }
        let matches = from.regex.exec(current.toLowerCase());
        if (matches) {
            let slugs = {};
            for (let param of from.params) {
                if (param.type == "number") {
                    slugs[param.name] = Number(matches[param.position]);
                }
                else {
                    slugs[param.name] = matches[param.position];
                }
            }
            return slugs;
        }
        return null;
    }
    static isActive(from, current) {
        if (typeof from == "string") {
            from = this.prepare(from);
        }
        return from.regex.test(current);
    }
    static normalize(path) {
        const isAbsolute = path.startsWith('/');
        const parts = path.split('/');
        const normalizedParts = [];
        for (let i = 0; i < parts.length; i++) {
            if (parts[i] === '..') {
                normalizedParts.pop();
            }
            else if (parts[i] !== '.' && parts[i] !== '') {
                normalizedParts.push(parts[i]);
            }
        }
        let normalizedPath = normalizedParts.join('/');
        if (isAbsolute) {
            normalizedPath = '/' + normalizedPath;
        }
        return normalizedPath;
    }
}
Uri.Namespace=`Aventus`;
__as1(_, 'Uri', Uri);

let State=class State {
    /**
     * Activate a custom state inside a specific manager
     * It ll be a generic state with no information inside exept name
     */
    static async activate(stateName, manager) {
        return await manager.setState(stateName);
    }
    /**
     * Activate this state inside a specific manager
     */
    async activate(manager) {
        return await manager.setState(this);
    }
    onActivate() {
    }
    onInactivate(nextState) {
    }
    async askChange(state, nextState) {
        return true;
    }
}
State.Namespace=`Aventus`;
__as1(_, 'State', State);

let EmptyState=class EmptyState extends State {
    localName;
    constructor(stateName) {
        super();
        this.localName = stateName;
    }
    /**
     * @inheritdoc
     */
    get name() {
        return this.localName;
    }
}
EmptyState.Namespace=`Aventus`;
__as1(_, 'EmptyState', EmptyState);

let StateManager=class StateManager {
    subscribers = {};
    static canBeActivate(statePattern, stateName) {
        let stateInfo = Uri.prepare(statePattern);
        return stateInfo.regex.test(stateName);
    }
    activeState;
    changeStateMutex = new Mutex();
    canChangeStateCbs = [];
    afterStateChanged = new Callback();
    /**
     * Subscribe actions for a state or a state list
     */
    subscribe(statePatterns, callbacks, autoActiveState = true) {
        if (!callbacks.active && !callbacks.inactive && !callbacks.askChange) {
            this._log(`Trying to subscribe to state : ${statePatterns} with no callbacks !`, "warning");
            return;
        }
        if (!Array.isArray(statePatterns)) {
            statePatterns = [statePatterns];
        }
        for (let statePattern of statePatterns) {
            if (!this.subscribers.hasOwnProperty(statePattern)) {
                let res = Uri.prepare(statePattern);
                let isActive = this.activeState !== undefined && res.regex.test(this.activeState.name);
                this.subscribers[statePattern] = {
                    "regex": res.regex,
                    "params": res.params,
                    "callbacks": {
                        "active": [],
                        "inactive": [],
                        "askChange": [],
                    },
                    "isActive": isActive,
                };
            }
            if (callbacks.active) {
                if (!Array.isArray(callbacks.active)) {
                    callbacks.active = [callbacks.active];
                }
                for (let activeFct of callbacks.active) {
                    this.subscribers[statePattern].callbacks.active.push(activeFct);
                    if (this.subscribers[statePattern].isActive && this.activeState && autoActiveState) {
                        let slugs = Uri.getParams(this.subscribers[statePattern], this.activeState.name);
                        if (slugs) {
                            activeFct(this.activeState, slugs);
                        }
                    }
                }
            }
            if (callbacks.inactive) {
                if (!Array.isArray(callbacks.inactive)) {
                    callbacks.inactive = [callbacks.inactive];
                }
                for (let inactiveFct of callbacks.inactive) {
                    this.subscribers[statePattern].callbacks.inactive.push(inactiveFct);
                }
            }
            if (callbacks.askChange) {
                if (!Array.isArray(callbacks.askChange)) {
                    callbacks.askChange = [callbacks.askChange];
                }
                for (let askChangeFct of callbacks.askChange) {
                    this.subscribers[statePattern].callbacks.askChange.push(askChangeFct);
                }
            }
        }
    }
    /**
     *
     */
    activateAfterSubscribe(statePatterns, callbacks) {
        if (!Array.isArray(statePatterns)) {
            statePatterns = [statePatterns];
        }
        for (let statePattern of statePatterns) {
            if (callbacks.active) {
                if (!Array.isArray(callbacks.active)) {
                    callbacks.active = [callbacks.active];
                }
                for (let activeFct of callbacks.active) {
                    if (this.subscribers[statePattern].isActive && this.activeState) {
                        let slugs = Uri.getParams(this.subscribers[statePattern], this.activeState.name);
                        if (slugs) {
                            activeFct(this.activeState, slugs);
                        }
                    }
                }
            }
        }
    }
    /**
     * Unsubscribe actions for a state or a state list
     */
    unsubscribe(statePatterns, callbacks) {
        if (!callbacks.active && !callbacks.inactive && !callbacks.askChange) {
            this._log(`Trying to unsubscribe to state : ${statePatterns} with no callbacks !`, "warning");
            return;
        }
        if (!Array.isArray(statePatterns)) {
            statePatterns = [statePatterns];
        }
        for (let statePattern of statePatterns) {
            if (this.subscribers[statePattern]) {
                if (callbacks.active) {
                    if (!Array.isArray(callbacks.active)) {
                        callbacks.active = [callbacks.active];
                    }
                    for (let activeFct of callbacks.active) {
                        let index = this.subscribers[statePattern].callbacks.active.indexOf(activeFct);
                        if (index !== -1) {
                            this.subscribers[statePattern].callbacks.active.splice(index, 1);
                        }
                    }
                }
                if (callbacks.inactive) {
                    if (!Array.isArray(callbacks.inactive)) {
                        callbacks.inactive = [callbacks.inactive];
                    }
                    for (let inactiveFct of callbacks.inactive) {
                        let index = this.subscribers[statePattern].callbacks.inactive.indexOf(inactiveFct);
                        if (index !== -1) {
                            this.subscribers[statePattern].callbacks.inactive.splice(index, 1);
                        }
                    }
                }
                if (callbacks.askChange) {
                    if (!Array.isArray(callbacks.askChange)) {
                        callbacks.askChange = [callbacks.askChange];
                    }
                    for (let askChangeFct of callbacks.askChange) {
                        let index = this.subscribers[statePattern].callbacks.askChange.indexOf(askChangeFct);
                        if (index !== -1) {
                            this.subscribers[statePattern].callbacks.askChange.splice(index, 1);
                        }
                    }
                }
                if (this.subscribers[statePattern].callbacks.active.length === 0 &&
                    this.subscribers[statePattern].callbacks.inactive.length === 0 &&
                    this.subscribers[statePattern].callbacks.askChange.length === 0) {
                    delete this.subscribers[statePattern];
                }
            }
        }
    }
    onAfterStateChanged(cb) {
        this.afterStateChanged.add(cb);
    }
    offAfterStateChanged(cb) {
        this.afterStateChanged.remove(cb);
    }
    assignDefaultState(stateName) {
        return new EmptyState(stateName);
    }
    canChangeState(cb) {
        this.canChangeStateCbs.push(cb);
    }
    /**
     * Activate a current state
     */
    async setState(state) {
        let result = await this.changeStateMutex.safeRunLastAsync(async () => {
            let stateToUse;
            if (typeof state == "string") {
                stateToUse = this.assignDefaultState(state);
            }
            else {
                stateToUse = state;
            }
            if (!stateToUse) {
                this._log("state is undefined", "error");
                this.changeStateMutex.release();
                return false;
            }
            for (let cb of this.canChangeStateCbs) {
                if (!(await cb(stateToUse))) {
                    return false;
                }
            }
            let canChange = true;
            if (this.activeState) {
                let activeToInactive = [];
                let inactiveToActive = [];
                let triggerActive = [];
                canChange = await this.activeState.askChange(this.activeState, stateToUse);
                if (canChange) {
                    for (let statePattern in this.subscribers) {
                        let subscriber = this.subscribers[statePattern];
                        if (subscriber.isActive) {
                            let clone = [...subscriber.callbacks.askChange];
                            let currentSlug = Uri.getParams(subscriber, this.activeState.name);
                            if (currentSlug) {
                                for (let i = 0; i < clone.length; i++) {
                                    let askChange = clone[i];
                                    if (!await askChange(this.activeState, stateToUse, currentSlug)) {
                                        canChange = false;
                                        break;
                                    }
                                }
                            }
                            let slugs = Uri.getParams(subscriber, stateToUse.name);
                            if (slugs === null) {
                                activeToInactive.push(subscriber);
                            }
                            else {
                                triggerActive.push({
                                    subscriber: subscriber,
                                    params: slugs
                                });
                            }
                        }
                        else {
                            let slugs = Uri.getParams(subscriber, stateToUse.name);
                            if (slugs) {
                                inactiveToActive.push({
                                    subscriber,
                                    params: slugs
                                });
                            }
                        }
                        if (!canChange) {
                            break;
                        }
                    }
                }
                if (canChange) {
                    const oldState = this.activeState;
                    this.activeState = stateToUse;
                    oldState.onInactivate(stateToUse);
                    for (let subscriber of activeToInactive) {
                        subscriber.isActive = false;
                        let oldSlug = Uri.getParams(subscriber, oldState.name);
                        if (oldSlug) {
                            let oldSlugNotNull = oldSlug;
                            let callbacks = [...subscriber.callbacks.inactive];
                            for (let callback of callbacks) {
                                callback(oldState, stateToUse, oldSlugNotNull);
                            }
                        }
                    }
                    for (let trigger of triggerActive) {
                        let callbacks = [...trigger.subscriber.callbacks.active];
                        for (let callback of callbacks) {
                            callback(stateToUse, trigger.params);
                        }
                    }
                    for (let trigger of inactiveToActive) {
                        trigger.subscriber.isActive = true;
                        let callbacks = [...trigger.subscriber.callbacks.active];
                        for (let callback of callbacks) {
                            callback(stateToUse, trigger.params);
                        }
                    }
                    stateToUse.onActivate();
                }
            }
            else {
                this.activeState = stateToUse;
                for (let key in this.subscribers) {
                    let slugs = Uri.getParams(this.subscribers[key], stateToUse.name);
                    if (slugs) {
                        let slugsNotNull = slugs;
                        this.subscribers[key].isActive = true;
                        let callbacks = [...this.subscribers[key].callbacks.active];
                        for (let callback of callbacks) {
                            callback(stateToUse, slugsNotNull);
                        }
                    }
                }
                stateToUse.onActivate();
            }
            this.afterStateChanged.trigger();
            return true;
        });
        return result ?? false;
    }
    getState() {
        return this.activeState;
    }
    /**
     * Check if a state is in the subscribers and active, return true if it is, false otherwise
     */
    isStateActive(statePattern) {
        return Uri.isActive(statePattern, this.activeState?.name ?? '');
    }
    /**
     * Get slugs information for the current state, return null if state isn't active
     */
    getStateSlugs(statePattern) {
        return Uri.getParams(statePattern, this.activeState?.name ?? '');
    }
    // 0 = error only / 1 = errors and warning / 2 = error, warning and logs (not implemented)
    logLevel() {
        return 0;
    }
    _log(msg, type) {
        if (type === "error") {
            console.error(msg);
        }
        else if (type === "warning" && this.logLevel() > 0) {
            console.warn(msg);
        }
        else if (type === "info" && this.logLevel() > 1) {
            console.log(msg);
        }
    }
}
StateManager.Namespace=`Aventus`;
__as1(_, 'StateManager', StateManager);

let TemplateContext=class TemplateContext {
    data = {};
    comp;
    computeds = [];
    watch;
    registry;
    isDestroyed = false;
    constructor(component, data = {}, parentContext, registry) {
        this.comp = component;
        this.registry = registry;
        this.watch = Watcher.get({});
        let that = this;
        for (let key in data) {
            if (data[key].__isProxy) {
                Object.defineProperty(this.data, key, {
                    get() {
                        return data[key];
                    }
                });
            }
            else {
                this.watch[key] = data[key];
                Object.defineProperty(this.data, key, {
                    get() {
                        return that.watch[key];
                    }
                });
            }
        }
        if (parentContext) {
            const descriptors = Object.getOwnPropertyDescriptors(parentContext.data);
            for (let name in descriptors) {
                Object.defineProperty(this.data, name, {
                    get() {
                        return parentContext.data[name];
                    }
                });
            }
        }
    }
    print(value) {
        return value == null ? "" : value + "";
    }
    registerIndex() {
        let name = "index";
        let i = 0;
        let fullName = name + i;
        while (this.watch[fullName] !== undefined) {
            i++;
            fullName = name + i;
        }
        return fullName;
    }
    registerLoop(dataName, _indexValue, _indexName, indexName, itemName, onThis) {
        this.watch[_indexName] = _indexValue;
        let getItems;
        let mustBeRecomputed = /if|switch|\?|\[.+?\]/g.test(dataName);
        let _class = mustBeRecomputed ? Computed : ComputedNoRecomputed;
        if (!onThis) {
            getItems = new _class(() => {
                return getValueFromObject(dataName, this.data);
            });
        }
        else {
            dataName = dataName.replace(/^this\./, '');
            getItems = new _class(() => {
                return getValueFromObject(dataName, this.comp);
            });
        }
        let getIndex = new ComputedNoRecomputed(() => {
            let items = getItems.value;
            if (!items)
                throw 'impossible';
            let keys = Object.keys(items);
            let index = keys[_getIndex.value];
            if (/^[0-9]+$/g.test(index))
                return Number(index);
            return index;
        });
        let getItem = new ComputedNoRecomputed(() => {
            let items = getItems.value;
            if (!items)
                throw 'impossible';
            let keys = Object.keys(items);
            let index = keys[_getIndex.value];
            let element = items[index];
            if (element === undefined && (Array.isArray(items) || !items)) {
                if (this.registry) {
                    let indexNb = Number(_getIndex.value);
                    if (!isNaN(indexNb)) {
                        this.registry.templates[indexNb].destructor();
                        this.registry.templates.splice(indexNb, 1);
                        for (let i = indexNb; i < this.registry.templates.length; i++) {
                            this.registry.templates[i].context.decreaseIndex(_indexName);
                        }
                    }
                }
            }
            return element;
        });
        let _getIndex = new ComputedNoRecomputed(() => {
            return this.watch[_indexName];
        });
        this.computeds.push(getIndex);
        this.computeds.push(getItem);
        this.computeds.push(_getIndex);
        if (itemName) {
            Object.defineProperty(this.data, itemName, {
                get() {
                    return getItem.value;
                }
            });
        }
        if (indexName) {
            Object.defineProperty(this.data, indexName, {
                get() {
                    return getIndex.value;
                }
            });
        }
    }
    updateIndex(newIndex, _indexName) {
        // let items: any[] | {};
        // if(!dataName.startsWith("this.")) {
        //     let comp = new Computed(() => {
        //         return getValueFromObject(dataName, this.data);
        //     });
        //     fullName = dataName.replace(/^this\./, '');
        //     items = getValueFromObject(fullName, this.comp);
        // if(Array.isArray(items)) {
        //     let regex = new RegExp("^(" + fullName.replace(/\./g, "\\.") + ")\\[(\\d+?)\\]");
        //     for(let computed of computeds) {
        //         for(let cb of computed.callbacks) {
        //             cb.path = cb.path.replace(regex, "$1[" + newIndex + "]");
        //     let oldKey = Object.keys(items)[this.watch[_indexName]]
        //     let newKey = Object.keys(items)[newIndex]
        //     let regex = new RegExp("^(" + fullName.replace(/\./g, "\\.") + "\\.)(" + oldKey + ")($|\\.)");
        //     for (let computed of computeds) {
        //         for (let cb of computed.callbacks) {
        //             cb.path = cb.path.replace(regex, "$1" + newKey + "$3")
        this.watch[_indexName] = newIndex;
    }
    increaseIndex(_indexName) {
        this.updateIndex(this.watch[_indexName] + 1, _indexName);
    }
    decreaseIndex(_indexName) {
        this.updateIndex(this.watch[_indexName] - 1, _indexName);
    }
    destructor() {
        this.isDestroyed = true;
        for (let computed of this.computeds) {
            computed.destroy();
        }
        this.computeds = [];
    }
    registerWatch(name, value) {
        let that = this;
        that.watch[name] = value;
        Object.defineProperty(that.data, name, {
            get() {
                return that.watch[name];
            }
        });
    }
    updateWatch(name, value, dones) {
        if (Watcher.is(this.watch[name])) {
            this.watch[name].__injectedDones(dones);
        }
        this.watch[name] = value;
    }
    normalizePath(path) {
        path = path.replace(/^this\./, '');
        const regex = /\[(.*?)\]/g;
        let m;
        while ((m = regex.exec(path)) !== null) {
            if (m.index === regex.lastIndex) {
                regex.lastIndex++;
            }
            let name = m[1];
            let result = getValueFromObject(name, this.data);
            if (result !== undefined) {
                path = path.replace(m[0], `[${result}]`);
            }
        }
        return path;
    }
    getValueFromItem(name) {
        if (!name)
            return undefined;
        let result = getValueFromObject(name, this.data);
        if (result !== undefined) {
            return result;
        }
        result = getValueFromObject(name, this.comp);
        if (result !== undefined) {
            return result;
        }
        return undefined;
    }
    setValueToItem(name, value) {
        setValueToObject(name, this.comp, value);
    }
}
TemplateContext.Namespace=`Aventus`;
__as1(_, 'TemplateContext', TemplateContext);

let TemplateInstance=class TemplateInstance {
    context;
    content;
    actions;
    component;
    _components = {};
    firstRenderUniqueCb = {};
    firstRenderCb = [];
    firstChild;
    lastChild;
    computeds = [];
    renderingComputeds = [];
    loopRegisteries = {};
    loops = [];
    ifs = [];
    isDestroyed = false;
    constructor(component, content, actions, loops, ifs, context) {
        this.component = component;
        this.content = content;
        this.actions = actions;
        this.ifs = ifs;
        this.loops = loops;
        this.context = context ? context : new TemplateContext(component);
        this.firstChild = content.firstElementChild;
        this.lastChild = content.lastElementChild;
        this.selectElements();
        this.transformActionsListening();
    }
    render() {
        this.updateContext();
        this.bindEvents();
        for (let cb of this.firstRenderCb) {
            cb();
        }
        for (let key in this.firstRenderUniqueCb) {
            this.firstRenderUniqueCb[key]();
        }
        this.renderSubTemplate();
    }
    destructor() {
        this.isDestroyed = true;
        for (let name in this.loopRegisteries) {
            let register = this.loopRegisteries[name];
            for (let item of register.templates) {
                item.destructor();
            }
            for (let item of register.computeds) {
                item.destroy();
            }
            if (register.unsub) {
                register.unsub();
            }
        }
        this.loopRegisteries = {};
        this.context.destructor();
        for (let computed of this.computeds) {
            computed.destroy();
        }
        for (let computed of this.renderingComputeds) {
            computed.destroy();
        }
        this.computeds = [];
        this.removeFromDOM();
    }
    removeFromDOM(avoidTrigger = false) {
        if (avoidTrigger) {
            let node = this.firstChild;
            while (node && node != this.lastChild) {
                let next = node.nextElementSibling;
                node.parentNode?.removeChild(node);
                node = next;
            }
            this.lastChild?.parentNode?.removeChild(this.lastChild);
        }
        else {
            let node = this.firstChild;
            while (node && node != this.lastChild) {
                let next = node.nextElementSibling;
                node.remove();
                node = next;
            }
            this.lastChild?.remove();
        }
    }
    selectElements() {
        this._components = {};
        let idEls = Array.from(this.content.querySelectorAll('[_id]'));
        for (let idEl of idEls) {
            let id = idEl.attributes['_id'].value;
            if (!this._components[id]) {
                this._components[id] = [];
            }
            this._components[id].push(idEl);
        }
        if (this.actions.elements) {
            for (let element of this.actions.elements) {
                let components = [];
                for (let id of element.ids) {
                    if (this._components[id]) {
                        components = [...components, ...this._components[id]];
                    }
                }
                if (element.isArray) {
                    setValueToObject(element.name, this.component, components);
                }
                else if (components[0]) {
                    setValueToObject(element.name, this.component, components[0]);
                }
            }
        }
    }
    updateContext() {
        if (this.actions.contextEdits) {
            for (let contextEdit of this.actions.contextEdits) {
                this.renderContextEdit(contextEdit);
            }
        }
    }
    renderContextEdit(edit) {
        let _class = edit.once ? ComputedNoRecomputed : Computed;
        let computed = new _class(() => {
            try {
                return edit.fct(this.context);
            }
            catch (e) {
            }
            return {};
        });
        computed.subscribe((action, path, value, dones) => {
            for (let key in computed.value) {
                let newValue = computed.value[key];
                this.context.updateWatch(key, newValue, dones);
            }
        });
        this.computeds.push(computed);
        for (let key in computed.value) {
            this.context.registerWatch(key, computed.value[key]);
        }
    }
    bindEvents() {
        if (this.actions.events) {
            for (let event of this.actions.events) {
                this.bindEvent(event);
            }
        }
        if (this.actions.pressEvents) {
            for (let event of this.actions.pressEvents) {
                this.bindPressEvent(event);
            }
        }
    }
    bindEvent(event) {
        if (!this._components[event.id]) {
            return;
        }
        if (event.isCallback) {
            for (let el of this._components[event.id]) {
                let cb = getValueFromObject(event.eventName, el);
                cb?.add((...args) => {
                    try {
                        return event.fct(this.context, args);
                    }
                    catch (e) {
                        console.error(e);
                    }
                });
            }
        }
        else {
            for (let el of this._components[event.id]) {
                el.addEventListener(event.eventName, (e) => {
                    try {
                        event.fct(e, this.context);
                    }
                    catch (e) {
                        console.error(e);
                    }
                });
            }
        }
    }
    bindPressEvent(event) {
        let id = event['id'];
        if (id && this._components[id]) {
            let clone = {};
            for (let temp in event) {
                if (temp != 'id') {
                    if (event[temp] instanceof Function) {
                        clone[temp] = (e, pressInstance) => { event[temp](e, pressInstance, this.context); };
                    }
                    else {
                        clone[temp] = event[temp];
                    }
                }
            }
            clone.element = this._components[id];
            PressManager.create(clone);
        }
    }
    transformActionsListening() {
        if (this.actions.content) {
            for (let name in this.actions.content) {
                this.transformChangeAction(name, this.actions.content[name]);
            }
        }
        if (this.actions.injection) {
            for (let injection of this.actions.injection) {
                this.transformInjectionAction(injection);
            }
        }
        if (this.actions.bindings) {
            for (let binding of this.actions.bindings) {
                this.transformBindigAction(binding);
            }
        }
    }
    transformChangeAction(name, change) {
        const [id, attr] = name.split("°");
        if (!this._components[id])
            return;
        let apply = () => { };
        if (attr == "@HTML") {
            apply = () => {
                let value = this.context.print(computed.value);
                for (const el of this._components[id])
                    el.innerHTML = value;
            };
        }
        else {
            apply = () => {
                let value = this.context.print(computed.value);
                if (value === "false") {
                    for (const el of this._components[id]) {
                        el.removeAttribute(attr);
                    }
                }
                else {
                    for (const el of this._components[id]) {
                        el.setAttribute(attr, value);
                    }
                }
            };
        }
        let _class = change.once ? ComputedNoRecomputed : Computed;
        let computed = new _class(() => {
            try {
                return change.fct(this.context);
            }
            catch (e) {
                if (e instanceof TypeError && e.message.includes("undefined")) {
                    if (computed instanceof ComputedNoRecomputed) {
                        computed.isInit = false;
                    }
                }
                else {
                    console.error(e);
                }
            }
            return "";
        });
        let timeout;
        computed.subscribe((action, path, value, dones) => {
            clearTimeout(timeout);
            // add timeout to group change that append on the same frame (for example index update)
            timeout = setTimeout(() => {
                if (computed.isDestroy)
                    return;
                apply();
            });
        });
        this.renderingComputeds.push(computed);
        this.firstRenderUniqueCb[name] = () => {
            apply();
        };
    }
    transformInjectionAction(injection) {
        if (!this._components[injection.id])
            return;
        let _class = injection.once ? ComputedNoRecomputed : Computed;
        let computed = new _class(() => {
            try {
                return injection.inject(this.context);
            }
            catch (e) {
                if (e instanceof TypeError && e.message.includes("undefined")) {
                    if (computed instanceof ComputedNoRecomputed) {
                        computed.isInit = false;
                    }
                }
                else {
                    console.error(e);
                }
            }
        });
        this.computeds.push(computed);
        computed.subscribe((action, path, value, dones) => {
            for (const el of this._components[injection.id]) {
                if (el instanceof WebComponent && el.__watch && Object.hasOwn(el.__watch, injection.injectionName)) {
                    el.__watch.__injectedDones(dones);
                }
                el[injection.injectionName] = computed.value;
            }
        });
        this.firstRenderCb.push(() => {
            for (const el of this._components[injection.id]) {
                el[injection.injectionName] = computed.value;
            }
        });
    }
    transformBindigAction(binding) {
        let isLocalChange = false;
        let _class = binding.once ? ComputedNoRecomputed : Computed;
        let computed = new _class(() => {
            try {
                return binding.inject(this.context);
            }
            catch (e) {
                if (e instanceof TypeError && e.message.includes("undefined")) {
                    if (computed instanceof ComputedNoRecomputed) {
                        computed.isInit = false;
                    }
                }
                else {
                    console.error(e);
                }
            }
        });
        this.computeds.push(computed);
        computed.subscribe((action, path, value, dones) => {
            if (isLocalChange)
                return;
            for (const el of this._components[binding.id]) {
                if (el instanceof WebComponent && el.__watch && Object.hasOwn(el.__watch, binding.injectionName)) {
                    el.__watch.__injectedDones(dones);
                }
                el[binding.injectionName] = computed.value;
            }
        });
        this.firstRenderCb.push(() => {
            for (const el of this._components[binding.id]) {
                el[binding.injectionName] = computed.value;
            }
        });
        if (binding.isCallback) {
            this.firstRenderCb.push(() => {
                for (var el of this._components[binding.id]) {
                    for (let fct of binding.eventNames) {
                        let cb = getValueFromObject(fct, el);
                        cb?.add((value) => {
                            let valueToSet = getValueFromObject(binding.injectionName, el);
                            isLocalChange = true;
                            binding.extract(this.context, valueToSet);
                            isLocalChange = false;
                        });
                    }
                }
            });
        }
        else {
            this.firstRenderCb.push(() => {
                for (var el of this._components[binding.id]) {
                    for (let fct of binding.eventNames) {
                        el.addEventListener(fct, (e) => {
                            let valueToSet = getValueFromObject(binding.injectionName, e.target);
                            isLocalChange = true;
                            binding.extract(this.context, valueToSet);
                            isLocalChange = false;
                        });
                    }
                }
            });
        }
    }
    renderSubTemplate() {
        for (let loop of this.loops) {
            this.renderLoop(loop);
        }
        for (let _if of this.ifs) {
            this.renderIf(_if);
        }
    }
    renderLoop(loop) {
        if (loop.func) {
            this.renderLoopComplex(loop);
        }
        else if (loop.simple) {
            this.renderLoopSimple(loop, loop.simple);
        }
    }
    resetLoopComplex(anchorId) {
        if (this.loopRegisteries[anchorId]) {
            for (let item of this.loopRegisteries[anchorId].templates) {
                item.destructor();
            }
            for (let item of this.loopRegisteries[anchorId].computeds) {
                item.destroy();
            }
        }
        this.loopRegisteries[anchorId] = {
            templates: [],
            computeds: [],
        };
    }
    renderLoopComplex(loop) {
        if (!loop.func)
            return;
        let fctsTemp = loop.func.bind(this.component)(this.context);
        let fcts = {
            apply: fctsTemp.apply,
            condition: fctsTemp.condition,
            transform: fctsTemp.transform ?? (() => { })
        };
        this.resetLoopComplex(loop.anchorId);
        let computedsCondition = [];
        let alreadyRecreated = false;
        const createComputedCondition = () => {
            let compCondition = new Computed(() => {
                return fcts.condition();
            });
            compCondition.value;
            compCondition.subscribe((action, path, value) => {
                if (!alreadyRecreated) {
                    alreadyRecreated = true;
                    this.renderLoopComplex(loop);
                }
            });
            computedsCondition.push(compCondition);
            this.loopRegisteries[loop.anchorId].computeds.push(compCondition);
            return compCondition;
        };
        let result = [];
        let compCondition = createComputedCondition();
        while (compCondition.value) {
            result.push(fcts.apply());
            fcts.transform();
            compCondition = createComputedCondition();
        }
        let anchor = this._components[loop.anchorId][0];
        for (let i = 0; i < result.length; i++) {
            let context = new TemplateContext(this.component, result[i], this.context, this.loopRegisteries[loop.anchorId]);
            let content = loop.template.template?.content.cloneNode(true);
            document.adoptNode(content);
            customElements.upgrade(content);
            let actions = loop.template.actions;
            let instance = new TemplateInstance(this.component, content, actions, loop.template.loops, loop.template.ifs, context);
            instance.render();
            anchor.parentNode?.insertBefore(instance.content, anchor);
            this.loopRegisteries[loop.anchorId].templates.push(instance);
        }
    }
    resetLoopSimple(anchorId, basePath) {
        let register = this.loopRegisteries[anchorId];
        if (register?.unsub) {
            register.unsub();
        }
        this.resetLoopComplex(anchorId);
    }
    renderLoopSimple(loop, simple) {
        let onThis = simple.data.startsWith("this.");
        let basePath = this.context.normalizePath(simple.data);
        this.resetLoopSimple(loop.anchorId, basePath);
        let getElements = () => this.context.getValueFromItem(basePath);
        let elements = getElements();
        if (!elements) {
            let currentPath = basePath;
            while (currentPath != '' && !elements) {
                let splittedPath = currentPath.split(".");
                splittedPath.pop();
                currentPath = splittedPath.join(".");
                elements = this.context.getValueFromItem(currentPath);
            }
            if (!elements && onThis) {
                const splittedPath = basePath.split(".");
                const firstPart = splittedPath.length > 0 ? splittedPath[0] : null;
                if (firstPart && this.component.__signals[firstPart]) {
                    elements = this.component.__signals[firstPart];
                }
                else {
                    elements = this.component.__watch;
                }
            }
            if (!elements || !(elements.__isProxy || elements instanceof Signal)) {
                debugger;
            }
            const subTemp = (action, path, value) => {
                if (basePath.startsWith(path) || path == "*") {
                    elements.unsubscribe(subTemp);
                    this.renderLoopSimple(loop, simple);
                    return;
                }
            };
            elements.subscribe(subTemp);
            return;
        }
        let indexName = this.context.registerIndex();
        let keys = Object.keys(elements);
        if (elements.__isProxy) {
            let regexArray = new RegExp("^\\[(\\d+?)\\]$");
            let regexObject = new RegExp("^([^\\.]*)$");
            let sub = (action, path, value) => {
                if (path == "") {
                    this.renderLoopSimple(loop, simple);
                    return;
                }
                if (action == WatchAction.UPDATED) {
                    return;
                }
                let index = undefined;
                regexArray.lastIndex = 0;
                regexObject.lastIndex = 0;
                let resultArray = regexArray.exec(path);
                if (resultArray) {
                    index = Number(resultArray[1]);
                }
                else {
                    let resultObject = regexObject.exec(path);
                    if (resultObject) {
                        let oldKey = resultObject[1];
                        if (action == WatchAction.CREATED) {
                            keys = Object.keys(getElements());
                            index = keys.indexOf(oldKey);
                        }
                        else if (action == WatchAction.DELETED) {
                            index = keys.indexOf(oldKey);
                            keys = Object.keys(getElements());
                        }
                    }
                }
                if (index !== undefined) {
                    let registry = this.loopRegisteries[loop.anchorId];
                    if (action == WatchAction.CREATED) {
                        let context = new TemplateContext(this.component, {}, this.context, registry);
                        context.registerLoop(basePath, index, indexName, simple.index, simple.item, onThis);
                        let content = loop.template.template?.content.cloneNode(true);
                        document.adoptNode(content);
                        customElements.upgrade(content);
                        let actions = loop.template.actions;
                        let instance = new TemplateInstance(this.component, content, actions, loop.template.loops, loop.template.ifs, context);
                        instance.render();
                        let anchor;
                        if (index < registry.templates.length) {
                            anchor = registry.templates[index].firstChild;
                        }
                        else {
                            anchor = this._components[loop.anchorId][0];
                        }
                        anchor?.parentNode?.insertBefore(instance.content, anchor);
                        registry.templates.splice(index, 0, instance);
                        for (let i = index + 1; i < registry.templates.length; i++) {
                            registry.templates[i].context.increaseIndex(indexName);
                        }
                    }
                    else if (action == WatchAction.DELETED) {
                        registry.templates[index].destructor();
                        registry.templates.splice(index, 1);
                        for (let i = index; i < registry.templates.length; i++) {
                            registry.templates[i].context.decreaseIndex(indexName);
                        }
                    }
                }
            };
            this.loopRegisteries[loop.anchorId].unsub = () => {
                elements.unsubscribe(sub);
            };
            elements.subscribe(sub);
        }
        let anchor = this._components[loop.anchorId][0];
        for (let i = 0; i < keys.length; i++) {
            let context = new TemplateContext(this.component, {}, this.context, this.loopRegisteries[loop.anchorId]);
            context.registerLoop(basePath, i, indexName, simple.index, simple.item, onThis);
            let content = loop.template.template?.content.cloneNode(true);
            document.adoptNode(content);
            customElements.upgrade(content);
            let actions = loop.template.actions;
            let instance = new TemplateInstance(this.component, content, actions, loop.template.loops, loop.template.ifs, context);
            instance.render();
            anchor.parentNode?.insertBefore(instance.content, anchor);
            this.loopRegisteries[loop.anchorId].templates.push(instance);
        }
    }
    renderIf(_if) {
        // this.renderIfMemory(_if);
        this.renderIfRecreate(_if);
    }
    renderIfMemory(_if) {
        let computeds = [];
        let instances = [];
        if (!this._components[_if.anchorId] || this._components[_if.anchorId].length == 0)
            return;
        let anchor = this._components[_if.anchorId][0];
        let currentActive = -1;
        const calculateActive = () => {
            let newActive = -1;
            for (let i = 0; i < _if.parts.length; i++) {
                if (computeds[i].value) {
                    newActive = i;
                    break;
                }
            }
            if (newActive == currentActive) {
                return;
            }
            if (currentActive != -1) {
                let instance = instances[currentActive];
                let node = instance.firstChild;
                while (node && node != instance.lastChild) {
                    let next = node.nextElementSibling;
                    instance.content.appendChild(node);
                    node = next;
                }
                if (instance.lastChild)
                    instance.content.appendChild(instance.lastChild);
            }
            currentActive = newActive;
            if (instances[currentActive])
                anchor.parentNode?.insertBefore(instances[currentActive].content, anchor);
        };
        for (let i = 0; i < _if.parts.length; i++) {
            const part = _if.parts[i];
            let _class = part.once ? ComputedNoRecomputed : Computed;
            let computed = new _class(() => {
                return part.condition(this.context);
            });
            computeds.push(computed);
            computed.subscribe(() => {
                calculateActive();
            });
            this.computeds.push(computed);
            let context = new TemplateContext(this.component, {}, this.context);
            let content = part.template.template?.content.cloneNode(true);
            document.adoptNode(content);
            customElements.upgrade(content);
            let actions = part.template.actions;
            let instance = new TemplateInstance(this.component, content, actions, part.template.loops, part.template.ifs, context);
            instances.push(instance);
            instance.render();
        }
        calculateActive();
    }
    renderIfRecreate(_if) {
        let computeds = [];
        if (!this._components[_if.anchorId] || this._components[_if.anchorId].length == 0)
            return;
        let anchor = this._components[_if.anchorId][0];
        let currentActive = undefined;
        let currentActiveNb = -1;
        const createContext = () => {
            if (currentActiveNb < 0 || currentActiveNb > _if.parts.length - 1) {
                currentActive = undefined;
                return;
            }
            const part = _if.parts[currentActiveNb];
            let context = new TemplateContext(this.component, {}, this.context);
            let content = part.template.template?.content.cloneNode(true);
            document.adoptNode(content);
            customElements.upgrade(content);
            let actions = part.template.actions;
            let instance = new TemplateInstance(this.component, content, actions, part.template.loops, part.template.ifs, context);
            currentActive = instance;
            instance.render();
            anchor.parentNode?.insertBefore(currentActive.content, anchor);
        };
        for (let i = 0; i < _if.parts.length; i++) {
            const part = _if.parts[i];
            let _class = part.once ? ComputedNoRecomputed : Computed;
            let computed = new _class(() => {
                return part.condition(this.context);
            });
            computeds.push(computed);
            computed.subscribe(() => {
                calculateActive();
            });
            this.computeds.push(computed);
        }
        const calculateActive = () => {
            let newActive = -1;
            for (let i = 0; i < _if.parts.length; i++) {
                if (computeds[i].value) {
                    newActive = i;
                    break;
                }
            }
            if (newActive == currentActiveNb) {
                return;
            }
            if (currentActive) {
                currentActive.destructor();
            }
            currentActiveNb = newActive;
            createContext();
        };
        calculateActive();
    }
}
TemplateInstance.Namespace=`Aventus`;
__as1(_, 'TemplateInstance', TemplateInstance);

let Template=class Template {
    static validatePath(path, pathToCheck) {
        if (pathToCheck.startsWith(path)) {
            return true;
        }
        return false;
    }
    cst;
    constructor(component) {
        this.cst = component;
    }
    htmlParts = [];
    setHTML(data) {
        this.htmlParts.push(data);
    }
    generateTemplate() {
        this.template = document.createElement('template');
        let currentHTML = "<slot></slot>";
        let previousSlots = {
            default: '<slot></slot>'
        };
        for (let htmlPart of this.htmlParts) {
            for (let blockName in htmlPart.blocks) {
                if (!previousSlots.hasOwnProperty(blockName)) {
                    throw "can't found slot with name " + blockName;
                }
                currentHTML = currentHTML.replace(previousSlots[blockName], htmlPart.blocks[blockName]);
            }
            for (let slotName in htmlPart.slots) {
                previousSlots[slotName] = htmlPart.slots[slotName];
            }
        }
        this.template.innerHTML = currentHTML;
    }
    /**
     * Used by the for loop and the if
     * @param template
     */
    setTemplate(template) {
        this.template = document.createElement('template');
        this.template.innerHTML = template;
    }
    template;
    actions = {};
    setActions(actions) {
        if (!this.actions) {
            this.actions = actions;
        }
        else {
            if (actions.elements) {
                if (!this.actions.elements) {
                    this.actions.elements = [];
                }
                this.actions.elements = [...actions.elements, ...this.actions.elements];
            }
            if (actions.events) {
                if (!this.actions.events) {
                    this.actions.events = [];
                }
                this.actions.events = [...actions.events, ...this.actions.events];
            }
            if (actions.pressEvents) {
                if (!this.actions.pressEvents) {
                    this.actions.pressEvents = [];
                }
                this.actions.pressEvents = [...actions.pressEvents, ...this.actions.pressEvents];
            }
            if (actions.content) {
                if (!this.actions.content) {
                    this.actions.content = actions.content;
                }
                else {
                    for (let contextProp in actions.content) {
                        if (!this.actions.content[contextProp]) {
                            this.actions.content[contextProp] = actions.content[contextProp];
                        }
                        else {
                            throw 'this should be impossible';
                        }
                    }
                }
            }
            if (actions.injection) {
                if (!this.actions.injection) {
                    this.actions.injection = actions.injection;
                }
                else {
                    for (let contextProp in actions.injection) {
                        if (!this.actions.injection[contextProp]) {
                            this.actions.injection[contextProp] = actions.injection[contextProp];
                        }
                        else {
                            this.actions.injection[contextProp] = { ...actions.injection[contextProp], ...this.actions.injection[contextProp] };
                        }
                    }
                }
            }
            if (actions.bindings) {
                if (!this.actions.bindings) {
                    this.actions.bindings = actions.bindings;
                }
                else {
                    for (let contextProp in actions.bindings) {
                        if (!this.actions.bindings[contextProp]) {
                            this.actions.bindings[contextProp] = actions.bindings[contextProp];
                        }
                        else {
                            this.actions.bindings[contextProp] = { ...actions.bindings[contextProp], ...this.actions.bindings[contextProp] };
                        }
                    }
                }
            }
            if (actions.contextEdits) {
                if (!this.actions.contextEdits) {
                    this.actions.contextEdits = [];
                }
                this.actions.contextEdits = [...actions.contextEdits, ...this.actions.contextEdits];
            }
        }
    }
    loops = [];
    addLoop(loop) {
        this.loops.push(loop);
    }
    ifs = [];
    addIf(_if) {
        this.ifs.push(_if);
    }
    createInstance(component) {
        let content = this.template.content.cloneNode(true);
        document.adoptNode(content);
        customElements.upgrade(content);
        return new TemplateInstance(component, content, this.actions, this.loops, this.ifs);
    }
}
Template.Namespace=`Aventus`;
__as1(_, 'Template', Template);

let Instance=class Instance {
    static elements = new Map();
    static get(type) {
        let result = this.elements.get(type);
        if (!result) {
            let cst = type.prototype['constructor'];
            result = new cst();
            this.elements.set(type, result);
        }
        return result;
    }
    static set(el) {
        let cst = el.constructor;
        if (this.elements.get(cst)) {
            return false;
        }
        this.elements.set(cst, el);
        return true;
    }
    static destroy(el) {
        let cst = el.constructor;
        return this.elements.delete(cst);
    }
}
Instance.Namespace=`Aventus`;
__as1(_, 'Instance', Instance);

let WebComponent=class WebComponent extends HTMLElement {
    /**
     * Add attributes informations
     */
    static get observedAttributes() {
        return [];
    }
    _first;
    _isReady;
    /**
     * Determine if the component is ready (postCreation done)
     */
    get isReady() {
        return this._isReady;
    }
    /**
     * The current namespace
     */
    static Namespace = "";
    /**
     * The current Tag / empty if abstract class
     */
    static Tag = "";
    /**
     * Get the unique type for the data. Define it as the namespace + class name
     */
    static get Fullname() { return this.Namespace + "." + this.name; }
    /**
     * The current namespace
     */
    get namespace() {
        return this.constructor['Namespace'];
    }
    /**
     * Get the name of the component class
     */
    getClassName() {
        return this.constructor.name;
    }
    /**
     * The current tag
     */
    get tag() {
        return this.constructor['Tag'];
    }
    /**
    * Get the unique type for the data. Define it as the namespace + class name
    */
    get $type() {
        return this.constructor['Fullname'];
    }
    __onChangeFct = {};
    __watch;
    __watchActions = {};
    __watchActionsCb = {};
    __watchFunctions = {};
    __watchFunctionsComputed = {};
    __pressManagers = [];
    __signalActions = {};
    __signals = {};
    __isDefaultState = true;
    __defaultActiveState = new Map();
    __defaultInactiveState = new Map();
    __statesList = {};
    constructor() {
        super();
        if (this.constructor == WebComponent) {
            throw "can't instanciate an abstract class";
        }
        this.__removeNoAnimations = this.__removeNoAnimations.bind(this);
        if (document.readyState === "loading") {
            document.addEventListener("DOMContentLoaded", this.__removeNoAnimations);
        }
        this._first = true;
        this._isReady = false;
        this.__renderTemplate();
        this.__registerWatchesActions();
        this.__registerPropertiesActions();
        this.__registerSignalsActions();
        this.__createStates();
        this.__subscribeState();
        if (this.constructor == WebComponent) {
            throw "can't instanciate an abstract class";
        }
    }
    /**
     * Remove all listeners
     * State + press
     */
    destructor() {
        WebComponentInstance.removeInstance(this);
        this.__unsubscribeState();
        for (let press of this.__pressManagers) {
            press.destroy();
        }
        for (let name in this.__watchFunctionsComputed) {
            this.__watchFunctionsComputed[name].destroy();
        }
        for (let name in this.__signals) {
            this.__signals[name].destroy();
        }
        // TODO add missing info for destructor();
        this.postDestruction();
        this.destructChildren();
    }
    destructChildren() {
        const recu = (el) => {
            for (let child of Array.from(el.children)) {
                if (child instanceof WebComponent) {
                    child.destructor();
                }
                else if (child instanceof HTMLElement) {
                    recu(child);
                }
            }
            if (el.shadowRoot) {
                for (let child of Array.from(el.shadowRoot.children)) {
                    if (child instanceof WebComponent) {
                        child.destructor();
                    }
                    else if (child instanceof HTMLElement) {
                        recu(child);
                    }
                }
            }
        };
        recu(this);
    }
    __addWatchesActions(name, fct) {
        if (!this.__watchActions[name]) {
            this.__watchActions[name] = [];
            this.__watchActionsCb[name] = (action, path, value) => {
                for (let fct of this.__watchActions[name]) {
                    fct(this, action, path, value);
                }
                if (this.__onChangeFct[name]) {
                    for (let fct of this.__onChangeFct[name]) {
                        fct(path);
                    }
                }
            };
        }
        if (fct) {
            this.__watchActions[name].push(fct);
        }
    }
    __addWatchesFunctions(infos) {
        for (let info of infos) {
            let realName;
            let autoInit;
            if (typeof info == "string") {
                realName = info;
                autoInit = false;
            }
            else {
                realName = info.name;
                autoInit = info.autoInit;
            }
            if (!this.__watchFunctions[realName]) {
                this.__watchFunctions[realName] = { autoInit };
            }
        }
    }
    __registerWatchesActions() {
        if (Object.keys(this.__watchActions).length > 0) {
            if (!this.__watch) {
                let defaultValue = {};
                this.__defaultValuesWatch(defaultValue);
                this.__watch = Watcher.get(defaultValue, (type, path, element) => {
                    try {
                        let action = this.__watchActionsCb[path.split(".")[0]] || this.__watchActionsCb[path.split("[")[0]];
                        action(type, path, element);
                    }
                    catch (e) {
                        console.error(e);
                    }
                });
            }
        }
        for (let name in this.__watchFunctions) {
            this.__watchFunctionsComputed[name] = Watcher.computed(this[name].bind(this));
            if (this.__watchFunctions[name].autoInit) {
                this.__watchFunctionsComputed[name].value;
            }
        }
    }
    __addSignalActions(name, fct) {
        this.__signalActions[name] = () => {
            fct(this);
        };
    }
    __registerSignalsActions() {
        if (Object.keys(this.__signals).length > 0) {
            const defaultValues = {};
            for (let name in this.__signals) {
                this.__registerSignalsAction(name);
                this.__defaultValuesSignal(defaultValues);
            }
            for (let name in defaultValues) {
                this.__signals[name].value = defaultValues[name];
            }
        }
    }
    __registerSignalsAction(name) {
        this.__signals[name] = new Signal(undefined, () => {
            if (this.__signalActions[name]) {
                this.__signalActions[name]();
            }
        });
    }
    __defaultValuesSignal(s) { }
    __addPropertyActions(name, fct) {
        if (!this.__onChangeFct[name]) {
            this.__onChangeFct[name] = [];
        }
        if (fct) {
            this.__onChangeFct[name].push(() => {
                fct(this);
            });
        }
    }
    __registerPropertiesActions() { }
    static __style = ``;
    static __template;
    __templateInstance;
    styleBefore(addStyle) {
        addStyle("@default");
    }
    styleAfter(addStyle) {
    }
    __getStyle() {
        return [WebComponent.__style];
    }
    __getHtml() { }
    __getStatic() {
        return WebComponent;
    }
    static __styleSheets = {};
    __renderStyles() {
        let sheets = {};
        const addStyle = (name) => {
            let sheet = Style.get(name);
            if (sheet) {
                sheets[name] = sheet;
            }
        };
        this.styleBefore(addStyle);
        let localStyle = new CSSStyleSheet();
        let styleTxt = this.__getStyle().join("\r\n");
        if (styleTxt.length > 0) {
            localStyle.replace(styleTxt);
            sheets['@local'] = localStyle;
        }
        this.styleAfter(addStyle);
        return sheets;
    }
    __renderTemplate() {
        let staticInstance = this.__getStatic();
        if (!staticInstance.__template || staticInstance.__template.cst != staticInstance) {
            staticInstance.__template = new Template(staticInstance);
            this.__getHtml();
            this.__registerTemplateAction();
            staticInstance.__template.generateTemplate();
            staticInstance.__styleSheets = this.__renderStyles();
        }
        this.__templateInstance = staticInstance.__template.createInstance(this);
        let shadowRoot = this.attachShadow({ mode: 'open' });
        shadowRoot.adoptedStyleSheets = [...Object.values(staticInstance.__styleSheets), Style.noAnimation];
        shadowRoot.appendChild(this.__templateInstance.content);
        // customElements.upgrade(shadowRoot);
        return shadowRoot;
    }
    __registerTemplateAction() {
    }
    connectedCallback() {
        if (this._first) {
            WebComponentInstance.addInstance(this);
            this._first = false;
            this.__defaultValues();
            this.__upgradeAttributes();
            this.__activateState();
            this.__templateInstance?.render();
            this.__removeNoAnimations();
        }
        else {
            setTimeout(() => {
                this.postConnect();
            });
        }
    }
    disconnectedCallback() {
        setTimeout(() => {
            this.postDisonnect();
        });
    }
    __onReadyCb = [];
    onReady(cb) {
        if (this._isReady) {
            cb();
        }
        else {
            this.__onReadyCb.push(cb);
        }
    }
    __setReady() {
        this._isReady = true;
        this.dispatchEvent(new CustomEvent('postCreationDone'));
        let cbs = [...this.__onReadyCb];
        for (let cb of cbs) {
            cb();
        }
        this.__onReadyCb = [];
    }
    __removeNoAnimations() {
        if (document.readyState !== "loading") {
            setTimeout(() => {
                this.postCreation();
                this.__setReady();
                this.shadowRoot.adoptedStyleSheets = Object.values(this.__getStatic().__styleSheets);
                document.removeEventListener("DOMContentLoaded", this.__removeNoAnimations);
                this.postConnect();
            }, 50);
        }
    }
    __defaultValues() { }
    __defaultValuesWatch(w) { }
    __upgradeAttributes() { }
    __listBoolProps() {
        return [];
    }
    __upgradeProperty(prop) {
        let boolProps = this.__listBoolProps();
        if (boolProps.indexOf(prop) != -1) {
            if (this.hasAttribute(prop) && (this.getAttribute(prop) === "true" || this.getAttribute(prop) === "")) {
                let value = this.getAttribute(prop);
                delete this[prop];
                this[prop] = value;
            }
            else {
                this.removeAttribute(prop);
                delete this[prop];
                this[prop] = false;
            }
        }
        else {
            if (this.hasAttribute(prop)) {
                let value = this.getAttribute(prop);
                delete this[prop];
                this[prop] = value;
            }
            else if (Object.hasOwn(this, prop)) {
                const value = this[prop];
                delete this[prop];
                this[prop] = value;
            }
        }
    }
    __correctGetter(prop) {
        if (Object.hasOwn(this, prop)) {
            const value = this[prop];
            delete this[prop];
            this[prop] = value;
        }
    }
    __getStateManager(managerClass) {
        let mClass;
        if (managerClass instanceof StateManager) {
            mClass = managerClass;
        }
        else {
            mClass = Instance.get(managerClass);
        }
        return mClass;
    }
    __addActiveDefState(managerClass, cb) {
        let mClass = this.__getStateManager(managerClass);
        if (!this.__defaultActiveState.has(mClass)) {
            this.__defaultActiveState.set(mClass, []);
        }
        this.__defaultActiveState.get(mClass)?.push(cb);
    }
    __addInactiveDefState(managerClass, cb) {
        let mClass = this.__getStateManager(managerClass);
        if (!this.__defaultInactiveState.has(mClass)) {
            this.__defaultInactiveState.set(mClass, []);
        }
        this.__defaultInactiveState.get(mClass)?.push(cb);
    }
    __addActiveState(statePattern, managerClass, cb) {
        let mClass = this.__getStateManager(managerClass);
        this.__statesList[statePattern].get(mClass)?.active.push(cb);
    }
    __addInactiveState(statePattern, managerClass, cb) {
        let mClass = this.__getStateManager(managerClass);
        this.__statesList[statePattern].get(mClass)?.inactive.push(cb);
    }
    __addAskChangeState(statePattern, managerClass, cb) {
        let mClass = this.__getStateManager(managerClass);
        this.__statesList[statePattern].get(mClass)?.askChange.push(cb);
    }
    __createStates() { }
    __createStatesList(statePattern, managerClass) {
        if (!this.__statesList[statePattern]) {
            this.__statesList[statePattern] = new Map();
        }
        let mClass = this.__getStateManager(managerClass);
        if (!this.__statesList[statePattern].has(mClass)) {
            this.__statesList[statePattern].set(mClass, {
                active: [],
                inactive: [],
                askChange: []
            });
        }
    }
    __inactiveDefaultState(managerClass) {
        if (this.__isDefaultState) {
            this.__isDefaultState = false;
            let mClass = this.__getStateManager(managerClass);
            if (this.__defaultInactiveState.has(mClass)) {
                let fcts = this.__defaultInactiveState.get(mClass) ?? [];
                for (let fct of fcts) {
                    fct.bind(this)();
                }
            }
        }
    }
    __activeDefaultState(nextStep, managerClass) {
        if (!this.__isDefaultState) {
            for (let pattern in this.__statesList) {
                if (StateManager.canBeActivate(pattern, nextStep)) {
                    let mClass = this.__getStateManager(managerClass);
                    if (this.__statesList[pattern].has(mClass)) {
                        return;
                    }
                }
            }
            this.__isDefaultState = true;
            let mClass = this.__getStateManager(managerClass);
            if (this.__defaultActiveState.has(mClass)) {
                let fcts = this.__defaultActiveState.get(mClass) ?? [];
                for (let fct of fcts) {
                    fct.bind(this)();
                }
            }
        }
    }
    __subscribeState() {
        if (!this.isReady && this.__stateCleared) {
            return;
        }
        for (let route in this.__statesList) {
            for (const managerClass of this.__statesList[route].keys()) {
                let el = this.__statesList[route].get(managerClass);
                if (el) {
                    managerClass.subscribe(route, el, false);
                }
            }
        }
    }
    __activateState() {
        for (let route in this.__statesList) {
            for (const managerClass of this.__statesList[route].keys()) {
                let el = this.__statesList[route].get(managerClass);
                if (el) {
                    managerClass.activateAfterSubscribe(route, el);
                }
            }
        }
    }
    __stateCleared = false;
    __unsubscribeState() {
        for (let route in this.__statesList) {
            for (const managerClass of this.__statesList[route].keys()) {
                let el = this.__statesList[route].get(managerClass);
                if (el) {
                    managerClass.unsubscribe(route, el);
                }
            }
        }
        this.__stateCleared = true;
    }
    dateToString(d) {
        if (typeof d == 'string') {
            d = this.stringToDate(d);
        }
        if (d instanceof Date) {
            return new Date(d.getTime() - (d.getTimezoneOffset() * 60000)).toISOString().split("T")[0];
        }
        return null;
    }
    dateTimeToString(dt) {
        if (typeof dt == 'string') {
            dt = this.stringToDate(dt);
        }
        if (dt instanceof Date) {
            return new Date(dt.getTime() - (dt.getTimezoneOffset() * 60000)).toISOString().slice(0, -1);
        }
        return null;
    }
    stringToDate(s) {
        let td = new Date(s);
        let d = new Date(td.getTime() + (td.getTimezoneOffset() * 60000));
        if (isNaN(d)) {
            return null;
        }
        return d;
    }
    stringToDateTime(s) {
        let td = new Date(s);
        let d = new Date(td.getTime() + (td.getTimezoneOffset() * 60000));
        if (isNaN(d)) {
            return null;
        }
        return d;
    }
    getBoolean(val) {
        if (val === true || val === 1 || val === 'true' || val === '') {
            return true;
        }
        else if (val === false || val === 0 || val === 'false' || val === null || val === undefined) {
            return false;
        }
        console.error("error parsing boolean value " + val);
        return false;
    }
    __registerPropToWatcher(name) {
        if (Watcher._register) {
            Watcher._register.register(this.getReceiver(name), name, Watcher._register.version, name);
        }
    }
    getStringAttr(name) {
        return this.getAttribute(name)?.replace(/&avquot;/g, '"') ?? undefined;
    }
    setStringAttr(name, val) {
        if (val === undefined || val === null) {
            this.removeAttribute(name);
        }
        else {
            this.setAttribute(name, (val + "").replace(/"/g, '&avquot;'));
        }
    }
    getStringProp(name) {
        this.__registerPropToWatcher(name);
        return this.getStringAttr(name);
    }
    getNumberAttr(name) {
        return Number(this.getAttribute(name));
    }
    setNumberAttr(name, val) {
        if (val === undefined || val === null) {
            this.removeAttribute(name);
        }
        else {
            this.setAttribute(name, val);
        }
    }
    getNumberProp(name) {
        this.__registerPropToWatcher(name);
        return this.getNumberAttr(name);
    }
    getBoolAttr(name) {
        return this.hasAttribute(name);
    }
    setBoolAttr(name, val) {
        val = this.getBoolean(val);
        if (val) {
            this.setAttribute(name, 'true');
        }
        else {
            this.removeAttribute(name);
        }
    }
    getBoolProp(name) {
        this.__registerPropToWatcher(name);
        return this.getBoolAttr(name);
    }
    getDateAttr(name) {
        if (!this.hasAttribute(name)) {
            return undefined;
        }
        return this.stringToDate(this.getAttribute(name));
    }
    setDateAttr(name, val) {
        let valTxt = this.dateToString(val);
        if (valTxt === null) {
            this.removeAttribute(name);
        }
        else {
            this.setAttribute(name, valTxt);
        }
    }
    getDateProp(name) {
        this.__registerPropToWatcher(name);
        return this.getDateAttr(name);
    }
    getDateTimeAttr(name) {
        if (!this.hasAttribute(name))
            return undefined;
        return this.stringToDateTime(this.getAttribute(name));
    }
    setDateTimeAttr(name, val) {
        let valTxt = this.dateTimeToString(val);
        if (valTxt === null) {
            this.removeAttribute(name);
        }
        else {
            this.setAttribute(name, valTxt);
        }
    }
    getDateTimeProp(name) {
        this.__registerPropToWatcher(name);
        return this.getDateTimeAttr(name);
    }
    __propertyReceivers = {};
    getReceiver(name) {
        if (!this.__propertyReceivers[name]) {
            let that = this;
            let result = {
                __subscribes: [],
                subscribe(fct) {
                    let index = this.__subscribes.indexOf(fct);
                    if (index == -1) {
                        this.__subscribes.push(fct);
                    }
                },
                unsubscribe(fct) {
                    let index = this.__subscribes.indexOf(fct);
                    if (index > -1) {
                        this.__subscribes.splice(index, 1);
                    }
                },
                onChange() {
                    for (let fct of this.__subscribes) {
                        fct(WatchAction.UPDATED, name, that[name]);
                    }
                },
                __path: name
            };
            this.__propertyReceivers[name] = result;
        }
        return this.__propertyReceivers[name];
    }
    attributeChangedCallback(name, oldValue, newValue) {
        if (oldValue !== newValue || !this.isReady) {
            if (this.__propertyReceivers.hasOwnProperty(name)) {
                this.__propertyReceivers[name].onChange();
            }
            if (this.__onChangeFct.hasOwnProperty(name)) {
                for (let fct of this.__onChangeFct[name]) {
                    fct('');
                }
            }
        }
    }
    /**
     * Remove a component from the dom
     * If desctruct is set to true, the component will be fully destroyed
     */
    remove(destruct = true) {
        super.remove();
        if (destruct) {
            this.destructor();
        }
    }
    /**
     * Function triggered when the component is destroyed
     */
    postDestruction() { }
    /**
     * Function triggered the first time the component is rendering inside DOM
     */
    postCreation() { }
    /**
    * Function triggered each time the component is rendering inside DOM
    */
    postConnect() { }
    /**
    * Function triggered each time the component is removed from the DOM
    */
    postDisonnect() { }
    /**
     * Find a parent by tagname if exist
     */
    findParentByTag(tagname, untilNode) {
        return ElementExtension.findParentByTag(this, tagname, untilNode);
    }
    /**
     * Find a parent by class name if exist
     */
    findParentByClass(classname, untilNode) {
        return ElementExtension.findParentByClass(this, classname, untilNode);
    }
    /**
     * Find a parent by type if exist
     */
    findParentByType(type, untilNode) {
        return ElementExtension.findParentByType(this, type, untilNode);
    }
    /**
     * Find list of parents by tagname
     */
    findParentsByTag(tagname, untilNode) {
        return ElementExtension.findParentsByTag(this, tagname, untilNode);
    }
    /**
     * Find list of parents by custom check
     */
    findParents(tagname, check, untilNode) {
        return ElementExtension.findParents(this, check, untilNode);
    }
    /**
     * Find list of parents by custom check
     */
    findParent(tagname, check, untilNode) {
        return ElementExtension.findParent(this, check, untilNode);
    }
    /**
     * Check if element contains a child
     */
    containsChild(el) {
        return ElementExtension.containsChild(this, el);
    }
    /**
     * Get elements inside slot
     */
    getElementsInSlot(slotName) {
        return ElementExtension.getElementsInSlot(this, slotName);
    }
    /**
     * Get nodes inside slot
     */
    getNodesInSlot(slotName) {
        return ElementExtension.getNodesInSlot(this, slotName);
    }
    /**
     * Get active element from the shadowroot or the document
     */
    getActiveElement(document) {
        return ElementExtension.getActiveElement(document ?? this.shadowRoot);
    }
}
WebComponent.Namespace=`Aventus`;
__as1(_, 'WebComponent', WebComponent);

let WebComponentInstance=class WebComponentInstance {
    static __allDefinitions = [];
    static __allInstances = [];
    /**
     * Last definition insert datetime
     */
    static lastDefinition = 0;
    static registerDefinition(def) {
        WebComponentInstance.lastDefinition = Date.now();
        WebComponentInstance.__allDefinitions.push(def);
    }
    static removeDefinition(def) {
        WebComponentInstance.lastDefinition = Date.now();
        let index = WebComponentInstance.__allDefinitions.indexOf(def);
        if (index > -1) {
            WebComponentInstance.__allDefinitions.splice(index, 1);
        }
    }
    /**
     * Get all sub classes of type
     */
    static getAllClassesOf(type) {
        let result = [];
        for (let def of WebComponentInstance.__allDefinitions) {
            if (def.prototype instanceof type) {
                result.push(def);
            }
        }
        return result;
    }
    /**
     * Get all registered definitions
     */
    static getAllDefinitions() {
        return WebComponentInstance.__allDefinitions;
    }
    static addInstance(instance) {
        this.__allInstances.push(instance);
    }
    static removeInstance(instance) {
        let index = this.__allInstances.indexOf(instance);
        if (index > -1) {
            this.__allInstances.splice(index, 1);
        }
    }
    static getAllInstances(type) {
        let result = [];
        for (let instance of this.__allInstances) {
            if (instance instanceof type) {
                result.push(instance);
            }
        }
        return result;
    }
    static create(type) {
        let _class = customElements.get(type);
        if (_class) {
            return new _class();
        }
        let splitted = type.split(".");
        let current = window;
        for (let part of splitted) {
            current = current[part];
        }
        if (current && current.prototype instanceof WebComponent) {
            return new current();
        }
        return null;
    }
}
WebComponentInstance.Namespace=`Aventus`;
__as1(_, 'WebComponentInstance', WebComponentInstance);

let ResourceLoader=class ResourceLoader {
    static headerLoaded = {};
    static headerWaiting = {};
    /**
     * Load the resource inside the head tag
     */
    static async loadInHead(options) {
        const _options = this.prepareOptions(options);
        if (this.headerLoaded[_options.url]) {
            return true;
        }
        else if (this.headerWaiting.hasOwnProperty(_options.url)) {
            return await this.awaitFctHead(_options.url);
        }
        else {
            this.headerWaiting[_options.url] = [];
            let tagEl;
            if (_options.type == "js") {
                tagEl = document.createElement("SCRIPT");
            }
            else if (_options.type == "css") {
                tagEl = document.createElement("LINK");
                tagEl.setAttribute("rel", "stylesheet");
            }
            else {
                throw "unknow type " + _options.type + " to append into head";
            }
            document.head.appendChild(tagEl);
            let result = await this.loadTag(tagEl, _options.url);
            this.headerLoaded[_options.url] = true;
            this.releaseAwaitFctHead(_options.url, result);
            return result;
        }
    }
    static loadTag(tagEl, url) {
        return new Promise((resolve, reject) => {
            tagEl.addEventListener("load", (e) => {
                resolve(true);
            });
            tagEl.addEventListener("error", (e) => {
                resolve(false);
            });
            if (tagEl instanceof HTMLLinkElement) {
                tagEl.setAttribute("href", url);
            }
            else {
                tagEl.setAttribute('src', url);
            }
        });
    }
    static releaseAwaitFctHead(url, result) {
        if (this.headerWaiting[url]) {
            for (let i = 0; i < this.headerWaiting[url].length; i++) {
                this.headerWaiting[url][i](result);
            }
            delete this.headerWaiting[url];
        }
    }
    static awaitFctHead(url) {
        return new Promise((resolve) => {
            this.headerWaiting[url].push((result) => {
                resolve(result);
            });
        });
    }
    static requestLoaded = {};
    static requestWaiting = {};
    /**
     *
    */
    static async load(options) {
        options = this.prepareOptions(options);
        if (this.requestLoaded[options.url]) {
            return this.requestLoaded[options.url];
        }
        else if (this.requestWaiting.hasOwnProperty(options.url)) {
            await this.awaitFct(options.url);
            return this.requestLoaded[options.url];
        }
        else {
            this.requestWaiting[options.url] = [];
            let blob = false;
            if (options.type == "img") {
                blob = true;
            }
            let content = await this.fetching(options.url, blob);
            if (options.type == "img" && content.startsWith("data:text/html;")) {
                console.error("Can't load img " + options.url);
                content = "";
            }
            this.requestLoaded[options.url] = content;
            this.releaseAwaitFct(options.url);
            return content;
        }
    }
    static releaseAwaitFct(url) {
        if (this.requestWaiting[url]) {
            for (let i = 0; i < this.requestWaiting[url].length; i++) {
                this.requestWaiting[url][i]();
            }
            delete this.requestWaiting[url];
        }
    }
    static awaitFct(url) {
        return new Promise((resolve) => {
            this.requestWaiting[url].push(() => {
                resolve('');
            });
        });
    }
    static async fetching(url, useBlob = false) {
        if (useBlob) {
            let result = await fetch(url, {
                headers: {
                    responseType: 'blob'
                }
            });
            let blob = await result.blob();
            return await this.readFile(blob);
        }
        else {
            let result = await fetch(url);
            return await result.text();
        }
    }
    static readFile(blob) {
        return new Promise((resolve) => {
            var reader = new FileReader();
            reader.onloadend = function () {
                resolve(reader.result);
            };
            reader.readAsDataURL(blob);
        });
    }
    static imgExtensions = ["png", "jpg", "jpeg", "gif"];
    static prepareOptions(options) {
        let result;
        if (typeof options === 'string' || options instanceof String) {
            result = {
                url: options,
                type: 'js'
            };
            let splittedURI = result.url.split('.');
            let extension = splittedURI[splittedURI.length - 1];
            extension = extension.split("?")[0];
            if (extension == "svg") {
                result.type = 'svg';
            }
            else if (extension == "js") {
                result.type = 'js';
            }
            else if (extension == "css") {
                result.type = 'css';
            }
            else if (this.imgExtensions.indexOf(extension) != -1) {
                result.type = 'img';
            }
            else {
                delete result.type;
            }
        }
        else {
            result = options;
        }
        return result;
    }
}
ResourceLoader.Namespace=`Aventus`;
__as1(_, 'ResourceLoader', ResourceLoader);

let ResizeObserver=class ResizeObserver {
    callback;
    targets;
    fpsInterval = -1;
    nextFrame;
    entriesChangedEvent;
    willTrigger;
    static resizeObserverClassByObject = {};
    static uniqueInstance;
    static getUniqueInstance() {
        if (!ResizeObserver.uniqueInstance) {
            ResizeObserver.uniqueInstance = new window.ResizeObserver(entries => {
                let allClasses = [];
                for (let j = 0; j < entries.length; j++) {
                    let entry = entries[j];
                    let index = entry.target['sourceIndex'];
                    if (ResizeObserver.resizeObserverClassByObject[index]) {
                        for (let i = 0; i < ResizeObserver.resizeObserverClassByObject[index].length; i++) {
                            let classTemp = ResizeObserver.resizeObserverClassByObject[index][i];
                            classTemp.entryChanged(entry);
                            if (allClasses.indexOf(classTemp) == -1) {
                                allClasses.push(classTemp);
                            }
                        }
                    }
                }
                for (let i = 0; i < allClasses.length; i++) {
                    allClasses[i].triggerCb();
                }
            });
        }
        return ResizeObserver.uniqueInstance;
    }
    constructor(options) {
        let realOption;
        if (options instanceof Function) {
            realOption = {
                callback: options,
            };
        }
        else {
            realOption = options;
        }
        this.callback = realOption.callback;
        this.targets = [];
        if (!realOption.fps) {
            realOption.fps = 60;
        }
        if (realOption.fps != -1) {
            this.fpsInterval = 1000 / realOption.fps;
        }
        this.nextFrame = 0;
        this.entriesChangedEvent = {};
        this.willTrigger = false;
    }
    /**
     * Observe size changing for the element
     */
    observe(target) {
        if (!target["sourceIndex"]) {
            target["sourceIndex"] = Math.random().toString(36);
            this.targets.push(target);
            ResizeObserver.getUniqueInstance().observe(target);
        }
        if (!ResizeObserver.resizeObserverClassByObject[target["sourceIndex"]]) {
            ResizeObserver.resizeObserverClassByObject[target["sourceIndex"]] = [];
        }
        if (ResizeObserver.resizeObserverClassByObject[target["sourceIndex"]].indexOf(this) == -1) {
            ResizeObserver.resizeObserverClassByObject[target["sourceIndex"]].push(this);
        }
    }
    /**
     * Stop observing size changing for the element
     */
    unobserve(target) {
        for (let i = 0; this.targets.length; i++) {
            let tempTarget = this.targets[i];
            if (tempTarget == target) {
                let position = ResizeObserver.resizeObserverClassByObject[target['sourceIndex']].indexOf(this);
                if (position != -1) {
                    ResizeObserver.resizeObserverClassByObject[target['sourceIndex']].splice(position, 1);
                }
                if (ResizeObserver.resizeObserverClassByObject[target['sourceIndex']].length == 0) {
                    delete ResizeObserver.resizeObserverClassByObject[target['sourceIndex']];
                }
                ResizeObserver.getUniqueInstance().unobserve(target);
                this.targets.splice(i, 1);
                return;
            }
        }
    }
    /**
     * Destroy the resize observer
     */
    disconnect() {
        for (let i = 0; this.targets.length; i++) {
            this.unobserve(this.targets[i]);
        }
    }
    entryChanged(entry) {
        let index = entry.target.sourceIndex;
        this.entriesChangedEvent[index] = entry;
    }
    triggerCb() {
        if (!this.willTrigger) {
            this.willTrigger = true;
            this._triggerCb();
        }
    }
    _triggerCb() {
        let now = window.performance.now();
        let elapsed = now - this.nextFrame;
        if (this.fpsInterval != -1 && elapsed <= this.fpsInterval) {
            requestAnimationFrame(() => {
                this._triggerCb();
            });
            return;
        }
        this.nextFrame = now - (elapsed % this.fpsInterval);
        let changed = Object.values(this.entriesChangedEvent);
        this.entriesChangedEvent = {};
        this.willTrigger = false;
        setTimeout(() => {
            this.callback(changed);
        }, 0);
    }
}
ResizeObserver.Namespace=`Aventus`;
__as1(_, 'ResizeObserver', ResizeObserver);

let Animation=class Animation {
    /**
     * Default FPS for all Animation if not set inside options
     */
    static FPS_DEFAULT = 60;
    options;
    nextFrame = 0;
    fpsInterval;
    continueAnimation = false;
    frame_id = 0;
    constructor(options) {
        if (!options.animate) {
            options.animate = () => { };
        }
        if (!options.stopped) {
            options.stopped = () => { };
        }
        if (!options.fps) {
            options.fps = Animation.FPS_DEFAULT;
        }
        this.options = options;
        this.fpsInterval = 1000 / options.fps;
    }
    animate() {
        let now = window.performance.now();
        let elapsed = now - this.nextFrame;
        if (elapsed <= this.fpsInterval) {
            this.frame_id = requestAnimationFrame(() => this.animate());
            return;
        }
        this.nextFrame = now - (elapsed % this.fpsInterval);
        setTimeout(() => {
            this.options.animate();
        }, 0);
        if (this.continueAnimation) {
            this.frame_id = requestAnimationFrame(() => this.animate());
        }
        else {
            this.options.stopped();
        }
    }
    /**
     * Start the of animation
     */
    start() {
        if (this.continueAnimation == false) {
            this.continueAnimation = true;
            this.nextFrame = window.performance.now();
            this.animate();
        }
    }
    /**
     * Stop the animation
     */
    stop() {
        this.continueAnimation = false;
    }
    /**
     * Stop the animation
     */
    immediateStop() {
        cancelAnimationFrame(this.frame_id);
        this.continueAnimation = false;
        this.options.stopped();
    }
    /**
     * Get the FPS
     */
    getFPS() {
        return this.options.fps;
    }
    /**
     * Set the FPS
     */
    setFPS(fps) {
        this.options.fps = fps;
        this.fpsInterval = 1000 / this.options.fps;
    }
    /**
     * Get the animation status (true if animation is running)
     */
    isStarted() {
        return this.continueAnimation;
    }
}
Animation.Namespace=`Aventus`;
__as1(_, 'Animation', Animation);

let DragAndDrop=class DragAndDrop {
    /**
     * Default offset before drag element
     */
    static defaultOffsetDrag = 20;
    pressManager;
    options;
    startCursorPosition = { x: 0, y: 0 };
    startElementPosition = { x: 0, y: 0 };
    isEnable = true;
    draggableElement;
    constructor(options) {
        this.options = this.getDefaultOptions(options.element);
        this.mergeProperties(options);
        this.mergeFunctions(options);
        this.options.elementTrigger.style.touchAction = 'none';
        this.pressManager = new PressManager({
            element: this.options.elementTrigger,
            onPressStart: this.onPressStart.bind(this),
            onPressEnd: this.onPressEnd.bind(this),
            onDragStart: this.onDragStart.bind(this),
            onDrag: this.onDrag.bind(this),
            onDragEnd: this.onDragEnd.bind(this),
            offsetDrag: this.options.offsetDrag,
            dragDirection: this.options.dragDirection,
            stopPropagation: this.options.stopPropagation
        });
    }
    getDefaultOptions(element) {
        return {
            applyDrag: true,
            element: element,
            elementTrigger: element,
            offsetDrag: DragAndDrop.defaultOffsetDrag,
            dragDirection: 'XY',
            shadow: {
                enable: false,
                container: document.body,
                removeOnStop: true,
                transform: () => { },
                delete: (el) => {
                    el.remove();
                }
            },
            strict: false,
            targets: [],
            usePercent: false,
            stopPropagation: true,
            useMouseFinalPosition: false,
            useTransform: false,
            isDragEnable: () => true,
            getZoom: () => 1,
            getOffsetX: () => 0,
            getOffsetY: () => 0,
            onPointerDown: (e) => { },
            onPointerUp: (e) => { },
            onStart: (e) => { },
            onMove: (e) => { },
            onStop: (e) => { },
            onDrop: (element, targets) => { },
            correctPosition: (position) => position
        };
    }
    mergeProperties(options) {
        if (options.element === void 0) {
            throw "You must define the element for the drag&drop";
        }
        this.options.element = options.element;
        if (options.elementTrigger === void 0) {
            this.options.elementTrigger = this.options.element;
        }
        else {
            this.options.elementTrigger = options.elementTrigger;
        }
        this.defaultMerge(options, "applyDrag");
        this.defaultMerge(options, "offsetDrag");
        this.defaultMerge(options, "dragDirection");
        this.defaultMerge(options, "strict");
        this.defaultMerge(options, "targets");
        this.defaultMerge(options, "usePercent");
        this.defaultMerge(options, "stopPropagation");
        this.defaultMerge(options, "useMouseFinalPosition");
        this.defaultMerge(options, "useTransform");
        if (options.shadow !== void 0) {
            this.options.shadow.enable = options.shadow.enable;
            if (options.shadow.container !== void 0) {
                this.options.shadow.container = options.shadow.container;
            }
            else {
                this.options.shadow.container = document.body;
            }
            if (options.shadow.removeOnStop !== void 0) {
                this.options.shadow.removeOnStop = options.shadow.removeOnStop;
            }
            if (options.shadow.transform !== void 0) {
                this.options.shadow.transform = options.shadow.transform;
            }
            if (options.shadow.delete !== void 0) {
                this.options.shadow.delete = options.shadow.delete;
            }
        }
    }
    mergeFunctions(options) {
        this.defaultMerge(options, "isDragEnable");
        this.defaultMerge(options, "getZoom");
        this.defaultMerge(options, "getOffsetX");
        this.defaultMerge(options, "getOffsetY");
        this.defaultMerge(options, "onPointerDown");
        this.defaultMerge(options, "onPointerUp");
        this.defaultMerge(options, "onStart");
        this.defaultMerge(options, "onMove");
        this.defaultMerge(options, "onStop");
        this.defaultMerge(options, "onDrop");
        this.defaultMerge(options, "correctPosition");
    }
    defaultMerge(options, name) {
        if (options[name] !== void 0) {
            this.options[name] = options[name];
        }
    }
    positionShadowRelativeToElement = { x: 0, y: 0 };
    onPressStart(e) {
        this.options.onPointerDown(e);
    }
    onPressEnd(e) {
        this.options.onPointerUp(e);
    }
    onDragStart(e) {
        this.isEnable = this.options.isDragEnable();
        if (!this.isEnable) {
            return false;
        }
        let draggableElement = this.options.element;
        this.startCursorPosition = {
            x: e.pageX,
            y: e.pageY
        };
        this.startElementPosition = this.getBoundingBoxRelative(draggableElement);
        if (this.options.shadow.enable) {
            draggableElement = this.options.element.cloneNode(true);
            let elBox = this.options.element.getBoundingClientRect();
            let containerBox = this.options.shadow.container.getBoundingClientRect();
            this.positionShadowRelativeToElement = {
                x: elBox.x - containerBox.x,
                y: elBox.y - containerBox.y
            };
            if (this.options.applyDrag) {
                draggableElement.style.position = "absolute";
                draggableElement.style.top = this.positionShadowRelativeToElement.y + this.options.getOffsetY() + 'px';
                draggableElement.style.left = this.positionShadowRelativeToElement.x + this.options.getOffsetX() + 'px';
                this.options.shadow.transform(draggableElement);
                this.options.shadow.container.appendChild(draggableElement);
            }
        }
        this.draggableElement = draggableElement;
        const result = this.options.onStart(e);
        if (result !== false) {
            document.body.style.userSelect = 'none';
            if (window.getSelection) {
                window.getSelection()?.removeAllRanges();
            }
        }
        return result;
    }
    onDrag(e) {
        if (!this.isEnable) {
            return;
        }
        let zoom = this.options.getZoom();
        let diff = {
            x: 0,
            y: 0
        };
        if (this.options.shadow.enable) {
            diff = {
                x: (e.pageX - this.startCursorPosition.x) + this.positionShadowRelativeToElement.x + this.options.getOffsetX(),
                y: (e.pageY - this.startCursorPosition.y) + this.positionShadowRelativeToElement.y + this.options.getOffsetY(),
            };
        }
        else {
            diff = {
                x: (e.pageX - this.startCursorPosition.x) / zoom + this.startElementPosition.x + this.options.getOffsetX(),
                y: (e.pageY - this.startCursorPosition.y) / zoom + this.startElementPosition.y + this.options.getOffsetY()
            };
        }
        let newPos = this.setPosition(diff);
        this.options.onMove(e, newPos);
    }
    onDragEnd(e) {
        if (!this.isEnable) {
            return;
        }
        document.body.style.userSelect = '';
        let targets = this.options.useMouseFinalPosition ? this.getMatchingTargetsWithMousePosition({
            x: e.clientX,
            y: e.clientY
        }) : this.getMatchingTargets();
        let draggableElement = this.draggableElement;
        if (this.options.shadow.enable && this.options.shadow.removeOnStop) {
            this.options.shadow.delete(draggableElement);
        }
        if (targets.length > 0) {
            this.options.onDrop(this.options.element, targets);
        }
        this.options.onStop(e);
    }
    setPosition(position) {
        let draggableElement = this.draggableElement;
        if (this.options.usePercent) {
            let elementParent = this.getOffsetParent(draggableElement);
            if (elementParent instanceof HTMLElement) {
                let percentPosition = {
                    x: (position.x / elementParent.offsetWidth) * 100,
                    y: (position.y / elementParent.offsetHeight) * 100
                };
                percentPosition = this.options.correctPosition(percentPosition);
                if (this.options.applyDrag) {
                    draggableElement.style.left = percentPosition.x + '%';
                    draggableElement.style.top = percentPosition.y + '%';
                }
                return percentPosition;
            }
            else {
                console.error("Can't find parent. Contact an admin", draggableElement);
            }
        }
        else {
            position = this.options.correctPosition(position);
            if (this.options.applyDrag) {
                if (this.isLeftTopElement(draggableElement)) {
                    draggableElement.style.left = position.x + 'px';
                    draggableElement.style.top = position.y + 'px';
                }
                else {
                    if (this.options.useTransform) {
                        draggableElement.setAttribute("transform", `translate(${position.x},${position.y})`);
                    }
                    else {
                        draggableElement.style.left = position.x + 'px';
                        draggableElement.style.top = position.y + 'px';
                    }
                }
            }
        }
        return position;
    }
    getTargets() {
        if (typeof this.options.targets == "function") {
            return this.options.targets();
        }
        else {
            return this.options.targets;
        }
    }
    /**
     * Get targets within the current element position is matching
     */
    getMatchingTargets() {
        let draggableElement = this.draggableElement;
        let matchingTargets = [];
        let srcTargets = this.getTargets();
        for (let target of srcTargets) {
            let elementCoordinates = this.getBoundingBoxAbsolute(draggableElement);
            let targetCoordinates = this.getBoundingBoxAbsolute(target);
            let offsetX = this.options.getOffsetX();
            let offsetY = this.options.getOffsetY();
            let zoom = this.options.getZoom();
            targetCoordinates.x += offsetX;
            targetCoordinates.y += offsetY;
            targetCoordinates.width *= zoom;
            targetCoordinates.height *= zoom;
            if (this.options.strict) {
                if ((elementCoordinates.x >= targetCoordinates.x && elementCoordinates.x + elementCoordinates.width <= targetCoordinates.x + targetCoordinates.width) &&
                    (elementCoordinates.y >= targetCoordinates.y && elementCoordinates.y + elementCoordinates.height <= targetCoordinates.y + targetCoordinates.height)) {
                    matchingTargets.push(target);
                }
            }
            else {
                let elementLeft = elementCoordinates.x;
                let elementRight = elementCoordinates.x + elementCoordinates.width;
                let elementTop = elementCoordinates.y;
                let elementBottom = elementCoordinates.y + elementCoordinates.height;
                let targetLeft = targetCoordinates.x;
                let targetRight = targetCoordinates.x + targetCoordinates.width;
                let targetTop = targetCoordinates.y;
                let targetBottom = targetCoordinates.y + targetCoordinates.height;
                if (!(elementRight < targetLeft ||
                    elementLeft > targetRight ||
                    elementBottom < targetTop ||
                    elementTop > targetBottom)) {
                    matchingTargets.push(target);
                }
            }
        }
        return matchingTargets;
    }
    /**
     * This function will return the targets that are matching with the mouse position
     * @param mouse The mouse position
     */
    getMatchingTargetsWithMousePosition(mouse) {
        let matchingTargets = [];
        if (this.options.shadow.enable == false || this.options.shadow.container == null) {
            console.warn("DragAndDrop : To use useMouseFinalPosition=true, you must enable shadow and set a container");
            return matchingTargets;
        }
        const container = this.options.shadow.container;
        let xCorrected = mouse.x - container.getBoundingClientRect().left;
        let yCorrected = mouse.y - container.getBoundingClientRect().top;
        for (let target of this.getTargets()) {
            if (this.isLeftTopElement(target)) {
                if (this.matchPosition(target, { x: mouse.x, y: mouse.y })) {
                    matchingTargets.push(target);
                }
            }
            else {
                if (this.matchPosition(target, { x: xCorrected, y: yCorrected })) {
                    matchingTargets.push(target);
                }
            }
        }
        return matchingTargets;
    }
    matchPosition(element, point) {
        let elementCoordinates = this.getBoundingBoxAbsolute(element);
        if (point.x >= elementCoordinates.x &&
            point.x <= elementCoordinates.x + elementCoordinates.width &&
            point.y >= elementCoordinates.y &&
            point.y <= elementCoordinates.y + elementCoordinates.height) {
            return true;
        }
        return false;
    }
    /**
     * Get element currently dragging
     */
    getElementDrag() {
        return this.options.element;
    }
    /**
     * Set targets where to drop
     */
    setTargets(targets) {
        this.options.targets = targets;
    }
    /**
     * Set targets where to drop
     */
    setTargetsFct(targets) {
        this.options.targets = targets;
    }
    /**
     * Destroy the current drag&drop instance
     */
    destroy() {
        this.pressManager.destroy();
    }
    isLeftTopElement(element) {
        for (let Type of DragElementLeftTopType) {
            if (element instanceof Type) {
                return true;
            }
        }
        return false;
    }
    isXYElement(element) {
        for (let Type of DragElementXYType) {
            if (element instanceof Type) {
                return true;
            }
        }
        return false;
    }
    getCoordinateFromAttribute(element) {
        if (this.options.useTransform) {
            const transform = element.getAttribute("transform");
            const tvalue = transform?.match(/translate\(([^,]+),([^,]+)\)/);
            const x = tvalue ? parseFloat(tvalue[1]) : 0;
            const y = tvalue ? parseFloat(tvalue[2]) : 0;
            return {
                x: x,
                y: y
            };
        }
        return {
            x: parseFloat(element.getAttribute("x")),
            y: parseFloat(element.getAttribute("y"))
        };
    }
    XYElementToRelativeBox(element) {
        let coordinates = this.getCoordinateFromAttribute(element);
        const width = parseFloat(element.getAttribute("width"));
        const height = parseFloat(element.getAttribute("height"));
        return {
            x: coordinates.x,
            y: coordinates.y,
            width: width,
            height: height,
            bottom: coordinates.y + height,
            right: coordinates.x + width,
            top: coordinates.y,
            left: coordinates.x,
            toJSON() {
                return JSON.stringify(this);
            }
        };
    }
    XYElementToAbsoluteBox(element) {
        let coordinates = this.getCoordinateFromAttribute(element);
        const parent = this.getOffsetParent(element);
        if (parent) {
            const box = parent.getBoundingClientRect();
            coordinates = {
                x: coordinates.x + box.x,
                y: coordinates.y + box.y
            };
        }
        const width = parseFloat(element.getAttribute("width"));
        const height = parseFloat(element.getAttribute("height"));
        return {
            x: coordinates.x,
            y: coordinates.y,
            width: width,
            height: height,
            bottom: coordinates.y + height,
            right: coordinates.x + width,
            top: coordinates.y,
            left: coordinates.x,
            toJSON() {
                return JSON.stringify(this);
            }
        };
    }
    getBoundingBoxAbsolute(element) {
        if (this.isLeftTopElement(element)) {
            if (element instanceof HTMLElement) {
                const bounds = element.getBoundingClientRect();
                return {
                    x: bounds.x,
                    y: bounds.y,
                    width: bounds.width,
                    height: bounds.height,
                    bottom: bounds.bottom,
                    right: bounds.right,
                    top: bounds.top,
                    left: bounds.left,
                    toJSON() {
                        return JSON.stringify(this);
                    }
                };
            }
        }
        else if (this.isXYElement(element)) {
            return this.XYElementToAbsoluteBox(element);
        }
        const parent = this.getOffsetParent(element);
        if (parent instanceof HTMLElement) {
            const rect = element.getBoundingClientRect();
            const rectParent = parent.getBoundingClientRect();
            const x = rect.left - rectParent.left;
            const y = rect.top - rectParent.top;
            return {
                x: x,
                y: y,
                width: rect.width,
                height: rect.height,
                bottom: y + rect.height,
                right: x + rect.width,
                left: rect.left - rectParent.left,
                top: rect.top - rectParent.top,
                toJSON() {
                    return JSON.stringify(this);
                }
            };
        }
        console.error("Element type not supported");
        return {
            x: 0,
            y: 0,
            width: 0,
            height: 0,
            bottom: 0,
            right: 0,
            top: 0,
            left: 0,
            toJSON() {
                return JSON.stringify(this);
            }
        };
    }
    getBoundingBoxRelative(element) {
        if (this.isLeftTopElement(element)) {
            if (element instanceof HTMLElement) {
                return {
                    x: element.offsetLeft,
                    y: element.offsetTop,
                    width: element.offsetWidth,
                    height: element.offsetHeight,
                    bottom: element.offsetTop + element.offsetHeight,
                    right: element.offsetLeft + element.offsetWidth,
                    top: element.offsetTop,
                    left: element.offsetLeft,
                    toJSON() {
                        return JSON.stringify(this);
                    }
                };
            }
        }
        else if (this.isXYElement(element)) {
            return this.XYElementToRelativeBox(element);
        }
        const parent = this.getOffsetParent(element);
        if (parent instanceof HTMLElement) {
            const rect = element.getBoundingClientRect();
            const rectParent = parent.getBoundingClientRect();
            const x = rect.left - rectParent.left;
            const y = rect.top - rectParent.top;
            return {
                x: x,
                y: y,
                width: rect.width,
                height: rect.height,
                bottom: y + rect.height,
                right: x + rect.width,
                left: rect.left - rectParent.left,
                top: rect.top - rectParent.top,
                toJSON() {
                    return JSON.stringify(this);
                }
            };
        }
        console.error("Element type not supported");
        return {
            x: 0,
            y: 0,
            width: 0,
            height: 0,
            bottom: 0,
            right: 0,
            top: 0,
            left: 0,
            toJSON() {
                return JSON.stringify(this);
            }
        };
    }
    getOffsetParent(element) {
        if (element instanceof HTMLElement) {
            return element.offsetParent;
        }
        let current = element.parentNode;
        while (current) {
            if (current instanceof Element) {
                const style = getComputedStyle(current);
                if (style.position !== 'static') {
                    return current;
                }
            }
            if (current instanceof ShadowRoot) {
                current = current.host;
            }
            else {
                current = current.parentNode;
            }
        }
        return null;
    }
}
DragAndDrop.Namespace=`Aventus`;
__as1(_, 'DragAndDrop', DragAndDrop);


for(let key in _) { Aventus[key] = _[key] }
})(Aventus);

var MaterialIcon;
(MaterialIcon||(MaterialIcon = {}));
(function (MaterialIcon) {
const __as1 = (o, k, c) => { if (o[k] !== undefined) for (let w in o[k]) { c[w] = o[k][w] } o[k] = c; }
const moduleName = `MaterialIcon`;
const _ = {};


let _n;
const Icon = class Icon extends Aventus.WebComponent {
    static get observedAttributes() {return ["icon", "type", "fill"].concat(super.observedAttributes).filter((v, i, a) => a.indexOf(v) === i);}
    get 'is_hidden'() { return this.getBoolAttr('is_hidden') }
    set 'is_hidden'(val) { this.setBoolAttr('is_hidden', val) }get 'no_check'() { return this.getBoolAttr('no_check') }
    set 'no_check'(val) { this.setBoolAttr('no_check', val) }    get 'icon'() { return this.getStringProp('icon') }
    set 'icon'(val) { this.setStringAttr('icon', val) }get 'type'() { return this.getStringProp('type') }
    set 'type'(val) { this.setStringAttr('type', val) }get 'fill'() { return this.getBoolProp('fill') }
    set 'fill'(val) { this.setBoolAttr('fill', val) }    static defaultType = 'outlined';
    __registerPropertiesActions() { super.__registerPropertiesActions(); this.__addPropertyActions("icon", ((target) => {
    if (target.isReady) {
        target.init();
    }
}));this.__addPropertyActions("type", ((target) => {
    if (target.isReady)
        target.loadFont();
}));this.__addPropertyActions("fill", ((target) => {
    if (target.isReady)
        target.loadFont();
})); }
    static __style = `:host{--_material-icon-animation-duration: var(--material-icon-animation-duration, 1.75s)}:host{direction:ltr;display:inline-block;font-family:"Material Symbols Outlined";-moz-font-feature-settings:"liga";font-size:24px;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:normal;letter-spacing:normal;line-height:1;text-transform:none;white-space:nowrap;word-wrap:normal}:host .icon{direction:inherit;display:inline-block;font-family:inherit;-moz-font-feature-settings:inherit;font-size:inherit;-moz-osx-font-smoothing:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;text-transform:inherit;white-space:inherit;word-wrap:inherit}:host([is_hidden]){opacity:0}:host([type=sharp]){font-family:"Material Symbols Sharp"}:host([type=rounded]){font-family:"Material Symbols Rounded"}:host([type=outlined]){font-family:"Material Symbols Outlined"}:host([fill]){font-variation-settings:"FILL" 1}:host([spin]){animation:spin var(--_material-icon-animation-duration) linear infinite}:host([reverse_spin]){animation:reverse-spin var(--_material-icon-animation-duration) linear infinite}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes reverse-spin{0%{transform:rotate(360deg)}100%{transform:rotate(0deg)}}`;
    __getStatic() {
        return Icon;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Icon.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="icon" _id="icon_0"></div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "elements": [
    {
      "name": "iconEl",
      "ids": [
        "icon_0"
      ]
    }
  ]
}); }
    getClassName() {
        return "Icon";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('is_hidden')) {this.setAttribute('is_hidden' ,'true'); }if(!this.hasAttribute('no_check')) { this.attributeChangedCallback('no_check', false, false); }if(!this.hasAttribute('icon')){ this['icon'] = "check_box_outline_blank"; }if(!this.hasAttribute('type')){ this['type'] = Icon.defaultType; }if(!this.hasAttribute('fill')) { this.attributeChangedCallback('fill', false, false); } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('is_hidden');this.__upgradeProperty('no_check');this.__upgradeProperty('icon');this.__upgradeProperty('type');this.__upgradeProperty('fill'); }
    __listBoolProps() { return ["is_hidden","no_check","fill"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    async loadFont() {
        if (!this.type)
            return;
        const name = this.type.charAt(0).toUpperCase() + this.type.slice(1);
        let fontsName = [
            'Material Symbols ' + name,
            '"Material Symbols ' + name + '"',
        ];
        const check = () => {
            for (let font of document.fonts) {
                if (fontsName.includes(font.family)) {
                    this.is_hidden = false;
                    return true;
                }
            }
            return false;
        };
        if (check()) {
            return;
        }
        const cb = (e) => {
            check();
            document.fonts.removeEventListener("loadingdone", cb);
        };
        document.fonts.addEventListener("loadingdone", cb);
        let url = 'https://fonts.googleapis.com/css2?family=Material+Symbols+' + name + ":FILL@0..1";
        await Aventus.ResourceLoader.loadInHead({
            type: "css",
            url: url
        });
        setTimeout(() => {
            check();
        }, 100);
    }
    async init() {
        if (!this.no_check) {
            await this.loadFont();
        }
        else {
            this.is_hidden = false;
        }
        this.iconEl.innerHTML = this.icon;
    }
    postCreation() {
        this.init();
    }
}
Icon.Namespace=`MaterialIcon`;
Icon.Tag=`mi-icon`;
__as1(_, 'Icon', Icon);
if(!window.customElements.get('mi-icon')){window.customElements.define('mi-icon', Icon);Aventus.WebComponentInstance.registerDefinition(Icon);}


for(let key in _) { MaterialIcon[key] = _[key] }
})(MaterialIcon);

var AventusPhp;
(AventusPhp||(AventusPhp = {}));
(function (AventusPhp) {
const __as1 = (o, k, c) => { if (o[k] !== undefined) for (let w in o[k]) { c[w] = o[k][w] } o[k] = c; }
const moduleName = `AventusPhp`;
const _ = {};


let _n;
let LaravelResult=class LaravelResult extends Aventus.ResultWithError {
    static get Fullname() { return "Aventus.Laraventus.Helpers.LaravelResult"; }
}
LaravelResult.Namespace=`AventusPhp`;
LaravelResult.$schema={...(Aventus.ResultWithError?.$schema ?? {}), };
Aventus.Converter.register(LaravelResult.Fullname, LaravelResult);
__as1(_, 'LaravelResult', LaravelResult);

let AventusFile=class AventusFile {
    static get Fullname() { return "Aventus.Laraventus.Models.AventusFile"; }
    uri;
    upload;
    /**
     * Get the unique type for the data. Define it as the namespace + class name
     */
    get $type() {
        return this.constructor['Fullname'];
    }
    /**
     * @inerhit
     */
    toJSON() {
        let toAvoid = ['className', 'namespace'];
        return Aventus.Json.classToJson(this, {
            isValidKey: (key) => !toAvoid.includes(key),
            beforeEnd: (result) => {
                let resultTemp = {};
                if (result.$type) {
                    resultTemp.$type = result.$type;
                    for (let key in result) {
                        if (key != '$type') {
                            resultTemp[key] = result[key];
                        }
                    }
                    return resultTemp;
                }
                return result;
            }
        });
    }
}
AventusFile.Namespace=`AventusPhp`;
__as1(_, 'AventusFile', AventusFile);

let AventusError=class AventusError extends Aventus.GenericError {
    static get Fullname() { return "Aventus.Laraventus.Helpers.AventusError"; }
}
AventusError.Namespace=`AventusPhp`;
AventusError.$schema={...(Aventus.GenericError?.$schema ?? {}), };
Aventus.Converter.register(AventusError.Fullname, AventusError);
__as1(_, 'AventusError', AventusError);

let AventusImage=class AventusImage extends AventusFile {
    static get Fullname() { return "Aventus.Laraventus.Models.AventusImage"; }
}
AventusImage.Namespace=`AventusPhp`;
__as1(_, 'AventusImage', AventusImage);


for(let key in _) { AventusPhp[key] = _[key] }
})(AventusPhp);

var Aventus;
(Aventus||(Aventus = {}));
(function (Aventus) {
const __as1 = (o, k, c) => { if (o[k] !== undefined) for (let w in o[k]) { c[w] = o[k][w] } o[k] = c; }
const moduleName = `Aventus`;
const _ = {};

let Layout = {};
_.Layout = Aventus.Layout ?? {};
let Form = {};
_.Form = Aventus.Form ?? {};
let Lib = {};
_.Lib = Aventus.Lib ?? {};
let Navigation = {};
_.Navigation = Aventus.Navigation ?? {};
Layout.Tabs = {};
_.Layout.Tabs = Aventus.Layout?.Tabs ?? {};
let Toast = {};
_.Toast = Aventus.Toast ?? {};
let Modal = {};
_.Modal = Aventus.Modal ?? {};
Form.Validators = {};
_.Form.Validators = Aventus.Form?.Validators ?? {};
let _n;
Layout.Row = class Row extends Aventus.WebComponent {
    static __style = `:host{--_col-gap: var(--col-gap, 0px)}:host{container-name:row;container-type:inline-size;display:flex;flex-direction:row;flex-wrap:wrap;gap:var(--_col-gap);width:100%}`;
    constructor() {
        super();
        this.style.containerName = "row";
        this.style.containerType = "inline-size";
    }
    __getStatic() {
        return Row;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Row.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<slot></slot>` }
    });
}
    getClassName() {
        return "Row";
    }
}
Layout.Row.Namespace=`Aventus.Layout`;
Layout.Row.Tag=`av-row`;
__as1(_.Layout, 'Row', Layout.Row);
if(!window.customElements.get('av-row')){window.customElements.define('av-row', Layout.Row);Aventus.WebComponentInstance.registerDefinition(Layout.Row);}

Form.ButtonElement = class ButtonElement extends Aventus.WebComponent {
    static get observedAttributes() {return ["type"].concat(super.observedAttributes).filter((v, i, a) => a.indexOf(v) === i);}
    get 'type'() { return this.getStringProp('type') }
    set 'type'(val) { this.setStringAttr('type', val) }    static get formAssociated() { return true; }
    internals;
    handler = undefined;
    static __style = ``;
    constructor() {
        super();
        this.internals = this.attachInternals();
        if (this.constructor == ButtonElement) {
            throw "can't instanciate an abstract class";
        }
    }
    __getStatic() {
        return ButtonElement;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(ButtonElement.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<slot></slot>` }
    });
}
    getClassName() {
        return "ButtonElement";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('type')){ this['type'] = 'button'; } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('type'); }
    async triggerSubmit() {
        if (this.type == "submit") {
            if ("loading" in this) {
                if (this.loading)
                    return;
                this.loading = true;
            }
            if (this.internals.form) {
                this.internals.form.requestSubmit();
            }
            else if (this.handler) {
                await this.handler.requestSubmit();
                if ("loading" in this) {
                    this.loading = false;
                }
            }
        }
    }
    postCreation() {
        super.postCreation();
        this.handler = this.findParentByType(_.Form.Form.formElements)?.registerSubmit(this);
        if (this.type == "submit") {
            new Aventus.PressManager({
                element: this,
                onPress: () => {
                    this.triggerSubmit();
                }
            });
            this.addEventListener("keyup", (e) => {
                if (e.key == 'Enter') {
                    this.triggerSubmit();
                }
            });
        }
    }
}
Form.ButtonElement.Namespace=`Aventus.Form`;
__as1(_.Form, 'ButtonElement', Form.ButtonElement);

(function (SpecialTouch) {
    SpecialTouch[SpecialTouch["Backspace"] = 0] = "Backspace";
    SpecialTouch[SpecialTouch["Insert"] = 1] = "Insert";
    SpecialTouch[SpecialTouch["End"] = 2] = "End";
    SpecialTouch[SpecialTouch["PageDown"] = 3] = "PageDown";
    SpecialTouch[SpecialTouch["PageUp"] = 4] = "PageUp";
    SpecialTouch[SpecialTouch["Escape"] = 5] = "Escape";
    SpecialTouch[SpecialTouch["AltGraph"] = 6] = "AltGraph";
    SpecialTouch[SpecialTouch["Control"] = 7] = "Control";
    SpecialTouch[SpecialTouch["Alt"] = 8] = "Alt";
    SpecialTouch[SpecialTouch["Shift"] = 9] = "Shift";
    SpecialTouch[SpecialTouch["CapsLock"] = 10] = "CapsLock";
    SpecialTouch[SpecialTouch["Tab"] = 11] = "Tab";
    SpecialTouch[SpecialTouch["Delete"] = 12] = "Delete";
    SpecialTouch[SpecialTouch["ArrowRight"] = 13] = "ArrowRight";
    SpecialTouch[SpecialTouch["ArrowLeft"] = 14] = "ArrowLeft";
    SpecialTouch[SpecialTouch["ArrowUp"] = 15] = "ArrowUp";
    SpecialTouch[SpecialTouch["ArrowDown"] = 16] = "ArrowDown";
    SpecialTouch[SpecialTouch["Enter"] = 17] = "Enter";
})(Lib.SpecialTouch || (Lib.SpecialTouch = {}));
__as1(_.Lib, 'SpecialTouch', Lib.SpecialTouch);

let Tracker=class Tracker {
    velocityMultiplier = window.devicePixelRatio;
    updateTime = Date.now();
    delta = { x: 0, y: 0 };
    velocity = { x: 0, y: 0 };
    lastPosition = { x: 0, y: 0 };
    constructor(touch) {
        this.lastPosition = this.getPosition(touch);
    }
    update(touch) {
        const { velocity, updateTime, lastPosition, } = this;
        const now = Date.now();
        const position = this.getPosition(touch);
        const delta = {
            x: -(position.x - lastPosition.x),
            y: -(position.y - lastPosition.y),
        };
        const duration = (now - updateTime) || 16.7;
        const vx = delta.x / duration * 16.7;
        const vy = delta.y / duration * 16.7;
        velocity.x = vx * this.velocityMultiplier;
        velocity.y = vy * this.velocityMultiplier;
        this.delta = delta;
        this.updateTime = now;
        this.lastPosition = position;
    }
    getPointerData(evt) {
        return evt.touches ? evt.touches[evt.touches.length - 1] : evt;
    }
    getPosition(evt) {
        const data = this.getPointerData(evt);
        return {
            x: data.clientX,
            y: data.clientY,
        };
    }
}
Tracker.Namespace=`Aventus`;
__as1(_, 'Tracker', Tracker);

let RouterStateManager=class RouterStateManager extends Aventus.StateManager {
    static getInstance() {
        return Aventus.Instance.get(RouterStateManager);
    }
}
RouterStateManager.Namespace=`Aventus`;
__as1(_, 'RouterStateManager', RouterStateManager);

Navigation.Link = class Link extends Aventus.WebComponent {
    get 'to'() { return this.getStringAttr('to') }
    set 'to'(val) { this.setStringAttr('to', val) }get 'active_pattern'() { return this.getStringAttr('active_pattern') }
    set 'active_pattern'(val) { this.setStringAttr('active_pattern', val) }    onActiveChange = new Aventus.Callback();
    static __style = `:host{display:contents}:host a{color:inherit;display:contents;text-decoration:none}`;
    __getStatic() {
        return Link;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Link.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<a _id="link_0"><slot></slot></a>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "link_0°href": {
      "fct": (c) => `${c.print(c.comp.__7e4c6c9fe944acd9b1174c61347fdcb6method0())}`,
      "once": true
    }
  },
  "events": [
    {
      "eventName": "click",
      "id": "link_0",
      "fct": (e, c) => c.comp.prevent(e)
    }
  ]
}); }
    getClassName() {
        return "Link";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('to')){ this['to'] = undefined; }if(!this.hasAttribute('active_pattern')){ this['active_pattern'] = undefined; } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('to');this.__upgradeProperty('active_pattern'); }
    addClickEvent() {
        new Aventus.PressManager({
            element: this,
            onPress: () => {
                if (this.to === undefined)
                    return false;
                let to = this.to;
                if (this.to.startsWith(".")) {
                    to = Aventus.Instance.get(RouterStateManager).getState()?.name ?? "";
                    if (!to.endsWith("/")) {
                        to += "/";
                    }
                    to += this.to;
                    to = Aventus.Uri.normalize(to);
                }
                Aventus.State.activate(to, Aventus.Instance.get(RouterStateManager));
                return true;
            }
        });
    }
    registerActivetoListener() {
        let activeto = this.to;
        if (this.active_pattern) {
            activeto = this.active_pattern;
        }
        if (activeto === undefined)
            return;
        Aventus.Instance.get(RouterStateManager).subscribe(activeto, {
            active: () => {
                this.classList.add("active");
                this.onActiveChange.trigger(true);
            },
            inactive: () => {
                this.classList.remove("active");
                this.onActiveChange.trigger(false);
            }
        });
    }
    prevent(e) {
        e.preventDefault();
    }
    postCreation() {
        this.registerActivetoListener();
        this.addClickEvent();
    }
    __7e4c6c9fe944acd9b1174c61347fdcb6method0() {
        return this.to;
    }
}
Navigation.Link.Namespace=`Aventus.Navigation`;
Navigation.Link.Tag=`av-link`;
__as1(_.Navigation, 'Link', Navigation.Link);
if(!window.customElements.get('av-link')){window.customElements.define('av-link', Navigation.Link);Aventus.WebComponentInstance.registerDefinition(Navigation.Link);}

Navigation.RouterLink = class RouterLink extends Aventus.WebComponent {
    get 'state'() { return this.getStringAttr('state') }
    set 'state'(val) { this.setStringAttr('state', val) }get 'active_state'() { return this.getStringAttr('active_state') }
    set 'active_state'(val) { this.setStringAttr('active_state', val) }    onActiveChange = new Aventus.Callback();
    static __style = `:host a{color:inherit;display:contents;text-decoration:none}`;
    __getStatic() {
        return RouterLink;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(RouterLink.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<a _id="routerlink_0"><slot></slot></a>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "routerlink_0°href": {
      "fct": (c) => `${c.print(c.comp.__ad88894dc7dea62195d227cdd21fc210method0())}`,
      "once": true
    }
  },
  "events": [
    {
      "eventName": "click",
      "id": "routerlink_0",
      "fct": (e, c) => c.comp.prevent(e)
    }
  ]
}); }
    getClassName() {
        return "RouterLink";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('state')){ this['state'] = undefined; }if(!this.hasAttribute('active_state')){ this['active_state'] = undefined; } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('state');this.__upgradeProperty('active_state'); }
    addClickEvent() {
        new Aventus.PressManager({
            element: this,
            onPress: () => {
                if (this.state === undefined)
                    return;
                let state = this.state;
                if (this.state.startsWith(".")) {
                    state = Aventus.Instance.get(RouterStateManager).getState()?.name ?? "";
                    if (!state.endsWith("/")) {
                        state += "/";
                    }
                    state += this.state;
                    state = Aventus.Uri.normalize(state);
                }
                Aventus.State.activate(state, Aventus.Instance.get(RouterStateManager));
            }
        });
    }
    registerActiveStateListener() {
        let activeState = this.state;
        if (this.active_state) {
            activeState = this.active_state;
        }
        if (activeState === undefined)
            return;
        Aventus.Instance.get(RouterStateManager).subscribe(activeState, {
            active: () => {
                this.classList.add("active");
                this.onActiveChange.trigger(true);
            },
            inactive: () => {
                this.classList.remove("active");
                this.onActiveChange.trigger(false);
            }
        });
    }
    prevent(e) {
        e.preventDefault();
    }
    postCreation() {
        this.registerActiveStateListener();
        this.addClickEvent();
    }
    __ad88894dc7dea62195d227cdd21fc210method0() {
        return this.state;
    }
}
Navigation.RouterLink.Namespace=`Aventus.Navigation`;
Navigation.RouterLink.Tag=`av-router-link`;
__as1(_.Navigation, 'RouterLink', Navigation.RouterLink);
if(!window.customElements.get('av-router-link')){window.customElements.define('av-router-link', Navigation.RouterLink);Aventus.WebComponentInstance.registerDefinition(Navigation.RouterLink);}

Layout.Tabs.Tabs = class Tabs extends Aventus.WebComponent {
    activeHeader;
    tabs = {};
    static __style = ``;
    constructor() {
        super();
        if (this.constructor == Tabs) {
            throw "can't instanciate an abstract class";
        }
    }
    __getStatic() {
        return Tabs;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Tabs.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<div class="header" _id="tabs_0"></div><div class="body" _id="tabs_1">	<slot></slot></div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "elements": [
    {
      "name": "headerEl",
      "ids": [
        "tabs_0"
      ]
    },
    {
      "name": "bodyEl",
      "ids": [
        "tabs_1"
      ]
    }
  ]
}); }
    getClassName() {
        return "Tabs";
    }
    async loadTabs() {
        // let elements = this.elements;
        let elements = this.getElementsInSlot();
        let first = null;
        for (let element of elements) {
            element.style.display = 'none';
            if (element instanceof _.Layout.Tabs.Tab) {
                this.tabs[element.identifier()] = element;
                let header = new (this.defineTabHeader())();
                this.headerEl.appendChild(header);
                await header.init(element, this);
                if (first == null) {
                    first = header;
                }
                else if (!first.tab.selected && element.selected) {
                    first = header;
                }
            }
        }
        if (first) {
            this.setActive(first);
        }
    }
    setActive(tabHeader) {
        if (typeof tabHeader == 'number') {
            if (this.headerEl.children.length > tabHeader) {
                const header = this.headerEl.children[tabHeader];
                if (header instanceof _.Layout.Tabs.TabHeader) {
                    return this.setActive(header);
                }
            }
            return false;
        }
        else if (typeof tabHeader == 'string') {
            const header = this.tabs[tabHeader].tabHeader;
            if (header)
                return this.setActive(header);
            return false;
        }
        if (this.activeHeader) {
            this.activeHeader.active = false;
            this.activeHeader.tab.selected = false;
            this.activeHeader.tab.style.display = 'none';
        }
        this.activeHeader = tabHeader;
        this.activeHeader.active = true;
        this.activeHeader.tab.style.display = '';
        this.activeHeader.tab.selected = true;
    }
    postCreation() {
        super.postCreation();
        this.loadTabs();
    }
}
Layout.Tabs.Tabs.Namespace=`Aventus.Layout.Tabs`;
__as1(_.Layout.Tabs, 'Tabs', Layout.Tabs.Tabs);

Form.Form = class Form extends Aventus.WebComponent {
    static get defaultConfig() {
        return _.Form.FormHandler._globalConfig;
    }
    static set formElements(value) {
        _.Form.FormHandler._IFormElements = value;
    }
    static get formElements() {
        return _.Form.FormHandler._IFormElements;
    }
    form;
    request;
    elements = [];
    btns = [];
    onSubmit = new Aventus.Callback();
    static __style = ``;
    constructor() {
        super();
        this.checkEnter = this.checkEnter.bind(this);
    }
    __getStatic() {
        return Form;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Form.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<slot></slot>` }
    });
}
    getClassName() {
        return "Form";
    }
    checkEnter(e) {
        if (e.key == "Enter") {
            this.requestSubmit();
        }
    }
    registerElement(element) {
        if (this.elements.length > 0) {
            this.elements[this.elements.length - 1].removeEventListener("keyup", this.checkEnter);
        }
        this.elements.push(element);
        element.addEventListener("keyup", this.checkEnter);
        return this;
    }
    registerSubmit(element) {
        this.btns.push(element);
        return this;
    }
    async requestSubmit() {
        if (!this.form) {
            for (let element of this.elements) {
                this.form = element.form?.handler;
                if (this.form)
                    break;
            }
        }
        if (this.form) {
            if (this.request) {
                this.form.submit(this.request);
            }
            else if (await this.form.validate()) {
                this.onSubmit.trigger();
            }
        }
    }
    static create(schema, config) {
        let form = new _.Form.FormHandler(schema, config);
        return form;
    }
    static configure(value) {
        _.Form.FormHandler._globalConfig = value;
    }
}
Form.Form.Namespace=`Aventus.Form`;
Form.Form.Tag=`av-form`;
__as1(_.Form, 'Form', Form.Form);
if(!window.customElements.get('av-form')){window.customElements.define('av-form', Form.Form);Aventus.WebComponentInstance.registerDefinition(Form.Form);}

Navigation.Page = class Page extends Aventus.WebComponent {
    static get observedAttributes() {return ["visible"].concat(super.observedAttributes).filter((v, i, a) => a.indexOf(v) === i);}
    get 'visible'() { return this.getBoolProp('visible') }
    set 'visible'(val) { this.setBoolAttr('visible', val) }    router;
    state;
    __registerPropertiesActions() { super.__registerPropertiesActions(); this.__addPropertyActions("visible", ((target) => {
    if (target.visible) {
        target.onShow();
    }
    else {
        target.onHide();
    }
})); }
    static __style = `:host{display:block}:host(:not([visible])){display:none}`;
    constructor() {
        super();
        if (this.constructor == Page) {
            throw "can't instanciate an abstract class";
        }
    }
    __getStatic() {
        return Page;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Page.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<slot></slot>` }
    });
}
    getClassName() {
        return "Page";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('visible')) { this.attributeChangedCallback('visible', false, false); } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('visible'); }
    __listBoolProps() { return ["visible"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    async show(state) {
        this.state = state;
        this.visible = true;
    }
    async hide() {
        this.visible = false;
        this.state = undefined;
    }
    onShow() {
    }
    onHide() {
    }
    isAllowed(state, pattern, router) {
        return true;
    }
}
Navigation.Page.Namespace=`Aventus.Navigation`;
__as1(_.Navigation, 'Page', Navigation.Page);

Navigation.Default404 = class Default404 extends Navigation.Page {
    static __style = `:host{align-items:center;height:100%;justify-content:center;width:100%}:host h1{font-size:48px;text-align:center}:host([visible]){display:flex}`;
    __getStatic() {
        return Default404;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Default404.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<h1>Error 404</h1>` }
    });
}
    getClassName() {
        return "Default404";
    }
    configure() {
        return {
            destroy: true
        };
    }
}
Navigation.Default404.Namespace=`Aventus.Navigation`;
Navigation.Default404.Tag=`av-default-404`;
__as1(_.Navigation, 'Default404', Navigation.Default404);
if(!window.customElements.get('av-default-404')){window.customElements.define('av-default-404', Navigation.Default404);Aventus.WebComponentInstance.registerDefinition(Navigation.Default404);}

Navigation.Router = class Router extends Aventus.WebComponent {
    static page404 = _.Navigation.Default404;
    static destroyPage = false;
    oldPage;
    allRoutes = {};
    activePath = "";
    activeState;
    oneStateActive = false;
    showPageMutex = new Aventus.Mutex();
    isReplace = false;
    get stateManager() {
        return Aventus.Instance.get(RouterStateManager);
    }
    page404;
    static __style = `:host{display:block}`;
    constructor() {
        super();
        this.validError404 = this.validError404.bind(this);
        this.canChangeState = this.canChangeState.bind(this);
        this.stateManager.canChangeState(this.canChangeState);
        if (this.constructor == Router) {
            throw "can't instanciate an abstract class";
        }
    }
    __getStatic() {
        return Router;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Router.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'before':`<slot name="before"></slot>`,'after':`<slot name="after"></slot>` }, 
        blocks: { 'default':`<slot name="before"></slot><div class="content" _id="router_0"></div><slot name="after"></slot>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "elements": [
    {
      "name": "contentEl",
      "ids": [
        "router_0"
      ]
    }
  ]
}); }
    getClassName() {
        return "Router";
    }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('stateManager'); }
    addRouteAsync(options) {
        this.allRoutes[options.route] = options;
    }
    addRoute(route, elementCtr) {
        this.allRoutes[route] = {
            route: route,
            scriptUrl: '',
            render: () => elementCtr
        };
    }
    register() {
        try {
            this.defineRoutes();
            this.stateManager.onAfterStateChanged(this.validError404);
            for (let key in this.allRoutes) {
                this.initRoute(key);
            }
        }
        catch (e) {
            console.error(e);
        }
    }
    initRoute(path) {
        let element = undefined;
        let allRoutes = this.allRoutes;
        this.stateManager.subscribe(path, {
            active: (currentState) => {
                this.oneStateActive = true;
                this.showPageMutex.safeRunLastAsync(async () => {
                    let isNew = false;
                    if (!element || !element.parentElement) {
                        let options = allRoutes[path];
                        if (options.scriptUrl != "") {
                            await Aventus.ResourceLoader.loadInHead(options.scriptUrl);
                        }
                        let cst = options.render();
                        element = new cst;
                        element.router = this;
                        isNew = true;
                    }
                    const canResult = await element.isAllowed(currentState, path, this);
                    if (canResult !== true) {
                        if (canResult === false) {
                            return;
                        }
                        this.navigate(canResult, { replace: true });
                        return;
                    }
                    if (isNew)
                        this.contentEl.appendChild(element);
                    if (this.oldPage && this.oldPage != element) {
                        await this.oldPage.hide();
                        const { destroy } = await this.oldPage.configure();
                        if (destroy === undefined && this.shouldDestroyFrame(this.oldPage)) {
                            this.oldPage.remove();
                        }
                        else if (destroy === true) {
                            this.oldPage.remove();
                        }
                    }
                    let oldPage = this.oldPage;
                    let oldUrl = this.activePath;
                    this.oldPage = element;
                    this.activePath = path;
                    this.activeState = currentState;
                    await element.show(currentState);
                    const { title, description, keywords } = await element.configure();
                    if (title !== undefined)
                        document.title = title;
                    if (keywords !== undefined) {
                        let meta = document.querySelector('meta[name="keywords"]');
                        if (!meta) {
                            meta = document.createElement('meta');
                        }
                        meta.setAttribute("content", keywords.join(", "));
                    }
                    if (description !== undefined) {
                        let meta = document.querySelector('meta[name="description"]');
                        if (!meta) {
                            meta = document.createElement('meta');
                        }
                        meta.setAttribute("content", description);
                    }
                    if (this.bindToUrl() && window.location.pathname != currentState.name) {
                        let newUrl = window.location.origin + currentState.name;
                        if (this.isReplace) {
                            window.history.replaceState({}, title ?? "", newUrl);
                        }
                        else {
                            window.history.pushState({}, title ?? "", newUrl);
                        }
                    }
                    this.onNewPage(oldUrl, oldPage, path, element);
                });
            },
            inactive: () => {
                this.oneStateActive = false;
            }
        });
    }
    async validError404() {
        if (!this.oneStateActive) {
            let Page404 = this.error404(this.stateManager.getState()) ?? Navigation.Router.page404;
            if (Page404) {
                if (!this.page404 || !this.page404.parentElement) {
                    this.page404 = new Page404();
                    this.page404.router = this;
                    this.contentEl.appendChild(this.page404);
                }
                if (this.oldPage && this.oldPage != this.page404) {
                    await this.oldPage.hide();
                }
                if (this.bindToUrl()) {
                    const currentState = this.stateManager.getState();
                    if (currentState && window.location.pathname != currentState.name) {
                        let newUrl = window.location.origin + currentState.name;
                        if (this.isReplace) {
                            window.history.replaceState({}, "Not found", newUrl);
                        }
                        else {
                            window.history.pushState({}, "Not found", newUrl);
                        }
                    }
                }
                this.activeState = undefined;
                this.oldPage = this.page404;
                this.activePath = '';
                await this.page404.show(this.activeState);
            }
        }
    }
    error404(state) {
        return null;
    }
    onNewPage(oldUrl, oldPage, newUrl, newPage) {
    }
    getSlugs() {
        return this.stateManager.getStateSlugs(this.activePath);
    }
    async canChangeState(newState) {
        return true;
    }
    async navigate(state, options) {
        if (options?.replace) {
            this.isReplace = true;
        }
        const result = await this.stateManager.setState(state);
        if (options?.replace) {
            this.isReplace = false;
        }
        return result;
    }
    bindToUrl() {
        return true;
    }
    defaultUrl() {
        return "/";
    }
    shouldDestroyFrame(page) {
        return Navigation.Router.destroyPage;
    }
    postCreation() {
        this.register();
        let oldUrl = window.localStorage.getItem("navigation_url");
        if (oldUrl !== null) {
            Aventus.State.activate(oldUrl, this.stateManager);
            window.localStorage.removeItem("navigation_url");
        }
        else if (this.bindToUrl()) {
            Aventus.State.activate(window.location.pathname, this.stateManager);
        }
        else {
            let defaultUrl = this.defaultUrl();
            if (defaultUrl) {
                Aventus.State.activate(defaultUrl, this.stateManager);
            }
        }
        if (this.bindToUrl()) {
            window.onpopstate = (e) => {
                if (window.location.pathname != this.stateManager.getState()?.name) {
                    Aventus.State.activate(window.location.pathname, this.stateManager);
                }
            };
        }
    }
    static configure(options) {
        if (options.page404 !== undefined)
            this.page404 = options.page404;
        if (options.destroyPage !== undefined)
            this.destroyPage = options.destroyPage;
    }
}
Navigation.Router.Namespace=`Aventus.Navigation`;
__as1(_.Navigation, 'Router', Navigation.Router);

let TouchRecord=class TouchRecord {
    _activeTouchID;
    _touchList = {};
    get _primitiveValue() {
        return { x: 0, y: 0 };
    }
    isActive() {
        return this._activeTouchID !== undefined;
    }
    getDelta() {
        const tracker = this._getActiveTracker();
        if (!tracker) {
            return this._primitiveValue;
        }
        return { ...tracker.delta };
    }
    getVelocity() {
        const tracker = this._getActiveTracker();
        if (!tracker) {
            return this._primitiveValue;
        }
        return { ...tracker.velocity };
    }
    getNbOfTouches() {
        return Object.values(this._touchList).length;
    }
    getTouches() {
        return Object.values(this._touchList);
    }
    getEasingDistance(damping) {
        const deAcceleration = 1 - damping;
        let distance = {
            x: 0,
            y: 0,
        };
        const vel = this.getVelocity();
        Object.keys(vel).forEach(dir => {
            let v = Math.abs(vel[dir]) <= 10 ? 0 : vel[dir];
            while (v !== 0) {
                distance[dir] += v;
                v = (v * deAcceleration) | 0;
            }
        });
        return distance;
    }
    track(evt) {
        if ('TouchEvent' in window && evt instanceof TouchEvent) {
            const { targetTouches, } = evt;
            Array.from(targetTouches).forEach(touch => {
                this._add(touch);
            });
        }
        else {
            this._add(evt);
        }
        return this._touchList;
    }
    update(evt) {
        if ('TouchEvent' in window && evt instanceof TouchEvent) {
            const { touches, changedTouches, } = evt;
            Array.from(touches).forEach(touch => {
                this._renew(touch);
            });
            this._setActiveID(changedTouches);
        }
        else if (evt instanceof PointerEvent) {
            this._renew(evt);
            this._setActiveID(evt);
        }
        return this._touchList;
    }
    release(evt) {
        if ('TouchEvent' in window && evt instanceof TouchEvent) {
            Array.from(evt.changedTouches).forEach(touch => {
                this._delete(touch);
            });
        }
        else {
            this._delete(evt);
        }
    }
    _getIdentifier(touch) {
        if ('Touch' in window && touch instanceof Touch)
            return touch.identifier;
        if (touch instanceof PointerEvent)
            return touch.pointerId;
        return touch.button;
    }
    _add(touch) {
        if (this._has(touch)) {
            this._delete(touch);
        }
        const tracker = new Tracker(touch);
        const identifier = this._getIdentifier(touch);
        this._touchList[identifier] = tracker;
    }
    _renew(touch) {
        if (!this._has(touch)) {
            return;
        }
        const identifier = this._getIdentifier(touch);
        const tracker = this._touchList[identifier];
        tracker.update(touch);
    }
    _delete(touch) {
        const identifier = this._getIdentifier(touch);
        delete this._touchList[identifier];
        if (this._activeTouchID == identifier) {
            this._activeTouchID = undefined;
        }
    }
    _has(touch) {
        const identifier = this._getIdentifier(touch);
        return this._touchList.hasOwnProperty(identifier);
    }
    _setActiveID(touches) {
        if (touches instanceof PointerEvent || touches instanceof MouseEvent) {
            this._activeTouchID = this._getIdentifier(touches);
        }
        else {
            this._activeTouchID = touches[touches.length - 1].identifier;
        }
    }
    _getActiveTracker() {
        const { _touchList, _activeTouchID, } = this;
        if (_activeTouchID !== undefined) {
            return _touchList[_activeTouchID];
        }
        return undefined;
    }
}
TouchRecord.Namespace=`Aventus`;
__as1(_, 'TouchRecord', TouchRecord);

Toast.ToastElement = class ToastElement extends Aventus.WebComponent {
    get 'position'() { return this.getStringAttr('position') }
    set 'position'(val) { this.setStringAttr('position', val) }get 'delay'() { return this.getNumberAttr('delay') }
    set 'delay'(val) { this.setNumberAttr('delay', val) }get 'is_active'() { return this.getBoolAttr('is_active') }
    set 'is_active'(val) { this.setBoolAttr('is_active', val) }    showAsked = false;
    onHideCallback = () => { };
    timeout = 0;
    isTransition = false;
    waitTransitionCbs = [];
    static __style = `:host{position:absolute}:host(:not([is_active])){opacity:0;visibility:hidden}:host([position="bottom left"]){bottom:var(--_toast-space-bottom);left:0px}:host([position="top left"]){left:var(--_toast-space-left);top:var(--_toast-space-top)}:host([position="bottom right"]){bottom:var(--_toast-space-bottom);right:var(--_toast-space-right)}:host([position="top right"]){right:var(--_toast-space-right);top:var(--_toast-space-top)}:host([position=top]){left:50%;top:var(--_toast-space-top);transform:translateX(-50%)}:host([position=bottom]){bottom:var(--_toast-space-bottom);left:50%;transform:translateX(-50%)}`;
    constructor() {
        super();
        if (this.constructor == ToastElement) {
            throw "can't instanciate an abstract class";
        }
    }
    __getStatic() {
        return ToastElement;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(ToastElement.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<slot></slot>` }
    });
}
    getClassName() {
        return "ToastElement";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('position')){ this['position'] = _.Toast.ToastManager.defaultPosition; }if(!this.hasAttribute('delay')){ this['delay'] = _.Toast.ToastManager.defaultDelay; }if(!this.hasAttribute('is_active')) { this.attributeChangedCallback('is_active', false, false); } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('position');this.__upgradeProperty('delay');this.__upgradeProperty('is_active'); }
    __listBoolProps() { return ["is_active"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    _setOptions(options) {
        if (options.position !== undefined)
            this.position = options.position;
        if (options.delay !== undefined)
            this.delay = options.delay;
        return this.setOptions(options);
    }
    show(onHideCallback) {
        this.onHideCallback = onHideCallback;
        if (this.isReady) {
            this.is_active = true;
            this.startDelay();
        }
        else {
            this.showAsked = true;
        }
    }
    startDelay() {
        if (this.delay > 0) {
            this.timeout = setTimeout(() => {
                this.close();
            }, this.delay);
        }
    }
    async close() {
        if (this.onHideCallback) {
            this.is_active = false;
            this.onHideCallback(false);
            this.remove();
        }
    }
    addTransition() {
        this.addEventListener("transitionStart", (e) => {
            this.isTransition = true;
        });
        this.addEventListener("transitionEnd", () => {
            this.isTransition = false;
            let cbs = [...this.waitTransitionCbs];
            this.waitTransitionCbs = [];
            for (let cb of cbs) {
                cb();
            }
        });
    }
    waitTransition() {
        if (this.isTransition) {
            return new Promise((resolve) => {
                this.waitTransitionCbs.push(resolve);
            });
        }
        return new Promise((resolve) => {
            resolve();
        });
    }
    postCreation() {
        if (this.showAsked) {
            this.is_active = true;
            this.startDelay();
        }
    }
    static add(options) {
        return _.Toast.ToastManager.add(options);
    }
}
Toast.ToastElement.Namespace=`Aventus.Toast`;
__as1(_.Toast, 'ToastElement', Toast.ToastElement);

Layout.Scrollable = class Scrollable extends Aventus.WebComponent {
    static get observedAttributes() {return ["zoom"].concat(super.observedAttributes).filter((v, i, a) => a.indexOf(v) === i);}
    get 'min_zoom'() { return this.getNumberAttr('min_zoom') }
    set 'min_zoom'(val) { this.setNumberAttr('min_zoom', val) }get 'max_zoom'() { return this.getNumberAttr('max_zoom') }
    set 'max_zoom'(val) { this.setNumberAttr('max_zoom', val) }get 'y_scroll_visible'() { return this.getBoolAttr('y_scroll_visible') }
    set 'y_scroll_visible'(val) { this.setBoolAttr('y_scroll_visible', val) }get 'x_scroll_visible'() { return this.getBoolAttr('x_scroll_visible') }
    set 'x_scroll_visible'(val) { this.setBoolAttr('x_scroll_visible', val) }get 'floating_scroll'() { return this.getBoolAttr('floating_scroll') }
    set 'floating_scroll'(val) { this.setBoolAttr('floating_scroll', val) }get 'x_scroll'() { return this.getBoolAttr('x_scroll') }
    set 'x_scroll'(val) { this.setBoolAttr('x_scroll', val) }get 'y_scroll'() { return this.getBoolAttr('y_scroll') }
    set 'y_scroll'(val) { this.setBoolAttr('y_scroll', val) }get 'auto_hide'() { return this.getBoolAttr('auto_hide') }
    set 'auto_hide'(val) { this.setBoolAttr('auto_hide', val) }get 'break'() { return this.getNumberAttr('break') }
    set 'break'(val) { this.setNumberAttr('break', val) }get 'disable'() { return this.getBoolAttr('disable') }
    set 'disable'(val) { this.setBoolAttr('disable', val) }get 'no_user_select'() { return this.getBoolAttr('no_user_select') }
    set 'no_user_select'(val) { this.setBoolAttr('no_user_select', val) }get 'mouse_drag'() { return this.getBoolAttr('mouse_drag') }
    set 'mouse_drag'(val) { this.setBoolAttr('mouse_drag', val) }get 'pinch'() { return this.getBoolAttr('pinch') }
    set 'pinch'(val) { this.setBoolAttr('pinch', val) }    get 'zoom'() { return this.getNumberProp('zoom') }
    set 'zoom'(val) { this.setNumberAttr('zoom', val) }    observer;
    display = { x: 0, y: 0 };
    max = {
        x: 0,
        y: 0
    };
    margin = {
        x: 0,
        y: 0
    };
    position = {
        x: 0,
        y: 0
    };
    momentum = { x: 0, y: 0 };
    contentWrapperSize = { x: 0, y: 0 };
    scroller = {
        x: () => {
            if (!this.horizontalScroller) {
                throw 'can\'t find the horizontalScroller';
            }
            return this.horizontalScroller;
        },
        y: () => {
            if (!this.verticalScroller) {
                throw 'can\'t find the verticalScroller';
            }
            return this.verticalScroller;
        }
    };
    scrollerContainer = {
        x: () => {
            if (!this.horizontalScrollerContainer) {
                throw 'can\'t find the horizontalScrollerContainer';
            }
            return this.horizontalScrollerContainer;
        },
        y: () => {
            if (!this.verticalScrollerContainer) {
                throw 'can\'t find the verticalScrollerContainer';
            }
            return this.verticalScrollerContainer;
        }
    };
    hideDelay = { x: 0, y: 0 };
    touchRecord;
    pointerCount = 0;
    loadedOnce = false;
    savedPercent;
    isDragScroller = false;
    cachedSvg;
    previousMidPoint;
    previousDistance;
    startTranslate = { x: 0, y: 0 };
    get x() {
        return this.position.x;
    }
    get y() {
        return this.position.y;
    }
    get xMax() {
        return this.max.x;
    }
    get yMax() {
        return this.max.y;
    }
    onScrollChange = new Aventus.Callback();
    onZoomChange = new Aventus.Callback();
    renderAnimation;
    autoScrollInterval = {
        top: 0,
        left: 0,
        right: 0,
        bottom: 0,
    };
    autoScrollSpeed = {
        top: 0,
        left: 0,
        right: 0,
        bottom: 0,
    };
    pressManager;
    __registerPropertiesActions() { super.__registerPropertiesActions(); this.__addPropertyActions("zoom", ((target) => {
    target.changeZoom();
})); }
    static __style = `:host{--internal-scrollbar-container-color: var(--scrollbar-container-color, transparent);--internal-scrollbar-color: var(--scrollbar-color, #757575);--internal-scrollbar-active-color: var(--scrollbar-active-color, #858585);--internal-scroller-width: var(--scroller-width, 6px);--internal-scroller-top: var(--scroller-top, 3px);--internal-scroller-bottom: var(--scroller-bottom, 3px);--internal-scroller-right: var(--scroller-right, 3px);--internal-scroller-left: var(--scroller-left, 3px);--_scrollbar-content-padding: var(--scrollbar-content-padding, 0);--_scrollbar-container-display: var(--scrollbar-container-display, inline-block)}:host{display:block;height:100%;min-height:inherit;min-width:inherit;overflow:clip;position:relative;-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;width:100%}:host .scroll-main-container{display:block;height:100%;min-height:inherit;min-width:inherit;position:relative;width:100%}:host .scroll-main-container .content-zoom{display:block;height:100%;min-height:inherit;min-width:inherit;position:relative;transform-origin:0 0;width:100%;z-index:4}:host .scroll-main-container .content-zoom .content-hidder{display:block;height:100%;min-height:inherit;min-width:inherit;overflow:clip;position:relative;width:100%}:host .scroll-main-container .content-zoom .content-hidder .content-wrapper{display:var(--_scrollbar-container-display);height:100%;min-height:inherit;min-width:inherit;padding:var(--_scrollbar-content-padding);position:relative;width:100%}:host .scroll-main-container .scroller-wrapper .container-scroller{display:none;overflow:hidden;position:absolute;transition:transform .2s linear;z-index:5}:host .scroll-main-container .scroller-wrapper .container-scroller .shadow-scroller{background-color:var(--internal-scrollbar-container-color);border-radius:5px}:host .scroll-main-container .scroller-wrapper .container-scroller .shadow-scroller .scroller{background-color:var(--internal-scrollbar-color);border-radius:5px;cursor:pointer;position:absolute;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;z-index:5}:host .scroll-main-container .scroller-wrapper .container-scroller .scroller.active{background-color:var(--internal-scrollbar-active-color)}:host .scroll-main-container .scroller-wrapper .container-scroller.vertical{height:calc(100% - var(--internal-scroller-bottom)*2 - var(--internal-scroller-width));padding-left:var(--internal-scroller-left);right:var(--internal-scroller-right);top:var(--internal-scroller-bottom);transform:0;width:calc(var(--internal-scroller-width) + var(--internal-scroller-left))}:host .scroll-main-container .scroller-wrapper .container-scroller.vertical.hide{transform:translateX(calc(var(--internal-scroller-width) + var(--internal-scroller-left)))}:host .scroll-main-container .scroller-wrapper .container-scroller.vertical .shadow-scroller{height:100%}:host .scroll-main-container .scroller-wrapper .container-scroller.vertical .shadow-scroller .scroller{width:calc(100% - var(--internal-scroller-left))}:host .scroll-main-container .scroller-wrapper .container-scroller.horizontal{bottom:var(--internal-scroller-bottom);height:calc(var(--internal-scroller-width) + var(--internal-scroller-top));left:var(--internal-scroller-right);padding-top:var(--internal-scroller-top);transform:0;width:calc(100% - var(--internal-scroller-right)*2 - var(--internal-scroller-width))}:host .scroll-main-container .scroller-wrapper .container-scroller.horizontal.hide{transform:translateY(calc(var(--internal-scroller-width) + var(--internal-scroller-top)))}:host .scroll-main-container .scroller-wrapper .container-scroller.horizontal .shadow-scroller{height:100%}:host .scroll-main-container .scroller-wrapper .container-scroller.horizontal .shadow-scroller .scroller{height:calc(100% - var(--internal-scroller-top))}:host([y_scroll]) .scroll-main-container .content-zoom .content-hidder .content-wrapper{height:auto}:host([x_scroll]) .scroll-main-container .content-zoom .content-hidder .content-wrapper{width:auto}:host([y_scroll_visible]) .scroll-main-container .scroller-wrapper .container-scroller.vertical{display:block}:host([x_scroll_visible]) .scroll-main-container .scroller-wrapper .container-scroller.horizontal{display:block}:host([no_user_select]) .content-wrapper *{user-select:none}:host([no_user_select]) ::slotted{user-select:none}`;
    constructor() {
        super();
        this.renderAnimation = this.createAnimation();
        this.onWheel = this.onWheel.bind(this);
        this.onTouchStart = this.onTouchStart.bind(this);
        this.onTouchMovePointer = this.onTouchMovePointer.bind(this);
        this.onTouchMove = this.onTouchMove.bind(this);
        this.onTouchMovePointer = this.onTouchMovePointer.bind(this);
        this.onTouchEnd = this.onTouchEnd.bind(this);
        this.onTouchEndPointer = this.onTouchEndPointer.bind(this);
        this.touchRecord = new TouchRecord();
    }
    __getStatic() {
        return Scrollable;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Scrollable.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<div class="scroll-main-container" _id="scrollable_0">    <div class="content-zoom" _id="scrollable_1">        <div class="content-hidder" _id="scrollable_2">            <div class="content-wrapper" part="content-wrapper" _id="scrollable_3">                <slot></slot>            </div>        </div>    </div>    <div class="scroller-wrapper">        <div class="container-scroller vertical" _id="scrollable_4">            <div class="shadow-scroller">                <div class="scroller" _id="scrollable_5"></div>            </div>        </div>        <div class="container-scroller horizontal" _id="scrollable_6">            <div class="shadow-scroller">                <div class="scroller" _id="scrollable_7"></div>            </div>        </div>    </div></div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "elements": [
    {
      "name": "mainContainer",
      "ids": [
        "scrollable_0"
      ]
    },
    {
      "name": "contentZoom",
      "ids": [
        "scrollable_1"
      ]
    },
    {
      "name": "contentHidder",
      "ids": [
        "scrollable_2"
      ]
    },
    {
      "name": "contentWrapper",
      "ids": [
        "scrollable_3"
      ]
    },
    {
      "name": "verticalScrollerContainer",
      "ids": [
        "scrollable_4"
      ]
    },
    {
      "name": "verticalScroller",
      "ids": [
        "scrollable_5"
      ]
    },
    {
      "name": "horizontalScrollerContainer",
      "ids": [
        "scrollable_6"
      ]
    },
    {
      "name": "horizontalScroller",
      "ids": [
        "scrollable_7"
      ]
    }
  ]
}); }
    getClassName() {
        return "Scrollable";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('min_zoom')){ this['min_zoom'] = 1; }if(!this.hasAttribute('max_zoom')){ this['max_zoom'] = undefined; }if(!this.hasAttribute('y_scroll_visible')) { this.attributeChangedCallback('y_scroll_visible', false, false); }if(!this.hasAttribute('x_scroll_visible')) { this.attributeChangedCallback('x_scroll_visible', false, false); }if(!this.hasAttribute('floating_scroll')) { this.attributeChangedCallback('floating_scroll', false, false); }if(!this.hasAttribute('x_scroll')) { this.attributeChangedCallback('x_scroll', false, false); }if(!this.hasAttribute('y_scroll')) {this.setAttribute('y_scroll' ,'true'); }if(!this.hasAttribute('auto_hide')) { this.attributeChangedCallback('auto_hide', false, false); }if(!this.hasAttribute('break')){ this['break'] = 0.1; }if(!this.hasAttribute('disable')) { this.attributeChangedCallback('disable', false, false); }if(!this.hasAttribute('no_user_select')) { this.attributeChangedCallback('no_user_select', false, false); }if(!this.hasAttribute('mouse_drag')) { this.attributeChangedCallback('mouse_drag', false, false); }if(!this.hasAttribute('pinch')) { this.attributeChangedCallback('pinch', false, false); }if(!this.hasAttribute('zoom')){ this['zoom'] = 1; } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('x');this.__correctGetter('y');this.__correctGetter('xMax');this.__correctGetter('yMax');this.__upgradeProperty('min_zoom');this.__upgradeProperty('max_zoom');this.__upgradeProperty('y_scroll_visible');this.__upgradeProperty('x_scroll_visible');this.__upgradeProperty('floating_scroll');this.__upgradeProperty('x_scroll');this.__upgradeProperty('y_scroll');this.__upgradeProperty('auto_hide');this.__upgradeProperty('break');this.__upgradeProperty('disable');this.__upgradeProperty('no_user_select');this.__upgradeProperty('mouse_drag');this.__upgradeProperty('pinch');this.__upgradeProperty('zoom'); }
    __listBoolProps() { return ["y_scroll_visible","x_scroll_visible","floating_scroll","x_scroll","y_scroll","auto_hide","disable","no_user_select","mouse_drag","pinch"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    createAnimation() {
        return new Aventus.Animation({
            fps: 60,
            animate: () => {
                const nextX = this.nextPosition('x');
                const nextY = this.nextPosition('y');
                this.momentum.x = nextX.momentum;
                this.momentum.y = nextY.momentum;
                this.scrollDirection('x', nextX.position);
                this.scrollDirection('y', nextY.position);
                if (!this.momentum.x && !this.momentum.y) {
                    this.renderAnimation.stop();
                }
            },
            stopped: () => {
                if (this.momentum.x || this.momentum.y) {
                    this.renderAnimation.start();
                }
            }
        });
    }
    nextPosition(direction) {
        const current = this.position[direction];
        const remain = this.momentum[direction];
        let result = {
            momentum: 0,
            position: 0,
        };
        if (Math.abs(remain) <= 0.1) {
            result.position = current + remain;
        }
        else {
            const _break = this.pointerCount > 0 ? 0.5 : this.break;
            let nextMomentum = remain * (1 - _break);
            nextMomentum |= 0;
            result.momentum = nextMomentum;
            result.position = current + remain - nextMomentum;
        }
        let correctPosition = this.correctScrollValue(result.position, direction);
        if (correctPosition != result.position) {
            result.position = correctPosition;
            result.momentum = 0;
        }
        return result;
    }
    scrollDirection(direction, value) {
        const max = this.max[direction];
        if (max != 0) {
            this.position[direction] = this.correctScrollValue(value, direction);
        }
        else {
            this.position[direction] = 0;
        }
        let container = this.scrollerContainer[direction]();
        let scroller = this.scroller[direction]();
        if (this.auto_hide) {
            container.classList.remove("hide");
            clearTimeout(this.hideDelay[direction]);
            this.hideDelay[direction] = setTimeout(() => {
                container.classList.add("hide");
            }, 1000);
        }
        let containerSize = direction == 'y' ? container.offsetHeight : container.offsetWidth;
        if (this.contentWrapperSize[direction] != 0) {
            let scrollPosition = this.position[direction] / this.contentWrapperSize[direction] * containerSize;
            scroller.style.transform = `translate${direction.toUpperCase()}(${scrollPosition}px)`;
            this.contentWrapper.style.transform = `translate3d(${-1 * this.x}px, ${-1 * this.y}px, 0)`;
        }
        this.triggerScrollChange();
    }
    scrollDirectionPercent(direction, percent) {
        const max = this.max[direction];
        this.scrollDirection(direction, max * percent / 100);
    }
    correctScrollValue(value, direction) {
        if (value < 0) {
            value = 0;
        }
        else if (value > this.max[direction]) {
            value = this.max[direction];
        }
        return value;
    }
    triggerScrollChange() {
        this.onScrollChange.trigger(this.x, this.y);
    }
    scrollToPosition(x, y) {
        this.scrollDirection('x', x);
        this.scrollDirection('y', y);
    }
    scrollX(x) {
        this.scrollDirection('x', x);
    }
    scrollXPercent(x) {
        this.scrollDirectionPercent('x', x);
    }
    scrollY(y) {
        this.scrollDirection('y', y);
    }
    scrollYPercent(y) {
        this.scrollDirectionPercent('y', y);
    }
    startAutoScrollRight() {
        if (!this.autoScrollInterval.right) {
            this.stopAutoScrollLeft();
            this.autoScrollInterval.right = setInterval(() => {
                if (this.x == this.max.x) {
                    this.stopAutoScrollRight();
                    return;
                }
                this.addDelta({
                    x: this.autoScrollSpeed.right,
                    y: 0
                });
            }, 100);
        }
    }
    autoScrollRight(percent = 50) {
        let slow = this.max.x * 1 / 100;
        let fast = this.max.x * 10 / 100;
        this.autoScrollSpeed.right = (fast - slow) * (percent / 100) + slow;
        this.startAutoScrollRight();
    }
    stopAutoScrollRight() {
        if (this.autoScrollInterval.right) {
            clearInterval(this.autoScrollInterval.right);
            this.autoScrollInterval.right = 0;
        }
    }
    startAutoScrollLeft() {
        if (!this.autoScrollInterval.left) {
            this.stopAutoScrollRight();
            this.autoScrollInterval.left = setInterval(() => {
                if (this.x == 0) {
                    this.stopAutoScrollLeft();
                    return;
                }
                this.addDelta({
                    x: this.autoScrollSpeed.left * -1,
                    y: 0
                });
            }, 100);
        }
    }
    autoScrollLeft(percent = 50) {
        let slow = this.max.x * 1 / 100;
        let fast = this.max.x * 10 / 100;
        this.autoScrollSpeed.left = (fast - slow) * (percent / 100) + slow;
        this.startAutoScrollLeft();
    }
    stopAutoScrollLeft() {
        if (this.autoScrollInterval.left) {
            clearInterval(this.autoScrollInterval.left);
            this.autoScrollInterval.left = 0;
        }
    }
    startAutoScrollTop() {
        if (!this.autoScrollInterval.top) {
            this.stopAutoScrollBottom();
            this.autoScrollInterval.top = setInterval(() => {
                if (this.y == 0) {
                    this.stopAutoScrollTop();
                    return;
                }
                this.addDelta({
                    x: 0,
                    y: this.autoScrollSpeed.top * -1
                });
            }, 100);
        }
    }
    autoScrollTop(percent = 50) {
        let slow = this.max.y * 1 / 100;
        let fast = this.max.y * 10 / 100;
        this.autoScrollSpeed.top = (fast - slow) * (percent / 100) + slow;
        this.startAutoScrollTop();
    }
    stopAutoScrollTop() {
        if (this.autoScrollInterval.top) {
            clearInterval(this.autoScrollInterval.top);
            this.autoScrollInterval.top = 0;
        }
    }
    startAutoScrollBottom() {
        if (!this.autoScrollInterval.bottom) {
            this.stopAutoScrollTop();
            this.autoScrollInterval.bottom = setInterval(() => {
                if (this.y == this.max.y) {
                    this.stopAutoScrollBottom();
                    return;
                }
                this.addDelta({
                    x: 0,
                    y: this.autoScrollSpeed.bottom
                });
            }, 100);
        }
    }
    autoScrollBottom(percent = 50) {
        let slow = this.max.y * 1 / 100;
        let fast = this.max.y * 10 / 100;
        this.autoScrollSpeed.bottom = (fast - slow) * (percent / 100) + slow;
        this.startAutoScrollBottom();
    }
    stopAutoScrollBottom() {
        if (this.autoScrollInterval.bottom) {
            clearInterval(this.autoScrollInterval.bottom);
            this.autoScrollInterval.bottom = 0;
        }
    }
    createMatrix() {
        if (!this.cachedSvg) {
            this.cachedSvg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        }
        return this.cachedSvg.createSVGMatrix();
    }
    getMidPoint(a, b) {
        return {
            x: (a.lastPosition.x + b.lastPosition.x) / 2,
            y: (a.lastPosition.y + b.lastPosition.y) / 2,
        };
    }
    getDistance(a, b) {
        return Math.sqrt((b.lastPosition.x - a.lastPosition.x) ** 2 + (b.lastPosition.y - a.lastPosition.y) ** 2);
    }
    zoomOnPoint(clientX, clientY, newZoom) {
        let targetCoordinates = this.getBoundingClientRect();
        let mousePositionRelativeToTarget = {
            x: targetCoordinates.x - clientX,
            y: targetCoordinates.y - clientY
        };
        let oldScale = this.zoom;
        let newScale;
        if (this.max_zoom > 0) {
            newScale = Math.max(this.min_zoom, Math.min(this.max_zoom, newZoom));
        }
        else {
            newScale = Math.max(this.min_zoom, newZoom);
        }
        let scaleDiff = newScale / oldScale;
        const matrix = this.createMatrix()
            .translate(this.x, this.y)
            .translate(mousePositionRelativeToTarget.x, mousePositionRelativeToTarget.y)
            .scale(scaleDiff)
            .translate(-mousePositionRelativeToTarget.x, -mousePositionRelativeToTarget.y)
            .scale(this.zoom);
        const newZoomFinal = matrix.a || 1;
        const newX = matrix.e || 0;
        const newY = matrix.f || 0;
        this.zoom = newZoomFinal;
        this.onZoomChange.trigger(newZoomFinal);
        this.scrollDirection('x', newX);
        this.scrollDirection('y', newY);
    }
    pinchAction() {
        const touches = this.touchRecord.getTouches();
        if (touches.length == 2) {
            const newMidpoint = this.getMidPoint(touches[0], touches[1]);
            const prevMidpoint = this.previousMidPoint ?? newMidpoint;
            const positioningElRect = this.getBoundingClientRect();
            const originX = (positioningElRect.left + this.x - this.startTranslate.x) - prevMidpoint.x;
            const originY = (positioningElRect.top + this.y - this.startTranslate.y) - prevMidpoint.y;
            const newDistance = this.getDistance(touches[0], touches[1]);
            const prevDistance = this.previousDistance;
            let scaleDiff = prevDistance ? newDistance / prevDistance : 1;
            const panX = prevMidpoint.x - newMidpoint.x;
            const panY = prevMidpoint.y - newMidpoint.y;
            let oldScale = this.zoom;
            let newScale;
            if (this.max_zoom > 0) {
                newScale = Math.max(this.min_zoom, Math.min(this.max_zoom, oldScale * scaleDiff));
            }
            else {
                newScale = Math.max(this.min_zoom, oldScale * scaleDiff);
            }
            scaleDiff = newScale / oldScale;
            const matrix = this.createMatrix()
                .translate(panX, panY)
                .translate(originX, originY)
                .translate(this.x, this.y)
                .scale(scaleDiff)
                .translate(-originX, -originY)
                .scale(this.zoom);
            const newZoom = matrix.a || 1;
            const newX = matrix.e || 0;
            const newY = matrix.f || 0;
            this.zoom = newZoom;
            this.onZoomChange.trigger(newZoom);
            this.scrollDirection('x', newX);
            this.scrollDirection('y', newY);
            this.previousMidPoint = newMidpoint;
            this.previousDistance = newDistance;
        }
        return null;
    }
    addAction() {
        this.addEventListener("wheel", this.onWheel, { passive: false });
        this.pressManager = new Aventus.PressManager({
            element: this,
            offsetDrag: 0,
            onPressStart: (e) => {
                this.touchRecord.track(e.event);
                this.pointerCount = this.touchRecord.getNbOfTouches();
            },
            onPressEnd: (e) => {
                this.touchRecord.release(e.event);
                this.pointerCount = this.touchRecord.getNbOfTouches();
            },
            onDragStart: (e) => {
                if (!this.pinch && !this.x_scroll_visible && !this.y_scroll_visible) {
                    return false;
                }
                return this.onTouchStartPointer(e);
            },
            onDrag: (e) => {
                this.onTouchMovePointer(e);
            },
            onDragEnd: (e) => {
                this.onTouchEndPointer(e);
            }
        });
        // this.addEventListener("touchstart", this.onTouchStart);
        // this.addEventListener("trigger_pointer_pressstart", this.onTouchStartPointer);
        if (this.mouse_drag) {
            // this.addEventListener("mousedown", this.onTouchStart);
        }
        this.addScrollDrag('x');
        this.addScrollDrag('y');
    }
    addActionMove() {
        // document.body.addEventListener("touchmove", this.onTouchMove);
        // document.body.addEventListener("trigger_pointer_pressmove", this.onTouchMovePointer);
        // document.body.addEventListener("touchcancel", this.onTouchEnd);
        // document.body.addEventListener("touchend", this.onTouchEnd);
        // document.body.addEventListener("trigger_pointer_pressend", this.onTouchEndPointer);
        if (this.mouse_drag) {
            // document.body.addEventListener("mousemove", this.onTouchMove);
            // document.body.addEventListener("mouseup", this.onTouchEnd);
        }
    }
    removeActionMove() {
        // document.body.removeEventListener("touchmove", this.onTouchMove);
        // document.body.removeEventListener("trigger_pointer_pressmove", this.onTouchMovePointer);
        // document.body.removeEventListener("touchcancel", this.onTouchEnd);
        // document.body.removeEventListener("touchend", this.onTouchEnd);
        // document.body.removeEventListener("trigger_pointer_pressend", this.onTouchEndPointer);
        // document.body.removeEventListener("mousemove", this.onTouchMove);
        // document.body.removeEventListener("mouseup", this.onTouchEnd);
    }
    addScrollDrag(direction) {
        let scroller = this.scroller[direction]();
        let startPosition = 0;
        new Aventus.DragAndDrop({
            element: scroller,
            applyDrag: false,
            usePercent: true,
            offsetDrag: 0,
            isDragEnable: () => !this.disable,
            onStart: (e) => {
                this.isDragScroller = true;
                this.no_user_select = true;
                scroller.classList.add("active");
                startPosition = this.position[direction];
            },
            onMove: (e, position) => {
                let delta = position[direction] / 100 * this.contentWrapperSize[direction];
                let value = startPosition + delta;
                this.scrollDirection(direction, value);
            },
            onStop: () => {
                this.no_user_select = false;
                scroller.classList.remove("active");
                this.isDragScroller = false;
            }
        });
    }
    shouldStopPropagation(e, delta) {
        if (!this.y_scroll && this.x_scroll) {
            if ((delta.x > 0 && this.x != this.max.x) ||
                (delta.x <= 0 && this.x != 0)) {
                e.stopPropagation();
            }
        }
        else {
            if ((delta.y > 0 && this.y != this.max.y) ||
                (delta.y <= 0 && this.y != 0)) {
                e.stopPropagation();
            }
        }
    }
    addDelta(delta) {
        if (this.disable) {
            return;
        }
        this.momentum.x += delta.x;
        this.momentum.y += delta.y;
        this.renderAnimation?.start();
    }
    onWheel(e) {
        if (e.ctrlKey) {
            e.preventDefault();
            e.stopPropagation();
            if (this.pinch) {
                let factor = 0.9;
                if (e.deltaY < 0) {
                    factor = 1.1;
                }
                this.zoomOnPoint(e.clientX, e.clientY, this.zoom * factor);
            }
            return;
        }
        const DELTA_MODE = [1.0, 28.0, 500.0];
        const mode = DELTA_MODE[e.deltaMode] || DELTA_MODE[0];
        let newValue = {
            x: 0,
            y: e.deltaY * mode,
        };
        if (!this.y_scroll && this.x_scroll) {
            newValue = {
                x: e.deltaY * mode,
                y: 0,
            };
        }
        else if (this.x_scroll && e.altKey) {
            newValue = {
                x: e.deltaY * mode,
                y: 0,
            };
        }
        this.shouldStopPropagation(e, newValue);
        this.addDelta(newValue);
    }
    onTouchStartPointer(e) {
        const ev = e.event;
        if ('TouchEvent' in window && ev instanceof TouchEvent) {
            this.onTouchStart(ev);
            return true;
        }
        else if (ev instanceof PointerEvent) {
            if (this.mouse_drag || ev.pointerType == "touch") {
                this.onTouchStart(ev);
                return true;
            }
        }
        return false;
    }
    onTouchStart(e) {
        if (this.isDragScroller)
            return;
        this.touchRecord.track(e);
        this.momentum = {
            x: 0,
            y: 0
        };
        if (this.pointerCount === 0) {
            this.addActionMove();
        }
        this.pointerCount = this.touchRecord.getNbOfTouches();
        if (this.pinch && this.pointerCount == 2) {
            this.startTranslate = { x: this.x, y: this.y };
        }
    }
    onTouchMovePointer(e) {
        const ev = e.event;
        if ('TouchEvent' in window && ev instanceof TouchEvent) {
            this.onTouchMove(ev);
        }
        else if (ev instanceof PointerEvent) {
            if (this.mouse_drag || ev.pointerType == "touch") {
                this.onTouchMove(ev);
            }
        }
    }
    onTouchMove(e) {
        if (this.isDragScroller)
            return;
        this.touchRecord.update(e);
        if (this.pinch && this.pointerCount == 2) {
            // zoom
            e.stopPropagation();
            this.renderAnimation?.stop();
            this.pinchAction();
        }
        else {
            const delta = this.touchRecord.getDelta();
            this.shouldStopPropagation(e, delta);
            this.addDelta(delta);
        }
    }
    onTouchEndPointer(e) {
        const ev = e.event;
        if ('TouchEvent' in window && ev instanceof TouchEvent) {
            this.onTouchEnd(ev);
        }
        else if (ev instanceof PointerEvent) {
            if (this.mouse_drag || ev.pointerType == "touch") {
                this.onTouchEnd(ev);
            }
        }
    }
    onTouchEnd(e) {
        if (this.isDragScroller)
            return;
        const delta = this.touchRecord.getEasingDistance(this.break);
        this.shouldStopPropagation(e, delta);
        this.addDelta(delta);
        this.touchRecord.release(e);
        this.pointerCount = this.touchRecord.getNbOfTouches();
        if (this.pointerCount === 0) {
            this.removeActionMove();
        }
        if (this.pointerCount < 2) {
            this.previousMidPoint = undefined;
            this.previousDistance = undefined;
        }
    }
    calculateRealSize() {
        if (!this.contentZoom || !this.mainContainer || !this.contentWrapper) {
            return false;
        }
        const currentOffsetWidth = this.contentZoom.offsetWidth;
        const currentOffsetHeight = this.contentZoom.offsetHeight;
        let hasChanged = false;
        if (this.contentWrapper.offsetWidth != this.contentWrapperSize.x || this.contentWrapper.offsetHeight != this.contentWrapperSize.y)
            hasChanged = true;
        this.contentWrapperSize.x = this.contentWrapper.offsetWidth;
        this.contentWrapperSize.y = this.contentWrapper.offsetHeight;
        if (this.zoom < 1) {
            // scale the container for zoom
            this.contentZoom.style.width = this.mainContainer.offsetWidth / this.zoom + 'px';
            this.contentZoom.style.height = this.mainContainer.offsetHeight / this.zoom + 'px';
            this.contentZoom.style.maxHeight = this.mainContainer.offsetHeight / this.zoom + 'px';
            if (currentOffsetHeight != this.display.y || currentOffsetWidth != this.display.x)
                hasChanged = true;
            this.display.y = currentOffsetHeight;
            this.display.x = currentOffsetWidth;
        }
        else {
            const newX = currentOffsetWidth / this.zoom;
            const newY = currentOffsetHeight / this.zoom;
            if (newY != this.display.y || newX != this.display.x)
                hasChanged = true;
            this.display.y = newY;
            this.display.x = newX;
            this.contentZoom.style.width = '';
            this.contentZoom.style.height = '';
            this.contentZoom.style.maxHeight = '';
        }
        return hasChanged;
    }
    calculatePositionScrollerContainer(direction) {
        if (direction == 'y') {
            this.calculatePositionScrollerContainerY();
        }
        else {
            this.calculatePositionScrollerContainerX();
        }
    }
    calculatePositionScrollerContainerY() {
        const leftMissing = this.mainContainer.offsetWidth - this.verticalScrollerContainer.offsetLeft;
        if (leftMissing > 0 && this.y_scroll_visible && !this.floating_scroll) {
            this.contentHidder.style.width = 'calc(100% - ' + leftMissing + 'px)';
            this.contentHidder.style.marginRight = leftMissing + 'px';
            this.margin.x = leftMissing;
        }
        else {
            this.contentHidder.style.width = '';
            this.contentHidder.style.marginRight = '';
            this.margin.x = 0;
        }
    }
    calculatePositionScrollerContainerX() {
        const topMissing = this.mainContainer.offsetHeight - this.horizontalScrollerContainer.offsetTop;
        if (topMissing > 0 && this.x_scroll_visible && !this.floating_scroll) {
            this.contentHidder.style.height = 'calc(100% - ' + topMissing + 'px)';
            this.contentHidder.style.marginBottom = topMissing + 'px';
            this.margin.y = topMissing;
        }
        else {
            this.contentHidder.style.height = '';
            this.contentHidder.style.marginBottom = '';
            this.margin.y = 0;
        }
    }
    calculateSizeScroller(direction) {
        const scrollerSize = ((this.display[direction] - this.margin[direction]) / this.contentWrapperSize[direction] * 100);
        if (direction == "y") {
            this.scroller[direction]().style.height = scrollerSize + '%';
        }
        else {
            this.scroller[direction]().style.width = scrollerSize + '%';
        }
        let maxScrollContent = this.contentWrapperSize[direction] - this.display[direction];
        if (maxScrollContent < 0) {
            maxScrollContent = 0;
        }
        this.max[direction] = maxScrollContent + this.margin[direction];
    }
    changeZoom() {
        this.contentZoom.style.transform = 'scale(' + this.zoom + ')';
        this.dimensionRefreshed(true);
    }
    dimensionRefreshed(force = false) {
        if (this.contentWrapper.offsetHeight > 0 && this.contentWrapper.offsetWidth > 0) {
            this.loadedOnce = true;
            if (this.savedPercent) {
                this.position.x = this.contentWrapper.offsetWidth * this.savedPercent.x;
                this.position.y = this.contentWrapper.offsetHeight * this.savedPercent.y;
                this.savedPercent = undefined;
            }
        }
        else if (this.loadedOnce) {
            this.savedPercent = {
                x: this.position.x / this.contentWrapperSize.x,
                y: this.position.y / this.contentWrapperSize.y
            };
        }
        if (!this.calculateRealSize() && !force) {
            return;
        }
        if (this.contentWrapperSize.y - this.display.y > 0) {
            if (!this.y_scroll_visible) {
                this.y_scroll_visible = true;
                this.calculatePositionScrollerContainer('y');
            }
            this.calculateSizeScroller('y');
            this.scrollDirection('y', this.y);
        }
        else if (this.y_scroll_visible) {
            this.y_scroll_visible = false;
            this.calculatePositionScrollerContainer('y');
            this.calculateSizeScroller('y');
            this.scrollDirection('y', 0);
        }
        if (this.contentWrapperSize.x - this.display.x > 0) {
            if (!this.x_scroll_visible) {
                this.x_scroll_visible = true;
                this.calculatePositionScrollerContainer('x');
            }
            this.calculateSizeScroller('x');
            this.scrollDirection('x', this.x);
        }
        else if (this.x_scroll_visible) {
            this.x_scroll_visible = false;
            this.calculatePositionScrollerContainer('x');
            this.calculateSizeScroller('x');
            this.scrollDirection('x', 0);
        }
    }
    createResizeObserver() {
        let inProgress = false;
        return new Aventus.ResizeObserver({
            callback: entries => {
                if (inProgress) {
                    return;
                }
                inProgress = true;
                this.dimensionRefreshed();
                inProgress = false;
            },
            fps: 30
        });
    }
    addResizeObserver() {
        if (this.observer == undefined) {
            this.observer = this.createResizeObserver();
        }
        this.observer.observe(this.contentWrapper);
        this.observer.observe(this);
    }
    postCreation() {
        this.dimensionRefreshed();
        this.addResizeObserver();
        this.addAction();
    }
    static lock(element) {
        const container = element.findParentByType(Layout.Scrollable);
        if (container) {
            container.disable = true;
        }
    }
    static unlock(element) {
        const container = element.findParentByType(Layout.Scrollable);
        if (container) {
            container.disable = false;
        }
    }
}
Layout.Scrollable.Namespace=`Aventus.Layout`;
Layout.Scrollable.Tag=`av-scrollable`;
__as1(_.Layout, 'Scrollable', Layout.Scrollable);
if(!window.customElements.get('av-scrollable')){window.customElements.define('av-scrollable', Layout.Scrollable);Aventus.WebComponentInstance.registerDefinition(Layout.Scrollable);}

let Process=class Process {
    static handleErrors;
    static configure(config) {
        this.handleErrors = config.handleErrors;
    }
    static async execute(prom) {
        const queryResult = await prom;
        return await this.parseErrors(queryResult);
    }
    static async parseErrors(result) {
        if (result.errors.length > 0) {
            if (this.handleErrors) {
                let msg = result.errors.map(p => p.message.replace(/\n/g, '<br/>')).join("<br/>");
                this.handleErrors(msg, result.errors);
            }
            return undefined;
        }
        if (result instanceof Aventus.ResultWithError)
            return result.result;
        return undefined;
    }
}
Process.Namespace=`Aventus`;
__as1(_, 'Process', Process);

Toast.ToastManager = class ToastManager extends Aventus.WebComponent {
    get 'gap'() { return this.getNumberAttr('gap') }
    set 'gap'(val) { this.setNumberAttr('gap', val) }get 'not_main'() { return this.getBoolAttr('not_main') }
    set 'not_main'(val) { this.setBoolAttr('not_main', val) }    static defaultToast;
    static defaultToastManager;
    static defaultPosition = 'top right';
    static defaultDelay = 5000;
    static heightLimitPercent = 100;
    static instance;
    activeToasts = {
        top: [],
        'top left': [],
        'bottom left': [],
        bottom: [],
        'bottom right': [],
        'top right': [],
    };
    waitingToasts = {
        top: [],
        'top left': [],
        'bottom left': [],
        bottom: [],
        'bottom right': [],
        'top right': [],
    };
    get containerHeight() {
        return this.offsetHeight;
    }
    get heightLimit() {
        return this.containerHeight * Toast.ToastManager.heightLimitPercent / 100;
    }
    mutex = new Aventus.Mutex();
    static __style = `:host{--_toast-space-bottom: var(--toast-space-bottom, 20px);--_toast-space-top: var(--toast-space-top, 20px);--_toast-space-right: var(--toast-space-right, 10px);--_toast-space-left: var(--toast-space-left, 10px)}:host{inset:0;overflow:hidden;pointer-events:none;position:fixed;z-index:50}:host ::slotted(*){pointer-events:auto}`;
    __getStatic() {
        return ToastManager;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(ToastManager.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<slot></slot>` }
    });
}
    getClassName() {
        return "ToastManager";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('gap')){ this['gap'] = 10; }if(!this.hasAttribute('not_main')) { this.attributeChangedCallback('not_main', false, false); } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('containerHeight');this.__correctGetter('heightLimit');this.__upgradeProperty('gap');this.__upgradeProperty('not_main'); }
    __listBoolProps() { return ["not_main"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    async add(toast) {
        await this.mutex.waitOne();
        let realToast;
        if (toast instanceof _.Toast.ToastElement) {
            realToast = toast;
        }
        else {
            if (!Toast.ToastManager.defaultToast)
                throw "No default toast. Try ToastManager.configure()";
            realToast = new Toast.ToastManager.defaultToast();
            await realToast._setOptions(toast);
        }
        this.appendChild(realToast);
        if (realToast.position == "bottom") {
            return this._notifyBottom(realToast, true);
        }
        else if (realToast.position == "bottom left") {
            return this._notifyBottomLeft(realToast, true);
        }
        else if (realToast.position == "top left") {
            return this._notifyTopLeft(realToast, true);
        }
        else if (realToast.position == "bottom right") {
            return this._notifyBottomRight(realToast, true);
        }
        else if (realToast.position == "top right") {
            return this._notifyTopRight(realToast, true);
        }
        else if (realToast.position == "top") {
            return this._notifyTop(realToast, true);
        }
        return false;
    }
    _calculateBottom(toast, firstTime, position, from) {
        return new Promise((resolve) => {
            let height = toast.offsetHeight;
            let containerHeight = this.containerHeight;
            const _remove = (result) => {
                let index = this.activeToasts[position].indexOf(toast);
                if (index > -1) {
                    this.activeToasts[position].splice(index, 1);
                }
                if (this.waitingToasts[position].length > 0) {
                    let nextNotif = this.waitingToasts[position].splice(0, 1)[0];
                    this._calculateBottom(nextNotif, false, position, index);
                }
                else {
                    let containerHeight = this.containerHeight;
                    for (let i = 0; i < index; i++) {
                        let notif = this.activeToasts[position][i];
                        let bottom = containerHeight - (notif.offsetTop + notif.offsetHeight);
                        notif.style.bottom = bottom - height - this.gap + 'px';
                    }
                }
                resolve(result);
            };
            let length = this.activeToasts[position].length;
            if (length == 0) {
                this.activeToasts[position].push(toast);
                toast.show(_remove);
            }
            else {
                let totHeight = 0;
                for (let t of this.activeToasts[position]) {
                    totHeight += t.offsetHeight + this.gap;
                }
                if (totHeight + height < this.heightLimit) {
                    for (let i = from; i < this.activeToasts[position].length; i++) {
                        let t = this.activeToasts[position][i];
                        let bottom = containerHeight - (t.offsetTop + t.offsetHeight);
                        t.style.bottom = bottom + height + this.gap + 'px';
                    }
                    this.activeToasts[position].push(toast);
                    toast.show(_remove);
                }
                else if (firstTime) {
                    this.waitingToasts[position].push(toast);
                }
            }
        });
    }
    _calculateTop(toast, firstTime, position, from) {
        return new Promise(async (resolve) => {
            let height = toast.offsetHeight;
            const _remove = (result) => {
                let index = this.activeToasts[position].indexOf(toast);
                if (index > -1) {
                    this.activeToasts[position].splice(index, 1);
                }
                if (this.waitingToasts[position].length > 0) {
                    let nextNotif = this.waitingToasts[position].splice(0, 1)[0];
                    this._calculateTop(nextNotif, false, position, index);
                }
                else {
                    for (let i = 0; i < index; i++) {
                        let notif = this.activeToasts[position][i];
                        let top = (notif.offsetTop - height - this.gap);
                        notif.style.top = top + 'px';
                    }
                }
                resolve(result);
            };
            let length = this.activeToasts[position].length;
            if (length == 0) {
                this.activeToasts[position].push(toast);
                toast.show(_remove);
            }
            else {
                let totHeight = 0;
                for (let notif of this.activeToasts[position]) {
                    await notif.waitTransition();
                    totHeight += notif.offsetHeight + this.gap;
                }
                if (totHeight + height < this.heightLimit) {
                    for (let i = from; i < this.activeToasts[position].length; i++) {
                        let notif = this.activeToasts[position][i];
                        await notif.waitTransition();
                        let top = (notif.offsetTop + notif.offsetHeight);
                        notif.style.top = top + this.gap + 'px';
                    }
                    this.activeToasts[position].push(toast);
                    toast.show(_remove);
                }
                else if (firstTime) {
                    this.waitingToasts[position].push(toast);
                }
            }
            this.mutex.release();
            return;
        });
    }
    async _notifyBottomRight(toast, firstTime) {
        return await this._calculateBottom(toast, firstTime, "bottom right", 0);
    }
    async _notifyTopRight(toast, firstTime) {
        return await this._calculateTop(toast, firstTime, "top right", 0);
    }
    async _notifyBottomLeft(toast, firstTime) {
        return await this._calculateBottom(toast, firstTime, "bottom left", 0);
    }
    async _notifyTopLeft(toast, firstTime) {
        return await this._calculateTop(toast, firstTime, "top left", 0);
    }
    async _notifyTop(toast, firstTime, from = 0) {
        return await this._calculateTop(toast, firstTime, "top", 0);
    }
    async _notifyBottom(toast, firstTime, from = 0) {
        return await this._calculateBottom(toast, firstTime, "bottom", from);
    }
    postConnect() {
        super.postConnect();
        if (!Toast.ToastManager.instance && !this.not_main) {
            Toast.ToastManager.instance = this;
        }
    }
    postDisonnect() {
        if (Toast.ToastManager.instance == this) {
            Toast.ToastManager.instance = undefined;
        }
    }
    static add(toast) {
        if (!this.instance) {
            this.instance = this.defaultToastManager ? new this.defaultToastManager() : new Toast.ToastManager();
            document.body.appendChild(this.instance);
        }
        return this.instance.add(toast);
    }
    static configure(options) {
        for (let key in options) {
            if (options[key] !== undefined)
                this[key] = options[key];
        }
    }
}
Toast.ToastManager.Namespace=`Aventus.Toast`;
Toast.ToastManager.Tag=`av-toast-manager`;
__as1(_.Toast, 'ToastManager', Toast.ToastManager);
if(!window.customElements.get('av-toast-manager')){window.customElements.define('av-toast-manager', Toast.ToastManager);Aventus.WebComponentInstance.registerDefinition(Toast.ToastManager);}

Lib.ShortcutManager=class ShortcutManager {
    static memory = {};
    static autoPrevents = [];
    static isInit = false;
    static arrayKeys = [];
    static options = new Map();
    static replacingMemory = {};
    static isTxt(touch) {
        return touch.match(/[a-zA-Z0-9_\+\-]/g);
    }
    static getText(combinaison) {
        let allTouches = [];
        for (let touch of combinaison) {
            let realTouch = "";
            if (typeof touch == "number" && Lib.SpecialTouch[touch] !== undefined) {
                realTouch = Lib.SpecialTouch[touch];
            }
            else if (this.isTxt(touch)) {
                realTouch = touch;
            }
            else {
                throw "I can't use " + touch + " to add a shortcut";
            }
            allTouches.push(realTouch);
        }
        allTouches.sort();
        return allTouches.join("+");
    }
    static subscribe(combinaison, cb, options) {
        if (!Array.isArray(combinaison)) {
            combinaison = [combinaison];
        }
        let key = this.getText(combinaison);
        if (options?.replaceTemp) {
            if (Lib.ShortcutManager.memory[key]) {
                if (!this.replacingMemory[key]) {
                    this.replacingMemory[key] = [];
                }
                this.replacingMemory[key].push(Lib.ShortcutManager.memory[key]);
                delete Lib.ShortcutManager.memory[key];
            }
        }
        if (!Lib.ShortcutManager.memory[key]) {
            Lib.ShortcutManager.memory[key] = [];
        }
        if (!Lib.ShortcutManager.memory[key].includes(cb)) {
            Lib.ShortcutManager.memory[key].push(cb);
            if (options) {
                this.options.set(cb, options);
            }
        }
        if (!Lib.ShortcutManager.isInit) {
            Lib.ShortcutManager.init();
        }
    }
    static unsubscribe(combinaison, cb) {
        if (!Array.isArray(combinaison)) {
            combinaison = [combinaison];
        }
        let key = this.getText(combinaison);
        if (Lib.ShortcutManager.memory[key]) {
            let index = Lib.ShortcutManager.memory[key].indexOf(cb);
            if (index != -1) {
                Lib.ShortcutManager.memory[key].splice(index, 1);
                let options = this.options.get(cb);
                if (options) {
                    this.options.delete(cb);
                }
                if (Lib.ShortcutManager.memory[key].length == 0) {
                    delete Lib.ShortcutManager.memory[key];
                    if (options?.replaceTemp) {
                        if (this.replacingMemory[key]) {
                            if (this.replacingMemory[key].length > 0) {
                                Lib.ShortcutManager.memory[key] = this.replacingMemory[key].pop();
                                if (this.replacingMemory[key].length == 0) {
                                    delete this.replacingMemory[key];
                                }
                            }
                            else {
                                delete this.replacingMemory[key];
                            }
                        }
                    }
                }
                if (Object.keys(Lib.ShortcutManager.memory).length == 0 && Lib.ShortcutManager.isInit) {
                    //ShortcutManager.uninit();
                }
            }
        }
    }
    static onKeyDown(e) {
        if (e.ctrlKey) {
            let txt = Lib.SpecialTouch[Lib.SpecialTouch.Control];
            if (!this.arrayKeys.includes(txt)) {
                this.arrayKeys.push(txt);
            }
        }
        if (e.altKey) {
            let txt = Lib.SpecialTouch[Lib.SpecialTouch.Alt];
            if (!this.arrayKeys.includes(txt)) {
                this.arrayKeys.push(txt);
            }
        }
        if (e.shiftKey) {
            let txt = Lib.SpecialTouch[Lib.SpecialTouch.Shift];
            if (!this.arrayKeys.includes(txt)) {
                this.arrayKeys.push(txt);
            }
        }
        if (this.isTxt(e.key) && !this.arrayKeys.includes(e.key)) {
            this.arrayKeys.push(e.key);
        }
        else if (Lib.SpecialTouch[e.key] !== undefined && !this.arrayKeys.includes(e.key)) {
            this.arrayKeys.push(e.key);
        }
        this.arrayKeys.sort();
        let key = this.arrayKeys.join("+");
        if (Lib.ShortcutManager.memory[key]) {
            let preventDefault = true;
            for (let cb of Lib.ShortcutManager.memory[key]) {
                let options = this.options.get(cb);
                if (options && options.preventDefault === false) {
                    preventDefault = false;
                }
            }
            this.arrayKeys = [];
            for (let cb of Lib.ShortcutManager.memory[key]) {
                const result = cb();
                if (result === false) {
                    preventDefault = result;
                }
            }
            if (preventDefault) {
                e.preventDefault();
            }
        }
        else if (Lib.ShortcutManager.autoPrevents.includes(key)) {
            e.preventDefault();
        }
    }
    static onKeyUp(e) {
        let index = this.arrayKeys.indexOf(e.key);
        if (index != -1) {
            this.arrayKeys.splice(index, 1);
        }
    }
    static init() {
        if (Lib.ShortcutManager.isInit)
            return;
        Lib.ShortcutManager.isInit = true;
        this.onKeyDown = this.onKeyDown.bind(this);
        this.onKeyUp = this.onKeyUp.bind(this);
        Lib.ShortcutManager.autoPrevents = [
            this.getText([Lib.SpecialTouch.Control, "s"]),
            this.getText([Lib.SpecialTouch.Control, "p"]),
            this.getText([Lib.SpecialTouch.Control, "l"]),
            this.getText([Lib.SpecialTouch.Control, "k"]),
            this.getText([Lib.SpecialTouch.Control, "j"]),
            this.getText([Lib.SpecialTouch.Control, "h"]),
            this.getText([Lib.SpecialTouch.Control, "g"]),
            this.getText([Lib.SpecialTouch.Control, "f"]),
            this.getText([Lib.SpecialTouch.Control, "d"]),
            this.getText([Lib.SpecialTouch.Control, "o"]),
            this.getText([Lib.SpecialTouch.Control, "u"]),
            this.getText([Lib.SpecialTouch.Control, "e"]),
        ];
        window.addEventListener("blur", () => {
            this.arrayKeys = [];
        });
        document.body.addEventListener("keydown", this.onKeyDown);
        document.body.addEventListener("keyup", this.onKeyUp);
    }
    static uninit() {
        document.body.removeEventListener("keydown", this.onKeyDown);
        document.body.removeEventListener("keyup", this.onKeyUp);
        this.arrayKeys = [];
        Lib.ShortcutManager.isInit = false;
    }
}
Lib.ShortcutManager.Namespace=`Aventus.Lib`;
__as1(_.Lib, 'ShortcutManager', Lib.ShortcutManager);

Modal.ModalElement = class ModalElement extends Aventus.WebComponent {
    get 'options'() {
						return this.__watch["options"];
					}
					set 'options'(val) {
						this.__watch["options"] = val;
					}    static defaultCloseWithEsc = true;
    static defaultCloseWithClick = true;
    static defaultRejectValue = null;
    cb;
    pressManagerClickClose;
    pressManagerPrevent;
    __registerWatchesActions() {
    this.__addWatchesActions("options", ((target, action, path, value) => {
    target.onOptionsChanged();
}));    super.__registerWatchesActions();
}
    static __style = `:host{align-items:center;display:flex;inset:0;justify-content:center;position:fixed;z-index:60}:host .modal{background-color:#fff;padding:1.5rem;position:relative}`;
    constructor() {
        super();
        this.options = this.configure();
        if (this.options.closeWithClick === undefined)
            this.options.closeWithClick = Modal.ModalElement.defaultCloseWithClick;
        if (this.options.closeWithEsc === undefined)
            this.options.closeWithEsc = Modal.ModalElement.defaultCloseWithEsc;
        if (!Object.hasOwn(this.options, "rejectValue")) {
            this.options.rejectValue = Modal.ModalElement.defaultRejectValue;
        }
        if (this.constructor == ModalElement) {
            throw "can't instanciate an abstract class";
        }
        this.close = this.close.bind(this);
        this.reject = this.reject.bind(this);
        this.resolve = this.resolve.bind(this);
    }
    __getStatic() {
        return ModalElement;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(ModalElement.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<div class="modal" _id="modalelement_0">	<slot></slot></div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "elements": [
    {
      "name": "modalEl",
      "ids": [
        "modalelement_0"
      ]
    }
  ]
}); }
    getClassName() {
        return "ModalElement";
    }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["options"] = undefined; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('options'); }
    onOptionsChanged() { }
    init(cb) {
        this.cb = cb;
        if (this.options.closeWithEsc) {
            Lib.ShortcutManager.subscribe(Lib.SpecialTouch.Escape, this.reject, { replaceTemp: true });
        }
        if (this.options.closeWithClick) {
            this.pressManagerClickClose = new Aventus.PressManager({
                element: this,
                onPress: () => {
                    this.reject();
                }
            });
            this.pressManagerPrevent = new Aventus.PressManager({
                element: this.modalEl,
                onPress: () => { }
            });
        }
    }
    show(element) {
        return Modal.ModalElement._show(this, element);
    }
    close() {
        Lib.ShortcutManager.unsubscribe(Lib.SpecialTouch.Escape, this.reject);
        this.pressManagerClickClose?.destroy();
        this.pressManagerPrevent?.destroy();
        this.remove();
    }
    reject(no_close) {
        if (this.cb) {
            this.cb(this.options.rejectValue ?? null);
        }
        if (no_close !== true) {
            this.close();
        }
    }
    resolve(response, no_close) {
        if (this.cb) {
            this.cb(response);
        }
        if (no_close !== true) {
            this.close();
        }
    }
    static configure(options) {
        if (options.closeWithClick !== undefined)
            this.defaultCloseWithClick = options.closeWithClick;
        if (options.closeWithEsc !== undefined)
            this.defaultCloseWithEsc = options.closeWithEsc;
        if (!Object.hasOwn(options, "rejectValue")) {
            this.defaultRejectValue = options.rejectValue;
        }
    }
    static _show(modal, element) {
        return new Promise((resolve) => {
            modal.init((response) => {
                resolve(response);
            });
            if (!element) {
                element = document.body;
            }
            element.appendChild(modal);
        });
    }
}
Modal.ModalElement.Namespace=`Aventus.Modal`;
__as1(_.Modal, 'ModalElement', Modal.ModalElement);

Form.Validator=class Validator {
    constructor() { this.validate = this.validate.bind(this); }
    static async Test(validators, value, name, globalValidation) {
        if (!Array.isArray(validators)) {
            validators = [validators];
        }
        let result = [];
        for (let validator of validators) {
            let resultTemp = new validator();
            const temp = await resultTemp.validate(value, name, globalValidation);
            if (temp === false) {
                result.push('Le champs n\'est pas valide');
            }
            else if (Array.isArray(temp)) {
                for (let error of temp) {
                    result.push(error);
                }
            }
            else if (typeof temp == 'string') {
                result.push(temp);
            }
        }
        return result.length == 0 ? undefined : result;
    }
}
Form.Validator.Namespace=`Aventus.Form`;
__as1(_.Form, 'Validator', Form.Validator);

Form.Validators.Required=class Required extends _.Form.Validator {
    static msg = "Le champs {name} est requis";
    _msg;
    constructor(msg) {
        super();
        this._msg = msg ?? Form.Validators.Required.msg;
    }
    /**
     * @inheritdoc
     */
    validate(value, name, globalValidation) {
        const txt = this._msg.replace(/\{ *name *\}/g, name);
        if (value === undefined || value === null) {
            return txt;
        }
        if (typeof value == 'string' && value.trim() == "") {
            return txt;
        }
        return true;
    }
}
Form.Validators.Required.Namespace=`Aventus.Form.Validators`;
__as1(_.Form.Validators, 'Required', Form.Validators.Required);

Navigation.PageForm = class PageForm extends Navigation.Page {
    _form;
    get form() { return this._form; }
    elements = [];
    btns = [];
    static __style = ``;
    constructor() {
        super();
        this._form = new Form.FormHandler(this.formSchema(), this.formConfig());
        if (this.constructor == PageForm) {
            throw "can't instanciate an abstract class";
        }
        this.checkEnter = this.checkEnter.bind(this);
    }
    __getStatic() {
        return PageForm;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(PageForm.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<slot></slot>` }
    });
}
    getClassName() {
        return "PageForm";
    }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('form'); }
    formConfig() {
        return {};
    }
    pageConfig() {
        return {
            submitWithEnter: true,
            autoLoading: true
        };
    }
    async submit() {
        this.setLoading(true);
        const result = await this.defineSubmit((fct) => this.form.submit(fct));
        this.setLoading(false);
        return result;
    }
    setLoading(isLoading) {
        const autoLoading = this.pageConfig().autoLoading;
        if (autoLoading) {
            for (let btn of this.btns) {
                if ("loading" in btn) {
                    btn.loading = isLoading;
                }
            }
        }
    }
    checkEnter(e) {
        if (e.key == "Enter") {
            this.submit();
        }
    }
    registerElement(element) {
        const submitWithEnter = this.pageConfig().submitWithEnter;
        if (this.elements.length > 0) {
            if (submitWithEnter)
                this.elements[this.elements.length - 1].removeEventListener("keyup", this.checkEnter);
        }
        this.elements.push(element);
        if (submitWithEnter)
            element.addEventListener("keyup", this.checkEnter);
        return this;
    }
    registerSubmit(element) {
        this.btns.push(element);
        return this;
    }
    async requestSubmit() {
        await this.submit();
    }
}
Navigation.PageForm.Namespace=`Aventus.Navigation`;
__as1(_.Navigation, 'PageForm', Navigation.PageForm);

Form.FormHandler=class FormHandler {
    static _globalConfig;
    static _IFormElements = [Form.Form, Navigation.PageForm];
    __watcher;
    get item() {
        return this.__watcher.item;
    }
    set item(item) {
        this.__watcher.item = item;
    }
    get parts() {
        return this.__watcher.form;
    }
    _elements = {};
    get elements() {
        return { ...this._elements };
    }
    _globalValidation;
    _validateOnChange = false;
    _handleValidateNoInputError;
    _handleExecuteNoInputError;
    defaultValues;
    onItemChange = new Aventus.Callback();
    constructor(schema, config, defaultValues) {
        this.writeValidationIntoConsole = this.writeValidationIntoConsole.bind(this);
        this.writeErrorIntoConsole = this.writeErrorIntoConsole.bind(this);
        this._globalValidation = config?.validate ?? Form.FormHandler._globalConfig?.validate;
        this._validateOnChange = config?.validateOnChange ?? Form.FormHandler._globalConfig?.validateOnChange ?? false;
        this._handleValidateNoInputError = config?.handleValidateNoInputError ?? Form.FormHandler._globalConfig?.handleValidateNoInputError ?? this.writeValidationIntoConsole;
        this._handleExecuteNoInputError = config?.handleExecuteNoInputError ?? Form.FormHandler._globalConfig?.handleExecuteNoInputError ?? this.writeErrorIntoConsole;
        this.defaultValues = defaultValues ?? {};
        this.onWatcherChanged = this.onWatcherChanged.bind(this);
        this.__watcher = Aventus.Watcher.get({
            form: {},
            item: this.defaultValues
        }, this.onWatcherChanged);
        this.__watcher.form = this.transformForm(schema);
    }
    writeValidationIntoConsole(errors) {
        for (let name in errors) {
            if (!errors[name])
                continue;
            for (let error of errors[name]) {
                console.log(name + ": " + error);
            }
        }
    }
    writeErrorIntoConsole(errors) {
        for (let error in errors) {
            console.log(error);
        }
    }
    transformForm(form) {
        const result = form;
        const normalizePart = (part) => {
            let needTransform = true;
            if (typeof part == 'object' && !Array.isArray(part)) {
                const keys = Object.keys(part);
                const keysAllows = ['validate', 'validateOnChange'];
                let isValid = true;
                for (let i = 0; i < keys.length; i++) {
                    const allows = keysAllows;
                    if (!allows.includes(keys[i])) {
                        isValid = false;
                        break;
                    }
                }
                if (isValid) {
                    needTransform = false;
                }
            }
            if (needTransform) {
                return {
                    validate: part
                };
            }
            return part;
        };
        const createKey = (key) => {
            form[key] = normalizePart(form[key]);
            this.transformFormPart(key, form[key]);
        };
        for (let key in result) {
            createKey(key);
        }
        return result;
    }
    transformFormPart(key, part) {
        if (!part)
            return;
        const realPart = part;
        realPart.onValidation = new Aventus.Callback();
        realPart.onValueChange = new Aventus.Callback();
        realPart.handler = this;
        if (part.validate) {
            const isConstructor = (validate) => {
                return Aventus.isClass(validate);
            };
            let validate;
            if (Array.isArray(part.validate)) {
                const fcts = [];
                for (let temp of part.validate) {
                    if (temp instanceof _.Form.Validator) {
                        fcts.push(temp.validate);
                    }
                    else {
                        let resultTemp = new temp();
                        fcts.push(resultTemp.validate);
                    }
                }
                validate = async (value, name, globalFct) => {
                    let result = [];
                    for (let fct of fcts) {
                        const temp = await fct(value, name, globalFct);
                        if (temp === false) {
                            result.push('Le champs n\'est pas valide');
                        }
                        else if (Array.isArray(temp)) {
                            for (let error of temp) {
                                result.push(error);
                            }
                        }
                        else if (typeof temp == 'string') {
                            result.push(temp);
                        }
                    }
                    return result.length == 0 ? undefined : result;
                };
            }
            else if (part.validate instanceof _.Form.Validator) {
                validate = part.validate.validate;
            }
            else if (isConstructor(part.validate)) {
                let cst = part.validate;
                let resultTemp = new cst();
                validate = resultTemp.validate;
            }
            else {
                validate = part.validate;
            }
            realPart.validate = validate;
        }
        realPart.test = async () => {
            const result = await this.validate(key);
            return result;
        };
        if (!this._elements[key]) {
            this._elements[key] = [];
        }
        realPart.register = (el) => {
            if (this._elements[key] && !this._elements[key].includes(el)) {
                this._elements[key].push(el);
            }
        };
        realPart.unregister = (el) => {
            if (!this._elements[key])
                return;
            const index = this._elements[key].indexOf(el);
            if (index != -1) {
                this._elements[key].splice(index, 1);
            }
        };
        realPart.value = {
            get: () => {
                return Aventus.getValueFromObject(key, this.item);
            },
            set: (value) => {
                return Aventus.setValueToObject(key, this.item, value);
            }
        };
        return;
    }
    async onWatcherChanged(action, path, value) {
        if (!this.parts)
            return;
        if (path == "item") {
            for (let key in this.parts) {
                let formPart = this.parts[key];
                formPart.onValueChange.trigger();
            }
        }
        else if (path.startsWith("item.")) {
            let key = path.substring("item.".length);
            if (this.parts[key]) {
                let formPart = this.parts[key];
                formPart.onValueChange.trigger();
                const validateOnChange = formPart.validateOnChange === undefined ? this._validateOnChange : formPart.validateOnChange;
                if (validateOnChange) {
                    this.validate(key);
                }
            }
            this.onItemChange.trigger(action, key, value);
        }
    }
    async _validate(key) {
        try {
            if (!this.parts)
                return { "@general": ["Aucun formulaire trouvé"] };
            if (key !== undefined) {
                let errorsForm = [];
                if (this.parts[key]) {
                    let formPart = this.parts[key];
                    let value = formPart.value.get();
                    const resultToError = (result) => {
                        if (result === false) {
                            errorsForm.push('Le champs n\'est pas valide');
                        }
                        else if (typeof result == 'string' && result !== "") {
                            errorsForm.push(result);
                        }
                        else if (Array.isArray(result)) {
                            errorsForm = [...errorsForm, ...result];
                        }
                    };
                    if (formPart.validate) {
                        const global = async () => {
                            if (this._globalValidation) {
                                const result = await this._globalValidation(key, value);
                                resultToError(result);
                            }
                        };
                        let result = await formPart.validate(value, key, global);
                        resultToError(result);
                    }
                    else if (this._globalValidation) {
                        const result = await this._globalValidation(key, value);
                        resultToError(result);
                    }
                    const proms = formPart.onValidation.trigger(errorsForm);
                    const errors2d = await Promise.all(proms);
                    const errors = [];
                    for (let errorsTemp of errors2d) {
                        for (let errorTemp of errorsTemp) {
                            if (!errors.includes(errorTemp)) {
                                errors.push(errorTemp);
                            }
                        }
                    }
                    errorsForm = errors;
                }
                return errorsForm.length == 0 ? {} : { [key]: errorsForm };
            }
            let errors = {};
            for (let key in this.parts) {
                errors = { ...errors, ...await this._validate(key) };
            }
            return errors;
        }
        catch (e) {
            return { "@general": [e + ""] };
        }
    }
    async validate(key) {
        const result = await this._validate(key);
        const unhandle = {};
        let triggerUnhandle = false;
        for (let key in result) {
            if (!this._elements[key] || this._elements[key].length == 0) {
                triggerUnhandle = true;
                unhandle[key] = result[key];
            }
        }
        if (triggerUnhandle && this._handleValidateNoInputError) {
            this._handleValidateNoInputError(unhandle);
        }
        return Object.keys(result).length == 0;
    }
    async submit(query) {
        const result = await this.validate();
        if (!result) {
            return null;
        }
        return this.execute(query);
    }
    async execute(query) {
        if (typeof query == "function") {
            if (!this.item) {
                const result = new Aventus.VoidWithError();
                result.errors.push(new Aventus.GenericError(404, "No item inside the form"));
                return result;
            }
            query = query(this.item);
        }
        let queryResult = await query;
        if (queryResult.errors.length > 0) {
            queryResult.errors = this.parseErrors(queryResult);
            if (queryResult.errors.length > 0 && this._handleExecuteNoInputError) {
                this._handleExecuteNoInputError(queryResult.errors);
            }
        }
        return queryResult;
    }
    parseErrors(queryResult) {
        let noPrintErrors = [];
        const elements = this.elements;
        for (let error of queryResult.errors) {
            if (error.details) {
                if (Array.isArray(error.details)) {
                    let found = false;
                    for (let detail of error.details) {
                        if (Object.hasOwn(detail, "Name")) {
                            if (elements[detail.Name]) {
                                for (const element of elements[detail.Name]) {
                                    element.errors.push(error.message);
                                }
                                found = true;
                                break;
                            }
                        }
                    }
                    if (found) {
                        continue;
                    }
                }
                else {
                    let found = false;
                    for (let key in error.details) {
                        if (elements[key]) {
                            if (Array.isArray(error.details[key])) {
                                for (const element of elements[key]) {
                                    for (let detail of error.details[key]) {
                                        element.errors.push(detail);
                                    }
                                }
                                found = true;
                            }
                            else {
                                for (const element of elements[key]) {
                                    element.errors.push(error.details[key]);
                                }
                                found = true;
                            }
                        }
                    }
                    if (found) {
                        continue;
                    }
                }
            }
            noPrintErrors.push(error);
        }
        return noPrintErrors;
    }
    reset() {
        this.item = this.defaultValues;
    }
}
Form.FormHandler.Namespace=`Aventus.Form`;
__as1(_.Form, 'FormHandler', Form.FormHandler);

Form.FormElement = class FormElement extends Aventus.WebComponent {
    static get observedAttributes() {return ["disabled"].concat(super.observedAttributes).filter((v, i, a) => a.indexOf(v) === i);}
    get 'has_errors'() { return this.getBoolAttr('has_errors') }
    set 'has_errors'(val) { this.setBoolAttr('has_errors', val) }    get 'disabled'() { return this.getBoolProp('disabled') }
    set 'disabled'(val) { this.setBoolAttr('disabled', val) }    get 'value'() {
						return this.__watch["value"];
					}
					set 'value'(val) {
						this.__watch["value"] = val;
					}get 'errors'() {
						return this.__watch["errors"];
					}
					set 'errors'(val) {
						this.__watch["errors"] = val;
					}    static get formAssociated() { return true; }
    _form;
    get form() {
        return this._form;
    }
    set form(value) {
        this.unlinkFormPart();
        this._form = value;
        this.linkFormPart();
    }
    internals;
    canLinkValueToForm = false;
    handler = undefined;
    onChange = new Aventus.Callback();
    __registerWatchesActions() {
    this.__addWatchesActions("value", ((target) => {
    target.onValueChange(target.value);
}));this.__addWatchesActions("errors", ((target) => {
    target.onErrorsChange();
}));    super.__registerWatchesActions();
}
    static __style = ``;
    constructor() {
        super();
        this.internals = this.attachInternals();
        if (this.constructor == FormElement) {
            throw "can't instanciate an abstract class";
        }
        this.refreshValueFromForm = this.refreshValueFromForm.bind(this);
        this.onFormValidation = this.onFormValidation.bind(this);
    }
    __getStatic() {
        return FormElement;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(FormElement.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<slot></slot>` }
    });
}
    getClassName() {
        return "FormElement";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('has_errors')) { this.attributeChangedCallback('has_errors', false, false); }if(!this.hasAttribute('disabled')) { this.attributeChangedCallback('disabled', false, false); } }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["value"] = undefined;w["errors"] = []; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('form');this.__upgradeProperty('has_errors');this.__upgradeProperty('disabled');this.__correctGetter('value');this.__correctGetter('errors'); }
    __listBoolProps() { return ["has_errors","disabled"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    refreshValueFromForm() {
        if (this._form) {
            this.errors = [];
            this.value = this._form.value.get();
        }
    }
    unlinkFormPart() {
        if (this._form) {
            this._form.unregister(this);
            this._form.onValueChange.remove(this.refreshValueFromForm);
            this._form.onValidation.remove(this.onFormValidation);
        }
    }
    linkFormPart() {
        if (this._form) {
            this._form.register(this);
            this._form.onValueChange.add(this.refreshValueFromForm);
            this._form.onValidation.add(this.onFormValidation);
            this.refreshValueFromForm();
        }
        else {
            this.value = undefined;
        }
    }
    async onFormValidation(errors) {
        let _errors = await this.validation();
        if (_errors.length == 0) {
            _errors = errors;
        }
        else if (errors.length > 0) {
            for (let error of errors) {
                if (!_errors.includes(error)) {
                    _errors.push(error);
                }
            }
        }
        this.errors = _errors;
        return this.errors;
    }
    async validate() {
        if (!this.form) {
            this.errors = await this.validation();
            return this.errors.length == 0;
        }
        return await this.form.test();
    }
    async validation() {
        return [];
    }
    clearErrors() {
        this.errors = [];
    }
    triggerChange(value) {
        this.value = value;
        this.onChange.trigger(this.value);
        if (this.form) {
            this.form.value.set(this.value);
        }
    }
    onValueChange(value) {
        this.linkValueToForm();
    }
    onErrorsChange() {
        this.has_errors = this.errors.length > 0;
        this.linkErrorToForm();
    }
    linkErrorToForm() {
        if (!this.canLinkValueToForm)
            return;
        if (this.has_errors) {
            this.internals.setValidity({
                customError: true
            }, this.errors.join(' & '));
        }
        else {
            this.internals.setValidity({});
        }
    }
    linkValueToForm() {
        if (!this.canLinkValueToForm)
            return;
        if (this.value === undefined) {
            this.internals.setFormValue(null);
        }
        else {
            this.internals.setFormValue(this.value + '');
        }
    }
    formAssociatedCallback(form) {
        this.canLinkValueToForm = true;
        this.linkValueToForm();
        this.linkErrorToForm();
        this.validate();
    }
    formDisabledCallback(disabled) {
        this.disabled = disabled;
    }
    postCreation() {
        super.postCreation();
        let handler = this.findParentByType(_.Form.Form.formElements)?.registerElement(this);
    }
    postDestruction() {
        super.postDestruction();
        this.unlinkFormPart();
    }
}
Form.FormElement.Namespace=`Aventus.Form`;
__as1(_.Form, 'FormElement', Form.FormElement);

Layout.Col = class Col extends Aventus.WebComponent {
    get 'use_container'() { return this.getBoolAttr('use_container') }
    set 'use_container'(val) { this.setBoolAttr('use_container', val) }get 'size'() { return this.getNumberAttr('size') }
    set 'size'(val) { this.setNumberAttr('size', val) }get 'size_xs'() { return this.getNumberAttr('size_xs') }
    set 'size_xs'(val) { this.setNumberAttr('size_xs', val) }get 'size_sm'() { return this.getNumberAttr('size_sm') }
    set 'size_sm'(val) { this.setNumberAttr('size_sm', val) }get 'size_md'() { return this.getNumberAttr('size_md') }
    set 'size_md'(val) { this.setNumberAttr('size_md', val) }get 'size_lg'() { return this.getNumberAttr('size_lg') }
    set 'size_lg'(val) { this.setNumberAttr('size_lg', val) }get 'size_xl'() { return this.getNumberAttr('size_xl') }
    set 'size_xl'(val) { this.setNumberAttr('size_xl', val) }get 'offset'() { return this.getNumberAttr('offset') }
    set 'offset'(val) { this.setNumberAttr('offset', val) }get 'offset_xs'() { return this.getNumberAttr('offset_xs') }
    set 'offset_xs'(val) { this.setNumberAttr('offset_xs', val) }get 'offset_sm'() { return this.getNumberAttr('offset_sm') }
    set 'offset_sm'(val) { this.setNumberAttr('offset_sm', val) }get 'offset_md'() { return this.getNumberAttr('offset_md') }
    set 'offset_md'(val) { this.setNumberAttr('offset_md', val) }get 'offset_lg'() { return this.getNumberAttr('offset_lg') }
    set 'offset_lg'(val) { this.setNumberAttr('offset_lg', val) }get 'offset_xl'() { return this.getNumberAttr('offset_xl') }
    set 'offset_xl'(val) { this.setNumberAttr('offset_xl', val) }get 'offset_right'() { return this.getNumberAttr('offset_right') }
    set 'offset_right'(val) { this.setNumberAttr('offset_right', val) }get 'offset_right_xs'() { return this.getNumberAttr('offset_right_xs') }
    set 'offset_right_xs'(val) { this.setNumberAttr('offset_right_xs', val) }get 'offset_right_sm'() { return this.getNumberAttr('offset_right_sm') }
    set 'offset_right_sm'(val) { this.setNumberAttr('offset_right_sm', val) }get 'offset_right_md'() { return this.getNumberAttr('offset_right_md') }
    set 'offset_right_md'(val) { this.setNumberAttr('offset_right_md', val) }get 'offset_right_lg'() { return this.getNumberAttr('offset_right_lg') }
    set 'offset_right_lg'(val) { this.setNumberAttr('offset_right_lg', val) }get 'offset_right_xl'() { return this.getNumberAttr('offset_right_xl') }
    set 'offset_right_xl'(val) { this.setNumberAttr('offset_right_xl', val) }get 'center'() { return this.getBoolAttr('center') }
    set 'center'(val) { this.setBoolAttr('center', val) }    static use_container = false;
    static __style = `:host{--_col-padding: var(--col-padding, 8px);--_col-gap: var(--col-gap, 0px)}:host{display:flex;padding:var(--internal-col-padding)}:host([center]){justify-content:center}:host([size="0"]){width:0}:host([offset="0"]){margin-left:0}:host([offset_right="0"]){margin-right:0}:host([size="1"]){width:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([offset="1"]){margin-left:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([offset_right="1"]){margin-right:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([size="2"]){width:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([offset="2"]){margin-left:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([offset_right="2"]){margin-right:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([size="3"]){width:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([offset="3"]){margin-left:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([offset_right="3"]){margin-right:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([size="4"]){width:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([offset="4"]){margin-left:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([offset_right="4"]){margin-right:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([size="5"]){width:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([offset="5"]){margin-left:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([offset_right="5"]){margin-right:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([size="6"]){width:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([offset="6"]){margin-left:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([offset_right="6"]){margin-right:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([size="7"]){width:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([offset="7"]){margin-left:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([offset_right="7"]){margin-right:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([size="8"]){width:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([offset="8"]){margin-left:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([offset_right="8"]){margin-right:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([size="9"]){width:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([offset="9"]){margin-left:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([offset_right="9"]){margin-right:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([size="10"]){width:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([offset="10"]){margin-left:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([offset_right="10"]){margin-right:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([size="11"]){width:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([offset="11"]){margin-left:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([offset_right="11"]){margin-right:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([size="12"]){width:100%}:host([offset="12"]){margin-left:100%}:host([offset_right="12"]){margin-right:100%}@container row (min-width: 300px){:host([use_container][size_xs="0"]){width:0}:host([use_container][offset_xs="0"]){margin-left:0}:host([use_container][offset_right_xs="0"]){margin-right:0}:host([use_container][size_xs="0"]){display:none}:host([use_container][size_xs="1"]){width:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][offset_xs="1"]){margin-left:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][offset_right_xs="1"]){margin-right:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][size_xs="2"]){width:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][offset_xs="2"]){margin-left:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][offset_right_xs="2"]){margin-right:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][size_xs="3"]){width:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][offset_xs="3"]){margin-left:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][offset_right_xs="3"]){margin-right:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][size_xs="4"]){width:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][offset_xs="4"]){margin-left:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][offset_right_xs="4"]){margin-right:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][size_xs="5"]){width:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][offset_xs="5"]){margin-left:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][offset_right_xs="5"]){margin-right:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][size_xs="6"]){width:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][offset_xs="6"]){margin-left:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][offset_right_xs="6"]){margin-right:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][size_xs="7"]){width:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][offset_xs="7"]){margin-left:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][offset_right_xs="7"]){margin-right:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][size_xs="8"]){width:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][offset_xs="8"]){margin-left:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][offset_right_xs="8"]){margin-right:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][size_xs="9"]){width:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][offset_xs="9"]){margin-left:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][offset_right_xs="9"]){margin-right:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][size_xs="10"]){width:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][offset_xs="10"]){margin-left:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][offset_right_xs="10"]){margin-right:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][size_xs="11"]){width:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][offset_xs="11"]){margin-left:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][offset_right_xs="11"]){margin-right:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][size_xs="12"]){width:100%}:host([use_container][offset_xs="12"]){margin-left:100%}:host([use_container][offset_right_xs="12"]){margin-right:100%}}@media screen and (min-width: 300px){:host(:not([use_container])[size_xs="0"]){width:0}:host(:not([use_container])[offset_xs="0"]){margin-left:0}:host(:not([use_container])[offset_right_xs="0"]){margin-right:0}:host(:not([use_container])[size_xs="0"]){display:none}:host(:not([use_container])[size_xs="1"]){width:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[offset_xs="1"]){margin-left:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[offset_right_xs="1"]){margin-right:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[size_xs="2"]){width:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[offset_xs="2"]){margin-left:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[offset_right_xs="2"]){margin-right:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[size_xs="3"]){width:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[offset_xs="3"]){margin-left:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[offset_right_xs="3"]){margin-right:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[size_xs="4"]){width:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[offset_xs="4"]){margin-left:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[offset_right_xs="4"]){margin-right:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[size_xs="5"]){width:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[offset_xs="5"]){margin-left:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[offset_right_xs="5"]){margin-right:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[size_xs="6"]){width:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[offset_xs="6"]){margin-left:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[offset_right_xs="6"]){margin-right:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[size_xs="7"]){width:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[offset_xs="7"]){margin-left:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[offset_right_xs="7"]){margin-right:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[size_xs="8"]){width:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[offset_xs="8"]){margin-left:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[offset_right_xs="8"]){margin-right:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[size_xs="9"]){width:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[offset_xs="9"]){margin-left:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[offset_right_xs="9"]){margin-right:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[size_xs="10"]){width:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[offset_xs="10"]){margin-left:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[offset_right_xs="10"]){margin-right:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[size_xs="11"]){width:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[offset_xs="11"]){margin-left:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[offset_right_xs="11"]){margin-right:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[size_xs="12"]){width:100%}:host(:not([use_container])[offset_xs="12"]){margin-left:100%}:host(:not([use_container])[offset_right_xs="12"]){margin-right:100%}}@container row (min-width: 540px){:host([use_container][size_sm="0"]){width:0}:host([use_container][offset_sm="0"]){margin-left:0}:host([use_container][offset_right_sm="0"]){margin-right:0}:host([use_container][size_sm="0"]){display:none}:host([use_container][size_sm="1"]){width:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][offset_sm="1"]){margin-left:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][offset_right_sm="1"]){margin-right:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][size_sm="2"]){width:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][offset_sm="2"]){margin-left:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][offset_right_sm="2"]){margin-right:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][size_sm="3"]){width:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][offset_sm="3"]){margin-left:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][offset_right_sm="3"]){margin-right:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][size_sm="4"]){width:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][offset_sm="4"]){margin-left:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][offset_right_sm="4"]){margin-right:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][size_sm="5"]){width:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][offset_sm="5"]){margin-left:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][offset_right_sm="5"]){margin-right:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][size_sm="6"]){width:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][offset_sm="6"]){margin-left:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][offset_right_sm="6"]){margin-right:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][size_sm="7"]){width:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][offset_sm="7"]){margin-left:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][offset_right_sm="7"]){margin-right:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][size_sm="8"]){width:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][offset_sm="8"]){margin-left:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][offset_right_sm="8"]){margin-right:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][size_sm="9"]){width:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][offset_sm="9"]){margin-left:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][offset_right_sm="9"]){margin-right:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][size_sm="10"]){width:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][offset_sm="10"]){margin-left:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][offset_right_sm="10"]){margin-right:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][size_sm="11"]){width:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][offset_sm="11"]){margin-left:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][offset_right_sm="11"]){margin-right:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][size_sm="12"]){width:100%}:host([use_container][offset_sm="12"]){margin-left:100%}:host([use_container][offset_right_sm="12"]){margin-right:100%}}@media screen and (min-width: 540px){:host(:not([use_container])[size_sm="0"]){width:0}:host(:not([use_container])[offset_sm="0"]){margin-left:0}:host(:not([use_container])[offset_right_sm="0"]){margin-right:0}:host(:not([use_container])[size_sm="0"]){display:none}:host(:not([use_container])[size_sm="1"]){width:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[offset_sm="1"]){margin-left:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[offset_right_sm="1"]){margin-right:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[size_sm="2"]){width:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[offset_sm="2"]){margin-left:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[offset_right_sm="2"]){margin-right:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[size_sm="3"]){width:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[offset_sm="3"]){margin-left:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[offset_right_sm="3"]){margin-right:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[size_sm="4"]){width:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[offset_sm="4"]){margin-left:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[offset_right_sm="4"]){margin-right:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[size_sm="5"]){width:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[offset_sm="5"]){margin-left:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[offset_right_sm="5"]){margin-right:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[size_sm="6"]){width:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[offset_sm="6"]){margin-left:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[offset_right_sm="6"]){margin-right:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[size_sm="7"]){width:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[offset_sm="7"]){margin-left:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[offset_right_sm="7"]){margin-right:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[size_sm="8"]){width:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[offset_sm="8"]){margin-left:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[offset_right_sm="8"]){margin-right:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[size_sm="9"]){width:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[offset_sm="9"]){margin-left:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[offset_right_sm="9"]){margin-right:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[size_sm="10"]){width:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[offset_sm="10"]){margin-left:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[offset_right_sm="10"]){margin-right:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[size_sm="11"]){width:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[offset_sm="11"]){margin-left:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[offset_right_sm="11"]){margin-right:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[size_sm="12"]){width:100%}:host(:not([use_container])[offset_sm="12"]){margin-left:100%}:host(:not([use_container])[offset_right_sm="12"]){margin-right:100%}}@container row (min-width: 720px){:host([use_container][size_md="0"]){width:0}:host([use_container][offset_md="0"]){margin-left:0}:host([use_container][offset_right_md="0"]){margin-right:0}:host([use_container][size_md="0"]){display:none}:host([use_container][size_md="1"]){width:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][offset_md="1"]){margin-left:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][offset_right_md="1"]){margin-right:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][size_md="2"]){width:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][offset_md="2"]){margin-left:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][offset_right_md="2"]){margin-right:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][size_md="3"]){width:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][offset_md="3"]){margin-left:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][offset_right_md="3"]){margin-right:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][size_md="4"]){width:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][offset_md="4"]){margin-left:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][offset_right_md="4"]){margin-right:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][size_md="5"]){width:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][offset_md="5"]){margin-left:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][offset_right_md="5"]){margin-right:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][size_md="6"]){width:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][offset_md="6"]){margin-left:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][offset_right_md="6"]){margin-right:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][size_md="7"]){width:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][offset_md="7"]){margin-left:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][offset_right_md="7"]){margin-right:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][size_md="8"]){width:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][offset_md="8"]){margin-left:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][offset_right_md="8"]){margin-right:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][size_md="9"]){width:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][offset_md="9"]){margin-left:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][offset_right_md="9"]){margin-right:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][size_md="10"]){width:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][offset_md="10"]){margin-left:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][offset_right_md="10"]){margin-right:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][size_md="11"]){width:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][offset_md="11"]){margin-left:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][offset_right_md="11"]){margin-right:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][size_md="12"]){width:100%}:host([use_container][offset_md="12"]){margin-left:100%}:host([use_container][offset_right_md="12"]){margin-right:100%}}@media screen and (min-width: 720px){:host(:not([use_container])[size_md="0"]){width:0}:host(:not([use_container])[offset_md="0"]){margin-left:0}:host(:not([use_container])[offset_right_md="0"]){margin-right:0}:host(:not([use_container])[size_md="0"]){display:none}:host(:not([use_container])[size_md="1"]){width:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[offset_md="1"]){margin-left:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[offset_right_md="1"]){margin-right:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[size_md="2"]){width:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[offset_md="2"]){margin-left:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[offset_right_md="2"]){margin-right:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[size_md="3"]){width:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[offset_md="3"]){margin-left:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[offset_right_md="3"]){margin-right:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[size_md="4"]){width:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[offset_md="4"]){margin-left:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[offset_right_md="4"]){margin-right:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[size_md="5"]){width:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[offset_md="5"]){margin-left:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[offset_right_md="5"]){margin-right:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[size_md="6"]){width:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[offset_md="6"]){margin-left:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[offset_right_md="6"]){margin-right:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[size_md="7"]){width:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[offset_md="7"]){margin-left:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[offset_right_md="7"]){margin-right:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[size_md="8"]){width:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[offset_md="8"]){margin-left:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[offset_right_md="8"]){margin-right:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[size_md="9"]){width:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[offset_md="9"]){margin-left:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[offset_right_md="9"]){margin-right:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[size_md="10"]){width:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[offset_md="10"]){margin-left:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[offset_right_md="10"]){margin-right:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[size_md="11"]){width:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[offset_md="11"]){margin-left:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[offset_right_md="11"]){margin-right:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[size_md="12"]){width:100%}:host(:not([use_container])[offset_md="12"]){margin-left:100%}:host(:not([use_container])[offset_right_md="12"]){margin-right:100%}}@container row (min-width: 960px){:host([use_container][size_lg="0"]){width:0}:host([use_container][offset_lg="0"]){margin-left:0}:host([use_container][offset_right_lg="0"]){margin-right:0}:host([use_container][size_lg="0"]){display:none}:host([use_container][size_lg="1"]){width:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][offset_lg="1"]){margin-left:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][offset_right_lg="1"]){margin-right:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][size_lg="2"]){width:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][offset_lg="2"]){margin-left:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][offset_right_lg="2"]){margin-right:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][size_lg="3"]){width:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][offset_lg="3"]){margin-left:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][offset_right_lg="3"]){margin-right:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][size_lg="4"]){width:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][offset_lg="4"]){margin-left:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][offset_right_lg="4"]){margin-right:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][size_lg="5"]){width:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][offset_lg="5"]){margin-left:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][offset_right_lg="5"]){margin-right:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][size_lg="6"]){width:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][offset_lg="6"]){margin-left:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][offset_right_lg="6"]){margin-right:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][size_lg="7"]){width:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][offset_lg="7"]){margin-left:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][offset_right_lg="7"]){margin-right:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][size_lg="8"]){width:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][offset_lg="8"]){margin-left:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][offset_right_lg="8"]){margin-right:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][size_lg="9"]){width:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][offset_lg="9"]){margin-left:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][offset_right_lg="9"]){margin-right:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][size_lg="10"]){width:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][offset_lg="10"]){margin-left:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][offset_right_lg="10"]){margin-right:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][size_lg="11"]){width:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][offset_lg="11"]){margin-left:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][offset_right_lg="11"]){margin-right:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][size_lg="12"]){width:100%}:host([use_container][offset_lg="12"]){margin-left:100%}:host([use_container][offset_right_lg="12"]){margin-right:100%}}@media screen and (min-width: 960px){:host(:not([use_container])[size_lg="0"]){width:0}:host(:not([use_container])[offset_lg="0"]){margin-left:0}:host(:not([use_container])[offset_right_lg="0"]){margin-right:0}:host(:not([use_container])[size_lg="0"]){display:none}:host(:not([use_container])[size_lg="1"]){width:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[offset_lg="1"]){margin-left:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[offset_right_lg="1"]){margin-right:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[size_lg="2"]){width:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[offset_lg="2"]){margin-left:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[offset_right_lg="2"]){margin-right:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[size_lg="3"]){width:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[offset_lg="3"]){margin-left:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[offset_right_lg="3"]){margin-right:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[size_lg="4"]){width:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[offset_lg="4"]){margin-left:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[offset_right_lg="4"]){margin-right:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[size_lg="5"]){width:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[offset_lg="5"]){margin-left:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[offset_right_lg="5"]){margin-right:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[size_lg="6"]){width:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[offset_lg="6"]){margin-left:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[offset_right_lg="6"]){margin-right:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[size_lg="7"]){width:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[offset_lg="7"]){margin-left:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[offset_right_lg="7"]){margin-right:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[size_lg="8"]){width:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[offset_lg="8"]){margin-left:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[offset_right_lg="8"]){margin-right:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[size_lg="9"]){width:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[offset_lg="9"]){margin-left:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[offset_right_lg="9"]){margin-right:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[size_lg="10"]){width:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[offset_lg="10"]){margin-left:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[offset_right_lg="10"]){margin-right:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[size_lg="11"]){width:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[offset_lg="11"]){margin-left:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[offset_right_lg="11"]){margin-right:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[size_lg="12"]){width:100%}:host(:not([use_container])[offset_lg="12"]){margin-left:100%}:host(:not([use_container])[offset_right_lg="12"]){margin-right:100%}}@container row (min-width: 1140px){:host([use_container][size_xl="0"]){width:0}:host([use_container][offset_xl="0"]){margin-left:0}:host([use_container][offset_right_xl="0"]){margin-right:0}:host([use_container][size_xl="0"]){display:none}:host([use_container][size_xl="1"]){width:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][offset_xl="1"]){margin-left:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][offset_right_xl="1"]){margin-right:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host([use_container][size_xl="2"]){width:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][offset_xl="2"]){margin-left:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][offset_right_xl="2"]){margin-right:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host([use_container][size_xl="3"]){width:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][offset_xl="3"]){margin-left:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][offset_right_xl="3"]){margin-right:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host([use_container][size_xl="4"]){width:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][offset_xl="4"]){margin-left:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][offset_right_xl="4"]){margin-right:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host([use_container][size_xl="5"]){width:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][offset_xl="5"]){margin-left:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][offset_right_xl="5"]){margin-right:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host([use_container][size_xl="6"]){width:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][offset_xl="6"]){margin-left:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][offset_right_xl="6"]){margin-right:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host([use_container][size_xl="7"]){width:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][offset_xl="7"]){margin-left:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][offset_right_xl="7"]){margin-right:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host([use_container][size_xl="8"]){width:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][offset_xl="8"]){margin-left:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][offset_right_xl="8"]){margin-right:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host([use_container][size_xl="9"]){width:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][offset_xl="9"]){margin-left:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][offset_right_xl="9"]){margin-right:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host([use_container][size_xl="10"]){width:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][offset_xl="10"]){margin-left:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][offset_right_xl="10"]){margin-right:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host([use_container][size_xl="11"]){width:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][offset_xl="11"]){margin-left:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][offset_right_xl="11"]){margin-right:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host([use_container][size_xl="12"]){width:100%}:host([use_container][offset_xl="12"]){margin-left:100%}:host([use_container][offset_right_xl="12"]){margin-right:100%}}@media screen and (min-width: 1140px){:host(:not([use_container])[size_xl="0"]){width:0}:host(:not([use_container])[offset_xl="0"]){margin-left:0}:host(:not([use_container])[offset_right_xl="0"]){margin-right:0}:host(:not([use_container])[size_xl="0"]){display:none}:host(:not([use_container])[size_xl="1"]){width:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[offset_xl="1"]){margin-left:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[offset_right_xl="1"]){margin-right:calc(8.3333333333% - (var(--_col-gap, 0px) * 11 / 12))}:host(:not([use_container])[size_xl="2"]){width:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[offset_xl="2"]){margin-left:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[offset_right_xl="2"]){margin-right:calc(16.6666666667% - (var(--_col-gap, 0px) * 5 / 6))}:host(:not([use_container])[size_xl="3"]){width:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[offset_xl="3"]){margin-left:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[offset_right_xl="3"]){margin-right:calc(25% - (var(--_col-gap, 0px) * 3 / 4))}:host(:not([use_container])[size_xl="4"]){width:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[offset_xl="4"]){margin-left:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[offset_right_xl="4"]){margin-right:calc(33.3333333333% - (var(--_col-gap, 0px) * 2 / 3))}:host(:not([use_container])[size_xl="5"]){width:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[offset_xl="5"]){margin-left:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[offset_right_xl="5"]){margin-right:calc(41.6666666667% - (var(--_col-gap, 0px) * 1.4 / 2.4))}:host(:not([use_container])[size_xl="6"]){width:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[offset_xl="6"]){margin-left:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[offset_right_xl="6"]){margin-right:calc(50% - (var(--_col-gap, 0px) * 1 / 2))}:host(:not([use_container])[size_xl="7"]){width:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[offset_xl="7"]){margin-left:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[offset_right_xl="7"]){margin-right:calc(58.3333333333% - (var(--_col-gap, 0px) * 0.7142857143 / 1.7142857143))}:host(:not([use_container])[size_xl="8"]){width:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[offset_xl="8"]){margin-left:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[offset_right_xl="8"]){margin-right:calc(66.6666666667% - (var(--_col-gap, 0px) * 0.5 / 1.5))}:host(:not([use_container])[size_xl="9"]){width:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[offset_xl="9"]){margin-left:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[offset_right_xl="9"]){margin-right:calc(75% - (var(--_col-gap, 0px) * 0.3333333333 / 1.3333333333))}:host(:not([use_container])[size_xl="10"]){width:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[offset_xl="10"]){margin-left:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[offset_right_xl="10"]){margin-right:calc(83.3333333333% - (var(--_col-gap, 0px) * 0.2 / 1.2))}:host(:not([use_container])[size_xl="11"]){width:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[offset_xl="11"]){margin-left:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[offset_right_xl="11"]){margin-right:calc(91.6666666667% - (var(--_col-gap, 0px) * 0.0909090909 / 1.0909090909))}:host(:not([use_container])[size_xl="12"]){width:100%}:host(:not([use_container])[offset_xl="12"]){margin-left:100%}:host(:not([use_container])[offset_right_xl="12"]){margin-right:100%}}`;
    __getStatic() {
        return Col;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Col.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<slot></slot>` }
    });
}
    getClassName() {
        return "Col";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('use_container')) {this.setAttribute('use_container' ,'true'); }if(!this.hasAttribute('size')){ this['size'] = undefined; }if(!this.hasAttribute('size_xs')){ this['size_xs'] = undefined; }if(!this.hasAttribute('size_sm')){ this['size_sm'] = undefined; }if(!this.hasAttribute('size_md')){ this['size_md'] = undefined; }if(!this.hasAttribute('size_lg')){ this['size_lg'] = undefined; }if(!this.hasAttribute('size_xl')){ this['size_xl'] = undefined; }if(!this.hasAttribute('offset')){ this['offset'] = undefined; }if(!this.hasAttribute('offset_xs')){ this['offset_xs'] = undefined; }if(!this.hasAttribute('offset_sm')){ this['offset_sm'] = undefined; }if(!this.hasAttribute('offset_md')){ this['offset_md'] = undefined; }if(!this.hasAttribute('offset_lg')){ this['offset_lg'] = undefined; }if(!this.hasAttribute('offset_xl')){ this['offset_xl'] = undefined; }if(!this.hasAttribute('offset_right')){ this['offset_right'] = undefined; }if(!this.hasAttribute('offset_right_xs')){ this['offset_right_xs'] = undefined; }if(!this.hasAttribute('offset_right_sm')){ this['offset_right_sm'] = undefined; }if(!this.hasAttribute('offset_right_md')){ this['offset_right_md'] = undefined; }if(!this.hasAttribute('offset_right_lg')){ this['offset_right_lg'] = undefined; }if(!this.hasAttribute('offset_right_xl')){ this['offset_right_xl'] = undefined; }if(!this.hasAttribute('center')) { this.attributeChangedCallback('center', false, false); } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('use_container');this.__upgradeProperty('size');this.__upgradeProperty('size_xs');this.__upgradeProperty('size_sm');this.__upgradeProperty('size_md');this.__upgradeProperty('size_lg');this.__upgradeProperty('size_xl');this.__upgradeProperty('offset');this.__upgradeProperty('offset_xs');this.__upgradeProperty('offset_sm');this.__upgradeProperty('offset_md');this.__upgradeProperty('offset_lg');this.__upgradeProperty('offset_xl');this.__upgradeProperty('offset_right');this.__upgradeProperty('offset_right_xs');this.__upgradeProperty('offset_right_sm');this.__upgradeProperty('offset_right_md');this.__upgradeProperty('offset_right_lg');this.__upgradeProperty('offset_right_xl');this.__upgradeProperty('center'); }
    __listBoolProps() { return ["use_container","center"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    static configure(options) {
        if (options.use_container !== undefined)
            this.use_container = options.use_container;
    }
}
Layout.Col.Namespace=`Aventus.Layout`;
Layout.Col.Tag=`av-col`;
__as1(_.Layout, 'Col', Layout.Col);
if(!window.customElements.get('av-col')){window.customElements.define('av-col', Layout.Col);Aventus.WebComponentInstance.registerDefinition(Layout.Col);}

Navigation.PageFormRoute = class PageFormRoute extends Navigation.PageForm {
    static __style = ``;
    constructor() {
        super();
        if (this.constructor == PageFormRoute) {
            throw "can't instanciate an abstract class";
        }
    }
    __getStatic() {
        return PageFormRoute;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(PageFormRoute.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<slot></slot>` }
    });
}
    getClassName() {
        return "PageFormRoute";
    }
    async defineSubmit(submit) {
        await this.beforeSubmit();
        const info = this.route();
        let router;
        let key = "";
        if (Array.isArray(info)) {
            router = new info[0];
            key = info[1];
        }
        else {
            router = new info;
            const fcts = Object.getOwnPropertyNames(info.prototype).filter(m => m !== "constructor");
            if (fcts.length == 1) {
                key = fcts[0];
            }
            else {
                const result = new Aventus.VoidWithError();
                result.errors.push(new Aventus.GenericError(500, "More than one fonction is defined"));
                return result;
            }
        }
        const result = await submit(router[key]);
        this.onResult(result);
        return result;
    }
    beforeSubmit() { }
}
Navigation.PageFormRoute.Namespace=`Aventus.Navigation`;
__as1(_.Navigation, 'PageFormRoute', Navigation.PageFormRoute);

Layout.Tabs.TabHeader = class TabHeader extends Aventus.WebComponent {
    get 'active'() { return this.getBoolAttr('active') }
    set 'active'(val) { this.setBoolAttr('active', val) }    _tab;
    get tab() {
        return this._tab;
    }
    tabs;
    static __style = ``;
    constructor() {
        super();
        if (this.constructor == TabHeader) {
            throw "can't instanciate an abstract class";
        }
    }
    __getStatic() {
        return TabHeader;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(TabHeader.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<slot></slot>` }
    });
}
    getClassName() {
        return "TabHeader";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('active')) { this.attributeChangedCallback('active', false, false); } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('tab');this.__upgradeProperty('active'); }
    __listBoolProps() { return ["active"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    async init(tab, tabs) {
        this.tabs = tabs;
        this._tab = tab;
        tab.tabHeader = this;
        await this.render();
    }
    onPress() {
        if (!this.active) {
            this.tabs.setActive(this);
        }
    }
    addPress() {
        new Aventus.PressManager({
            element: this,
            onPress: () => {
                this.onPress();
            }
        });
    }
    postCreation() {
        super.postCreation();
        this.addPress();
    }
}
Layout.Tabs.TabHeader.Namespace=`Aventus.Layout.Tabs`;
__as1(_.Layout.Tabs, 'TabHeader', Layout.Tabs.TabHeader);

Layout.Tabs.Tab = class Tab extends Aventus.WebComponent {
    get 'selected'() { return this.getBoolAttr('selected') }
    set 'selected'(val) { this.setBoolAttr('selected', val) }    tabHeader;
    get headerContent() {
        let elements = this.getElementsInSlot("header");
        return elements;
    }
    static __style = ``;
    constructor() {
        super();
        if (this.constructor == Tab) {
            throw "can't instanciate an abstract class";
        }
    }
    __getStatic() {
        return Tab;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Tab.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>`,'header':`<slot name="header"></slot>` }, 
        blocks: { 'default':`<slot></slot><div class="slot-header">    <slot name="header"></slot></div>` }
    });
}
    getClassName() {
        return "Tab";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('selected')) { this.attributeChangedCallback('selected', false, false); } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('headerContent');this.__upgradeProperty('selected'); }
    __listBoolProps() { return ["selected"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
}
Layout.Tabs.Tab.Namespace=`Aventus.Layout.Tabs`;
__as1(_.Layout.Tabs, 'Tab', Layout.Tabs.Tab);


for(let key in _) { Aventus[key] = _[key] }
})(Aventus);

var AventusStore;
(AventusStore||(AventusStore = {}));
(function (AventusStore) {
const __as1 = (o, k, c) => { if (o[k] !== undefined) for (let w in o[k]) { c[w] = o[k][w] } o[k] = c; }
const moduleName = `AventusStore`;
const _ = {};

let App = {};
_.App = AventusStore.App ?? {};
App.Models = {};
_.App.Models = AventusStore.App?.Models ?? {};
App.Http = {};
_.App.Http = AventusStore.App?.Http ?? {};
App.Http.Controllers = {};
_.App.Http.Controllers = AventusStore.App?.Http?.Controllers ?? {};
App.Http.Controllers.User = {};
_.App.Http.Controllers.User = AventusStore.App?.Http?.Controllers?.User ?? {};
App.Http.Controllers.User.EditPicture = {};
_.App.Http.Controllers.User.EditPicture = AventusStore.App?.Http?.Controllers?.User?.EditPicture ?? {};
App.Http.Controllers.User.EditEmail = {};
_.App.Http.Controllers.User.EditEmail = AventusStore.App?.Http?.Controllers?.User?.EditEmail ?? {};
App.Http.Controllers.User.EditBio = {};
_.App.Http.Controllers.User.EditBio = AventusStore.App?.Http?.Controllers?.User?.EditBio ?? {};
App.Http.Controllers.Template = {};
_.App.Http.Controllers.Template = AventusStore.App?.Http?.Controllers?.Template ?? {};
App.Http.Controllers.Template.Search = {};
_.App.Http.Controllers.Template.Search = AventusStore.App?.Http?.Controllers?.Template?.Search ?? {};
App.Http.Controllers.Template.Random = {};
_.App.Http.Controllers.Template.Random = AventusStore.App?.Http?.Controllers?.Template?.Random ?? {};
App.Http.Controllers.Template.Edit = {};
_.App.Http.Controllers.Template.Edit = AventusStore.App?.Http?.Controllers?.Template?.Edit ?? {};
App.Http.Controllers.Template.Edit.Readme = {};
_.App.Http.Controllers.Template.Edit.Readme = AventusStore.App?.Http?.Controllers?.Template?.Edit?.Readme ?? {};
App.Http.Controllers.Template.Download = {};
_.App.Http.Controllers.Template.Download = AventusStore.App?.Http?.Controllers?.Template?.Download ?? {};
App.Http.Controllers.Template.Details = {};
_.App.Http.Controllers.Template.Details = AventusStore.App?.Http?.Controllers?.Template?.Details ?? {};
App.Http.Controllers.Template.Delete = {};
_.App.Http.Controllers.Template.Delete = AventusStore.App?.Http?.Controllers?.Template?.Delete ?? {};
App.Http.Controllers.Remote = {};
_.App.Http.Controllers.Remote = AventusStore.App?.Http?.Controllers?.Remote ?? {};
App.Http.Controllers.Remote.Template = {};
_.App.Http.Controllers.Remote.Template = AventusStore.App?.Http?.Controllers?.Remote?.Template ?? {};
App.Http.Controllers.Remote.Template.Publish = {};
_.App.Http.Controllers.Remote.Template.Publish = AventusStore.App?.Http?.Controllers?.Remote?.Template?.Publish ?? {};
App.Http.Controllers.Remote.Package = {};
_.App.Http.Controllers.Remote.Package = AventusStore.App?.Http?.Controllers?.Remote?.Package ?? {};
App.Http.Controllers.Remote.Package.Publish = {};
_.App.Http.Controllers.Remote.Package.Publish = AventusStore.App?.Http?.Controllers?.Remote?.Package?.Publish ?? {};
App.Http.Controllers.Remote.Auth = {};
_.App.Http.Controllers.Remote.Auth = AventusStore.App?.Http?.Controllers?.Remote?.Auth ?? {};
App.Http.Controllers.Remote.Auth.Logout = {};
_.App.Http.Controllers.Remote.Auth.Logout = AventusStore.App?.Http?.Controllers?.Remote?.Auth?.Logout ?? {};
App.Http.Controllers.Remote.Auth.Login = {};
_.App.Http.Controllers.Remote.Auth.Login = AventusStore.App?.Http?.Controllers?.Remote?.Auth?.Login ?? {};
App.Http.Controllers.Package = {};
_.App.Http.Controllers.Package = AventusStore.App?.Http?.Controllers?.Package ?? {};
App.Http.Controllers.Package.Search = {};
_.App.Http.Controllers.Package.Search = AventusStore.App?.Http?.Controllers?.Package?.Search ?? {};
App.Http.Controllers.Package.Random = {};
_.App.Http.Controllers.Package.Random = AventusStore.App?.Http?.Controllers?.Package?.Random ?? {};
App.Http.Controllers.Package.Edit = {};
_.App.Http.Controllers.Package.Edit = AventusStore.App?.Http?.Controllers?.Package?.Edit ?? {};
App.Http.Controllers.Package.Edit.Readme = {};
_.App.Http.Controllers.Package.Edit.Readme = AventusStore.App?.Http?.Controllers?.Package?.Edit?.Readme ?? {};
App.Http.Controllers.Package.Download = {};
_.App.Http.Controllers.Package.Download = AventusStore.App?.Http?.Controllers?.Package?.Download ?? {};
App.Http.Controllers.Package.Details = {};
_.App.Http.Controllers.Package.Details = AventusStore.App?.Http?.Controllers?.Package?.Details ?? {};
App.Http.Controllers.Package.Delete = {};
_.App.Http.Controllers.Package.Delete = AventusStore.App?.Http?.Controllers?.Package?.Delete ?? {};
App.Http.Controllers.Org = {};
_.App.Http.Controllers.Org = AventusStore.App?.Http?.Controllers?.Org ?? {};
App.Http.Controllers.Org.EditPicture = {};
_.App.Http.Controllers.Org.EditPicture = AventusStore.App?.Http?.Controllers?.Org?.EditPicture ?? {};
App.Http.Controllers.Org.EditBio = {};
_.App.Http.Controllers.Org.EditBio = AventusStore.App?.Http?.Controllers?.Org?.EditBio ?? {};
App.Http.Controllers.Org.Create = {};
_.App.Http.Controllers.Org.Create = AventusStore.App?.Http?.Controllers?.Org?.Create ?? {};
App.Http.Controllers.User.Details = {};
_.App.Http.Controllers.User.Details = AventusStore.App?.Http?.Controllers?.User?.Details ?? {};
App.Http.Controllers.Auth = {};
_.App.Http.Controllers.Auth = AventusStore.App?.Http?.Controllers?.Auth ?? {};
App.Http.Controllers.Auth.Signup = {};
_.App.Http.Controllers.Auth.Signup = AventusStore.App?.Http?.Controllers?.Auth?.Signup ?? {};
App.Http.Controllers.Auth.Logout = {};
_.App.Http.Controllers.Auth.Logout = AventusStore.App?.Http?.Controllers?.Auth?.Logout ?? {};
App.Http.Controllers.Auth.Login = {};
_.App.Http.Controllers.Auth.Login = AventusStore.App?.Http?.Controllers?.Auth?.Login ?? {};
App.Enums = {};
_.App.Enums = AventusStore.App?.Enums ?? {};
App.Http.Controllers.Org.Role = {};
_.App.Http.Controllers.Org.Role = AventusStore.App?.Http?.Controllers?.Org?.Role ?? {};
App.Http.Controllers.Org.Details = {};
_.App.Http.Controllers.Org.Details = AventusStore.App?.Http?.Controllers?.Org?.Details ?? {};
App.Http.Controllers.User.Current = {};
_.App.Http.Controllers.User.Current = AventusStore.App?.Http?.Controllers?.User?.Current ?? {};
App.Http.Resources = {};
_.App.Http.Resources = AventusStore.App?.Http?.Resources ?? {};
App.Http.Resources.Web = {};
_.App.Http.Resources.Web = AventusStore.App?.Http?.Resources?.Web ?? {};
let _n;
const Footer = class Footer extends Aventus.WebComponent {
    static __style = `:host{background-color:var(--footer-bg);border-top:1px solid var(--footer-color-border)}:host .footer-container{margin:0 auto;max-width:1280px;padding:2rem 2rem}:host .footer-content{align-items:center;display:flex;flex-direction:column;gap:.25rem;justify-content:space-between}:host .footer-brand{align-items:center;display:flex;gap:.5rem}:host .footer-icon{align-items:center;color:var(--color-accent);display:flex;font-size:1.75rem;height:1.75rem;justify-content:center;width:1.75rem}:host .footer-title{color:var(--footer-text);font-size:1.125rem;font-weight:bold}:host .footer-copy{color:var(--text-muted);font-size:.875rem;margin:0;text-align:center}:host .footer-social{display:flex;gap:1rem}@media(min-width: 768px){:host .footer-content{flex-direction:row;gap:1rem}:host .footer-copy{text-align:right}}`;
    __getStatic() {
        return Footer;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Footer.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="footer-container">
    <div class="footer-content">
        <div class="footer-brand">
            <mi-icon icon="code" class="footer-icon"></mi-icon>
            <span class="footer-title">AventusJs</span>
        </div>
        <p class="footer-copy" _id="footer_0"></p>
        <div class="footer-social">
        </div>
    </div>
</div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "footer_0°@HTML": {
      "fct": (c) => `\n            &copy; ${c.print(c.comp.__6445892e3b1981dca4f1cae255c1f123method0())} AventusJs. All Rights Reserved.\n        `,
      "once": true
    }
  }
}); }
    getClassName() {
        return "Footer";
    }
    __6445892e3b1981dca4f1cae255c1f123method0() {
        return new Date().getFullYear();
    }
}
Footer.Namespace=`AventusStore`;
Footer.Tag=`as-footer`;
__as1(_, 'Footer', Footer);
if(!window.customElements.get('as-footer')){window.customElements.define('as-footer', Footer);Aventus.WebComponentInstance.registerDefinition(Footer);}

const Button = class Button extends Aventus.Form.ButtonElement {
    get 'variant'() { return this.getStringAttr('variant') }
    set 'variant'(val) { this.setStringAttr('variant', val) }get 'loading'() { return this.getBoolAttr('loading') }
    set 'loading'(val) { this.setBoolAttr('loading', val) }    static __style = `:host{--_button-bg-color: var(--button-bg-color, var(--color-accent));--_button-hover-bg-color: var(--button-hover-bg-color, var(--hover-accent));--_button-text-color: var(--text-white)}:host{align-items:center;background-color:var(--_button-bg-color);border:none;border-radius:.375rem;color:var(--_button-text-color);cursor:pointer;display:inline-flex;font-size:.875rem;font-weight:600;height:100%;justify-content:center;outline:none;padding:.5rem 1rem;position:relative;transition:background-color .2s ease}:host .loader-mask{align-items:center;align-items:stretch;display:none;inset:.5rem 1rem;justify-content:center;position:absolute}:host .loader-mask .loader{animation:rotation 1s linear infinite;aspect-ratio:1;border:2px solid #fff;border-bottom-color:rgba(0,0,0,0);border-radius:50000px;display:block;max-height:100%;max-width:100%}:host(:focus){box-shadow:0 0 0 2px #94a3b8,0 0 0 4px #0f172a}:host(:hover){background-color:var(--_button-hover-bg-color)}:host(:disabled){opacity:.5;pointer-events:none}:host([variant=secondary]){--_button-bg-color: var(--button-bg-color, var(--color-secondary));--_button-hover-bg-color: var(--button-hover-bg-color, var(--hover-secondary));--_button-text-color: var(--text-white)}:host([variant=ghost]){--_button-bg-color: var(--button-bg-color, transparent);--_button-hover-bg-color: var(--button-hover-bg-color, var(--bg-hover));--_button-text-color: var(--text-white)}:host([loading]) slot{opacity:0;visibility:hidden}:host([loading]) .loader-mask{display:flex}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}`;
    __getStatic() {
        return Button;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Button.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<slot></slot><div class="loader-mask">
    <div class="loader"></div>
</div>` }
    });
}
    getClassName() {
        return "Button";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('variant')){ this['variant'] = undefined; }if(!this.hasAttribute('loading')) { this.attributeChangedCallback('loading', false, false); } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('variant');this.__upgradeProperty('loading'); }
    __listBoolProps() { return ["loading"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
}
Button.Namespace=`AventusStore`;
Button.Tag=`as-button`;
__as1(_, 'Button', Button);
if(!window.customElements.get('as-button')){window.customElements.define('as-button', Button);Aventus.WebComponentInstance.registerDefinition(Button);}

const UserImg = class UserImg extends Aventus.WebComponent {
    get 'user'() {
						return this.__signals["user"].value;
					}
					set 'user'(val) {
						this.__signals["user"].value = val;
					}    __registerSignalsActions() { this.__signals["user"] = null; super.__registerSignalsActions(); this.__addSignalActions("user", ((target) => {
    target.init();
})); }
    static __style = `:host{align-items:center;color:var(--bg-surface);background-position:center;background-size:cover;display:flex;height:100%;justify-content:center;letter-spacing:2px;width:100%;background-color:var(--color-accent);text-transform:uppercase}`;
    __getStatic() {
        return UserImg;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(UserImg.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div _id="userimg_0"></div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "elements": [
    {
      "name": "lettersEl",
      "ids": [
        "userimg_0"
      ]
    }
  ]
}); }
    getClassName() {
        return "UserImg";
    }
    __defaultValuesSignal(s) { super.__defaultValuesSignal(s); s["user"] = undefined; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('user'); }
    init() {
        if (this.user?.picture?.uri) {
            this.style.backgroundImage = "url('" + this.user?.picture?.uri + "')";
            this.lettersEl.innerHTML = "";
        }
        else {
            this.style.backgroundImage = "";
            const name = this.user.username ?? this.user.name ?? '';
            this.lettersEl.innerHTML = name.slice(0, 2);
        }
    }
}
UserImg.Namespace=`AventusStore`;
UserImg.Tag=`as-user-img`;
__as1(_, 'UserImg', UserImg);
if(!window.customElements.get('as-user-img')){window.customElements.define('as-user-img', UserImg);Aventus.WebComponentInstance.registerDefinition(UserImg);}

const Tab = class Tab extends Aventus.Layout.Tabs.Tab {
    static get observedAttributes() {return ["label", "count", "icon"].concat(super.observedAttributes).filter((v, i, a) => a.indexOf(v) === i);}
    get 'label'() { return this.getStringProp('label') }
    set 'label'(val) { this.setStringAttr('label', val) }get 'count'() { return this.getNumberProp('count') }
    set 'count'(val) { this.setNumberAttr('count', val) }get 'icon'() { return this.getStringProp('icon') }
    set 'icon'(val) { this.setStringAttr('icon', val) }    static __style = `:host{width:100%}`;
    __getStatic() {
        return Tab;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Tab.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<slot></slot>` }
    });
}
    getClassName() {
        return "Tab";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('label')){ this['label'] = ""; }if(!this.hasAttribute('count')){ this['count'] = undefined; }if(!this.hasAttribute('icon')){ this['icon'] = undefined; } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('label');this.__upgradeProperty('count');this.__upgradeProperty('icon'); }
    identifier() {
        return this.label;
    }
}
Tab.Namespace=`AventusStore`;
Tab.Tag=`as-tab`;
__as1(_, 'Tab', Tab);
if(!window.customElements.get('as-tab')){window.customElements.define('as-tab', Tab);Aventus.WebComponentInstance.registerDefinition(Tab);}

const TabHeader = class TabHeader extends Aventus.Layout.Tabs.TabHeader {
    static __style = `:host{align-items:center;background:none;border:none;border-bottom:2px solid rgba(0,0,0,0);color:var(--text-muted);cursor:pointer;display:flex;font-size:.875rem;font-weight:500;padding:1rem .5rem}:host mi-icon{font-size:1rem;margin-right:.5rem}:host mi-icon[icon=""]{display:none}:host .count{background-color:#334155;border-radius:9999px;color:var(--text-color);font-size:.75rem;margin-left:.5rem;padding:.125rem .5rem}:host .count:empty{display:none}:host(:hover){border-color:#334155;color:var(--text-color)}:host([active]){border-color:var(--border-hover);color:var(--border-hover)}`;
    __getStatic() {
        return TabHeader;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(TabHeader.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<mi-icon icon="" _id="tabheader1_0"></mi-icon><span><slot></slot></span><span class="count" _id="tabheader1_1"></span>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "elements": [
    {
      "name": "iconEl",
      "ids": [
        "tabheader1_0"
      ]
    },
    {
      "name": "countEl",
      "ids": [
        "tabheader1_1"
      ]
    }
  ]
}); }
    getClassName() {
        return "TabHeader";
    }
    render() {
        this.innerHTML = this.tab.label;
        if (this.tab.count) {
            this.countEl.innerHTML = this.tab.count + '';
        }
        if (this.tab.icon) {
            this.iconEl.icon = this.tab.icon;
        }
    }
}
TabHeader.Namespace=`AventusStore`;
TabHeader.Tag=`as-tab-header`;
__as1(_, 'TabHeader', TabHeader);
if(!window.customElements.get('as-tab-header')){window.customElements.define('as-tab-header', TabHeader);Aventus.WebComponentInstance.registerDefinition(TabHeader);}

const Tabs = class Tabs extends Aventus.Layout.Tabs.Tabs {
    static __style = `:host{width:100%}:host .header{border-bottom:1px solid var(--border);display:flex;gap:2rem;margin-top:2rem}:host .body{width:100%}`;
    __getStatic() {
        return Tabs;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Tabs.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<slot></slot>` }
    });
}
    getClassName() {
        return "Tabs";
    }
    defineTabHeader() {
        return TabHeader;
    }
}
Tabs.Namespace=`AventusStore`;
Tabs.Tag=`as-tabs`;
__as1(_, 'Tabs', Tabs);
if(!window.customElements.get('as-tabs')){window.customElements.define('as-tabs', Tabs);Aventus.WebComponentInstance.registerDefinition(Tabs);}

const ValidationResultPage = class ValidationResultPage extends Aventus.Navigation.Page {
    get 'is_success'() { return this.getBoolAttr('is_success') }
    set 'is_success'(val) { this.setBoolAttr('is_success', val) }    static __style = `:host{display:flex;flex-direction:column;justify-content:center;padding:3rem 1rem}:host .header{margin:0 auto;max-width:28rem;text-align:center;width:100%}:host .header .title{color:var(--text-color);font-size:1.875rem;font-weight:700;margin-top:1.5rem}:host .success-animation{align-items:center;display:flex;justify-content:center}:host .success-animation .checkmark{max-width:100%;stroke:var(--color-success);stroke-width:2;width:16rem}:host .success-animation .checkmark .checkmark__circle{animation:stroke .6s cubic-bezier(0.65, 0, 0.45, 1) forwards;stroke-dasharray:166;stroke-dashoffset:166;stroke-miterlimit:10}:host .success-animation .checkmark .checkmark__check{animation:stroke .3s cubic-bezier(0.65, 0, 0.45, 1) .8s forwards;stroke-dasharray:48;stroke-dashoffset:48;transform-origin:50% 50%}:host .error-animation{align-items:center;display:flex;justify-content:center}:host .error-animation .cross{max-width:100%;stroke:var(--color-danger);stroke-width:2;width:16rem}:host .error-animation .cross .cross__circle{animation:stroke .6s cubic-bezier(0.65, 0, 0.45, 1) forwards;stroke-dasharray:166;stroke-dashoffset:166;stroke-miterlimit:10}:host .error-animation .cross .cross__bar1{animation:stroke .3s cubic-bezier(0.65, 0, 0.45, 1) 1s forwards;stroke-dasharray:48;stroke-dashoffset:48;transform-origin:50% 50%}:host .error-animation .cross .cross__bar2{animation:stroke .3s cubic-bezier(0.65, 0, 0.45, 1) .8s forwards;stroke-dasharray:48;stroke-dashoffset:48;transform-origin:50% 50%}@keyframes stroke{100%{stroke-dashoffset:0}}@keyframes scale{0%,100%{transform:none}50%{transform:scale3d(1.1, 1.1, 1)}}`;
    constructor() {
        super();
        this.is_success = location.href.endsWith("success");
    }
    __getStatic() {
        return ValidationResultPage;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(ValidationResultPage.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="header">
    <h2 class="title" _id="validationresultpage_0"></h2>
</div><template _id="validationresultpage_1"></template>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "validationresultpage_0°@HTML": {
      "fct": (c) => `Validation ${c.print(c.comp.__2e3d027074dee4b27b5c8cf8926eb06fmethod1())}`
    }
  }
});const templ0 = new Aventus.Template(this);templ0.setTemplate(`
    <div class="success-animation">
        <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
            <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"></circle>
            <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"></path>
        </svg>
    </div>
`);const templ1 = new Aventus.Template(this);templ1.setTemplate(`
    <div class="error-animation">
        <svg class="cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52" xmlns:bx="https://boxy-svg.com">
            <circle class="cross__circle" cx="26" cy="26" r="25" fill="none"></circle>
            <path class="cross__bar1" fill="none" d="M 17.571 34.578 L 34.271 17.778"></path>
            <path class="cross__bar2" fill="none" d="M 17.615 34.622 L 34.315 17.822" style="transform-origin: 50% 50%;" transform="matrix(0, 1, -1, 0, 0.000001, 0.000001)"></path>
        </svg>
    </div>
`);this.__getStatic().__template.addIf({
                    anchorId: 'validationresultpage_1',
                    parts: [{once: true,
                    condition: (c) => c.comp.__2e3d027074dee4b27b5c8cf8926eb06fmethod0(),
                    template: templ0
                },{once: true,
                    condition: (c) => true,
                    template: templ1
                }]
            }); }
    getClassName() {
        return "ValidationResultPage";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('is_success')) { this.attributeChangedCallback('is_success', false, false); } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('is_success'); }
    __listBoolProps() { return ["is_success"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    isAllowed(state) {
        if (Main.user) {
            return "/";
        }
        return true;
    }
    configure() {
        return {
            title: this.is_success ? "Validation success | Aventus Store" : "Validation error | Aventus Store"
        };
    }
    __2e3d027074dee4b27b5c8cf8926eb06fmethod1() {
        return this.is_success ? "successful" : "failed";
    }
    __2e3d027074dee4b27b5c8cf8926eb06fmethod0() {
        return this.is_success;
    }
}
ValidationResultPage.Namespace=`AventusStore`;
ValidationResultPage.Tag=`as-validation-result-page`;
__as1(_, 'ValidationResultPage', ValidationResultPage);
if(!window.customElements.get('as-validation-result-page')){window.customElements.define('as-validation-result-page', ValidationResultPage);Aventus.WebComponentInstance.registerDefinition(ValidationResultPage);}

const ForgotPasswordPage = class ForgotPasswordPage extends Aventus.Navigation.Page {
    get 'submitted'() { return this.getBoolAttr('submitted') }
    set 'submitted'(val) { this.setBoolAttr('submitted', val) }    static __style = `:host{flex-direction:column;justify-content:center;padding:3rem 1rem}:host .forgot-header{margin:0 auto;max-width:28rem;text-align:center;width:100%}:host .forgot-title{color:var(--text-color);font-size:1.875rem;font-weight:700;margin-top:1.5rem}:host .forgot-subtext{color:var(--text-muted);font-size:.875rem;margin-top:.5rem}:host .forgot-form-wrapper{margin-left:auto;margin-right:auto;margin-top:2rem;max-width:28rem;width:100%}:host .forgot-form-card{background-color:var(--card-bg);border:1px solid var(--card-border);border-radius:.5rem;box-shadow:0 4px 12px rgba(0,0,0,.25);padding:2rem 1rem}:host .forgot-form{display:flex;flex-direction:column;gap:1.5rem}:host .form-group{display:flex;flex-direction:column}:host .form-label{color:var(--text-muted);font-size:.875rem;font-weight:500;margin-bottom:.25rem}:host .form-field{margin-top:.25rem}:host .btn-full{width:100%}:host .forgot-confirmation{text-align:center}:host .confirmation-title{color:var(--text-color);font-size:1.125rem;font-weight:600}:host .confirmation-text{color:var(--text-muted);font-size:.875rem;margin-top:.5rem}:host .back-link{display:inline-block;margin-top:1.5rem}:host([visible]){display:flex}@media(min-width: 640px){:host .forgot-form-card{padding:2rem 2.5rem}}`;
    __getStatic() {
        return ForgotPasswordPage;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(ForgotPasswordPage.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="forgot-header">
    <h2 class="forgot-title">Forgot your password?</h2>
    <p class="forgot-subtext">
        Enter your email and we'll send you a reset link.
    </p>
</div><div class="forgot-form-wrapper">
    <div class="forgot-form-card">
        <template _id="forgotpasswordpage_0"></template>
    </div>
</div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();const templ0 = new Aventus.Template(this);templ0.setTemplate(`
            <div class="forgot-confirmation">
                <h3 class="confirmation-title">Check your email</h3>
                <p class="confirmation-text">
                    If an account exists for <strong>{email}</strong>, you will receive an email with instructions on
                    how to reset your password.
                </p>
                <av-router-link to="/login" class="back-link">
                    <as-button>Back to Login</as-button>
                </av-router-link>
            </div>
        `);const templ1 = new Aventus.Template(this);templ1.setTemplate(`
            <form class="forgot-form">
                <div class="form-group">
                    <label htmlFor="email" class="form-label">
                        Email address
                    </label>
                    <div class="form-field">
                        <as-input id="email" name="email" type="email" autoComplete="email" required></as-input>
                    </div>
                </div>
                <div>
                    <as-button type="submit" class="btn-full">
                        Send reset link
                    </as-button>
                </div>
            </form>
        `);this.__getStatic().__template.addIf({
                    anchorId: 'forgotpasswordpage_0',
                    parts: [{once: true,
                    condition: (c) => c.comp.__a9eaad3d630e71dc6baeabc0c2c586e5method0(),
                    template: templ0
                },{once: true,
                    condition: (c) => true,
                    template: templ1
                }]
            }); }
    getClassName() {
        return "ForgotPasswordPage";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('submitted')) { this.attributeChangedCallback('submitted', false, false); } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('submitted'); }
    __listBoolProps() { return ["submitted"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    configure() {
        return {};
    }
    __a9eaad3d630e71dc6baeabc0c2c586e5method0() {
        return this.submitted;
    }
}
ForgotPasswordPage.Namespace=`AventusStore`;
ForgotPasswordPage.Tag=`as-forgot-password-page`;
__as1(_, 'ForgotPasswordPage', ForgotPasswordPage);
if(!window.customElements.get('as-forgot-password-page')){window.customElements.define('as-forgot-password-page', ForgotPasswordPage);Aventus.WebComponentInstance.registerDefinition(ForgotPasswordPage);}

const Input = class Input extends Aventus.Form.FormElement {
    static get observedAttributes() {return ["label", "placeholder", "type"].concat(super.observedAttributes).filter((v, i, a) => a.indexOf(v) === i);}
    get 'label'() { return this.getStringProp('label') }
    set 'label'(val) { this.setStringAttr('label', val) }get 'placeholder'() { return this.getStringProp('placeholder') }
    set 'placeholder'(val) { this.setStringAttr('placeholder', val) }get 'type'() { return this.getStringProp('type') }
    set 'type'(val) { this.setStringAttr('type', val) }    static __style = `:host{display:flex;flex-direction:column;outline:none}:host .form-label{color:var(--text-muted);display:none;font-size:.875rem;font-weight:500;margin-bottom:.25rem}:host .form-field{background-color:var(--input-bg);border:1px solid var(--input-border);border-radius:.375rem;color:var(--input-text);display:flex;font-size:.875rem;height:2.5rem;padding:.5rem .75rem;width:100%}:host .form-field input{background-color:rgba(0,0,0,0);border:none;box-shadow:none;color:inherit;height:100%;outline:none;width:100%}:host .form-field input::placeholder{color:var(--input-placeholder)}:host .form-field input:-webkit-autofill,:host .form-field input:-webkit-autofill:hover,:host .form-field input:-webkit-autofill:focus,:host .form-field input:-webkit-autofill:active,:host .form-field input:-internal-autofill-selected,:host .form-field input:-internal-autofill-previewed{-webkit-box-shadow:0 0 0 30px var(--input-bg) inset !important;-webkit-text-fill-color:var(--input-text)}:host .errors{color:red;display:none;flex-direction:column;font-size:.75rem;gap:2px;margin-top:.25rem}:host([label]:not([label=""])) .form-label{display:block}:host([label]:not([label=""])) .form-field{margin-top:.25rem}:host(:focus) .form-field{box-shadow:0 0 0 2px var(--input-focus-ring);outline:none}:host([has_errors]) .errors{display:flex}`;
    __getStatic() {
        return Input;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Input.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<label class="form-label" _id="input_0"></label><div class="form-field">
    <input _id="input_1" />
</div><div class="errors">
    <template _id="input_2"></template>
</div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "elements": [
    {
      "name": "inputEl",
      "ids": [
        "input_1"
      ]
    }
  ],
  "content": {
    "input_0°for": {
      "fct": (c) => `${c.print(c.comp.__96ce632e3ba94f9f85f87c653f59bea7method1())}`,
      "once": true
    },
    "input_0°@HTML": {
      "fct": (c) => `${c.print(c.comp.__96ce632e3ba94f9f85f87c653f59bea7method2())}`,
      "once": true
    },
    "input_1°id": {
      "fct": (c) => `${c.print(c.comp.__96ce632e3ba94f9f85f87c653f59bea7method1())}`,
      "once": true
    },
    "input_1°name": {
      "fct": (c) => `${c.print(c.comp.__96ce632e3ba94f9f85f87c653f59bea7method1())}`,
      "once": true
    },
    "input_1°type": {
      "fct": (c) => `${c.print(c.comp.__96ce632e3ba94f9f85f87c653f59bea7method3())}`,
      "once": true
    },
    "input_1°placeholder": {
      "fct": (c) => `${c.print(c.comp.__96ce632e3ba94f9f85f87c653f59bea7method4())}`,
      "once": true
    }
  },
  "events": [
    {
      "eventName": "input",
      "id": "input_1",
      "fct": (e, c) => c.comp.changeValue(e)
    }
  ]
});const templ0 = new Aventus.Template(this);templ0.setTemplate(`
        <div class="error" _id="input_3"></div>
    `);templ0.setActions({
  "content": {
    "input_3°@HTML": {
      "fct": (c) => `${c.print(c.comp.__96ce632e3ba94f9f85f87c653f59bea7method5(c.data.error))}`,
      "once": true
    }
  }
});this.__getStatic().__template.addLoop({
                    anchorId: 'input_2',
                    template: templ0,
                simple:{data: "this.errors",item:"error"}}); }
    getClassName() {
        return "Input";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('label')){ this['label'] = undefined; }if(!this.hasAttribute('placeholder')){ this['placeholder'] = undefined; }if(!this.hasAttribute('type')){ this['type'] = "text"; } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('label');this.__upgradeProperty('placeholder');this.__upgradeProperty('type'); }
    async validation() {
        return [];
    }
    formAssociatedCallback(form) {
        super.formAssociatedCallback(form);
    }
    onValueChange(value) {
        super.onValueChange(value);
        this.inputEl.value = value ?? '';
    }
    changeValue() {
        this.triggerChange(this.inputEl.value);
    }
    postCreation() {
        super.postCreation();
        this.addEventListener("focus", () => {
            this.clearErrors();
            this.inputEl.focus();
        });
    }
    __96ce632e3ba94f9f85f87c653f59bea7method1() {
        return this.id;
    }
    __96ce632e3ba94f9f85f87c653f59bea7method2() {
        return this.label;
    }
    __96ce632e3ba94f9f85f87c653f59bea7method3() {
        return this.type;
    }
    __96ce632e3ba94f9f85f87c653f59bea7method4() {
        return this.placeholder;
    }
    __96ce632e3ba94f9f85f87c653f59bea7method5(error) {
        return error;
    }
}
Input.Namespace=`AventusStore`;
Input.Tag=`as-input`;
__as1(_, 'Input', Input);
if(!window.customElements.get('as-input')){window.customElements.define('as-input', Input);Aventus.WebComponentInstance.registerDefinition(Input);}

let DateTools=class DateTools {
    static isSameDate(date1, date2) {
        if (date1 == null && date2 == null)
            return true;
        if (date1 == null || date2 == null)
            return false;
        return date1.getDate() == date2.getDate() && date1.getMonth() == date2.getMonth() && date1.getFullYear() == date2.getFullYear();
    }
    static isSameDateTime(date1, date2) {
        if (date1 == null && date2 == null)
            return true;
        if (date1 == null || date2 == null)
            return false;
        return date1.getDate() == date2.getDate() && date1.getMonth() == date2.getMonth() && date1.getFullYear() == date2.getFullYear() && date1.getHours() == date2.getHours() && date1.getMinutes() == date2.getMinutes();
    }
    static printDate(date, options, locale) {
        if (!options) {
            options = {
                year: "numeric",
                month: "long",
                day: "2-digit"
            };
        }
        return date.toLocaleDateString(locale, options);
    }
    static printDateTime(date, options, locale) {
        if (!options) {
            options = {
                year: "numeric",
                month: "long",
                day: "2-digit",
                hour: "2-digit",
                minute: "2-digit"
            };
        }
        return date.toLocaleDateString(locale, options);
    }
    static _localMonths = [];
    static getMonthsName(format = "long") {
        if (this._localMonths.length == 0) {
            for (let i = 0; i < 12; i++) {
                this._localMonths.push(this.printDate(new Date(2024, i, 15), { month: format }));
            }
        }
        return this._localMonths;
    }
    static getStartMonth(date) {
        const start = new Date();
        start.setTime(date.getTime());
        start.setDate(1);
        start.setHours(0);
        start.setMinutes(0);
        start.setSeconds(0);
        start.setMilliseconds(0);
        return start;
    }
    static getEndMonth(date) {
        const end = this.getStartMonth(date);
        end.setMonth(end.getMonth() + 1);
        end.setDate(0);
        end.setHours(23);
        end.setMinutes(59);
        end.setSeconds(59);
        end.setMilliseconds(999);
        return end;
    }
    static getStartWeek(date) {
        const start = new Date();
        start.setTime(date.getTime());
        const day = start.getDay();
        const diff = (day === 0) ? -6 : 1 - day;
        const monday = start.getDate() + diff;
        start.setDate(monday);
        start.setHours(0);
        start.setMinutes(0);
        start.setSeconds(0);
        start.setMilliseconds(0);
        return start;
    }
    static getEndWeek(date) {
        const end = this.getStartWeek(date);
        end.setDate(end.getDate() + 7);
        end.setHours(23);
        end.setMinutes(59);
        end.setSeconds(59);
        end.setMilliseconds(999);
        return end;
    }
    static getStartDay(date) {
        const start = new Date();
        start.setTime(date.getTime());
        start.setHours(0);
        start.setMinutes(0);
        start.setSeconds(0);
        start.setMilliseconds(0);
        return start;
    }
    static getEndDay(date) {
        const end = this.getStartDay(date);
        end.setHours(23);
        end.setMinutes(59);
        end.setSeconds(59);
        end.setMilliseconds(999);
        return end;
    }
    static diffMinutes(d1, d2) {
        const diffMs = Math.abs(d1.getTime() - d2.getTime());
        return Math.floor(diffMs / (1000 * 60));
    }
    static diffHours(d1, d2) {
        const diffMs = Math.abs(d1.getTime() - d2.getTime());
        return Math.floor(diffMs / (1000 * 60 * 60));
    }
    static diffDays(d1, d2) {
        const diffMs = Math.abs(d1.getTime() - d2.getTime());
        return Math.floor(diffMs / (1000 * 60 * 60 * 24));
    }
}
DateTools.Namespace=`AventusStore`;
__as1(_, 'DateTools', DateTools);

let TemplatesPageState=class TemplatesPageState extends Aventus.State {
    static get state() { return "/templates"; }
    /**
     * @inheritdoc
     */
    get name() {
        return TemplatesPageState.state;
    }
    search = "";
}
TemplatesPageState.Namespace=`AventusStore`;
__as1(_, 'TemplatesPageState', TemplatesPageState);

let PackagesPageState=class PackagesPageState extends Aventus.State {
    static get state() { return "/packages"; }
    /**
     * @inheritdoc
     */
    get name() {
        return PackagesPageState.state;
    }
    search = "";
}
PackagesPageState.Namespace=`AventusStore`;
__as1(_, 'PackagesPageState', PackagesPageState);

const Loading = class Loading extends Aventus.WebComponent {
    static __style = `:host{align-items:center;display:flex;height:32px;inset:.5rem 1rem;justify-content:center;width:100%}:host .loader{animation:rotation 1s linear infinite;aspect-ratio:1;border:2px solid #fff;border-bottom-color:rgba(0,0,0,0);border-radius:50000px;display:block;height:100%;max-height:100%;max-width:100%}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}`;
    __getStatic() {
        return Loading;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Loading.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="loader"></div>` }
    });
}
    getClassName() {
        return "Loading";
    }
}
Loading.Namespace=`AventusStore`;
Loading.Tag=`as-loading`;
__as1(_, 'Loading', Loading);
if(!window.customElements.get('as-loading')){window.customElements.define('as-loading', Loading);Aventus.WebComponentInstance.registerDefinition(Loading);}

const Card = class Card extends Aventus.WebComponent {
    static __style = `:host{margin-left:auto;margin-right:auto;margin-top:2rem;max-width:28rem;width:100%}:host .card{background-color:var(--card-bg);border:1px solid var(--card-border);border-radius:.5rem;box-shadow:0 4px 12px rgba(0,0,0,.25);padding:2rem 1rem}@media(min-width: 640px){:host .card{padding:2rem 2.5rem}}`;
    __getStatic() {
        return Card;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Card.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot></slot>` }, 
        blocks: { 'default':`<div class="card">
    <slot></slot>
</div>` }
    });
}
    getClassName() {
        return "Card";
    }
}
Card.Namespace=`AventusStore`;
Card.Tag=`as-card`;
__as1(_, 'Card', Card);
if(!window.customElements.get('as-card')){window.customElements.define('as-card', Card);Aventus.WebComponentInstance.registerDefinition(Card);}

App.Models.TemplateVersion=class TemplateVersion extends Aventus.Data {
    static get Fullname() { return "App.Models.TemplateVersion"; }
    id;
    template_id;
    version;
    date;
}
App.Models.TemplateVersion.Namespace=`AventusStore.App.Models`;
App.Models.TemplateVersion.$schema={...(Aventus.Data?.$schema ?? {}), "id":"number","template_id":"number","version":"string","date":"Date"};
Aventus.Converter.register(App.Models.TemplateVersion.Fullname, App.Models.TemplateVersion);
__as1(_.App.Models, 'TemplateVersion', App.Models.TemplateVersion);

App.Models.Tags=class Tags extends Aventus.Data {
    static get Fullname() { return "App.Models.Tags"; }
    name;
}
App.Models.Tags.Namespace=`AventusStore.App.Models`;
App.Models.Tags.$schema={...(Aventus.Data?.$schema ?? {}), "name":"string"};
Aventus.Converter.register(App.Models.Tags.Fullname, App.Models.Tags);
__as1(_.App.Models, 'Tags', App.Models.Tags);

App.Models.RemoteAccess=class RemoteAccess extends Aventus.Data {
    static get Fullname() { return "App.Models.RemoteAccess"; }
    user_id;
    token;
    machine_id;
    machine_name;
}
App.Models.RemoteAccess.Namespace=`AventusStore.App.Models`;
App.Models.RemoteAccess.$schema={...(Aventus.Data?.$schema ?? {}), "user_id":"number","token":"string","machine_id":"string","machine_name":"string"};
Aventus.Converter.register(App.Models.RemoteAccess.Fullname, App.Models.RemoteAccess);
__as1(_.App.Models, 'RemoteAccess', App.Models.RemoteAccess);

App.Models.PackageVersion=class PackageVersion extends Aventus.Data {
    static get Fullname() { return "App.Models.PackageVersion"; }
    id;
    package_id;
    version;
    date;
}
App.Models.PackageVersion.Namespace=`AventusStore.App.Models`;
App.Models.PackageVersion.$schema={...(Aventus.Data?.$schema ?? {}), "id":"number","package_id":"number","version":"string","date":"Date"};
Aventus.Converter.register(App.Models.PackageVersion.Fullname, App.Models.PackageVersion);
__as1(_.App.Models, 'PackageVersion', App.Models.PackageVersion);

App.Models.Tag=class Tag extends Aventus.Data {
    static get Fullname() { return "App.Models.Tag"; }
    name;
}
App.Models.Tag.Namespace=`AventusStore.App.Models`;
App.Models.Tag.$schema={...(Aventus.Data?.$schema ?? {}), "name":"string"};
Aventus.Converter.register(App.Models.Tag.Fullname, App.Models.Tag);
__as1(_.App.Models, 'Tag', App.Models.Tag);

App.Models.PackageTag=class PackageTag extends Aventus.Data {
    static get Fullname() { return "App.Models.PackageTag"; }
    package_id;
    tag_id;
    tag;
    package;
}
App.Models.PackageTag.Namespace=`AventusStore.App.Models`;
App.Models.PackageTag.$schema={...(Aventus.Data?.$schema ?? {}), "package_id":"number","tag_id":"number","tag":"AventusStore.App.Models.Tag","package":"AventusStore.App.Models.Package"};
Aventus.Converter.register(App.Models.PackageTag.Fullname, App.Models.PackageTag);
__as1(_.App.Models, 'PackageTag', App.Models.PackageTag);

App.Models.Role=class Role extends Aventus.Data {
    static get Fullname() { return "App.Models.Role"; }
    id;
    name;
}
App.Models.Role.Namespace=`AventusStore.App.Models`;
App.Models.Role.$schema={...(Aventus.Data?.$schema ?? {}), "id":"number","name":"string"};
Aventus.Converter.register(App.Models.Role.Fullname, App.Models.Role);
__as1(_.App.Models, 'Role', App.Models.Role);

App.Http.Controllers.User.EditPicture.Request=class Request {
    file;
}
App.Http.Controllers.User.EditPicture.Request.Namespace=`AventusStore.App.Http.Controllers.User.EditPicture`;
__as1(_.App.Http.Controllers.User.EditPicture, 'Request', App.Http.Controllers.User.EditPicture.Request);

(function (ErrorEnum) {
    ErrorEnum[ErrorEnum["ValidationError"] = 422] = "ValidationError";
})(App.Http.Controllers.User.EditEmail.ErrorEnum || (App.Http.Controllers.User.EditEmail.ErrorEnum = {}));
__as1(_.App.Http.Controllers.User.EditEmail, 'ErrorEnum', App.Http.Controllers.User.EditEmail.ErrorEnum);

App.Http.Controllers.User.EditEmail.Request=class Request {
    email;
}
App.Http.Controllers.User.EditEmail.Request.Namespace=`AventusStore.App.Http.Controllers.User.EditEmail`;
__as1(_.App.Http.Controllers.User.EditEmail, 'Request', App.Http.Controllers.User.EditEmail.Request);

App.Http.Controllers.User.EditBio.Request=class Request {
    bio = undefined;
}
App.Http.Controllers.User.EditBio.Request.Namespace=`AventusStore.App.Http.Controllers.User.EditBio`;
__as1(_.App.Http.Controllers.User.EditBio, 'Request', App.Http.Controllers.User.EditBio.Request);

(function (ErrorEnum) {
})(App.Http.Controllers.Template.Search.ErrorEnum || (App.Http.Controllers.Template.Search.ErrorEnum = {}));
__as1(_.App.Http.Controllers.Template.Search, 'ErrorEnum', App.Http.Controllers.Template.Search.ErrorEnum);

App.Http.Controllers.Template.Search.Request=class Request {
    txt = undefined;
    limit;
    offset;
}
App.Http.Controllers.Template.Search.Request.Namespace=`AventusStore.App.Http.Controllers.Template.Search`;
__as1(_.App.Http.Controllers.Template.Search, 'Request', App.Http.Controllers.Template.Search.Request);

App.Http.Controllers.Template.Random.Request=class Request {
    number;
}
App.Http.Controllers.Template.Random.Request.Namespace=`AventusStore.App.Http.Controllers.Template.Random`;
__as1(_.App.Http.Controllers.Template.Random, 'Request', App.Http.Controllers.Template.Random.Request);

App.Http.Controllers.Template.Edit.Readme.Response=class Response {
    static get Fullname() { return "App.Http.Controllers.Template.Edit.Readme.Response"; }
    success;
}
App.Http.Controllers.Template.Edit.Readme.Response.Namespace=`AventusStore.App.Http.Controllers.Template.Edit.Readme`;
App.Http.Controllers.Template.Edit.Readme.Response.$schema={"success":"boolean"};
Aventus.Converter.register(App.Http.Controllers.Template.Edit.Readme.Response.Fullname, App.Http.Controllers.Template.Edit.Readme.Response);
__as1(_.App.Http.Controllers.Template.Edit.Readme, 'Response', App.Http.Controllers.Template.Edit.Readme.Response);

App.Http.Controllers.Template.Edit.Readme.Request=class Request {
    readme;
}
App.Http.Controllers.Template.Edit.Readme.Request.Namespace=`AventusStore.App.Http.Controllers.Template.Edit.Readme`;
__as1(_.App.Http.Controllers.Template.Edit.Readme, 'Request', App.Http.Controllers.Template.Edit.Readme.Request);

App.Http.Controllers.Template.Download.Request=class Request {
}
App.Http.Controllers.Template.Download.Request.Namespace=`AventusStore.App.Http.Controllers.Template.Download`;
__as1(_.App.Http.Controllers.Template.Download, 'Request', App.Http.Controllers.Template.Download.Request);

(function (ErrorEnum) {
    ErrorEnum[ErrorEnum["NotFound"] = 404] = "NotFound";
})(App.Http.Controllers.Template.Download.ErrorEnum || (App.Http.Controllers.Template.Download.ErrorEnum = {}));
__as1(_.App.Http.Controllers.Template.Download, 'ErrorEnum', App.Http.Controllers.Template.Download.ErrorEnum);

(function (ErrorEnum) {
    ErrorEnum[ErrorEnum["NotFound"] = 404] = "NotFound";
})(App.Http.Controllers.Template.Details.ErrorEnum || (App.Http.Controllers.Template.Details.ErrorEnum = {}));
__as1(_.App.Http.Controllers.Template.Details, 'ErrorEnum', App.Http.Controllers.Template.Details.ErrorEnum);

App.Http.Controllers.Template.TemplateDetailsResource=class TemplateDetailsResource {
    static get Fullname() { return "App.Http.Controllers.Template.TemplateDetailsResource"; }
    name;
    description;
    version;
    downloads;
    fromName;
    fromImg = undefined;
    isUser;
    readme;
    tags = [];
    isOwner = false;
    repos = undefined;
    doc = undefined;
}
App.Http.Controllers.Template.TemplateDetailsResource.Namespace=`AventusStore.App.Http.Controllers.Template`;
App.Http.Controllers.Template.TemplateDetailsResource.$schema={"name":"string","description":"string","version":"string","downloads":"number","fromName":"string","fromImg":"string","isUser":"string","readme":"string","isOwner":"boolean","repos":"string","doc":"string"};
Aventus.Converter.register(App.Http.Controllers.Template.TemplateDetailsResource.Fullname, App.Http.Controllers.Template.TemplateDetailsResource);
__as1(_.App.Http.Controllers.Template, 'TemplateDetailsResource', App.Http.Controllers.Template.TemplateDetailsResource);

App.Http.Controllers.Template.Delete.Response=class Response {
    static get Fullname() { return "App.Http.Controllers.Template.Delete.Response"; }
    success;
}
App.Http.Controllers.Template.Delete.Response.Namespace=`AventusStore.App.Http.Controllers.Template.Delete`;
App.Http.Controllers.Template.Delete.Response.$schema={"success":"boolean"};
Aventus.Converter.register(App.Http.Controllers.Template.Delete.Response.Fullname, App.Http.Controllers.Template.Delete.Response);
__as1(_.App.Http.Controllers.Template.Delete, 'Response', App.Http.Controllers.Template.Delete.Response);

(function (ErrorEnum) {
    ErrorEnum[ErrorEnum["AuthenticationError"] = 1] = "AuthenticationError";
    ErrorEnum[ErrorEnum["UserNotFound"] = 2] = "UserNotFound";
    ErrorEnum[ErrorEnum["OrganizationNotFound"] = 3] = "OrganizationNotFound";
    ErrorEnum[ErrorEnum["NameMissedMatch"] = 4] = "NameMissedMatch";
    ErrorEnum[ErrorEnum["VersionMissedMatch"] = 5] = "VersionMissedMatch";
    ErrorEnum[ErrorEnum["VersionBigger"] = 6] = "VersionBigger";
    ErrorEnum[ErrorEnum["Forbidden"] = 7] = "Forbidden";
})(App.Http.Controllers.Remote.Template.Publish.ErrorEnum || (App.Http.Controllers.Remote.Template.Publish.ErrorEnum = {}));
__as1(_.App.Http.Controllers.Remote.Template.Publish, 'ErrorEnum', App.Http.Controllers.Remote.Template.Publish.ErrorEnum);

App.Http.Controllers.Remote.Template.Publish.Response=class Response {
    static get Fullname() { return "App.Http.Controllers.Remote.Template.Publish.Response"; }
}
App.Http.Controllers.Remote.Template.Publish.Response.Namespace=`AventusStore.App.Http.Controllers.Remote.Template.Publish`;
App.Http.Controllers.Remote.Template.Publish.Response.$schema={};
Aventus.Converter.register(App.Http.Controllers.Remote.Template.Publish.Response.Fullname, App.Http.Controllers.Remote.Template.Publish.Response);
__as1(_.App.Http.Controllers.Remote.Template.Publish, 'Response', App.Http.Controllers.Remote.Template.Publish.Response);

App.Http.Controllers.Remote.Template.Publish.Request=class Request {
    tags;
    name;
    description = undefined;
    version;
    is_project;
    organization = undefined;
    templateFile;
    readMe = undefined;
    repository = undefined;
    documentation = undefined;
}
App.Http.Controllers.Remote.Template.Publish.Request.Namespace=`AventusStore.App.Http.Controllers.Remote.Template.Publish`;
__as1(_.App.Http.Controllers.Remote.Template.Publish, 'Request', App.Http.Controllers.Remote.Template.Publish.Request);

(function (ErrorEnum) {
    ErrorEnum[ErrorEnum["AuthenticationError"] = 1] = "AuthenticationError";
    ErrorEnum[ErrorEnum["UserNotFound"] = 2] = "UserNotFound";
    ErrorEnum[ErrorEnum["OrganizationNotFound"] = 3] = "OrganizationNotFound";
    ErrorEnum[ErrorEnum["NameMissedMatch"] = 4] = "NameMissedMatch";
    ErrorEnum[ErrorEnum["VersionMissedMatch"] = 5] = "VersionMissedMatch";
    ErrorEnum[ErrorEnum["VersionBigger"] = 6] = "VersionBigger";
    ErrorEnum[ErrorEnum["Forbidden"] = 7] = "Forbidden";
})(App.Http.Controllers.Remote.Package.Publish.ErrorEnum || (App.Http.Controllers.Remote.Package.Publish.ErrorEnum = {}));
__as1(_.App.Http.Controllers.Remote.Package.Publish, 'ErrorEnum', App.Http.Controllers.Remote.Package.Publish.ErrorEnum);

App.Http.Controllers.Remote.Package.Publish.Response=class Response {
    static get Fullname() { return "App.Http.Controllers.Remote.Package.Publish.Response"; }
}
App.Http.Controllers.Remote.Package.Publish.Response.Namespace=`AventusStore.App.Http.Controllers.Remote.Package.Publish`;
App.Http.Controllers.Remote.Package.Publish.Response.$schema={};
Aventus.Converter.register(App.Http.Controllers.Remote.Package.Publish.Response.Fullname, App.Http.Controllers.Remote.Package.Publish.Response);
__as1(_.App.Http.Controllers.Remote.Package.Publish, 'Response', App.Http.Controllers.Remote.Package.Publish.Response);

App.Http.Controllers.Remote.Package.Publish.Request=class Request {
    tags;
    name;
    description = undefined;
    version;
    organization = undefined;
    packageFile;
    readMe = undefined;
    repository = undefined;
    documentation = undefined;
}
App.Http.Controllers.Remote.Package.Publish.Request.Namespace=`AventusStore.App.Http.Controllers.Remote.Package.Publish`;
__as1(_.App.Http.Controllers.Remote.Package.Publish, 'Request', App.Http.Controllers.Remote.Package.Publish.Request);

App.Http.Controllers.Remote.Auth.Logout.Controller=class Controller extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request() {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/remote/logout`, Aventus.HttpMethod.POST);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Remote.Auth.Logout.Controller.Namespace=`AventusStore.App.Http.Controllers.Remote.Auth.Logout`;
__as1(_.App.Http.Controllers.Remote.Auth.Logout, 'Controller', App.Http.Controllers.Remote.Auth.Logout.Controller);

(function (ErrorEnum) {
    ErrorEnum[ErrorEnum["ValidationError"] = 422] = "ValidationError";
    ErrorEnum[ErrorEnum["ValidateEmailFirst"] = 302] = "ValidateEmailFirst";
})(App.Http.Controllers.Remote.Auth.Login.ErrorEnum || (App.Http.Controllers.Remote.Auth.Login.ErrorEnum = {}));
__as1(_.App.Http.Controllers.Remote.Auth.Login, 'ErrorEnum', App.Http.Controllers.Remote.Auth.Login.ErrorEnum);

App.Http.Controllers.Remote.Auth.Login.Request=class Request {
    username;
    password;
    machineId;
    machineName;
}
App.Http.Controllers.Remote.Auth.Login.Request.Namespace=`AventusStore.App.Http.Controllers.Remote.Auth.Login`;
__as1(_.App.Http.Controllers.Remote.Auth.Login, 'Request', App.Http.Controllers.Remote.Auth.Login.Request);

App.Http.Controllers.Package.Search.Response=class Response {
    static get Fullname() { return "App.Http.Controllers.Package.Search.Response"; }
    name;
    description;
    version;
    downloads;
    fromName;
    isUser;
}
App.Http.Controllers.Package.Search.Response.Namespace=`AventusStore.App.Http.Controllers.Package.Search`;
App.Http.Controllers.Package.Search.Response.$schema={"name":"string","description":"string","version":"string","downloads":"number","fromName":"string","isUser":"string"};
Aventus.Converter.register(App.Http.Controllers.Package.Search.Response.Fullname, App.Http.Controllers.Package.Search.Response);
__as1(_.App.Http.Controllers.Package.Search, 'Response', App.Http.Controllers.Package.Search.Response);

(function (ErrorEnum) {
})(App.Http.Controllers.Package.Search.ErrorEnum || (App.Http.Controllers.Package.Search.ErrorEnum = {}));
__as1(_.App.Http.Controllers.Package.Search, 'ErrorEnum', App.Http.Controllers.Package.Search.ErrorEnum);

App.Http.Controllers.Package.Search.Request=class Request {
    txt = undefined;
    limit;
    offset;
}
App.Http.Controllers.Package.Search.Request.Namespace=`AventusStore.App.Http.Controllers.Package.Search`;
__as1(_.App.Http.Controllers.Package.Search, 'Request', App.Http.Controllers.Package.Search.Request);

App.Http.Controllers.Package.Random.Request=class Request {
    number;
}
App.Http.Controllers.Package.Random.Request.Namespace=`AventusStore.App.Http.Controllers.Package.Random`;
__as1(_.App.Http.Controllers.Package.Random, 'Request', App.Http.Controllers.Package.Random.Request);

App.Http.Controllers.Package.Edit.Readme.Response=class Response {
    static get Fullname() { return "App.Http.Controllers.Package.Edit.Readme.Response"; }
    success;
}
App.Http.Controllers.Package.Edit.Readme.Response.Namespace=`AventusStore.App.Http.Controllers.Package.Edit.Readme`;
App.Http.Controllers.Package.Edit.Readme.Response.$schema={"success":"boolean"};
Aventus.Converter.register(App.Http.Controllers.Package.Edit.Readme.Response.Fullname, App.Http.Controllers.Package.Edit.Readme.Response);
__as1(_.App.Http.Controllers.Package.Edit.Readme, 'Response', App.Http.Controllers.Package.Edit.Readme.Response);

App.Http.Controllers.Package.Edit.Readme.Request=class Request {
    readme;
}
App.Http.Controllers.Package.Edit.Readme.Request.Namespace=`AventusStore.App.Http.Controllers.Package.Edit.Readme`;
__as1(_.App.Http.Controllers.Package.Edit.Readme, 'Request', App.Http.Controllers.Package.Edit.Readme.Request);

App.Http.Controllers.Package.Download.Request=class Request {
}
App.Http.Controllers.Package.Download.Request.Namespace=`AventusStore.App.Http.Controllers.Package.Download`;
__as1(_.App.Http.Controllers.Package.Download, 'Request', App.Http.Controllers.Package.Download.Request);

(function (ErrorEnum) {
    ErrorEnum[ErrorEnum["NotFound"] = 404] = "NotFound";
})(App.Http.Controllers.Package.Download.ErrorEnum || (App.Http.Controllers.Package.Download.ErrorEnum = {}));
__as1(_.App.Http.Controllers.Package.Download, 'ErrorEnum', App.Http.Controllers.Package.Download.ErrorEnum);

(function (ErrorEnum) {
    ErrorEnum[ErrorEnum["NotFound"] = 404] = "NotFound";
})(App.Http.Controllers.Package.Details.ErrorEnum || (App.Http.Controllers.Package.Details.ErrorEnum = {}));
__as1(_.App.Http.Controllers.Package.Details, 'ErrorEnum', App.Http.Controllers.Package.Details.ErrorEnum);

App.Http.Controllers.Package.PackageDetailsResource=class PackageDetailsResource {
    static get Fullname() { return "App.Http.Controllers.Package.PackageDetailsResource"; }
    name;
    description;
    version;
    downloads;
    fromName;
    fromImg = undefined;
    isUser;
    readme;
    tags = [];
    isOwner = false;
    repos = undefined;
    doc = undefined;
}
App.Http.Controllers.Package.PackageDetailsResource.Namespace=`AventusStore.App.Http.Controllers.Package`;
App.Http.Controllers.Package.PackageDetailsResource.$schema={"name":"string","description":"string","version":"string","downloads":"number","fromName":"string","fromImg":"string","isUser":"string","readme":"string","isOwner":"boolean","repos":"string","doc":"string"};
Aventus.Converter.register(App.Http.Controllers.Package.PackageDetailsResource.Fullname, App.Http.Controllers.Package.PackageDetailsResource);
__as1(_.App.Http.Controllers.Package, 'PackageDetailsResource', App.Http.Controllers.Package.PackageDetailsResource);

App.Http.Controllers.Package.Delete.Response=class Response {
    static get Fullname() { return "App.Http.Controllers.Package.Delete.Response"; }
    success;
}
App.Http.Controllers.Package.Delete.Response.Namespace=`AventusStore.App.Http.Controllers.Package.Delete`;
App.Http.Controllers.Package.Delete.Response.$schema={"success":"boolean"};
Aventus.Converter.register(App.Http.Controllers.Package.Delete.Response.Fullname, App.Http.Controllers.Package.Delete.Response);
__as1(_.App.Http.Controllers.Package.Delete, 'Response', App.Http.Controllers.Package.Delete.Response);

App.Models.UserPicture=class UserPicture extends AventusPhp.AventusImage {
    static get Fullname() { return "App.Models.UserPicture"; }
}
App.Models.UserPicture.Namespace=`AventusStore.App.Models`;
App.Models.UserPicture.$schema={...(AventusPhp.AventusImage?.$schema ?? {}), };
Aventus.Converter.register(App.Models.UserPicture.Fullname, App.Models.UserPicture);
__as1(_.App.Models, 'UserPicture', App.Models.UserPicture);

App.Http.Controllers.Org.EditPicture.Request=class Request {
    file;
    name;
}
App.Http.Controllers.Org.EditPicture.Request.Namespace=`AventusStore.App.Http.Controllers.Org.EditPicture`;
__as1(_.App.Http.Controllers.Org.EditPicture, 'Request', App.Http.Controllers.Org.EditPicture.Request);

App.Http.Controllers.Org.EditBio.Request=class Request {
    bio = undefined;
    name;
}
App.Http.Controllers.Org.EditBio.Request.Namespace=`AventusStore.App.Http.Controllers.Org.EditBio`;
__as1(_.App.Http.Controllers.Org.EditBio, 'Request', App.Http.Controllers.Org.EditBio.Request);

App.Http.Controllers.Template.TemplateSimpleResource=class TemplateSimpleResource {
    static get Fullname() { return "App.Http.Controllers.Template.TemplateSimpleResource"; }
    tags;
    name;
    description;
    version;
    downloads;
    fromName;
    fromImg = undefined;
    isUser;
}
App.Http.Controllers.Template.TemplateSimpleResource.Namespace=`AventusStore.App.Http.Controllers.Template`;
App.Http.Controllers.Template.TemplateSimpleResource.$schema={"tags":"string[]","name":"string","description":"string","version":"string","downloads":"number","fromName":"string","fromImg":"string","isUser":"string"};
Aventus.Converter.register(App.Http.Controllers.Template.TemplateSimpleResource.Fullname, App.Http.Controllers.Template.TemplateSimpleResource);
__as1(_.App.Http.Controllers.Template, 'TemplateSimpleResource', App.Http.Controllers.Template.TemplateSimpleResource);

App.Http.Controllers.Org.Create.Response=class Response {
    static get Fullname() { return "App.Http.Controllers.Org.Create.Response"; }
}
App.Http.Controllers.Org.Create.Response.Namespace=`AventusStore.App.Http.Controllers.Org.Create`;
App.Http.Controllers.Org.Create.Response.$schema={};
Aventus.Converter.register(App.Http.Controllers.Org.Create.Response.Fullname, App.Http.Controllers.Org.Create.Response);
__as1(_.App.Http.Controllers.Org.Create, 'Response', App.Http.Controllers.Org.Create.Response);

(function (ErrorEnum) {
    ErrorEnum[ErrorEnum["NamedUsed"] = 1] = "NamedUsed";
})(App.Http.Controllers.Org.Create.ErrorEnum || (App.Http.Controllers.Org.Create.ErrorEnum = {}));
__as1(_.App.Http.Controllers.Org.Create, 'ErrorEnum', App.Http.Controllers.Org.Create.ErrorEnum);

App.Models.OrganizationPicture=class OrganizationPicture extends AventusPhp.AventusImage {
    static get Fullname() { return "App.Models.OrganizationPicture"; }
}
App.Models.OrganizationPicture.Namespace=`AventusStore.App.Models`;
App.Models.OrganizationPicture.$schema={...(AventusPhp.AventusImage?.$schema ?? {}), };
Aventus.Converter.register(App.Models.OrganizationPicture.Fullname, App.Models.OrganizationPicture);
__as1(_.App.Models, 'OrganizationPicture', App.Models.OrganizationPicture);

App.Http.Controllers.Package.PackageSimpleResource=class PackageSimpleResource {
    static get Fullname() { return "App.Http.Controllers.Package.PackageSimpleResource"; }
    tags;
    name;
    description;
    version;
    downloads;
    fromName;
    fromImg = undefined;
    isUser;
}
App.Http.Controllers.Package.PackageSimpleResource.Namespace=`AventusStore.App.Http.Controllers.Package`;
App.Http.Controllers.Package.PackageSimpleResource.$schema={"tags":"string[]","name":"string","description":"string","version":"string","downloads":"number","fromName":"string","fromImg":"string","isUser":"string"};
Aventus.Converter.register(App.Http.Controllers.Package.PackageSimpleResource.Fullname, App.Http.Controllers.Package.PackageSimpleResource);
__as1(_.App.Http.Controllers.Package, 'PackageSimpleResource', App.Http.Controllers.Package.PackageSimpleResource);

App.Http.Controllers.User.Details.UserDetailsResponse=class UserDetailsResponse {
    static get Fullname() { return "App.Http.Controllers.User.Details.Response"; }
    packages;
    username;
    email;
    picture = undefined;
}
App.Http.Controllers.User.Details.UserDetailsResponse.Namespace=`AventusStore.App.Http.Controllers.User.Details`;
App.Http.Controllers.User.Details.UserDetailsResponse.$schema={"packages":"AventusStore.App.Http.Controllers.Package.PackageSimpleResource[]","username":"string","email":"string","picture":"AventusStore.App.Models.UserPicture"};
Aventus.Converter.register(App.Http.Controllers.User.Details.UserDetailsResponse.Fullname, App.Http.Controllers.User.Details.UserDetailsResponse);
__as1(_.App.Http.Controllers.User.Details, 'UserDetailsResponse', App.Http.Controllers.User.Details.UserDetailsResponse);

App.Http.Controllers.Org.Create.Request=class Request {
    name;
    bio = undefined;
    picture = undefined;
}
App.Http.Controllers.Org.Create.Request.Namespace=`AventusStore.App.Http.Controllers.Org.Create`;
__as1(_.App.Http.Controllers.Org.Create, 'Request', App.Http.Controllers.Org.Create.Request);

(function (ErrorEnum) {
})(App.Http.Controllers.Auth.Signup.ErrorEnum || (App.Http.Controllers.Auth.Signup.ErrorEnum = {}));
__as1(_.App.Http.Controllers.Auth.Signup, 'ErrorEnum', App.Http.Controllers.Auth.Signup.ErrorEnum);

App.Http.Controllers.Auth.Signup.Request=class Request {
    username;
    email;
    password;
}
App.Http.Controllers.Auth.Signup.Request.Namespace=`AventusStore.App.Http.Controllers.Auth.Signup`;
__as1(_.App.Http.Controllers.Auth.Signup, 'Request', App.Http.Controllers.Auth.Signup.Request);

App.Http.Controllers.Auth.Logout.AuthLogoutController=class AuthLogoutController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request() {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/logout`, Aventus.HttpMethod.POST);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Auth.Logout.AuthLogoutController.Namespace=`AventusStore.App.Http.Controllers.Auth.Logout`;
__as1(_.App.Http.Controllers.Auth.Logout, 'AuthLogoutController', App.Http.Controllers.Auth.Logout.AuthLogoutController);

(function (ErrorEnum) {
    ErrorEnum[ErrorEnum["ValidationError"] = 422] = "ValidationError";
    ErrorEnum[ErrorEnum["ValidateEmailFirst"] = 302] = "ValidateEmailFirst";
})(App.Http.Controllers.Auth.Login.ErrorEnum || (App.Http.Controllers.Auth.Login.ErrorEnum = {}));
__as1(_.App.Http.Controllers.Auth.Login, 'ErrorEnum', App.Http.Controllers.Auth.Login.ErrorEnum);

App.Http.Controllers.Auth.Login.Request=class Request {
    username;
    password;
}
App.Http.Controllers.Auth.Login.Request.Namespace=`AventusStore.App.Http.Controllers.Auth.Login`;
__as1(_.App.Http.Controllers.Auth.Login, 'Request', App.Http.Controllers.Auth.Login.Request);

(function (RoleEnum) {
    RoleEnum[RoleEnum["Admin"] = 1] = "Admin";
    RoleEnum[RoleEnum["Dev"] = 2] = "Dev";
})(App.Enums.RoleEnum || (App.Enums.RoleEnum = {}));
__as1(_.App.Enums, 'RoleEnum', App.Enums.RoleEnum);

App.Http.Controllers.Org.Role.Response=class Response {
    static get Fullname() { return "App.Http.Controllers.Org.Role.Response"; }
    role = undefined;
}
App.Http.Controllers.Org.Role.Response.Namespace=`AventusStore.App.Http.Controllers.Org.Role`;
App.Http.Controllers.Org.Role.Response.$schema={"role":"AventusStore.App.Enums.RoleEnum"};
Aventus.Converter.register(App.Http.Controllers.Org.Role.Response.Fullname, App.Http.Controllers.Org.Role.Response);
__as1(_.App.Http.Controllers.Org.Role, 'Response', App.Http.Controllers.Org.Role.Response);

App.Http.Controllers.Auth.Login.AuthLoginController=class AuthLoginController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/login`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Auth.Login.AuthLoginController.Namespace=`AventusStore.App.Http.Controllers.Auth.Login`;
__as1(_.App.Http.Controllers.Auth.Login, 'AuthLoginController', App.Http.Controllers.Auth.Login.AuthLoginController);

App.Http.Controllers.Auth.Login.Error=class Error extends AventusPhp.AventusError {
    static get Fullname() { return "App.Http.Controllers.Auth.Login.Error"; }
}
App.Http.Controllers.Auth.Login.Error.Namespace=`AventusStore.App.Http.Controllers.Auth.Login`;
App.Http.Controllers.Auth.Login.Error.$schema={...(AventusPhp.AventusError?.$schema ?? {}), };
Aventus.Converter.register(App.Http.Controllers.Auth.Login.Error.Fullname, App.Http.Controllers.Auth.Login.Error);
__as1(_.App.Http.Controllers.Auth.Login, 'Error', App.Http.Controllers.Auth.Login.Error);

App.Http.Controllers.Auth.Signup.AuthSignupController=class AuthSignupController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/signup`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Auth.Signup.AuthSignupController.Namespace=`AventusStore.App.Http.Controllers.Auth.Signup`;
__as1(_.App.Http.Controllers.Auth.Signup, 'AuthSignupController', App.Http.Controllers.Auth.Signup.AuthSignupController);

App.Http.Controllers.Auth.Signup.Error=class Error extends AventusPhp.AventusError {
    static get Fullname() { return "App.Http.Controllers.Auth.Signup.Error"; }
}
App.Http.Controllers.Auth.Signup.Error.Namespace=`AventusStore.App.Http.Controllers.Auth.Signup`;
App.Http.Controllers.Auth.Signup.Error.$schema={...(AventusPhp.AventusError?.$schema ?? {}), };
Aventus.Converter.register(App.Http.Controllers.Auth.Signup.Error.Fullname, App.Http.Controllers.Auth.Signup.Error);
__as1(_.App.Http.Controllers.Auth.Signup, 'Error', App.Http.Controllers.Auth.Signup.Error);

App.Http.Controllers.Org.OrgUserResource=class OrgUserResource {
    static get Fullname() { return "App.Http.Controllers.Org.OrgUserResource"; }
    packages;
    name;
    role;
    bio = undefined;
    picture = undefined;
}
App.Http.Controllers.Org.OrgUserResource.Namespace=`AventusStore.App.Http.Controllers.Org`;
App.Http.Controllers.Org.OrgUserResource.$schema={"packages":"AventusStore.App.Http.Controllers.Package.PackageSimpleResource[]","name":"string","role":"string","bio":"string","picture":"AventusStore.App.Models.OrganizationPicture"};
Aventus.Converter.register(App.Http.Controllers.Org.OrgUserResource.Fullname, App.Http.Controllers.Org.OrgUserResource);
__as1(_.App.Http.Controllers.Org, 'OrgUserResource', App.Http.Controllers.Org.OrgUserResource);

App.Http.Controllers.User.UserDetailsResource=class UserDetailsResource {
    static get Fullname() { return "App.Http.Controllers.User.UserDetailsResource"; }
    packages;
    templates;
    organizations;
    username;
    email;
    bio = undefined;
    picture = undefined;
    created_date;
}
App.Http.Controllers.User.UserDetailsResource.Namespace=`AventusStore.App.Http.Controllers.User`;
App.Http.Controllers.User.UserDetailsResource.$schema={"packages":"AventusStore.App.Http.Controllers.Package.PackageSimpleResource[]","templates":"AventusStore.App.Http.Controllers.Template.TemplateSimpleResource[]","organizations":"AventusStore.App.Http.Controllers.Org.OrgUserResource[]","username":"string","email":"string","bio":"string","picture":"AventusStore.App.Models.UserPicture","created_date":"Date"};
Aventus.Converter.register(App.Http.Controllers.User.UserDetailsResource.Fullname, App.Http.Controllers.User.UserDetailsResource);
__as1(_.App.Http.Controllers.User, 'UserDetailsResource', App.Http.Controllers.User.UserDetailsResource);

App.Http.Controllers.User.Details.UserDetailsController=class UserDetailsController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(name) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/user/details/${name}`, Aventus.HttpMethod.GET);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.User.Details.UserDetailsController.Namespace=`AventusStore.App.Http.Controllers.User.Details`;
__as1(_.App.Http.Controllers.User.Details, 'UserDetailsController', App.Http.Controllers.User.Details.UserDetailsController);

App.Http.Controllers.Org.Create.OrgCreateController=class OrgCreateController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/org/create`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Org.Create.OrgCreateController.Namespace=`AventusStore.App.Http.Controllers.Org.Create`;
__as1(_.App.Http.Controllers.Org.Create, 'OrgCreateController', App.Http.Controllers.Org.Create.OrgCreateController);

App.Http.Controllers.Org.Create.Error=class Error extends AventusPhp.AventusError {
    static get Fullname() { return "App.Http.Controllers.Org.Create.Error"; }
}
App.Http.Controllers.Org.Create.Error.Namespace=`AventusStore.App.Http.Controllers.Org.Create`;
App.Http.Controllers.Org.Create.Error.$schema={...(AventusPhp.AventusError?.$schema ?? {}), };
Aventus.Converter.register(App.Http.Controllers.Org.Create.Error.Fullname, App.Http.Controllers.Org.Create.Error);
__as1(_.App.Http.Controllers.Org.Create, 'Error', App.Http.Controllers.Org.Create.Error);

App.Http.Controllers.Org.OrgDetailsResource=class OrgDetailsResource {
    static get Fullname() { return "App.Http.Controllers.Org.OrgDetailsResource"; }
    packages;
    templates;
    name;
    bio = undefined;
    picture = undefined;
}
App.Http.Controllers.Org.OrgDetailsResource.Namespace=`AventusStore.App.Http.Controllers.Org`;
App.Http.Controllers.Org.OrgDetailsResource.$schema={"packages":"AventusStore.App.Http.Controllers.Package.PackageSimpleResource[]","templates":"AventusStore.App.Http.Controllers.Template.TemplateSimpleResource[]","name":"string","bio":"string","picture":"AventusStore.App.Models.OrganizationPicture"};
Aventus.Converter.register(App.Http.Controllers.Org.OrgDetailsResource.Fullname, App.Http.Controllers.Org.OrgDetailsResource);
__as1(_.App.Http.Controllers.Org, 'OrgDetailsResource', App.Http.Controllers.Org.OrgDetailsResource);

App.Http.Controllers.Org.Details.OrgDetailsController=class OrgDetailsController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(name) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/orgs/details/${name}`, Aventus.HttpMethod.GET);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Org.Details.OrgDetailsController.Namespace=`AventusStore.App.Http.Controllers.Org.Details`;
__as1(_.App.Http.Controllers.Org.Details, 'OrgDetailsController', App.Http.Controllers.Org.Details.OrgDetailsController);

App.Http.Controllers.Org.EditBio.OrgEditBioController=class OrgEditBioController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/org/edit_bio`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Org.EditBio.OrgEditBioController.Namespace=`AventusStore.App.Http.Controllers.Org.EditBio`;
__as1(_.App.Http.Controllers.Org.EditBio, 'OrgEditBioController', App.Http.Controllers.Org.EditBio.OrgEditBioController);

App.Http.Controllers.Org.EditPicture.OrgEditPictureController=class OrgEditPictureController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/org/edit_picture`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Org.EditPicture.OrgEditPictureController.Namespace=`AventusStore.App.Http.Controllers.Org.EditPicture`;
__as1(_.App.Http.Controllers.Org.EditPicture, 'OrgEditPictureController', App.Http.Controllers.Org.EditPicture.OrgEditPictureController);

App.Http.Controllers.Org.OrgSimpleResource=class OrgSimpleResource {
    static get Fullname() { return "App.Http.Controllers.Org.OrgSimpleResource"; }
    packages;
    name;
    bio = undefined;
    picture = undefined;
}
App.Http.Controllers.Org.OrgSimpleResource.Namespace=`AventusStore.App.Http.Controllers.Org`;
App.Http.Controllers.Org.OrgSimpleResource.$schema={"packages":"AventusStore.App.Http.Controllers.Package.PackageSimpleResource[]","name":"string","bio":"string","picture":"AventusStore.App.Models.UserPicture"};
Aventus.Converter.register(App.Http.Controllers.Org.OrgSimpleResource.Fullname, App.Http.Controllers.Org.OrgSimpleResource);
__as1(_.App.Http.Controllers.Org, 'OrgSimpleResource', App.Http.Controllers.Org.OrgSimpleResource);

App.Http.Controllers.Org.Role.OrgRoleController=class OrgRoleController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(name) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/orgs/role/${name}`, Aventus.HttpMethod.GET);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Org.Role.OrgRoleController.Namespace=`AventusStore.App.Http.Controllers.Org.Role`;
__as1(_.App.Http.Controllers.Org.Role, 'OrgRoleController', App.Http.Controllers.Org.Role.OrgRoleController);

const OrganizationPage = class OrganizationPage extends Aventus.Navigation.Page {
    get 'activeTab'() {
						return this.__watch["activeTab"];
					}
					set 'activeTab'(val) {
						this.__watch["activeTab"] = val;
					}get 'org'() {
						return this.__watch["org"];
					}
					set 'org'(val) {
						this.__watch["org"] = val;
					}    __registerWatchesActions() {
    this.__addWatchesActions("activeTab");this.__addWatchesActions("org");    super.__registerWatchesActions();
}
    static __style = `:host{margin:0 auto;max-width:80rem;padding:3rem 2rem}:host .profile-header{align-items:center;display:flex;flex-direction:column;gap:1.5rem;text-align:center}:host .profile-header .avatar{border:2px solid var(--border);border-radius:9999px;height:8rem;overflow:hidden;position:relative;transition:border .2s ease-in-out;width:8rem}:host .profile-header .avatar .img{border:2px solid var(--border);border-radius:9999px;font-size:32px}:host .profile-header .username{color:var(--text-white);font-size:2.25rem;font-weight:bold;margin:0}:host .profile-header .bio{align-items:center;color:var(--text-muted);display:flex;font-size:1.125rem;gap:1rem;margin-top:.5rem}:host .profile-header .join-date{color:#64748b;font-size:.875rem;margin-top:.5rem}:host .cards-grid{display:grid;gap:2rem;grid-template-columns:1fr;margin-top:2rem}:host .list{background-color:var(--card-bg);border:1px solid var(--card-border);border-radius:.5rem;display:flex;flex-direction:column;margin-top:2rem;overflow:hidden;width:100%}:host .list .item{align-items:center;border-top:1px solid var(--card-border);display:flex;gap:16px;height:50px;padding:0 1rem}:host .list .item .role{color:var(--card-border-hover)}:host .list .item:hover{background-color:var(--card-bg-hover)}:host .list av-link:first-child .item{border-top:none}:host .empty-message{color:var(--text-muted);grid-column:span 2;padding:4rem 0;text-align:center}:host .settings-card{width:calc(100% - 32px);max-width:none}:host .settings-card .settings-card-content{display:flex;flex-direction:column;gap:1.5rem}@media(min-width: 640px){:host .profile-header{flex-direction:row;text-align:left}}@media(min-width: 768px){:host .cards-grid{grid-template-columns:1fr 1fr}}`;
    __getStatic() {
        return OrganizationPage;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(OrganizationPage.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="profile-header">
    <div class="avatar">
        <as-user-img class="img" _id="organizationpage_0"></as-user-img>
    </div>
    <div>
        <h1 class="username" _id="organizationpage_1"></h1>
        <p class="bio">
            <span _id="organizationpage_2"></span>
        </p>
    </div>
</div><as-tabs>
    <as-tab label="Packages" _id="organizationpage_3">
        <div class="cards-grid">
            <template _id="organizationpage_4"></template>
        </div>
    </as-tab>
    <as-tab label="Templates" _id="organizationpage_6">
        <div class="cards-grid">
            <template _id="organizationpage_7"></template>
        </div>
    </as-tab>
</as-tabs>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "organizationpage_1°@HTML": {
      "fct": (c) => `${c.print(c.comp.__2f583510b54249c3554827b220574e6cmethod3())}`,
      "once": true
    },
    "organizationpage_2°@HTML": {
      "fct": (c) => `${c.print(c.comp.__2f583510b54249c3554827b220574e6cmethod4())}`,
      "once": true
    },
    "organizationpage_3°count": {
      "fct": (c) => `${c.print(c.comp.__2f583510b54249c3554827b220574e6cmethod5())}`,
      "once": true
    },
    "organizationpage_6°count": {
      "fct": (c) => `${c.print(c.comp.__2f583510b54249c3554827b220574e6cmethod7())}`,
      "once": true
    }
  },
  "injection": [
    {
      "id": "organizationpage_0",
      "injectionName": "user",
      "inject": (c) => c.comp.__2f583510b54249c3554827b220574e6cmethod2(),
      "once": true
    }
  ]
});const templ0 = new Aventus.Template(this);templ0.setTemplate(`
                <as-package-card no_owner _id="organizationpage_5"></as-package-card>
            `);templ0.setActions({
  "injection": [
    {
      "id": "organizationpage_5",
      "injectionName": "package",
      "inject": (c) => c.comp.__2f583510b54249c3554827b220574e6cmethod6(c.data.p),
      "once": true
    }
  ]
});this.__getStatic().__template.addLoop({
                    anchorId: 'organizationpage_4',
                    template: templ0,
                simple:{data: "this.org.packages",item:"p"}});const templ1 = new Aventus.Template(this);templ1.setTemplate(`
                <as-template-card no_owner _id="organizationpage_8"></as-template-card>
            `);templ1.setActions({
  "injection": [
    {
      "id": "organizationpage_8",
      "injectionName": "template",
      "inject": (c) => c.comp.__2f583510b54249c3554827b220574e6cmethod8(c.data.p),
      "once": true
    }
  ]
});this.__getStatic().__template.addLoop({
                    anchorId: 'organizationpage_7',
                    template: templ1,
                simple:{data: "this.org.templates",item:"p"}}); }
    getClassName() {
        return "OrganizationPage";
    }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["activeTab"] = undefined;w["org"] = undefined; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('activeTab');this.__correctGetter('org'); }
    async isAllowed(state, pattern, router) {
        let slugs = Aventus.Uri.getParams(pattern, state.name);
        if (slugs && slugs['id']) {
            const roleResult = await Aventus.Process.execute(new App.Http.Controllers.Org.Role.OrgRoleController().request(slugs['id']));
            if (roleResult?.role == App.Enums.RoleEnum.Admin) {
                return '/org/Cobwebsite/admin';
            }
            const result = await Aventus.Process.execute(new App.Http.Controllers.Org.Details.OrgDetailsController().request(slugs['id']));
            if (result) {
                this.org = result;
                return true;
            }
        }
        return '/not_found';
    }
    configure() {
        return {};
    }
    __2f583510b54249c3554827b220574e6cmethod3() {
        return this.org.name;
    }
    __2f583510b54249c3554827b220574e6cmethod4() {
        return this.org.bio;
    }
    __2f583510b54249c3554827b220574e6cmethod5() {
        return this.org.packages.length;
    }
    __2f583510b54249c3554827b220574e6cmethod7() {
        return this.org.templates.length;
    }
    __2f583510b54249c3554827b220574e6cmethod2() {
        return this.org;
    }
    __2f583510b54249c3554827b220574e6cmethod6(p) {
        return p;
    }
    __2f583510b54249c3554827b220574e6cmethod8(p) {
        return p;
    }
}
OrganizationPage.Namespace=`AventusStore`;
OrganizationPage.Tag=`as-organization-page`;
__as1(_, 'OrganizationPage', OrganizationPage);
if(!window.customElements.get('as-organization-page')){window.customElements.define('as-organization-page', OrganizationPage);Aventus.WebComponentInstance.registerDefinition(OrganizationPage);}

App.Http.Controllers.Package.Delete.PackageDeleteController=class PackageDeleteController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(name) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/package/${name}`, Aventus.HttpMethod.DELETE);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Package.Delete.PackageDeleteController.Namespace=`AventusStore.App.Http.Controllers.Package.Delete`;
__as1(_.App.Http.Controllers.Package.Delete, 'PackageDeleteController', App.Http.Controllers.Package.Delete.PackageDeleteController);

App.Http.Controllers.Package.Details.PackageDetailsController=class PackageDetailsController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(name) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/package/details/${name}`, Aventus.HttpMethod.GET);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Package.Details.PackageDetailsController.Namespace=`AventusStore.App.Http.Controllers.Package.Details`;
__as1(_.App.Http.Controllers.Package.Details, 'PackageDetailsController', App.Http.Controllers.Package.Details.PackageDetailsController);

App.Http.Controllers.Package.Details.Error=class Error extends AventusPhp.AventusError {
    static get Fullname() { return "App.Http.Controllers.Package.Details.Error"; }
}
App.Http.Controllers.Package.Details.Error.Namespace=`AventusStore.App.Http.Controllers.Package.Details`;
App.Http.Controllers.Package.Details.Error.$schema={...(AventusPhp.AventusError?.$schema ?? {}), };
Aventus.Converter.register(App.Http.Controllers.Package.Details.Error.Fullname, App.Http.Controllers.Package.Details.Error);
__as1(_.App.Http.Controllers.Package.Details, 'Error', App.Http.Controllers.Package.Details.Error);

App.Http.Controllers.Package.Download.Error=class Error extends AventusPhp.AventusError {
    static get Fullname() { return "App.Http.Controllers.Package.Download.Error"; }
}
App.Http.Controllers.Package.Download.Error.Namespace=`AventusStore.App.Http.Controllers.Package.Download`;
App.Http.Controllers.Package.Download.Error.$schema={...(AventusPhp.AventusError?.$schema ?? {}), };
Aventus.Converter.register(App.Http.Controllers.Package.Download.Error.Fullname, App.Http.Controllers.Package.Download.Error);
__as1(_.App.Http.Controllers.Package.Download, 'Error', App.Http.Controllers.Package.Download.Error);

App.Http.Controllers.Package.Edit.Readme.PackageEditReadmeController=class PackageEditReadmeController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(name, body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/package/${name}/readme`, Aventus.HttpMethod.PUT);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Package.Edit.Readme.PackageEditReadmeController.Namespace=`AventusStore.App.Http.Controllers.Package.Edit.Readme`;
__as1(_.App.Http.Controllers.Package.Edit.Readme, 'PackageEditReadmeController', App.Http.Controllers.Package.Edit.Readme.PackageEditReadmeController);

App.Http.Controllers.Package.Random.PackageRandomController=class PackageRandomController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/package/random`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Package.Random.PackageRandomController.Namespace=`AventusStore.App.Http.Controllers.Package.Random`;
__as1(_.App.Http.Controllers.Package.Random, 'PackageRandomController', App.Http.Controllers.Package.Random.PackageRandomController);

App.Http.Controllers.Package.Search.PackageSearchController=class PackageSearchController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/package/search`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Package.Search.PackageSearchController.Namespace=`AventusStore.App.Http.Controllers.Package.Search`;
__as1(_.App.Http.Controllers.Package.Search, 'PackageSearchController', App.Http.Controllers.Package.Search.PackageSearchController);

const PackagesPage = class PackagesPage extends Aventus.Navigation.Page {
    get 'loading'() { return this.getBoolAttr('loading') }
    set 'loading'(val) { this.setBoolAttr('loading', val) }get 'page'() { return this.getNumberAttr('page') }
    set 'page'(val) { this.setNumberAttr('page', val) }    get 'searchTxt'() {
						return this.__watch["searchTxt"];
					}
					set 'searchTxt'(val) {
						this.__watch["searchTxt"] = val;
					}get 'searchResult'() {
						return this.__watch["searchResult"];
					}
					set 'searchResult'(val) {
						this.__watch["searchResult"] = val;
					}get 'packages'() {
						return this.__watch["packages"];
					}
					set 'packages'(val) {
						this.__watch["packages"] = val;
					}    packagesRandom;
    timeout;
    elementsByPage = 21;
    canLoadMore = false;
    guard = new Aventus.ActionGuard();
    isSearching = false;
    __registerWatchesActions() {
    this.__addWatchesActions("searchTxt");this.__addWatchesActions("searchResult");this.__addWatchesActions("packages");    super.__registerWatchesActions();
}
    static __style = `:host{margin:0 auto;max-width:80rem;padding:3rem 2rem}:host .packages-header{text-align:center}:host .packages-title{color:var(--text-color);font-size:2.25rem;font-weight:800}:host .packages-subtitle{color:var(--text-muted);font-size:1.125rem;margin-left:auto;margin-right:auto;margin-top:1rem;max-width:40rem}:host .packages-search{margin:2.5rem auto 3rem;max-width:36rem}:host .search-input-wrapper{position:relative}:host .search-input{padding-left:2.5rem !important;width:100%}:host .search-icon{color:var(--text-muted);left:.75rem;pointer-events:none;position:absolute;top:50%;transform:translateY(-50%)}:host .icon-sm{align-items:center;display:flex;font-size:1.25rem;height:1.25rem;justify-content:center;width:1.25rem}:host as-loading{display:none;margin-top:2rem}:host .packages-grid{display:grid;gap:2rem;grid-template-columns:1fr;margin-bottom:1rem}:host .packages-empty{color:var(--text-muted);padding:2rem 0;text-align:center}:host([loading]) as-loading{display:flex}:host([loading][page="0"]) as-loading{margin-top:0rem}:host([loading][page="0"]) .packages-grid{display:none}:host([loading][page="0"]) .packages-empty{display:none}@media(min-width: 768px){:host .packages-grid{grid-template-columns:repeat(2, 1fr)}}@media(min-width: 1024px){:host .packages-grid{grid-template-columns:repeat(3, 1fr)}}`;
    constructor() {
        super();
        this.needMoreLoad = this.needMoreLoad.bind(this);
    }
    __getStatic() {
        return PackagesPage;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(PackagesPage.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="packages-header">
    <h1 class="packages-title">Explore Packages</h1>
    <p class="packages-subtitle">
        Find the perfect building blocks for your AventusJs application.
    </p>
</div><div class="packages-search">
    <div class="search-input-wrapper">
        <as-input type="text" placeholder="Search for packages..." class="search-input" _id="packagespage_0"></as-input>
        <div class="search-icon">
            <mi-icon icon="search" class="icon-sm"></mi-icon>
        </div>
    </div>
</div><template _id="packagespage_1"></template><as-loading></as-loading>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "bindings": [
    {
      "id": "packagespage_0",
      "injectionName": "value",
      "eventNames": [
        "onChange"
      ],
      "inject": (c) => c.comp.__d75e202a7e0493149d77ed808e3dbc7amethod3(),
      "extract": (c, v) => c.comp.__d75e202a7e0493149d77ed808e3dbc7amethod4(v),
      "once": true,
      "isCallback": true
    }
  ],
  "events": [
    {
      "eventName": "onChange",
      "id": "packagespage_0",
      "fct": (c, ...args) => c.comp.changeSearch.apply(c.comp, ...args),
      "isCallback": true
    }
  ]
});const templ1 = new Aventus.Template(this);templ1.setTemplate(`
    <div class="packages-grid">
        <template _id="packagespage_2"></template>
    </div>
`);const templ3 = new Aventus.Template(this);templ3.setTemplate(` 
            <as-package-card _id="packagespage_3"></as-package-card>
        `);templ3.setActions({
  "injection": [
    {
      "id": "packagespage_3",
      "injectionName": "package",
      "inject": (c) => c.comp.__d75e202a7e0493149d77ed808e3dbc7amethod5(c.data.p),
      "once": true
    }
  ]
});templ1.addLoop({
                    anchorId: 'packagespage_2',
                    template: templ3,
                simple:{data: "this.packages",item:"p"}});const templ2 = new Aventus.Template(this);templ2.setTemplate(`
    <div class="packages-empty">No packages found</div>
`);this.__getStatic().__template.addIf({
                    anchorId: 'packagespage_1',
                    parts: [{once: true,
                    condition: (c) => c.comp.__d75e202a7e0493149d77ed808e3dbc7amethod0(),
                    template: templ1
                },{once: true,
                    condition: (c) => c.comp.__d75e202a7e0493149d77ed808e3dbc7amethod1(),
                    template: templ2
                }]
            }); }
    getClassName() {
        return "PackagesPage";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('loading')) { this.attributeChangedCallback('loading', false, false); }if(!this.hasAttribute('page')){ this['page'] = 0; } }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["searchTxt"] = "";w["searchResult"] = "";w["packages"] = []; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('loading');this.__upgradeProperty('page');this.__correctGetter('searchTxt');this.__correctGetter('searchResult');this.__correctGetter('packages'); }
    __listBoolProps() { return ["loading"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    changeSearch() {
        if (this.timeout) {
            clearTimeout(this.timeout);
        }
        this.timeout = setTimeout(() => {
            this.timeout = undefined;
            this.search(true);
        }, 500);
    }
    async search(reset) {
        this.isSearching = true;
        await this.guard.run(async () => {
            if (!reset && !this.canLoadMore)
                return;
            if (reset) {
                this.page = 0;
            }
            const txt = this.searchTxt;
            if (txt == "") {
                if (!this.packagesRandom) {
                    this.packagesRandom = await Aventus.Process.execute(new App.Http.Controllers.Package.Random.PackageRandomController().request({ number: 6 }));
                }
                this.packages = this.packagesRandom ?? [];
            }
            else {
                this.loading = true;
                const result = await Aventus.Process.execute(new App.Http.Controllers.Package.Search.PackageSearchController().request({ txt, limit: this.elementsByPage, offset: this.page * this.elementsByPage }));
                if (result) {
                    if (this.page == 0) {
                        this.packages = result;
                    }
                    else {
                        this.packages = [...this.packages, ...result];
                    }
                    this.canLoadMore = result.length >= this.elementsByPage;
                }
                this.loading = false;
            }
            this.searchResult = txt;
        });
        this.isSearching = false;
    }
    needMoreLoad(x, y) {
        if (this.isSearching)
            return;
        if (this.canLoadMore && Main.instance.scrollEl.yMax - y < 200) {
            this.page++;
            this.search(false);
        }
    }
    configure() {
        return {};
    }
    show(state) {
        super.show(state);
        if (state instanceof PackagesPageState) {
            this.searchTxt = state.search;
            this.search(true);
        }
    }
    onShow() {
        Main.instance.onScrollChange.add(this.needMoreLoad);
    }
    onHide() {
        Main.instance.onScrollChange.remove(this.needMoreLoad);
    }
    postCreation() {
        super.postCreation();
        this.search(true);
    }
    __d75e202a7e0493149d77ed808e3dbc7amethod0() {
        return this.packages.length > 0;
    }
    __d75e202a7e0493149d77ed808e3dbc7amethod1() {
        return this.searchResult != "";
    }
    __d75e202a7e0493149d77ed808e3dbc7amethod5(p) {
        return p;
    }
    __d75e202a7e0493149d77ed808e3dbc7amethod3() {
        return this.searchTxt;
    }
    __d75e202a7e0493149d77ed808e3dbc7amethod4(v) {
        if (this) {
            this.searchTxt = v;
        }
    }
}
PackagesPage.Namespace=`AventusStore`;
PackagesPage.Tag=`as-packages-page`;
__as1(_, 'PackagesPage', PackagesPage);
if(!window.customElements.get('as-packages-page')){window.customElements.define('as-packages-page', PackagesPage);Aventus.WebComponentInstance.registerDefinition(PackagesPage);}

App.Http.Controllers.Package.Search.Error=class Error extends AventusPhp.AventusError {
    static get Fullname() { return "App.Http.Controllers.Package.Search.Error"; }
}
App.Http.Controllers.Package.Search.Error.Namespace=`AventusStore.App.Http.Controllers.Package.Search`;
App.Http.Controllers.Package.Search.Error.$schema={...(AventusPhp.AventusError?.$schema ?? {}), };
Aventus.Converter.register(App.Http.Controllers.Package.Search.Error.Fullname, App.Http.Controllers.Package.Search.Error);
__as1(_.App.Http.Controllers.Package.Search, 'Error', App.Http.Controllers.Package.Search.Error);

App.Http.Controllers.Remote.Auth.Login.Controller=class Controller extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/remote/login`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Remote.Auth.Login.Controller.Namespace=`AventusStore.App.Http.Controllers.Remote.Auth.Login`;
__as1(_.App.Http.Controllers.Remote.Auth.Login, 'Controller', App.Http.Controllers.Remote.Auth.Login.Controller);

App.Http.Controllers.Remote.Auth.Login.Error=class Error extends AventusPhp.AventusError {
    static get Fullname() { return "App.Http.Controllers.Remote.Auth.Login.Error"; }
}
App.Http.Controllers.Remote.Auth.Login.Error.Namespace=`AventusStore.App.Http.Controllers.Remote.Auth.Login`;
App.Http.Controllers.Remote.Auth.Login.Error.$schema={...(AventusPhp.AventusError?.$schema ?? {}), };
Aventus.Converter.register(App.Http.Controllers.Remote.Auth.Login.Error.Fullname, App.Http.Controllers.Remote.Auth.Login.Error);
__as1(_.App.Http.Controllers.Remote.Auth.Login, 'Error', App.Http.Controllers.Remote.Auth.Login.Error);

App.Http.Controllers.Remote.Package.Publish.Controller=class Controller extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/remote/package/publish`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Remote.Package.Publish.Controller.Namespace=`AventusStore.App.Http.Controllers.Remote.Package.Publish`;
__as1(_.App.Http.Controllers.Remote.Package.Publish, 'Controller', App.Http.Controllers.Remote.Package.Publish.Controller);

App.Http.Controllers.Remote.Package.Publish.Error=class Error extends AventusPhp.AventusError {
    static get Fullname() { return "App.Http.Controllers.Remote.Package.Publish.Error"; }
}
App.Http.Controllers.Remote.Package.Publish.Error.Namespace=`AventusStore.App.Http.Controllers.Remote.Package.Publish`;
App.Http.Controllers.Remote.Package.Publish.Error.$schema={...(AventusPhp.AventusError?.$schema ?? {}), };
Aventus.Converter.register(App.Http.Controllers.Remote.Package.Publish.Error.Fullname, App.Http.Controllers.Remote.Package.Publish.Error);
__as1(_.App.Http.Controllers.Remote.Package.Publish, 'Error', App.Http.Controllers.Remote.Package.Publish.Error);

App.Http.Controllers.Remote.Template.Publish.RemoteTemplatePublishController=class RemoteTemplatePublishController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/remote/template/publish`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Remote.Template.Publish.RemoteTemplatePublishController.Namespace=`AventusStore.App.Http.Controllers.Remote.Template.Publish`;
__as1(_.App.Http.Controllers.Remote.Template.Publish, 'RemoteTemplatePublishController', App.Http.Controllers.Remote.Template.Publish.RemoteTemplatePublishController);

App.Http.Controllers.Remote.Template.Publish.Error=class Error extends AventusPhp.AventusError {
    static get Fullname() { return "App.Http.Controllers.Remote.Template.Publish.Error"; }
}
App.Http.Controllers.Remote.Template.Publish.Error.Namespace=`AventusStore.App.Http.Controllers.Remote.Template.Publish`;
App.Http.Controllers.Remote.Template.Publish.Error.$schema={...(AventusPhp.AventusError?.$schema ?? {}), };
Aventus.Converter.register(App.Http.Controllers.Remote.Template.Publish.Error.Fullname, App.Http.Controllers.Remote.Template.Publish.Error);
__as1(_.App.Http.Controllers.Remote.Template.Publish, 'Error', App.Http.Controllers.Remote.Template.Publish.Error);

App.Http.Controllers.Template.Delete.TemplateDeleteController=class TemplateDeleteController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(name) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/template/${name}`, Aventus.HttpMethod.DELETE);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Template.Delete.TemplateDeleteController.Namespace=`AventusStore.App.Http.Controllers.Template.Delete`;
__as1(_.App.Http.Controllers.Template.Delete, 'TemplateDeleteController', App.Http.Controllers.Template.Delete.TemplateDeleteController);

App.Http.Controllers.Template.Details.TemplateDetailsController=class TemplateDetailsController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(name) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/template/details/${name}`, Aventus.HttpMethod.GET);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Template.Details.TemplateDetailsController.Namespace=`AventusStore.App.Http.Controllers.Template.Details`;
__as1(_.App.Http.Controllers.Template.Details, 'TemplateDetailsController', App.Http.Controllers.Template.Details.TemplateDetailsController);

App.Http.Controllers.Template.Details.Error=class Error extends AventusPhp.AventusError {
    static get Fullname() { return "App.Http.Controllers.Template.Details.Error"; }
}
App.Http.Controllers.Template.Details.Error.Namespace=`AventusStore.App.Http.Controllers.Template.Details`;
App.Http.Controllers.Template.Details.Error.$schema={...(AventusPhp.AventusError?.$schema ?? {}), };
Aventus.Converter.register(App.Http.Controllers.Template.Details.Error.Fullname, App.Http.Controllers.Template.Details.Error);
__as1(_.App.Http.Controllers.Template.Details, 'Error', App.Http.Controllers.Template.Details.Error);

App.Http.Controllers.Template.Download.Error=class Error extends AventusPhp.AventusError {
    static get Fullname() { return "App.Http.Controllers.Template.Download.Error"; }
}
App.Http.Controllers.Template.Download.Error.Namespace=`AventusStore.App.Http.Controllers.Template.Download`;
App.Http.Controllers.Template.Download.Error.$schema={...(AventusPhp.AventusError?.$schema ?? {}), };
Aventus.Converter.register(App.Http.Controllers.Template.Download.Error.Fullname, App.Http.Controllers.Template.Download.Error);
__as1(_.App.Http.Controllers.Template.Download, 'Error', App.Http.Controllers.Template.Download.Error);

App.Http.Controllers.Template.Edit.Readme.TemplateEditReadmeController=class TemplateEditReadmeController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(name, body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/template/${name}/readme`, Aventus.HttpMethod.PUT);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Template.Edit.Readme.TemplateEditReadmeController.Namespace=`AventusStore.App.Http.Controllers.Template.Edit.Readme`;
__as1(_.App.Http.Controllers.Template.Edit.Readme, 'TemplateEditReadmeController', App.Http.Controllers.Template.Edit.Readme.TemplateEditReadmeController);

App.Http.Controllers.Template.Random.TemplateRandomController=class TemplateRandomController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/template/random`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Template.Random.TemplateRandomController.Namespace=`AventusStore.App.Http.Controllers.Template.Random`;
__as1(_.App.Http.Controllers.Template.Random, 'TemplateRandomController', App.Http.Controllers.Template.Random.TemplateRandomController);

const HomePage = class HomePage extends Aventus.Navigation.Page {
    get 'packages'() {
						return this.__watch["packages"];
					}
					set 'packages'(val) {
						this.__watch["packages"] = val;
					}get 'templates'() {
						return this.__watch["templates"];
					}
					set 'templates'(val) {
						this.__watch["templates"] = val;
					}    __registerWatchesActions() {
    this.__addWatchesActions("packages");this.__addWatchesActions("templates");    super.__registerWatchesActions();
}
    static __style = `:host .homepage{padding-bottom:5rem}:host .hero{padding-bottom:2.5rem;padding-top:5rem;position:relative;text-align:center}:host .hero-background{background-color:var(--bg-color);background-image:radial-gradient(var(--bg-hover) 1px, transparent 1px);background-size:32px 32px;height:100%;inset:0;position:absolute;width:100%;z-index:-1}:host .container{margin:0 auto;max-width:1280px;padding-left:1rem;padding-right:1rem}:host .hero-title{color:var(--text-white);font-size:2.25rem;font-weight:800}:host .hero-title .highlight{color:var(--color-accent)}:host .hero-subtitle{color:var(--text-color);font-size:1.125rem;margin-left:auto;margin-right:auto;margin-top:1.5rem;max-width:48rem}:host .hero-buttons{display:flex;gap:1rem;justify-content:center;margin-top:2rem}:host .btn-lg{font-size:1.125rem;padding:.75rem 2rem}:host .section{margin:0 auto;max-width:1280px;padding:0 2rem}:host .text-center{text-align:center}:host .section-title{color:var(--text-white);font-size:1.875rem;font-weight:bold}:host .section-description{color:var(--text-muted);font-size:1.125rem;margin-top:1rem}:host .card-grid{display:grid;gap:2rem;margin-top:3rem}:host .section-footer{margin-top:2rem;text-align:center}:host .icon-right{align-items:center;display:flex;font-size:1rem;height:1rem;justify-content:center;margin-left:.5rem;width:1rem}@media(min-width: 768px){:host .card-grid{grid-template-columns:repeat(2, 1fr)}:host .hero{padding-bottom:5rem;padding-top:8rem}:host .hero-title{font-size:3rem}:host .hero-subtitle{font-size:1.25rem}}@media(min-width: 1024px){:host .hero-title{font-size:4.5rem}}`;
    __getStatic() {
        return HomePage;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(HomePage.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="homepage">
    <section class="hero">
        <div class="hero-background"></div>
        <div class="container">
            <h1 class="hero-title">
                The Webcomponent <span class="highlight">JavaScript</span> Framework
            </h1>
            <p class="hero-subtitle">
                AventusJs provides the building blocks to create powerful, fast, and scalable web applications with an
                amazing developer experience.
            </p>
            <div class="hero-buttons">
                <av-router-link state="/packages">
                    <as-button variant="primary" class="btn-lg">
                        Search Packages
                    </as-button>
                </av-router-link>
                <av-router-link state="/templates">
                    <as-button variant="secondary" class="btn-lg">
                        Explore Templates
                    </as-button>
                </av-router-link>
            </div>
        </div>
    </section>
    <section class="section">
        <div class="text-center">
            <h2 class="section-title">Featured Packages</h2>
            <p class="section-description">Discover powerful packages to supercharge your project.</p>
        </div>
        <div class="card-grid">
            <template _id="homepage_0"></template>
        </div>
        <div class="section-footer">
            <av-router-link to="/packages">
                <as-button variant="ghost">
                    <span>View All Packages</span>
                    <mi-icon icon="chevron_right" class="icon-right"></mi-icon>
                </as-button>
            </av-router-link>
        </div>
    </section>
    <section class="section">
        <div class="text-center">
            <h2 class="section-title">Featured Templates</h2>
            <p class="section-description">Start your next project with a solid foundation.</p>
        </div>
        <div class="card-grid">
            <template _id="homepage_2"></template>
        </div>
        <div class="section-footer">
            <av-router-link to="/templates">
                <as-button variant="ghost">
                    <span>View All Templates</span>
                    <mi-icon icon="chevron_right" class="icon-right"></mi-icon>
                </as-button>
            </av-router-link>
        </div>
    </section>
</div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();const templ0 = new Aventus.Template(this);templ0.setTemplate(`
                <as-package-card _id="homepage_1"></as-package-card>
            `);templ0.setActions({
  "injection": [
    {
      "id": "homepage_1",
      "injectionName": "package",
      "inject": (c) => c.comp.__f725a6f94f460d959be619e682001f79method2(c.data.p),
      "once": true
    }
  ]
});this.__getStatic().__template.addLoop({
                    anchorId: 'homepage_0',
                    template: templ0,
                simple:{data: "this.packages",item:"p"}});const templ1 = new Aventus.Template(this);templ1.setTemplate(`
                <as-template-card _id="homepage_3"></as-template-card>
            `);templ1.setActions({
  "injection": [
    {
      "id": "homepage_3",
      "injectionName": "template",
      "inject": (c) => c.comp.__f725a6f94f460d959be619e682001f79method3(c.data.t),
      "once": true
    }
  ]
});this.__getStatic().__template.addLoop({
                    anchorId: 'homepage_2',
                    template: templ1,
                simple:{data: "this.templates",item:"t"}}); }
    getClassName() {
        return "HomePage";
    }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["packages"] = [];w["templates"] = []; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('packages');this.__correctGetter('templates'); }
    configure() {
        return {};
    }
    async loadData() {
        this.packages = await Aventus.Process.execute(new App.Http.Controllers.Package.Random.PackageRandomController().request({ number: 4 })) ?? [];
        this.templates = await Aventus.Process.execute(new App.Http.Controllers.Template.Random.TemplateRandomController().request({ number: 4 })) ?? [];
    }
    postCreation() {
        super.postCreation();
        this.loadData();
    }
    __f725a6f94f460d959be619e682001f79method2(p) {
        return p;
    }
    __f725a6f94f460d959be619e682001f79method3(t) {
        return t;
    }
}
HomePage.Namespace=`AventusStore`;
HomePage.Tag=`as-home-page`;
__as1(_, 'HomePage', HomePage);
if(!window.customElements.get('as-home-page')){window.customElements.define('as-home-page', HomePage);Aventus.WebComponentInstance.registerDefinition(HomePage);}

App.Http.Controllers.Template.Search.TemplateSearchController=class TemplateSearchController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/template/search`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.Template.Search.TemplateSearchController.Namespace=`AventusStore.App.Http.Controllers.Template.Search`;
__as1(_.App.Http.Controllers.Template.Search, 'TemplateSearchController', App.Http.Controllers.Template.Search.TemplateSearchController);

App.Http.Controllers.Template.Search.Error=class Error extends AventusPhp.AventusError {
    static get Fullname() { return "App.Http.Controllers.Template.Search.Error"; }
}
App.Http.Controllers.Template.Search.Error.Namespace=`AventusStore.App.Http.Controllers.Template.Search`;
App.Http.Controllers.Template.Search.Error.$schema={...(AventusPhp.AventusError?.$schema ?? {}), };
Aventus.Converter.register(App.Http.Controllers.Template.Search.Error.Fullname, App.Http.Controllers.Template.Search.Error);
__as1(_.App.Http.Controllers.Template.Search, 'Error', App.Http.Controllers.Template.Search.Error);

App.Http.Controllers.User.Current.UserCurrentController=class UserCurrentController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request() {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/user/current`, Aventus.HttpMethod.GET);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.User.Current.UserCurrentController.Namespace=`AventusStore.App.Http.Controllers.User.Current`;
__as1(_.App.Http.Controllers.User.Current, 'UserCurrentController', App.Http.Controllers.User.Current.UserCurrentController);

App.Http.Controllers.User.EditBio.UserEditBioController=class UserEditBioController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/user/edit_bio`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.User.EditBio.UserEditBioController.Namespace=`AventusStore.App.Http.Controllers.User.EditBio`;
__as1(_.App.Http.Controllers.User.EditBio, 'UserEditBioController', App.Http.Controllers.User.EditBio.UserEditBioController);

App.Http.Controllers.User.EditEmail.UserEditEmailController=class UserEditEmailController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/user/edit_email`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.User.EditEmail.UserEditEmailController.Namespace=`AventusStore.App.Http.Controllers.User.EditEmail`;
__as1(_.App.Http.Controllers.User.EditEmail, 'UserEditEmailController', App.Http.Controllers.User.EditEmail.UserEditEmailController);

App.Http.Controllers.User.EditEmail.Error=class Error extends AventusPhp.AventusError {
    static get Fullname() { return "App.Http.Controllers.User.EditEmail.Error"; }
}
App.Http.Controllers.User.EditEmail.Error.Namespace=`AventusStore.App.Http.Controllers.User.EditEmail`;
App.Http.Controllers.User.EditEmail.Error.$schema={...(AventusPhp.AventusError?.$schema ?? {}), };
Aventus.Converter.register(App.Http.Controllers.User.EditEmail.Error.Fullname, App.Http.Controllers.User.EditEmail.Error);
__as1(_.App.Http.Controllers.User.EditEmail, 'Error', App.Http.Controllers.User.EditEmail.Error);

App.Http.Controllers.User.EditPicture.UserEditPictureController=class UserEditPictureController extends Aventus.HttpRoute {
    constructor(router) {
        super(router);
        this.request = this.request.bind(this);
    }
    async request(body) {
        const request = new Aventus.HttpRequest(`${this.getPrefix()}/api/user/edit_picture`, Aventus.HttpMethod.POST);
        request.setBody(body);
        return await request.queryJSON(this.router);
    }
}
App.Http.Controllers.User.EditPicture.UserEditPictureController.Namespace=`AventusStore.App.Http.Controllers.User.EditPicture`;
__as1(_.App.Http.Controllers.User.EditPicture, 'UserEditPictureController', App.Http.Controllers.User.EditPicture.UserEditPictureController);

App.Models.OrganizationUser=class OrganizationUser extends Aventus.Data {
    static get Fullname() { return "App.Models.OrganizationUser"; }
    id;
    user_id;
    user;
    organization_id;
    organization;
    role_id;
    role;
}
App.Models.OrganizationUser.Namespace=`AventusStore.App.Models`;
App.Models.OrganizationUser.$schema={...(Aventus.Data?.$schema ?? {}), "id":"number","user_id":"number","user":"AventusStore.App.Models.User","organization_id":"number","organization":"AventusStore.App.Models.Organization","role_id":"number","role":"AventusStore.App.Models.Role"};
Aventus.Converter.register(App.Models.OrganizationUser.Fullname, App.Models.OrganizationUser);
__as1(_.App.Models, 'OrganizationUser', App.Models.OrganizationUser);

App.Models.TemplateTag=class TemplateTag extends Aventus.Data {
    static get Fullname() { return "App.Models.TemplateTag"; }
    template_id;
    tag_id;
    tag;
    template;
}
App.Models.TemplateTag.Namespace=`AventusStore.App.Models`;
App.Models.TemplateTag.$schema={...(Aventus.Data?.$schema ?? {}), "template_id":"number","tag_id":"number","tag":"AventusStore.App.Models.Tag","template":"AventusStore.App.Models.Template"};
Aventus.Converter.register(App.Models.TemplateTag.Fullname, App.Models.TemplateTag);
__as1(_.App.Models, 'TemplateTag', App.Models.TemplateTag);

App.Models.Template=class Template extends Aventus.Data {
    static get Fullname() { return "App.Models.Template"; }
    id;
    name;
    description;
    readme;
    version;
    repos = undefined;
    doc = undefined;
    downloads;
    is_project;
    user_id = undefined;
    user = undefined;
    organization_id = undefined;
    organization = undefined;
    release_date;
    tags;
}
App.Models.Template.Namespace=`AventusStore.App.Models`;
App.Models.Template.$schema={...(Aventus.Data?.$schema ?? {}), "id":"number","name":"string","description":"string","readme":"string","version":"string","repos":"string","doc":"string","downloads":"number","is_project":"boolean","user_id":"number","user":"AventusStore.App.Models.User","organization_id":"number","organization":"AventusStore.App.Models.Organization","release_date":"Date","tags":"AventusStore.App.Models.TemplateTag[]"};
Aventus.Converter.register(App.Models.Template.Fullname, App.Models.Template);
__as1(_.App.Models, 'Template', App.Models.Template);

App.Models.TemplateDownload=class TemplateDownload extends Aventus.Data {
    static get Fullname() { return "App.Models.TemplateDownload"; }
    template_id;
    version;
    date;
    downloads;
    template;
}
App.Models.TemplateDownload.Namespace=`AventusStore.App.Models`;
App.Models.TemplateDownload.$schema={...(Aventus.Data?.$schema ?? {}), "template_id":"number","version":"string","date":"Date","downloads":"number","template":"AventusStore.App.Models.Template"};
Aventus.Converter.register(App.Models.TemplateDownload.Fullname, App.Models.TemplateDownload);
__as1(_.App.Models, 'TemplateDownload', App.Models.TemplateDownload);

App.Models.Organization=class Organization extends Aventus.Data {
    static get Fullname() { return "App.Models.Organization"; }
    id;
    name;
    bio = undefined;
    picture = undefined;
    users;
    packages;
    templates;
}
App.Models.Organization.Namespace=`AventusStore.App.Models`;
App.Models.Organization.$schema={...(Aventus.Data?.$schema ?? {}), "id":"number","name":"string","bio":"string","picture":"AventusStore.App.Models.OrganizationPicture","users":"AventusStore.App.Models.OrganizationUser[]","packages":"AventusStore.App.Models.Package[]","templates":"AventusStore.App.Models.Template[]"};
Aventus.Converter.register(App.Models.Organization.Fullname, App.Models.Organization);
__as1(_.App.Models, 'Organization', App.Models.Organization);

App.Models.Package=class Package extends Aventus.Data {
    static get Fullname() { return "App.Models.Package"; }
    id;
    name;
    description;
    readme;
    version;
    repos = undefined;
    doc = undefined;
    downloads;
    user_id = undefined;
    user = undefined;
    organization_id = undefined;
    organization = undefined;
    release_date;
    tags;
}
App.Models.Package.Namespace=`AventusStore.App.Models`;
App.Models.Package.$schema={...(Aventus.Data?.$schema ?? {}), "id":"number","name":"string","description":"string","readme":"string","version":"string","repos":"string","doc":"string","downloads":"number","user_id":"number","user":"AventusStore.App.Models.User","organization_id":"number","organization":"AventusStore.App.Models.Organization","release_date":"Date","tags":"AventusStore.App.Models.PackageTag[]"};
Aventus.Converter.register(App.Models.Package.Fullname, App.Models.Package);
__as1(_.App.Models, 'Package', App.Models.Package);

App.Models.PackageDownload=class PackageDownload extends Aventus.Data {
    static get Fullname() { return "App.Models.PackageDownload"; }
    package_id;
    version;
    date;
    downloads;
    package;
}
App.Models.PackageDownload.Namespace=`AventusStore.App.Models`;
App.Models.PackageDownload.$schema={...(Aventus.Data?.$schema ?? {}), "package_id":"number","version":"string","date":"Date","downloads":"number","package":"AventusStore.App.Models.Package"};
Aventus.Converter.register(App.Models.PackageDownload.Fullname, App.Models.PackageDownload);
__as1(_.App.Models, 'PackageDownload', App.Models.PackageDownload);

App.Models.User=class User extends Aventus.Data {
    static get Fullname() { return "App.Models.User"; }
    id;
    username;
    email;
    bio = undefined;
    password;
    verified;
    picture = undefined;
    token_action;
    created_date;
    packages;
    templates;
    static _current = null;
    static _current_id = null;
}
App.Models.User.Namespace=`AventusStore.App.Models`;
App.Models.User.$schema={...(Aventus.Data?.$schema ?? {}), "id":"number","username":"string","email":"string","bio":"string","password":"string","verified":"boolean","picture":"AventusStore.App.Models.UserPicture","token_action":"string","created_date":"Date","packages":"AventusStore.App.Models.Package[]","templates":"AventusStore.App.Models.Template[]"};
Aventus.Converter.register(App.Models.User.Fullname, App.Models.User);
__as1(_.App.Models, 'User', App.Models.User);

App.Http.Resources.Web.IndexResource=class IndexResource {
    static get Fullname() { return "App.Http.Resources.Web.IndexResource"; }
    user = undefined;
}
App.Http.Resources.Web.IndexResource.Namespace=`AventusStore.App.Http.Resources.Web`;
App.Http.Resources.Web.IndexResource.$schema={"user":"AventusStore.App.Models.User"};
Aventus.Converter.register(App.Http.Resources.Web.IndexResource.Fullname, App.Http.Resources.Web.IndexResource);
__as1(_.App.Http.Resources.Web, 'IndexResource', App.Http.Resources.Web.IndexResource);

const Toast = class Toast extends Aventus.Toast.ToastElement {
    get 'type'() { return this.getStringAttr('type') }
    set 'type'(val) { this.setStringAttr('type', val) }get 'closing'() { return this.getBoolAttr('closing') }
    set 'closing'(val) { this.setBoolAttr('closing', val) }    get 'toastTitle'() {
						return this.__watch["toastTitle"];
					}
					set 'toastTitle'(val) {
						this.__watch["toastTitle"] = val;
					}get 'toastMessage'() {
						return this.__watch["toastMessage"];
					}
					set 'toastMessage'(val) {
						this.__watch["toastMessage"] = val;
					}    icon;
    __registerWatchesActions() {
    this.__addWatchesActions("toastTitle");this.__addWatchesActions("toastMessage");    super.__registerWatchesActions();
}
    static __style = `:host{background-color:var(--bg-surface);border:1px solid var(--border);border-radius:.5rem;box-shadow:0 25px 50px rgba(0,0,0,.25);max-width:24rem;overflow:hidden;pointer-events:auto;transition:top .2s linear,opacity .2s linear,visibility .2s linear;width:100%}:host .toast-content{padding:1rem}:host .toast-flex{align-items:flex-start;display:flex}:host .toast-icon-wrapper{flex-shrink:0}:host .toast-icon{align-items:center;display:flex;font-size:1.5rem;height:1.5rem;justify-content:center;width:1.5rem}:host .toast-message-wrapper{flex:1;margin-left:.75rem;padding-top:.125rem}:host .toast-title{color:var(--color-white);font-size:.875rem;font-weight:500;margin:0}:host .toast-message{color:var(--color-light);font-size:.875rem;margin-top:.25rem}:host .toast-close-wrapper{flex-shrink:0;margin-left:1rem}:host .toast-close-wrapper .sr-only{border-width:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}:host .toast-close-wrapper .toast-close-button{background-color:var(--color-slate-800);border:none;border-radius:.375rem;color:var(--text-muted);cursor:pointer;display:inline-flex;margin-right:-0.25rem;margin-top:-0.25rem;padding:.25rem;transition:color .2s}:host .toast-close-wrapper .toast-close-button:hover{color:var(--hover-light)}:host .toast-close-wrapper .toast-close-button:focus{box-shadow:0 0 0 2px var(--color-accent);outline:none}:host .toast-close-wrapper .toast-close-icon{align-items:center;display:flex;font-size:1.25rem;height:1.25rem;justify-content:center;width:1.25rem}:host([closing]){opacity:0;visibility:hidden}:host([type=success]) .toast-icon{color:var(--color-success)}:host([type=info]) .toast-icon{color:var(--color-info)}:host([type=warning]) .toast-icon{color:var(--color-warning)}:host([type=danger]) .toast-icon{color:var(--color-danger)}`;
    __getStatic() {
        return Toast;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Toast.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="toast-content">
    <div class="toast-flex">
        <div class="toast-icon-wrapper">
            <mi-icon class="toast-icon" aria-hidden="true" _id="toast_0"></mi-icon>
        </div>
        <div class="toast-message-wrapper">
            <p class="toast-title" _id="toast_1"></p>
            <template _id="toast_2"></template>
        </div>
        <div class="toast-close-wrapper">
            <button class="toast-close-button" _id="toast_4">
                <span class="sr-only">Close</span>
                <mi-icon icon="close" class="toast-close-icon"></mi-icon>
            </button>
        </div>
    </div>
</div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "toast_0°icon": {
      "fct": (c) => `${c.print(c.comp.__7d0e796e41a97c78b09f71a4664c5f80method1())}`,
      "once": true
    },
    "toast_1°@HTML": {
      "fct": (c) => `${c.print(c.comp.__7d0e796e41a97c78b09f71a4664c5f80method2())}`,
      "once": true
    }
  },
  "events": [
    {
      "eventName": "click",
      "id": "toast_4",
      "fct": (e, c) => c.comp.close(e)
    }
  ]
});const templ0 = new Aventus.Template(this);templ0.setTemplate(`
                <p class="toast-message" _id="toast_3"></p>
            `);templ0.setActions({
  "content": {
    "toast_3°@HTML": {
      "fct": (c) => `${c.print(c.comp.__7d0e796e41a97c78b09f71a4664c5f80method3())}`,
      "once": true
    }
  }
});this.__getStatic().__template.addIf({
                    anchorId: 'toast_2',
                    parts: [{once: true,
                    condition: (c) => c.comp.__7d0e796e41a97c78b09f71a4664c5f80method0(),
                    template: templ0
                }]
            }); }
    getClassName() {
        return "Toast";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('type')){ this['type'] = "warning"; }if(!this.hasAttribute('closing')) { this.attributeChangedCallback('closing', false, false); } }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["toastTitle"] = "";w["toastMessage"] = ""; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('type');this.__upgradeProperty('closing');this.__correctGetter('toastTitle');this.__correctGetter('toastMessage'); }
    __listBoolProps() { return ["closing"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    close() {
        if (this.onHideCallback) {
            this.closing = true;
            this.is_active = false;
            this.onHideCallback(false);
            Aventus.sleep(300).then(() => {
                this.remove();
            });
        }
    }
    setOptions(options) {
        if (options.type != undefined)
            this.type = options.type;
        if (options.icon != undefined)
            this.icon = options.icon;
        if (options.title != undefined)
            this.toastTitle = options.title;
        if (options.message != undefined)
            this.toastMessage = options.message;
    }
    getIcon() {
        if (this.icon !== undefined)
            return this.icon;
        if (this.type == "danger")
            return 'error';
        if (this.type == "info")
            return 'info';
        if (this.type == "success")
            return 'check';
        if (this.type == "warning")
            return 'warning';
        return 'error';
    }
    __7d0e796e41a97c78b09f71a4664c5f80method1() {
        return this.getIcon();
    }
    __7d0e796e41a97c78b09f71a4664c5f80method2() {
        return this.toastTitle;
    }
    __7d0e796e41a97c78b09f71a4664c5f80method3() {
        return this.toastMessage;
    }
    __7d0e796e41a97c78b09f71a4664c5f80method0() {
        return this.toastMessage;
    }
    static add(options) {
        return super.add(options);
    }
}
Toast.Namespace=`AventusStore`;
Toast.Tag=`as-toast`;
__as1(_, 'Toast', Toast);
if(!window.customElements.get('as-toast')){window.customElements.define('as-toast', Toast);Aventus.WebComponentInstance.registerDefinition(Toast);}

const SignupPage = class SignupPage extends Aventus.Navigation.PageFormRoute {
    static __style = `:host{flex-direction:column;justify-content:center;padding:3rem 1rem}:host .signup-header{margin:0 auto;max-width:28rem;text-align:center;width:100%}:host .signup-title{color:var(--text-color);font-size:1.875rem;font-weight:700;margin-top:1.5rem}:host .signup-subtext{color:var(--text-muted);font-size:.875rem;margin-top:.5rem}:host .link-accent{color:var(--color-accent);font-weight:500;text-decoration:none}:host .link-accent:hover{color:var(--hover-accent)}:host .signup-form-wrapper{margin-left:auto;margin-right:auto;margin-top:2rem;max-width:28rem;width:100%}:host .signup-form-card{background-color:var(--card-bg);border:1px solid var(--card-border);border-radius:.5rem;box-shadow:0 4px 12px rgba(0,0,0,.25);padding:2rem 1rem}:host .signup-form{display:flex;flex-direction:column;gap:1.5rem}:host .form-group{display:flex;flex-direction:column}:host .form-label{color:var(--text-muted);font-size:.875rem;font-weight:500;margin-bottom:.25rem}:host .form-field{margin-top:.25rem}:host .btn-full{width:100%}:host([visible]){display:flex}@media(min-width: 640px){:host .signup-form-card{padding:2rem 2.5rem}}`;
    __getStatic() {
        return SignupPage;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(SignupPage.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="signup-header">
    <h2 class="signup-title">Create a new account</h2>
    <p class="signup-subtext">
        <span>Or&nbsp;</span>
        <av-router-link state="/login" class="link-accent">
            sign in to your existing account
        </av-router-link>
    </p>
</div><div class="signup-form-wrapper">
    <div class="signup-form-card">
        <div class="signup-form">
            <as-input id="username" label="Username" _id="signuppage_0"></as-input>
            <as-input id="email" label="Email" _id="signuppage_1"></as-input>
            <as-input id="password" label="Password" type="password" _id="signuppage_2"></as-input>
            <as-button type="submit" class="btn-full">Create account</as-button>
        </div>
    </div>
</div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "injection": [
    {
      "id": "signuppage_0",
      "injectionName": "form",
      "inject": (c) => c.comp.__97e8b20e4871beaccfd7ae6d7f572c4bmethod0(),
      "once": true
    },
    {
      "id": "signuppage_1",
      "injectionName": "form",
      "inject": (c) => c.comp.__97e8b20e4871beaccfd7ae6d7f572c4bmethod1(),
      "once": true
    },
    {
      "id": "signuppage_2",
      "injectionName": "form",
      "inject": (c) => c.comp.__97e8b20e4871beaccfd7ae6d7f572c4bmethod2(),
      "once": true
    }
  ]
}); }
    getClassName() {
        return "SignupPage";
    }
    formSchema() {
        return {
            email: Aventus.Form.Validators.Required,
            password: Aventus.Form.Validators.Required,
            username: Aventus.Form.Validators.Required
        };
    }
    route() {
        return App.Http.Controllers.Auth.Signup.AuthSignupController;
    }
    onResult(result) {
        if (result?.result) {
            this.form.item = {
                email: "",
                password: "",
                username: ""
            };
            Toast.add({
                type: "success",
                title: "Account created",
                message: "Check your mail to validate your account"
            });
            this.router?.navigate("/login");
        }
    }
    configure() {
        return {};
    }
    isAllowed(state) {
        if (Main.user) {
            return "/";
        }
        return true;
    }
    __97e8b20e4871beaccfd7ae6d7f572c4bmethod0() {
        return this.form.parts.username;
    }
    __97e8b20e4871beaccfd7ae6d7f572c4bmethod1() {
        return this.form.parts.email;
    }
    __97e8b20e4871beaccfd7ae6d7f572c4bmethod2() {
        return this.form.parts.password;
    }
}
SignupPage.Namespace=`AventusStore`;
SignupPage.Tag=`as-signup-page`;
__as1(_, 'SignupPage', SignupPage);
if(!window.customElements.get('as-signup-page')){window.customElements.define('as-signup-page', SignupPage);Aventus.WebComponentInstance.registerDefinition(SignupPage);}

const Modal = class Modal extends Aventus.Modal.ModalElement {
    static __style = `:host{align-items:center;background:var(--color-black-opacity);display:flex;inset:0;justify-content:center;position:fixed;z-index:60}:host .modal{background-color:var(--bg-surface);border:1px solid var(--border);border-radius:.75rem;box-shadow:0 25px 50px rgba(0,0,0,.25);max-width:32rem;padding:1.5rem;position:relative;text-align:left;transform:translateZ(0);transition:all .2s ease-in-out;width:100%}:host .modal-header{align-items:flex-start;display:flex;justify-content:space-between}:host .modal-title{color:var(--color-white);font-size:1.25rem;font-weight:600;line-height:1.5rem;margin:0}:host .close-button{margin-top:-0.75rem;margin-right:-0.75rem}:host .close-button:hover{background:var(--color-secondary);color:var(--color-white)}:host .close-button:focus{box-shadow:0 0 0 2px var(--color-accent);outline:none}:host .icon{height:1.5rem;width:1.5rem;font-size:1.5rem;display:flex}:host .modal-body{color:var(--color-light);margin-top:1rem}:host .modal-body ::slotted(p){margin-bottom:1rem}`;
    constructor() {
        super();
        if (this.constructor == Modal) {
            throw "can't instanciate an abstract class";
        }
    }
    __getStatic() {
        return Modal;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Modal.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        slots: { 'default':`<slot>
    </slot>` }, 
        blocks: { 'default':`<div class="modal-header">
    <h3 class="modal-title" id="modal-title" _id="modal_0"></h3>
    <template _id="modal_1"></template>
</div><div class="modal-body">
    <slot>
    </slot>
</div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "modal_0°@HTML": {
      "fct": (c) => `${c.print(c.comp.__00bfa3bc03a20d8089bc8969af170611method1())}`,
      "once": true
    }
  }
});const templ0 = new Aventus.Template(this);templ0.setTemplate(`
        <as-button type="button" variant="ghost" class="close-button" aria-label="Close" _id="modal_2">
            <mi-icon icon="close" class="close"></mi-icon>
        </as-button>
    `);templ0.setActions({
  "pressEvents": [
    {
      "id": "modal_2",
      "onPress": (e, pressInstance, c) => { c.comp.reject(e, pressInstance); }
    }
  ]
});this.__getStatic().__template.addIf({
                    anchorId: 'modal_1',
                    parts: [{once: true,
                    condition: (c) => c.comp.__00bfa3bc03a20d8089bc8969af170611method0(),
                    template: templ0
                }]
            }); }
    getClassName() {
        return "Modal";
    }
    __00bfa3bc03a20d8089bc8969af170611method1() {
        return this.options.title;
    }
    __00bfa3bc03a20d8089bc8969af170611method0() {
        return !this.options.noClose;
    }
}
Modal.Namespace=`AventusStore`;
__as1(_, 'Modal', Modal);

const ModalCreateOrg = class ModalCreateOrg extends Modal {
    static get observedAttributes() {return ["uri"].concat(super.observedAttributes).filter((v, i, a) => a.indexOf(v) === i);}
    get 'uri'() { return this.getStringProp('uri') }
    set 'uri'(val) { this.setStringAttr('uri', val) }    form;
    static __style = `:host .modal{background-color:var(--bg-color);max-width:800px}:host .modal .modal-body{margin-top:2rem}:host .modal av-row{--col-gap: 16px}:host .modal as-input{width:100%}:host .modal .avatar{align-items:center;border:2px solid var(--border);border-radius:9999px;cursor:pointer;display:flex;height:8rem;justify-content:center;overflow:hidden;position:relative;transition:border .2s ease-in-out;width:8rem}:host .modal .avatar .bg{width:100%;height:100%;background-position:center center;background-repeat:no-repeat;background-size:cover}:host .modal .avatar mi-icon{color:#fff;font-size:32px}:host .modal .avatar input{display:none}:host .modal .info{display:flex;flex-direction:column;gap:16px}:host .modal .btns{align-items:center;display:flex;gap:.5rem;justify-content:flex-end;margin-top:.5rem;width:100%}`;
    constructor() {
        super();
        this.form = Aventus.Form.Form.create({
            bio: {},
            name: Aventus.Form.Validators.Required,
            picture: {}
        });
    }
    __getStatic() {
        return ModalCreateOrg;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(ModalCreateOrg.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<av-row>
    <av-col size="12" size_md="6" center>
        <div class="avatar" _id="modalcreateorg_0">
            <template _id="modalcreateorg_1"></template>
            <input type="file" accept="image/png, image/gif, image/jpeg, image/svg+xml" _id="modalcreateorg_3" />
        </div>
    </av-col>
    <av-col size="12" size_md="6" class="info">
        <as-input label="Name" _id="modalcreateorg_4"></as-input>
        <as-input label="Bio" _id="modalcreateorg_5"></as-input>
    </av-col>
    <div class="btns">
        <as-button variant="secondary" _id="modalcreateorg_6">Cancel</as-button>
        <as-button _id="modalcreateorg_7">Save</as-button>
    </div>
</av-row>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "elements": [
    {
      "name": "uploadPictrueEl",
      "ids": [
        "modalcreateorg_3"
      ]
    }
  ],
  "injection": [
    {
      "id": "modalcreateorg_4",
      "injectionName": "form",
      "inject": (c) => c.comp.__1866c25329103211c52baff0e955ddc8method2(),
      "once": true
    },
    {
      "id": "modalcreateorg_5",
      "injectionName": "form",
      "inject": (c) => c.comp.__1866c25329103211c52baff0e955ddc8method3(),
      "once": true
    }
  ],
  "events": [
    {
      "eventName": "change",
      "id": "modalcreateorg_3",
      "fct": (e, c) => c.comp.uploadFile(e)
    }
  ],
  "pressEvents": [
    {
      "id": "modalcreateorg_0",
      "onPress": (e, pressInstance, c) => { c.comp.editPicture(e, pressInstance); }
    },
    {
      "id": "modalcreateorg_6",
      "onPress": (e, pressInstance, c) => { c.comp.cancel(e, pressInstance); }
    },
    {
      "id": "modalcreateorg_7",
      "onPress": (e, pressInstance, c) => { c.comp.save(e, pressInstance); }
    }
  ]
});const templ0 = new Aventus.Template(this);templ0.setTemplate(`
                <div class="bg" _id="modalcreateorg_2"></div>
            `);templ0.setActions({
  "content": {
    "modalcreateorg_2°style": {
      "fct": (c) => `background-image:url('${c.print(c.comp.__1866c25329103211c52baff0e955ddc8method1())}')`,
      "once": true
    }
  }
});const templ1 = new Aventus.Template(this);templ1.setTemplate(`
                <mi-icon icon="photo_camera"></mi-icon>
            `);this.__getStatic().__template.addIf({
                    anchorId: 'modalcreateorg_1',
                    parts: [{once: true,
                    condition: (c) => c.comp.__1866c25329103211c52baff0e955ddc8method0(),
                    template: templ0
                },{once: true,
                    condition: (c) => true,
                    template: templ1
                }]
            }); }
    getClassName() {
        return "ModalCreateOrg";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('uri')){ this['uri'] = undefined; } }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('uri'); }
    configure() {
        return {
            title: "Organization creation",
            closeWithClick: false,
            closeWithEsc: true,
        };
    }
    async uploadFile() {
        if (this.uploadPictrueEl.files && this.uploadPictrueEl.files.length > 0) {
            this.uri = URL.createObjectURL(this.uploadPictrueEl.files[0]);
            this.form.item.picture = this.uploadPictrueEl.files[0];
        }
    }
    editPicture() {
        this.uploadPictrueEl.click();
    }
    cancel() {
        this.resolve(undefined);
    }
    async save() {
        const result = await this.form.submit(new App.Http.Controllers.Org.Create.OrgCreateController().request);
        if (result?.result) {
            this.resolve(result.result);
        }
    }
    __1866c25329103211c52baff0e955ddc8method1() {
        return this.uri;
    }
    __1866c25329103211c52baff0e955ddc8method0() {
        return this.uri;
    }
    __1866c25329103211c52baff0e955ddc8method2() {
        return this.form.parts.name;
    }
    __1866c25329103211c52baff0e955ddc8method3() {
        return this.form.parts.bio;
    }
}
ModalCreateOrg.Namespace=`AventusStore`;
ModalCreateOrg.Tag=`as-modal-create-org`;
__as1(_, 'ModalCreateOrg', ModalCreateOrg);
if(!window.customElements.get('as-modal-create-org')){window.customElements.define('as-modal-create-org', ModalCreateOrg);Aventus.WebComponentInstance.registerDefinition(ModalCreateOrg);}

const ModalEditBio = class ModalEditBio extends Modal {
    get 'value'() {
						return this.__watch["value"];
					}
					set 'value'(val) {
						this.__watch["value"] = val;
					}    __registerWatchesActions() {
    this.__addWatchesActions("value");    super.__registerWatchesActions();
}
    static __style = `:host .footer{display:flex;justify-content:flex-end;margin-top:1rem;gap:.5rem}`;
    __getStatic() {
        return ModalEditBio;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(ModalEditBio.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<as-input label="Description" _id="modaleditbio_0"></as-input><div class="footer">
    <as-button variant="secondary" _id="modaleditbio_1">Cancel</as-button>
    <as-button _id="modaleditbio_2">Save</as-button>
</div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "bindings": [
    {
      "id": "modaleditbio_0",
      "injectionName": "value",
      "eventNames": [
        "onChange"
      ],
      "inject": (c) => c.comp.__539b4394c72ee2ff84aa0d4262a8d476method0(),
      "extract": (c, v) => c.comp.__539b4394c72ee2ff84aa0d4262a8d476method1(v),
      "once": true,
      "isCallback": true
    }
  ],
  "pressEvents": [
    {
      "id": "modaleditbio_1",
      "onPress": (e, pressInstance, c) => { c.comp.reject(e, pressInstance); }
    },
    {
      "id": "modaleditbio_2",
      "onPress": (e, pressInstance, c) => { c.comp.save(e, pressInstance); }
    }
  ]
}); }
    getClassName() {
        return "ModalEditBio";
    }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["value"] = ""; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('value'); }
    save() {
        this.resolve(this.value);
    }
    configure() {
        return {
            title: "Edit your description",
            closeWithClick: false,
            closeWithEsc: true,
            rejectValue: null,
        };
    }
    __539b4394c72ee2ff84aa0d4262a8d476method0() {
        return this.value;
    }
    __539b4394c72ee2ff84aa0d4262a8d476method1(v) {
        if (this) {
            this.value = v;
        }
    }
}
ModalEditBio.Namespace=`AventusStore`;
ModalEditBio.Tag=`as-modal-edit-bio`;
__as1(_, 'ModalEditBio', ModalEditBio);
if(!window.customElements.get('as-modal-edit-bio')){window.customElements.define('as-modal-edit-bio', ModalEditBio);Aventus.WebComponentInstance.registerDefinition(ModalEditBio);}

const OrganizationAdminPage = class OrganizationAdminPage extends Aventus.Navigation.Page {
    get 'activeTab'() {
						return this.__watch["activeTab"];
					}
					set 'activeTab'(val) {
						this.__watch["activeTab"] = val;
					}get 'org'() {
						return this.__watch["org"];
					}
					set 'org'(val) {
						this.__watch["org"] = val;
					}    __registerWatchesActions() {
    this.__addWatchesActions("activeTab");this.__addWatchesActions("org");    super.__registerWatchesActions();
}
    static __style = `:host{margin:0 auto;max-width:80rem;padding:3rem 2rem}:host .profile-header{align-items:center;display:flex;flex-direction:column;gap:1.5rem;text-align:center}:host .profile-header .avatar{border:2px solid var(--border);border-radius:9999px;height:8rem;overflow:hidden;position:relative;transition:border .2s ease-in-out;width:8rem}:host .profile-header .avatar .img{border:2px solid var(--border);border-radius:9999px;font-size:32px}:host .profile-header .avatar .edit{align-items:center;background-color:rgba(0,0,0,.4);color:#fff;cursor:pointer;display:flex;inset:0;justify-content:center;opacity:0;position:absolute;transition:all .2s ease-in-out;visibility:hidden}:host .profile-header .avatar .edit mi-icon{font-size:32px}:host .profile-header .avatar .edit input{display:none}:host .profile-header .avatar:hover{border:2px solid var(--border-hover)}:host .profile-header .avatar:hover .edit{opacity:1;visibility:visible}:host .profile-header .username{color:var(--text-white);font-size:2.25rem;font-weight:bold;margin:0}:host .profile-header .bio{align-items:center;color:var(--text-muted);display:flex;font-size:1.125rem;gap:1rem;margin-top:.5rem}:host .profile-header .bio mi-icon{border-radius:4px;cursor:pointer;font-size:20px;padding:8px}:host .profile-header .bio mi-icon:hover{background-color:#334155}:host .profile-header .bio.no-bio span::after{content:"Short description";font-size:13px;font-style:italic}:host .profile-header .join-date{color:#64748b;font-size:.875rem;margin-top:.5rem}:host .cards-grid{display:grid;gap:2rem;grid-template-columns:1fr;margin-top:2rem}:host .actions{align-items:center;display:flex;justify-content:flex-end;margin-bottom:1rem;margin-top:1rem}:host .list{background-color:var(--card-bg);border:1px solid var(--card-border);border-radius:.5rem;display:flex;flex-direction:column;overflow:hidden;width:100%}:host .list .item{align-items:center;border-top:1px solid var(--card-border);display:flex;gap:16px;height:50px;padding:0 1rem}:host .list .item .role{color:var(--card-border-hover)}:host .list .item:hover{background-color:var(--card-bg-hover)}:host .list av-link:first-child .item{border-top:none}:host .empty-message{color:var(--text-muted);grid-column:span 2;padding:4rem 0;text-align:center}:host .settings-card{max-width:none;width:calc(100% - 32px)}:host .settings-card .settings-card-content{display:flex;flex-direction:column;gap:1.5rem}@media(min-width: 640px){:host .profile-header{flex-direction:row;text-align:left}}@media(min-width: 768px){:host .cards-grid{grid-template-columns:1fr 1fr}}`;
    __getStatic() {
        return OrganizationAdminPage;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(OrganizationAdminPage.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="profile-header">
    <div class="avatar">
        <as-user-img class="img" _id="organizationadminpage_0"></as-user-img>
        <div class="edit" _id="organizationadminpage_1">
            <mi-icon icon="edit"></mi-icon>
            <input type="file" accept="image/png, image/gif, image/jpeg, image/svg+xml" _id="organizationadminpage_2" />
        </div>
    </div>
    <div>
        <h1 class="username" _id="organizationadminpage_3"></h1>
        <p _id="organizationadminpage_4">
            <span _id="organizationadminpage_5"></span>
            <mi-icon icon="edit" _id="organizationadminpage_6"></mi-icon>
        </p>
    </div>
</div><as-tabs>
    <as-tab label="Packages" _id="organizationadminpage_7">
        <div class="cards-grid">
            <template _id="organizationadminpage_8"></template>
        </div>
    </as-tab>
    <as-tab label="Templates" _id="organizationadminpage_10">
        <div class="cards-grid">
            <template _id="organizationadminpage_11"></template>
        </div>
    </as-tab>
</as-tabs>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "elements": [
    {
      "name": "uploadPictrueEl",
      "ids": [
        "organizationadminpage_2"
      ]
    }
  ],
  "content": {
    "organizationadminpage_3°@HTML": {
      "fct": (c) => `${c.print(c.comp.__526760aafbddd811e0afa66bfc91f4bdmethod3())}`,
      "once": true
    },
    "organizationadminpage_4°class": {
      "fct": (c) => `bio ${c.print(c.comp.__526760aafbddd811e0afa66bfc91f4bdmethod4())}`
    },
    "organizationadminpage_5°@HTML": {
      "fct": (c) => `${c.print(c.comp.__526760aafbddd811e0afa66bfc91f4bdmethod5())}`,
      "once": true
    },
    "organizationadminpage_7°count": {
      "fct": (c) => `${c.print(c.comp.__526760aafbddd811e0afa66bfc91f4bdmethod6())}`,
      "once": true
    },
    "organizationadminpage_10°count": {
      "fct": (c) => `${c.print(c.comp.__526760aafbddd811e0afa66bfc91f4bdmethod8())}`,
      "once": true
    }
  },
  "injection": [
    {
      "id": "organizationadminpage_0",
      "injectionName": "user",
      "inject": (c) => c.comp.__526760aafbddd811e0afa66bfc91f4bdmethod2(),
      "once": true
    }
  ],
  "events": [
    {
      "eventName": "change",
      "id": "organizationadminpage_2",
      "fct": (e, c) => c.comp.uploadFile(e)
    }
  ],
  "pressEvents": [
    {
      "id": "organizationadminpage_1",
      "onPress": (e, pressInstance, c) => { c.comp.editPicture(e, pressInstance); }
    },
    {
      "id": "organizationadminpage_6",
      "onPress": (e, pressInstance, c) => { c.comp.editBio(e, pressInstance); }
    }
  ]
});const templ0 = new Aventus.Template(this);templ0.setTemplate(`
                <as-package-card no_owner _id="organizationadminpage_9"></as-package-card>
            `);templ0.setActions({
  "injection": [
    {
      "id": "organizationadminpage_9",
      "injectionName": "package",
      "inject": (c) => c.comp.__526760aafbddd811e0afa66bfc91f4bdmethod7(c.data.p),
      "once": true
    }
  ]
});this.__getStatic().__template.addLoop({
                    anchorId: 'organizationadminpage_8',
                    template: templ0,
                simple:{data: "this.org.packages",item:"p"}});const templ1 = new Aventus.Template(this);templ1.setTemplate(`
                <as-template-card no_owner _id="organizationadminpage_12"></as-template-card>
            `);templ1.setActions({
  "injection": [
    {
      "id": "organizationadminpage_12",
      "injectionName": "template",
      "inject": (c) => c.comp.__526760aafbddd811e0afa66bfc91f4bdmethod9(c.data.p),
      "once": true
    }
  ]
});this.__getStatic().__template.addLoop({
                    anchorId: 'organizationadminpage_11',
                    template: templ1,
                simple:{data: "this.org.templates",item:"p"}}); }
    getClassName() {
        return "OrganizationAdminPage";
    }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["activeTab"] = undefined;w["org"] = undefined; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('activeTab');this.__correctGetter('org'); }
    async isAllowed(state, pattern, router) {
        let slugs = Aventus.Uri.getParams(pattern, state.name);
        if (slugs && slugs['id']) {
            const roleResult = await Aventus.Process.execute(new App.Http.Controllers.Org.Role.OrgRoleController().request(slugs['id']));
            if (roleResult?.role !== App.Enums.RoleEnum.Admin) {
                return '/org/Cobwebsite';
            }
            const result = await Aventus.Process.execute(new App.Http.Controllers.Org.Details.OrgDetailsController().request(slugs['id']));
            if (result) {
                this.org = result;
                return true;
            }
        }
        return '/not_found';
    }
    configure() {
        return {};
    }
    async editBio() {
        let p = new ModalEditBio();
        p.value = this.org.bio ?? '';
        const txt = await p.show();
        if (txt !== null) {
            const ctrl = new App.Http.Controllers.Org.EditBio.OrgEditBioController();
            const bio = !txt ? undefined : txt;
            const result = await Aventus.Process.execute(ctrl.request({ bio, name: this.org.name }));
            if (result) {
                this.org = result;
            }
        }
    }
    editPicture() {
        this.uploadPictrueEl.click();
    }
    async uploadFile() {
        if (this.uploadPictrueEl.files && this.uploadPictrueEl.files.length > 0) {
            const result = await Aventus.Process.execute(new App.Http.Controllers.Org.EditPicture.OrgEditPictureController().request({ file: this.uploadPictrueEl.files[0], name: this.org.name }));
            if (result) {
                this.org = result;
            }
        }
    }
    __526760aafbddd811e0afa66bfc91f4bdmethod3() {
        return this.org.name;
    }
    __526760aafbddd811e0afa66bfc91f4bdmethod4() {
        return this.org.bio ? '' : 'no-bio';
    }
    __526760aafbddd811e0afa66bfc91f4bdmethod5() {
        return this.org.bio;
    }
    __526760aafbddd811e0afa66bfc91f4bdmethod6() {
        return this.org.packages.length;
    }
    __526760aafbddd811e0afa66bfc91f4bdmethod8() {
        return this.org.templates.length;
    }
    __526760aafbddd811e0afa66bfc91f4bdmethod2() {
        return this.org;
    }
    __526760aafbddd811e0afa66bfc91f4bdmethod7(p) {
        return p;
    }
    __526760aafbddd811e0afa66bfc91f4bdmethod9(p) {
        return p;
    }
}
OrganizationAdminPage.Namespace=`AventusStore`;
OrganizationAdminPage.Tag=`as-organization-admin-page`;
__as1(_, 'OrganizationAdminPage', OrganizationAdminPage);
if(!window.customElements.get('as-organization-admin-page')){window.customElements.define('as-organization-admin-page', OrganizationAdminPage);Aventus.WebComponentInstance.registerDefinition(OrganizationAdminPage);}

const EditMarkdownModal = class EditMarkdownModal extends Modal {
    get 'content'() {
						return this.__signals["content"].value;
					}
					set 'content'(val) {
						this.__signals["content"].value = val;
					}    __registerSignalsActions() { this.__signals["content"] = null; super.__registerSignalsActions();  }
    static __style = `:host .modal{background-color:var(--bg-color);height:100%;max-height:90%;max-width:90%}:host .modal .modal-body{display:flex;flex-direction:column;height:calc(100% - 30px);min-height:0}:host .modal .modal-body .body{display:flex;flex-grow:1;gap:12px;width:100%;height:calc(100% - 35px)}:host .modal .modal-body .body .left,:host .modal .modal-body .body .right{display:flex;flex-direction:column;height:100%;min-height:0;width:calc(50% - 6px)}:host .modal .modal-body .body .left .label,:host .modal .modal-body .body .right .label{flex-shrink:0;margin-bottom:6px}:host .modal .modal-body .body .edit{background-color:var(--input-bg);border:1px solid var(--input-border);border-radius:.375rem;color:var(--input-text);display:flex;flex-grow:1;font-size:.875rem;height:100%;padding:.5rem .75rem;resize:none;width:100%}:host .modal .modal-body .body .render{background-color:#1e293b;border:1px solid var(--color-secondary);border-radius:.5rem;color:var(--text-color);flex-grow:1;font-family:monospace;font-size:.875rem;height:100%;overflow:auto;padding:1rem;position:relative;width:100%}:host .modal .modal-body .footer{align-items:center;display:flex;flex-shrink:0;gap:12px;justify-content:flex-end;margin-top:16px}`;
    __getStatic() {
        return EditMarkdownModal;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(EditMarkdownModal.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="body">
    <div class="left">
        <div class="label">Edit</div>
        <textarea class="edit" _id="editmarkdownmodal_0"></textarea>
    </div>
    <div class="right">
        <div class="label">Render</div>
        <div class="render" _id="editmarkdownmodal_1"></div>
    </div>
</div><div class="footer">
    <as-button variant="secondary" _id="editmarkdownmodal_2">Cancel</as-button>
    <as-button _id="editmarkdownmodal_3">Save</as-button>
</div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "editmarkdownmodal_1°@HTML": {
      "fct": (c) => `${c.print(c.comp.__1aaaa5049af509b64054cba1c382e132method2())}`,
      "once": true
    }
  },
  "bindings": [
    {
      "id": "editmarkdownmodal_0",
      "injectionName": "value",
      "eventNames": [
        "change",
        "input"
      ],
      "inject": (c) => c.comp.__1aaaa5049af509b64054cba1c382e132method0(),
      "extract": (c, v) => c.comp.__1aaaa5049af509b64054cba1c382e132method1(v),
      "once": true
    }
  ],
  "pressEvents": [
    {
      "id": "editmarkdownmodal_2",
      "onPress": (e, pressInstance, c) => { c.comp.reject(e, pressInstance); }
    },
    {
      "id": "editmarkdownmodal_3",
      "onPress": (e, pressInstance, c) => { c.comp.save(e, pressInstance); }
    }
  ]
}); }
    getClassName() {
        return "EditMarkdownModal";
    }
    __defaultValuesSignal(s) { super.__defaultValuesSignal(s); s["content"] = ""; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('content'); }
    configure() {
        return {
            title: "Edit markdown",
            closeWithClick: false,
            closeWithEsc: false,
            rejectValue: null,
        };
    }
    renderContent() {
        let converter = new npmCompilation['115c87258963fd94d34e6a96a9c4d27d'].Converter({});
        return converter.makeHtml(this.content);
    }
    save() {
        this.resolve(this.content);
    }
    __1aaaa5049af509b64054cba1c382e132method2() {
        return this.renderContent();
    }
    __1aaaa5049af509b64054cba1c382e132method0() {
        return this.content;
    }
    __1aaaa5049af509b64054cba1c382e132method1(v) {
        if (this) {
            this.content = v;
        }
    }
}
EditMarkdownModal.Namespace=`AventusStore`;
EditMarkdownModal.Tag=`as-edit-markdown-modal`;
__as1(_, 'EditMarkdownModal', EditMarkdownModal);
if(!window.customElements.get('as-edit-markdown-modal')){window.customElements.define('as-edit-markdown-modal', EditMarkdownModal);Aventus.WebComponentInstance.registerDefinition(EditMarkdownModal);}

const Confirm = class Confirm extends Modal {
    static __style = `:host .footer{display:flex;justify-content:flex-end;margin-top:1rem;gap:.5rem}`;
    __getStatic() {
        return Confirm;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Confirm.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="content" _id="confirm_0"></div><div class="footer">
    <as-button variant="secondary" _id="confirm_1"></as-button>
    <as-button _id="confirm_2"></as-button>
</div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "confirm_0°@HTML": {
      "fct": (c) => `${c.print(c.comp.__876296062cc683db1f5b0238841ea050method0())}`,
      "once": true
    },
    "confirm_1°@HTML": {
      "fct": (c) => `${c.print(c.comp.__876296062cc683db1f5b0238841ea050method1())}`,
      "once": true
    },
    "confirm_2°@HTML": {
      "fct": (c) => `${c.print(c.comp.__876296062cc683db1f5b0238841ea050method2())}`,
      "once": true
    }
  },
  "pressEvents": [
    {
      "id": "confirm_1",
      "onPress": (e, pressInstance, c) => { c.comp.no(e, pressInstance); }
    },
    {
      "id": "confirm_2",
      "onPress": (e, pressInstance, c) => { c.comp.yes(e, pressInstance); }
    }
  ]
}); }
    getClassName() {
        return "Confirm";
    }
    configure() {
        return {
            title: "I'm a confirm popup",
            content: "lorem",
            btnYesTxt: "Yes",
            btnNoTxt: "No",
            noClose: true
        };
    }
    no() {
        this.resolve(false);
    }
    yes() {
        this.resolve(true);
    }
    __876296062cc683db1f5b0238841ea050method0() {
        return this.options.content;
    }
    __876296062cc683db1f5b0238841ea050method1() {
        return this.options.btnNoTxt;
    }
    __876296062cc683db1f5b0238841ea050method2() {
        return this.options.btnYesTxt;
    }
    static async open(options) {
        const popup = new Confirm();
        popup.options = { ...popup.options, ...options };
        return await Confirm._show(popup);
    }
}
Confirm.Namespace=`AventusStore`;
Confirm.Tag=`as-confirm`;
__as1(_, 'Confirm', Confirm);
if(!window.customElements.get('as-confirm')){window.customElements.define('as-confirm', Confirm);Aventus.WebComponentInstance.registerDefinition(Confirm);}

const TemplateDetailsPage = class TemplateDetailsPage extends Aventus.Navigation.Page {
    get 'no_right'() { return this.getBoolAttr('no_right') }
    set 'no_right'(val) { this.setBoolAttr('no_right', val) }get 'admin'() { return this.getBoolAttr('admin') }
    set 'admin'(val) { this.setBoolAttr('admin', val) }    get 'template'() {
						return this.__watch["template"];
					}
					set 'template'(val) {
						this.__watch["template"] = val;
					}    __registerWatchesActions() {
    this.__addWatchesActions("template");    super.__registerWatchesActions();
}
    static __style = `:host{margin:0 auto;max-width:80rem;padding:3rem 2rem}:host .template-header{border-bottom:1px solid var(--color-secondary);display:flex;gap:16px;justify-content:stretch;padding-bottom:2rem}:host .template-header .template-left{flex-grow:1}:host .template-header .template-left .template-title{color:var(--text-color);font-size:2.25rem;font-weight:800}:host .template-header .template-left .template-description{color:var(--text-muted);font-size:1.25rem;margin-top:1rem}:host .template-header .template-left .template-tags{display:flex;flex-wrap:wrap;gap:.5rem}:host .template-header .template-left .template-tags .template-tag{background-color:var(--tag-bg);border-radius:.25rem;color:var(--tag-text);cursor:pointer;font-size:.8rem;font-weight:500;padding:.5rem .75rem;transition:background-color .2s ease-in-out}:host .template-header .template-left .template-tags .template-tag:hover{background-color:var(--tag-bg-hover)}:host .template-header .template-left .template-meta{align-items:center;display:flex;flex-wrap:wrap;gap:1.5rem;margin-top:1.5rem}:host .template-header .template-left .author-link{align-items:center;display:flex;font-size:.875rem;gap:.5rem;text-decoration:none}:host .template-header .template-left .author-link .author-avatar{border-radius:9999px;font-size:12px;height:2rem;letter-spacing:0px;width:2rem}:host .template-header .template-left .author-link .author-name{color:var(--text-color);font-weight:600;transition:color .2s ease-in-out}:host .template-header .template-left .author-link:hover .author-name{color:var(--color-accent)}:host .template-header .template-left .template-version{background-color:#1e293b;border-radius:.25rem;font-family:monospace;font-size:.875rem;padding:.25rem .5rem}:host .template-header .template-left .template-downloads{align-items:center;color:var(--text-muted);display:flex;font-size:.875rem;gap:.5rem}:host .template-header .template-left .template-download-button{margin-top:1.5rem}:host .template-header .template-left .template-download-button .btns{display:flex;gap:12px}:host .template-header .template-left .template-download-button .btns .delete-btn{--button-bg-color: var(--color-danger);--button-hover-bg-color: var(--hover-danger)}:host .template-header .template-right{border-left:1px solid var(--color-secondary);display:flex;flex-direction:column;flex-shrink:0;width:400px}:host .template-header .template-right .link{border-bottom:1px solid var(--color-secondary);margin:0 16px;padding:16px}:host .template-header .template-right .link .link-title{color:var(--text-muted)}:host .template-header .template-right .link .link-info{display:flex;gap:12px;margin-top:12px}:host .template-header .template-right .link .link-info a{color:inherit;font-size:15px;text-decoration:none}:host .template-header .template-right .link .link-info a:hover{color:var(--color-accent)}:host .template-header .template-right .link:last-child{border-bottom:none}:host .icon-sm{align-items:center;display:flex;font-size:1.25rem;height:1.25rem;justify-content:center;width:1.25rem}:host .mr-2{margin-right:.5rem}:host .template-readme{background-color:#1e293b;border:1px solid var(--color-secondary);border-radius:.5rem;color:var(--text-color);font-family:monospace;font-size:.875rem;margin-top:2rem;overflow-x:auto;padding:1rem;position:relative}:host .template-readme mi-icon.edit-btn{cursor:pointer;position:absolute;right:1rem;top:1rem}:host .template-readme a{color:var(--color-accent)}:host .template-readme:empty{display:none}:host([no_right]) .template-header .template-right{display:none}:host([admin]) .template-readme{min-height:4rem}`;
    __getStatic() {
        return TemplateDetailsPage;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(TemplateDetailsPage.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<header class="template-header">
    <div class="template-left">
        <h1 class="template-title" _id="templatedetailspage_0"></h1>
        <p class="template-description" _id="templatedetailspage_1"></p>
        <div class="template-tags">
            <template _id="templatedetailspage_2"></template>
        </div>
        <div class="template-meta">
            <av-router-link class="author-link" _id="templatedetailspage_4">
                <as-user-img class="author-avatar" _id="templatedetailspage_5"></as-user-img>
                <span class="author-name" _id="templatedetailspage_6"></span>
            </av-router-link>
            <div class="template-version" _id="templatedetailspage_7"></div>
            <div class="template-downloads">
                <mi-icon icon="download" class="icon-sm"></mi-icon>
                <span _id="templatedetailspage_8"></span>
            </div>
        </div>
        <div class="template-download-button">
            <div class="btns">
                <a _id="templatedetailspage_9">
                    <as-button>
                        <mi-icon icon="download" class="icon-sm mr-2"></mi-icon>
                        <span>Download</span>
                    </as-button>
                </a>
                <template _id="templatedetailspage_10"></template>
            </div>
        </div>
    </div>
    <div class="template-right">
        <template _id="templatedetailspage_12"></template>
        <template _id="templatedetailspage_14"></template>
    </div>
</header><template _id="templatedetailspage_16"></template>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "templatedetailspage_0°@HTML": {
      "fct": (c) => `${c.print(c.comp.__de96e0640d4de42f59926e8b87571d87method5())}`,
      "once": true
    },
    "templatedetailspage_1°@HTML": {
      "fct": (c) => `${c.print(c.comp.__de96e0640d4de42f59926e8b87571d87method6())}`,
      "once": true
    },
    "templatedetailspage_4°state": {
      "fct": (c) => `${c.print(c.comp.__de96e0640d4de42f59926e8b87571d87method8())}`
    },
    "templatedetailspage_6°@HTML": {
      "fct": (c) => `${c.print(c.comp.__de96e0640d4de42f59926e8b87571d87method10())}`,
      "once": true
    },
    "templatedetailspage_7°@HTML": {
      "fct": (c) => `${c.print(c.comp.__de96e0640d4de42f59926e8b87571d87method11())}`,
      "once": true
    },
    "templatedetailspage_8°@HTML": {
      "fct": (c) => `${c.print(c.comp.__de96e0640d4de42f59926e8b87571d87method12())} downloads`,
      "once": true
    },
    "templatedetailspage_9°href": {
      "fct": (c) => `vscode://cobwebsite.aventus/template/download?url=${c.print(c.comp.__de96e0640d4de42f59926e8b87571d87method13())}`,
      "once": true
    }
  },
  "injection": [
    {
      "id": "templatedetailspage_5",
      "injectionName": "user",
      "inject": (c) => c.comp.__de96e0640d4de42f59926e8b87571d87method9(),
      "once": true
    }
  ]
});const templ0 = new Aventus.Template(this);templ0.setTemplate(` 
                <span class="template-tag" _id="templatedetailspage_3"></span>
            `);templ0.setActions({
  "content": {
    "templatedetailspage_3°@HTML": {
      "fct": (c) => `${c.print(c.comp.__de96e0640d4de42f59926e8b87571d87method7(c.data.tag))}`,
      "once": true
    }
  },
  "pressEvents": [
    {
      "id": "templatedetailspage_3",
      "onPress": (e, pressInstance, c) => { c.comp.searchTag(e, pressInstance); }
    }
  ]
});this.__getStatic().__template.addLoop({
                    anchorId: 'templatedetailspage_2',
                    template: templ0,
                simple:{data: "this.template.tags",item:"tag"}});const templ1 = new Aventus.Template(this);templ1.setTemplate(`
                    <as-button class="delete-btn" _id="templatedetailspage_11">
                        <mi-icon icon="delete" class="icon-sm mr-2"></mi-icon>
                        <span>Delete</span>
                    </as-button>
                `);templ1.setActions({
  "pressEvents": [
    {
      "id": "templatedetailspage_11",
      "onPress": (e, pressInstance, c) => { c.comp.deleteTemplate(e, pressInstance); }
    }
  ]
});this.__getStatic().__template.addIf({
                    anchorId: 'templatedetailspage_10',
                    parts: [{once: true,
                    condition: (c) => c.comp.__de96e0640d4de42f59926e8b87571d87method1(),
                    template: templ1
                }]
            });const templ2 = new Aventus.Template(this);templ2.setTemplate(`
            <div class="link">
                <div class="link-title">Repository</div>
                <div class="link-info">
                    <mi-icon icon="commit"></mi-icon>
                    <a target="_blank" _id="templatedetailspage_13"></a>
                </div>
            </div>
        `);templ2.setActions({
  "content": {
    "templatedetailspage_13°href": {
      "fct": (c) => `${c.print(c.comp.__de96e0640d4de42f59926e8b87571d87method14())}`,
      "once": true
    },
    "templatedetailspage_13°@HTML": {
      "fct": (c) => `${c.print(c.comp.__de96e0640d4de42f59926e8b87571d87method15())}`
    }
  }
});this.__getStatic().__template.addIf({
                    anchorId: 'templatedetailspage_12',
                    parts: [{once: true,
                    condition: (c) => c.comp.__de96e0640d4de42f59926e8b87571d87method2(),
                    template: templ2
                }]
            });const templ3 = new Aventus.Template(this);templ3.setTemplate(`
            <div class="link">
                <div class="link-title">Documentation</div>
                <div class="link-info">
                    <mi-icon icon="book_4"></mi-icon>
                    <a target="_blank" _id="templatedetailspage_15"></a>
                </div>
            </div>
        `);templ3.setActions({
  "content": {
    "templatedetailspage_15°href": {
      "fct": (c) => `${c.print(c.comp.__de96e0640d4de42f59926e8b87571d87method16())}`,
      "once": true
    },
    "templatedetailspage_15°@HTML": {
      "fct": (c) => `${c.print(c.comp.__de96e0640d4de42f59926e8b87571d87method17())}`
    }
  }
});this.__getStatic().__template.addIf({
                    anchorId: 'templatedetailspage_14',
                    parts: [{once: true,
                    condition: (c) => c.comp.__de96e0640d4de42f59926e8b87571d87method3(),
                    template: templ3
                }]
            });const templ4 = new Aventus.Template(this);templ4.setTemplate(`
    <div class="template-readme">
        <div _id="templatedetailspage_17"></div>
        <mi-icon icon="edit" class="edit-btn" _id="templatedetailspage_18"></mi-icon>
    </div>
`);templ4.setActions({
  "content": {
    "templatedetailspage_17°@HTML": {
      "fct": (c) => `\n            ${c.print(c.comp.__de96e0640d4de42f59926e8b87571d87method18())}\n        `,
      "once": true
    }
  },
  "pressEvents": [
    {
      "id": "templatedetailspage_18",
      "onPress": (e, pressInstance, c) => { c.comp.editMarkdown(e, pressInstance); }
    }
  ]
});const templ5 = new Aventus.Template(this);templ5.setTemplate(`
    <div class="template-readme" _id="templatedetailspage_19"></div>
`);templ5.setActions({
  "content": {
    "templatedetailspage_19°@HTML": {
      "fct": (c) => `${c.print(c.comp.__de96e0640d4de42f59926e8b87571d87method18())}`,
      "once": true
    }
  }
});this.__getStatic().__template.addIf({
                    anchorId: 'templatedetailspage_16',
                    parts: [{once: true,
                    condition: (c) => c.comp.__de96e0640d4de42f59926e8b87571d87method4(),
                    template: templ4
                },{once: true,
                    condition: (c) => true,
                    template: templ5
                }]
            }); }
    getClassName() {
        return "TemplateDetailsPage";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('no_right')) { this.attributeChangedCallback('no_right', false, false); }if(!this.hasAttribute('admin')) { this.attributeChangedCallback('admin', false, false); } }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["template"] = undefined; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('no_right');this.__upgradeProperty('admin');this.__correctGetter('template'); }
    __listBoolProps() { return ["no_right","admin"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    configure() {
        return {};
    }
    async isAllowed(state, pattern, router) {
        let slugs = Aventus.Uri.getParams(pattern, state.name);
        if (slugs && slugs['id']) {
            let data = await Aventus.Process.execute(new App.Http.Controllers.Template.Details.TemplateDetailsController().request(slugs['id']));
            if (data) {
                this.template = data;
                this.no_right = (data.doc == undefined && data.repos == undefined);
                this.admin = data.isOwner;
                return true;
            }
        }
        return '/not_found';
    }
    getReadMe() {
        if (!this.template)
            return "";
        let converter = new npmCompilation['115c87258963fd94d34e6a96a9c4d27d'].Converter({});
        return converter.makeHtml(this.template.readme);
    }
    getDownloadUri() {
        return location.protocol + "//" + location.host + "/template/download/" + this.template.name + "/" + this.template.version;
    }
    searchTag(e, press) {
        let state = new TemplatesPageState();
        state.search = "#" + press.getElement().innerHTML;
        Main.instance.navigate(state);
    }
    async deleteTemplate() {
        const result = await Confirm.open({
            title: "Confirm Template Deletion",
            content: "Are you sure you want to delete this template? This action cannot be undone."
        });
        if (result) {
            const result = await Aventus.Process.execute(new App.Http.Controllers.Template.Delete.TemplateDeleteController().request(this.template.name));
            if (result?.success) {
                location.href = "/profile";
            }
        }
    }
    async editMarkdown() {
        const modal = new EditMarkdownModal();
        modal.content = this.template.readme ?? "";
        const result = await modal.show();
        if (result != null) {
            const request = await Aventus.Process.execute(new App.Http.Controllers.Template.Edit.Readme.TemplateEditReadmeController().request(this.template.name, { readme: result }));
            if (request?.success) {
                this.template.readme = result;
            }
        }
    }
    onShow() {
        super.onShow();
    }
    postCreation() {
        super.postCreation();
    }
    __de96e0640d4de42f59926e8b87571d87method5() {
        return this.template.name;
    }
    __de96e0640d4de42f59926e8b87571d87method6() {
        return this.template.description;
    }
    __de96e0640d4de42f59926e8b87571d87method7(tag) {
        return tag;
    }
    __de96e0640d4de42f59926e8b87571d87method8() {
        return this.template.isUser ? '/user/' + this.template.fromName : '/org/' + this.template.fromName;
    }
    __de96e0640d4de42f59926e8b87571d87method10() {
        return this.template.fromName;
    }
    __de96e0640d4de42f59926e8b87571d87method11() {
        return this.template.version;
    }
    __de96e0640d4de42f59926e8b87571d87method12() {
        return this.template.downloads;
    }
    __de96e0640d4de42f59926e8b87571d87method13() {
        return this.getDownloadUri();
    }
    __de96e0640d4de42f59926e8b87571d87method14() {
        return this.template.repos;
    }
    __de96e0640d4de42f59926e8b87571d87method15() {
        return this.template.repos?.replace("https://", "");
    }
    __de96e0640d4de42f59926e8b87571d87method16() {
        return this.template.doc;
    }
    __de96e0640d4de42f59926e8b87571d87method17() {
        return this.template.doc?.replace("https://", "");
    }
    __de96e0640d4de42f59926e8b87571d87method18() {
        return this.getReadMe();
    }
    __de96e0640d4de42f59926e8b87571d87method1() {
        return this.template.isOwner;
    }
    __de96e0640d4de42f59926e8b87571d87method2() {
        return this.template.repos;
    }
    __de96e0640d4de42f59926e8b87571d87method3() {
        return this.template.doc;
    }
    __de96e0640d4de42f59926e8b87571d87method4() {
        return this.template.isOwner;
    }
    __de96e0640d4de42f59926e8b87571d87method9() {
        return { username: this.template.fromName, picture: { 'uri': this.template.fromImg } };
    }
}
TemplateDetailsPage.Namespace=`AventusStore`;
TemplateDetailsPage.Tag=`as-template-details-page`;
__as1(_, 'TemplateDetailsPage', TemplateDetailsPage);
if(!window.customElements.get('as-template-details-page')){window.customElements.define('as-template-details-page', TemplateDetailsPage);Aventus.WebComponentInstance.registerDefinition(TemplateDetailsPage);}

const PackageDetailsPage = class PackageDetailsPage extends Aventus.Navigation.Page {
    get 'show_download'() { return this.getBoolAttr('show_download') }
    set 'show_download'(val) { this.setBoolAttr('show_download', val) }get 'no_right'() { return this.getBoolAttr('no_right') }
    set 'no_right'(val) { this.setBoolAttr('no_right', val) }get 'admin'() { return this.getBoolAttr('admin') }
    set 'admin'(val) { this.setBoolAttr('admin', val) }    get 'package'() {
						return this.__watch["package"];
					}
					set 'package'(val) {
						this.__watch["package"] = val;
					}    __registerWatchesActions() {
    this.__addWatchesActions("package");    super.__registerWatchesActions();
}
    static __style = `:host{margin:0 auto;max-width:80rem;padding:3rem 2rem}:host .package-header{border-bottom:1px solid var(--color-secondary);display:flex;gap:16px;justify-content:stretch;padding-bottom:2rem}:host .package-header .package-left{flex-grow:1}:host .package-header .package-left .package-title{color:var(--text-color);font-size:2.25rem;font-weight:800}:host .package-header .package-left .package-description{color:var(--text-muted);font-size:1.25rem;margin-top:1rem}:host .package-header .package-left .package-tags{display:flex;flex-wrap:wrap;gap:.5rem}:host .package-header .package-left .package-tags .package-tag{background-color:var(--tag-bg);border-radius:.25rem;color:var(--tag-text);cursor:pointer;font-size:.8rem;font-weight:500;padding:.5rem .75rem;transition:background-color .2s ease-in-out}:host .package-header .package-left .package-tags .package-tag:hover{background-color:var(--tag-bg-hover)}:host .package-header .package-left .package-meta{align-items:center;display:flex;flex-wrap:wrap;gap:1.5rem;margin-top:1.5rem}:host .package-header .package-left .package-meta .author-link{align-items:center;display:flex;font-size:.875rem;gap:.5rem;text-decoration:none}:host .package-header .package-left .package-meta .author-link .author-avatar{border-radius:9999px;font-size:12px;height:2rem;letter-spacing:0px;width:2rem}:host .package-header .package-left .package-meta .author-link .author-name{color:var(--text-color);font-weight:600;transition:color .2s ease-in-out}:host .package-header .package-left .package-meta .author-link:hover .author-name{color:var(--color-accent)}:host .package-header .package-left .package-meta .package-version{background-color:#1e293b;border-radius:.25rem;font-family:monospace;font-size:.875rem;padding:.25rem .5rem}:host .package-header .package-left .package-meta .package-downloads{align-items:center;color:var(--text-muted);display:flex;font-size:.875rem;gap:.5rem}:host .package-header .package-left .package-download-button{margin-top:1.5rem}:host .package-header .package-left .package-download-button .btns{display:flex;gap:12px}:host .package-header .package-left .package-download-button .btns .delete-btn{--button-bg-color: var(--color-danger);--button-hover-bg-color: var(--hover-danger)}:host .package-header .package-left .package-download-button .download-ligne{align-items:center;background-color:#1e293b;border:1px solid var(--color-secondary);border-radius:.5rem;color:var(--text-color);display:flex;font-family:monospace;font-size:.875rem;margin-top:.5rem;padding:16px}:host .package-header .package-left .package-download-button .download-ligne .ligne{flex-grow:1}:host .package-header .package-left .package-download-button .download-ligne .copy{align-items:center;border-radius:.5rem;cursor:pointer;display:flex;flex-shrink:0;justify-content:center}:host .package-header .package-left .package-download-button .download-ligne .copy mi-icon{font-size:18px;padding:8px}:host .package-header .package-left .package-download-button .download-ligne .copy:hover{background-color:var(--hover-secondary)}:host .package-header .package-right{border-left:1px solid var(--color-secondary);display:flex;flex-direction:column;flex-shrink:0;width:400px}:host .package-header .package-right .link{border-bottom:1px solid var(--color-secondary);margin:0 16px;padding:16px}:host .package-header .package-right .link .link-title{color:var(--text-muted)}:host .package-header .package-right .link .link-info{display:flex;gap:12px;margin-top:12px}:host .package-header .package-right .link .link-info a{color:inherit;font-size:15px;text-decoration:none}:host .package-header .package-right .link .link-info a:hover{color:var(--color-accent)}:host .package-header .package-right .link:last-child{border-bottom:none}:host .icon-sm{align-items:center;display:flex;font-size:1.25rem;height:1.25rem;justify-content:center;width:1.25rem}:host .mr-2{margin-right:.5rem}:host .package-readme{background-color:#1e293b;border:1px solid var(--color-secondary);border-radius:.5rem;color:var(--text-color);font-family:monospace;font-size:.875rem;margin-top:2rem;overflow-x:auto;padding:1rem;position:relative}:host .package-readme mi-icon.edit-btn{position:absolute;right:1rem;top:1rem;cursor:pointer}:host .package-readme a{color:var(--color-accent)}:host .package-readme:empty{display:none}:host(:not([show_download])) .package-header .package-left .package-download-button .download-ligne{display:none}:host([no_right]) .package-header .package-right{display:none}:host([admin]) .package-readme{min-height:4rem}`;
    __getStatic() {
        return PackageDetailsPage;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(PackageDetailsPage.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<header class="package-header">
    <div class="package-left">
        <h1 class="package-title" _id="packagedetailspage_0"></h1>
        <p class="package-description" _id="packagedetailspage_1"></p>
        <div class="package-tags">
            <template _id="packagedetailspage_2"></template>
        </div>
        <div class="package-meta">
            <av-router-link class="author-link" _id="packagedetailspage_4">
                <as-user-img class="author-avatar" _id="packagedetailspage_5"></as-user-img>
                <span class="author-name" _id="packagedetailspage_6"></span>
            </av-router-link>
            <div class="package-version" _id="packagedetailspage_7"></div>
            <div class="package-downloads">
                <mi-icon icon="download" class="icon-sm"></mi-icon>
                <span _id="packagedetailspage_8"></span>
            </div>
        </div>
        <div class="package-download-button">
            <div class="btns">
                <as-button _id="packagedetailspage_9">
                    <mi-icon icon="download" class="icon-sm mr-2"></mi-icon>
                    <span>Download</span>
                </as-button>
                <template _id="packagedetailspage_10"></template>
            </div>
            <div class="download-ligne">
                <div class="ligne" _id="packagedetailspage_12"></div>
                <div class="copy" _id="packagedetailspage_13">
                    <mi-icon icon="content_copy"></mi-icon>
                </div>
            </div>
        </div>
    </div>
    <div class="package-right">
        <template _id="packagedetailspage_14"></template>
        <template _id="packagedetailspage_16"></template>
    </div>
</header><template _id="packagedetailspage_18"></template>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "packagedetailspage_0°@HTML": {
      "fct": (c) => `${c.print(c.comp.__2288f4ee871702d4fd3a313e21ad52c5method5())}`,
      "once": true
    },
    "packagedetailspage_1°@HTML": {
      "fct": (c) => `${c.print(c.comp.__2288f4ee871702d4fd3a313e21ad52c5method6())}`,
      "once": true
    },
    "packagedetailspage_4°state": {
      "fct": (c) => `${c.print(c.comp.__2288f4ee871702d4fd3a313e21ad52c5method8())}`
    },
    "packagedetailspage_6°@HTML": {
      "fct": (c) => `${c.print(c.comp.__2288f4ee871702d4fd3a313e21ad52c5method10())}`,
      "once": true
    },
    "packagedetailspage_7°@HTML": {
      "fct": (c) => `${c.print(c.comp.__2288f4ee871702d4fd3a313e21ad52c5method11())}`,
      "once": true
    },
    "packagedetailspage_8°@HTML": {
      "fct": (c) => `${c.print(c.comp.__2288f4ee871702d4fd3a313e21ad52c5method12())} downloads`,
      "once": true
    },
    "packagedetailspage_12°@HTML": {
      "fct": (c) => `${c.print(c.comp.__2288f4ee871702d4fd3a313e21ad52c5method13())}`,
      "once": true
    }
  },
  "injection": [
    {
      "id": "packagedetailspage_5",
      "injectionName": "user",
      "inject": (c) => c.comp.__2288f4ee871702d4fd3a313e21ad52c5method9(),
      "once": true
    }
  ],
  "pressEvents": [
    {
      "id": "packagedetailspage_9",
      "onPress": (e, pressInstance, c) => { c.comp.showDownload(e, pressInstance); }
    },
    {
      "id": "packagedetailspage_13",
      "onPress": (e, pressInstance, c) => { c.comp.copyLigne(e, pressInstance); }
    }
  ]
});const templ0 = new Aventus.Template(this);templ0.setTemplate(` 
                <span class="package-tag" _id="packagedetailspage_3"></span>
            `);templ0.setActions({
  "content": {
    "packagedetailspage_3°@HTML": {
      "fct": (c) => `${c.print(c.comp.__2288f4ee871702d4fd3a313e21ad52c5method7(c.data.tag))}`,
      "once": true
    }
  },
  "pressEvents": [
    {
      "id": "packagedetailspage_3",
      "onPress": (e, pressInstance, c) => { c.comp.searchTag(e, pressInstance); }
    }
  ]
});this.__getStatic().__template.addLoop({
                    anchorId: 'packagedetailspage_2',
                    template: templ0,
                simple:{data: "this.package.tags",item:"tag"}});const templ1 = new Aventus.Template(this);templ1.setTemplate(`
                    <as-button class="delete-btn" _id="packagedetailspage_11">
                        <mi-icon icon="delete" class="icon-sm mr-2"></mi-icon>
                        <span>Delete</span>
                    </as-button>
                `);templ1.setActions({
  "pressEvents": [
    {
      "id": "packagedetailspage_11",
      "onPress": (e, pressInstance, c) => { c.comp.deletePackage(e, pressInstance); }
    }
  ]
});this.__getStatic().__template.addIf({
                    anchorId: 'packagedetailspage_10',
                    parts: [{once: true,
                    condition: (c) => c.comp.__2288f4ee871702d4fd3a313e21ad52c5method1(),
                    template: templ1
                }]
            });const templ2 = new Aventus.Template(this);templ2.setTemplate(`
            <div class="link">
                <div class="link-title">Repository</div>
                <div class="link-info">
                    <mi-icon icon="commit"></mi-icon>
                    <a target="_blank" _id="packagedetailspage_15"></a>
                </div>
            </div>
        `);templ2.setActions({
  "content": {
    "packagedetailspage_15°href": {
      "fct": (c) => `${c.print(c.comp.__2288f4ee871702d4fd3a313e21ad52c5method14())}`,
      "once": true
    },
    "packagedetailspage_15°@HTML": {
      "fct": (c) => `${c.print(c.comp.__2288f4ee871702d4fd3a313e21ad52c5method15())}`
    }
  }
});this.__getStatic().__template.addIf({
                    anchorId: 'packagedetailspage_14',
                    parts: [{once: true,
                    condition: (c) => c.comp.__2288f4ee871702d4fd3a313e21ad52c5method2(),
                    template: templ2
                }]
            });const templ3 = new Aventus.Template(this);templ3.setTemplate(`
            <div class="link">
                <div class="link-title">Documentation</div>
                <div class="link-info">
                    <mi-icon icon="book_4"></mi-icon>
                    <a target="_blank" _id="packagedetailspage_17"></a>
                </div>
            </div>
        `);templ3.setActions({
  "content": {
    "packagedetailspage_17°href": {
      "fct": (c) => `${c.print(c.comp.__2288f4ee871702d4fd3a313e21ad52c5method16())}`,
      "once": true
    },
    "packagedetailspage_17°@HTML": {
      "fct": (c) => `${c.print(c.comp.__2288f4ee871702d4fd3a313e21ad52c5method17())}`
    }
  }
});this.__getStatic().__template.addIf({
                    anchorId: 'packagedetailspage_16',
                    parts: [{once: true,
                    condition: (c) => c.comp.__2288f4ee871702d4fd3a313e21ad52c5method3(),
                    template: templ3
                }]
            });const templ4 = new Aventus.Template(this);templ4.setTemplate(`
    <div class="package-readme">
        <div _id="packagedetailspage_19"></div>
        <mi-icon icon="edit" class="edit-btn" _id="packagedetailspage_20"></mi-icon>
    </div>
`);templ4.setActions({
  "content": {
    "packagedetailspage_19°@HTML": {
      "fct": (c) => `\n            ${c.print(c.comp.__2288f4ee871702d4fd3a313e21ad52c5method18())}\n        `,
      "once": true
    }
  },
  "pressEvents": [
    {
      "id": "packagedetailspage_20",
      "onPress": (e, pressInstance, c) => { c.comp.editMarkdown(e, pressInstance); }
    }
  ]
});const templ5 = new Aventus.Template(this);templ5.setTemplate(`
    <div class="package-readme" _id="packagedetailspage_21"></div>
`);templ5.setActions({
  "content": {
    "packagedetailspage_21°@HTML": {
      "fct": (c) => `${c.print(c.comp.__2288f4ee871702d4fd3a313e21ad52c5method18())}`,
      "once": true
    }
  }
});this.__getStatic().__template.addIf({
                    anchorId: 'packagedetailspage_18',
                    parts: [{once: true,
                    condition: (c) => c.comp.__2288f4ee871702d4fd3a313e21ad52c5method4(),
                    template: templ4
                },{once: true,
                    condition: (c) => true,
                    template: templ5
                }]
            }); }
    getClassName() {
        return "PackageDetailsPage";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('show_download')) { this.attributeChangedCallback('show_download', false, false); }if(!this.hasAttribute('no_right')) { this.attributeChangedCallback('no_right', false, false); }if(!this.hasAttribute('admin')) { this.attributeChangedCallback('admin', false, false); } }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["package"] = undefined; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('show_download');this.__upgradeProperty('no_right');this.__upgradeProperty('admin');this.__correctGetter('package'); }
    __listBoolProps() { return ["show_download","no_right","admin"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    configure() {
        return {};
    }
    async isAllowed(state, pattern, router) {
        let slugs = Aventus.Uri.getParams(pattern, state.name);
        if (slugs && slugs['id']) {
            let data = await Aventus.Process.execute(new App.Http.Controllers.Package.Details.PackageDetailsController().request(slugs['id']));
            if (data) {
                this.package = data;
                this.no_right = (data.doc == undefined && data.repos == undefined);
                this.admin = data.isOwner;
                return true;
            }
        }
        return '/not_found';
    }
    getReadMe() {
        if (!this.package)
            return "";
        let converter = new npmCompilation['115c87258963fd94d34e6a96a9c4d27d'].Converter({});
        return converter.makeHtml(this.package.readme);
    }
    getDownloadUri() {
        return `"${this.package.name}": "${this.package.version}"`;
        // return location.protocol + "//" + location.host + "/package/download/" + this.package.name + "/" + this.package.version;
    }
    async copyLigne() {
        await navigator.clipboard.writeText(this.getDownloadUri());
        await Toast.add({
            type: "success",
            title: "Copied"
        });
    }
    searchTag(e, press) {
        let state = new PackagesPageState();
        state.search = "#" + press.getElement().innerHTML;
        Main.instance.navigate(state);
    }
    showDownload() {
        this.show_download = true;
    }
    async deletePackage() {
        const result = await Confirm.open({
            title: "Confirm Package Deletion",
            content: "Are you sure you want to delete this package? This action cannot be undone."
        });
        if (result) {
            const result = await Aventus.Process.execute(new App.Http.Controllers.Package.Delete.PackageDeleteController().request(this.package.name));
            if (result?.success) {
                location.href = "/profile";
            }
        }
    }
    onShow() {
        super.onShow();
        this.show_download = false;
    }
    async editMarkdown() {
        const modal = new EditMarkdownModal();
        modal.content = this.package.readme ?? "";
        const result = await modal.show();
        if (result != null) {
            const request = await Aventus.Process.execute(new App.Http.Controllers.Package.Edit.Readme.PackageEditReadmeController().request(this.package.name, { readme: result }));
            if (request?.success) {
                this.package.readme = result;
            }
        }
    }
    postCreation() {
        super.postCreation();
    }
    __2288f4ee871702d4fd3a313e21ad52c5method5() {
        return this.package.name;
    }
    __2288f4ee871702d4fd3a313e21ad52c5method6() {
        return this.package.description;
    }
    __2288f4ee871702d4fd3a313e21ad52c5method7(tag) {
        return tag;
    }
    __2288f4ee871702d4fd3a313e21ad52c5method8() {
        return this.package.isUser ? '/user/' + this.package.fromName : '/org/' + this.package.fromName;
    }
    __2288f4ee871702d4fd3a313e21ad52c5method10() {
        return this.package.fromName;
    }
    __2288f4ee871702d4fd3a313e21ad52c5method11() {
        return this.package.version;
    }
    __2288f4ee871702d4fd3a313e21ad52c5method12() {
        return this.package.downloads;
    }
    __2288f4ee871702d4fd3a313e21ad52c5method13() {
        return this.getDownloadUri();
    }
    __2288f4ee871702d4fd3a313e21ad52c5method14() {
        return this.package.repos;
    }
    __2288f4ee871702d4fd3a313e21ad52c5method15() {
        return this.package.repos?.replace("https://", "");
    }
    __2288f4ee871702d4fd3a313e21ad52c5method16() {
        return this.package.doc;
    }
    __2288f4ee871702d4fd3a313e21ad52c5method17() {
        return this.package.doc?.replace("https://", "");
    }
    __2288f4ee871702d4fd3a313e21ad52c5method18() {
        return this.getReadMe();
    }
    __2288f4ee871702d4fd3a313e21ad52c5method1() {
        return this.package.isOwner;
    }
    __2288f4ee871702d4fd3a313e21ad52c5method2() {
        return this.package.repos;
    }
    __2288f4ee871702d4fd3a313e21ad52c5method3() {
        return this.package.doc;
    }
    __2288f4ee871702d4fd3a313e21ad52c5method4() {
        return this.package.isOwner;
    }
    __2288f4ee871702d4fd3a313e21ad52c5method9() {
        return { username: this.package.fromName, picture: { 'uri': this.package.fromImg } };
    }
}
PackageDetailsPage.Namespace=`AventusStore`;
PackageDetailsPage.Tag=`as-package-details-page`;
__as1(_, 'PackageDetailsPage', PackageDetailsPage);
if(!window.customElements.get('as-package-details-page')){window.customElements.define('as-package-details-page', PackageDetailsPage);Aventus.WebComponentInstance.registerDefinition(PackageDetailsPage);}

const TemplatesPage = class TemplatesPage extends Aventus.Navigation.Page {
    get 'loading'() { return this.getBoolAttr('loading') }
    set 'loading'(val) { this.setBoolAttr('loading', val) }get 'page'() { return this.getNumberAttr('page') }
    set 'page'(val) { this.setNumberAttr('page', val) }    get 'searchTxt'() {
						return this.__watch["searchTxt"];
					}
					set 'searchTxt'(val) {
						this.__watch["searchTxt"] = val;
					}get 'searchResult'() {
						return this.__watch["searchResult"];
					}
					set 'searchResult'(val) {
						this.__watch["searchResult"] = val;
					}get 'templates'() {
						return this.__watch["templates"];
					}
					set 'templates'(val) {
						this.__watch["templates"] = val;
					}    templatesRandom;
    timeout;
    elementsByPage = 21;
    canLoadMore = false;
    guard = new Aventus.ActionGuard();
    isSearching = false;
    __registerWatchesActions() {
    this.__addWatchesActions("searchTxt");this.__addWatchesActions("searchResult");this.__addWatchesActions("templates");    super.__registerWatchesActions();
}
    static __style = `:host{margin:0 auto;max-width:80rem;padding:3rem 2rem}:host .templates-header{text-align:center}:host .templates-title{color:var(--text-color);font-size:2.25rem;font-weight:800}:host .templates-subtitle{color:var(--text-muted);font-size:1.125rem;margin-left:auto;margin-right:auto;margin-top:1rem;max-width:40rem}:host .templates-search{margin:2.5rem auto 3rem;max-width:36rem}:host .search-input-wrapper{position:relative}:host .search-input{padding-left:2.5rem !important;width:100%}:host .search-icon{color:var(--text-muted);left:.75rem;pointer-events:none;position:absolute;top:50%;transform:translateY(-50%)}:host .icon-sm{align-items:center;display:flex;font-size:1.25rem;height:1.25rem;justify-content:center;width:1.25rem}:host as-loading{display:none;margin-top:2rem}:host .templates-grid{display:grid;gap:2rem;grid-template-columns:1fr;margin-bottom:1rem}:host .templates-empty{color:var(--text-muted);padding:2rem 0;text-align:center}:host([loading]) as-loading{display:flex}:host([loading][page="0"]) as-loading{margin-top:0rem}:host([loading][page="0"]) .templates-grid{display:none}:host([loading][page="0"]) .templates-empty{display:none}@media(min-width: 768px){:host .templates-grid{grid-template-columns:repeat(2, 1fr)}}@media(min-width: 1024px){:host .templates-grid{grid-template-columns:repeat(3, 1fr)}}`;
    constructor() {
        super();
        this.needMoreLoad = this.needMoreLoad.bind(this);
    }
    __getStatic() {
        return TemplatesPage;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(TemplatesPage.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="templates-header">
    <h1 class="templates-title">Explore Templates</h1>
    <p class="templates-subtitle">
       Bootstrap your next AventusJs project with our ready-to-use templates.
    </p>
</div><div class="templates-search">
    <div class="search-input-wrapper">
        <as-input type="text" placeholder="Search for templates..." class="search-input" _id="templatespage_0"></as-input>
        <div class="search-icon">
            <mi-icon icon="search" class="icon-sm"></mi-icon>
        </div>
    </div>
</div><template _id="templatespage_1"></template><as-loading></as-loading>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "bindings": [
    {
      "id": "templatespage_0",
      "injectionName": "value",
      "eventNames": [
        "onChange"
      ],
      "inject": (c) => c.comp.__944e817e76f557f6ffd876937383aa87method3(),
      "extract": (c, v) => c.comp.__944e817e76f557f6ffd876937383aa87method4(v),
      "once": true,
      "isCallback": true
    }
  ],
  "events": [
    {
      "eventName": "onChange",
      "id": "templatespage_0",
      "fct": (c, ...args) => c.comp.changeSearch.apply(c.comp, ...args),
      "isCallback": true
    }
  ]
});const templ0 = new Aventus.Template(this);templ0.setTemplate(`
    <div class="templates-grid">
        <template _id="templatespage_2"></template>
    </div>
`);const templ2 = new Aventus.Template(this);templ2.setTemplate(` 
            <as-template-card _id="templatespage_3"></as-template-card>
        `);templ2.setActions({
  "injection": [
    {
      "id": "templatespage_3",
      "injectionName": "template",
      "inject": (c) => c.comp.__944e817e76f557f6ffd876937383aa87method5(c.data.p),
      "once": true
    }
  ]
});templ0.addLoop({
                    anchorId: 'templatespage_2',
                    template: templ2,
                simple:{data: "this.templates",item:"p"}});const templ1 = new Aventus.Template(this);templ1.setTemplate(`
    <div class="templates-empty">No templates found</div>
`);this.__getStatic().__template.addIf({
                    anchorId: 'templatespage_1',
                    parts: [{once: true,
                    condition: (c) => c.comp.__944e817e76f557f6ffd876937383aa87method0(),
                    template: templ0
                },{once: true,
                    condition: (c) => c.comp.__944e817e76f557f6ffd876937383aa87method1(),
                    template: templ1
                }]
            }); }
    getClassName() {
        return "TemplatesPage";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('loading')) { this.attributeChangedCallback('loading', false, false); }if(!this.hasAttribute('page')){ this['page'] = 0; } }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["searchTxt"] = "";w["searchResult"] = "";w["templates"] = []; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('loading');this.__upgradeProperty('page');this.__correctGetter('searchTxt');this.__correctGetter('searchResult');this.__correctGetter('templates'); }
    __listBoolProps() { return ["loading"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    changeSearch() {
        if (this.timeout) {
            clearTimeout(this.timeout);
        }
        this.timeout = setTimeout(() => {
            this.timeout = undefined;
            this.search(true);
        }, 500);
    }
    async search(reset) {
        this.isSearching = true;
        await this.guard.run(async () => {
            if (!reset && !this.canLoadMore)
                return;
            if (reset) {
                this.page = 0;
            }
            const txt = this.searchTxt;
            if (txt == "") {
                if (!this.templatesRandom) {
                    this.templatesRandom = await Aventus.Process.execute(new App.Http.Controllers.Template.Random.TemplateRandomController().request({ number: 6 }));
                }
                this.templates = this.templatesRandom ?? [];
            }
            else {
                this.loading = true;
                const result = await Aventus.Process.execute(new App.Http.Controllers.Template.Search.TemplateSearchController().request({ txt, limit: this.elementsByPage, offset: this.page * this.elementsByPage }));
                if (result) {
                    if (this.page == 0) {
                        this.templates = result;
                    }
                    else {
                        this.templates = [...this.templates, ...result];
                    }
                    this.canLoadMore = result.length >= this.elementsByPage;
                }
                this.loading = false;
            }
            this.searchResult = txt;
        });
        this.isSearching = false;
    }
    needMoreLoad(x, y) {
        if (this.isSearching)
            return;
        if (this.canLoadMore && Main.instance.scrollEl.yMax - y < 200) {
            this.page++;
            this.search(false);
        }
    }
    configure() {
        return {};
    }
    show(state) {
        super.show(state);
        if (state instanceof TemplatesPageState) {
            this.searchTxt = state.search;
            this.search(true);
        }
    }
    onShow() {
        Main.instance.onScrollChange.add(this.needMoreLoad);
    }
    onHide() {
        Main.instance.onScrollChange.remove(this.needMoreLoad);
    }
    postCreation() {
        super.postCreation();
        this.search(true);
    }
    __944e817e76f557f6ffd876937383aa87method0() {
        return this.templates.length > 0;
    }
    __944e817e76f557f6ffd876937383aa87method1() {
        return this.searchResult != "";
    }
    __944e817e76f557f6ffd876937383aa87method5(p) {
        return p;
    }
    __944e817e76f557f6ffd876937383aa87method3() {
        return this.searchTxt;
    }
    __944e817e76f557f6ffd876937383aa87method4(v) {
        if (this) {
            this.searchTxt = v;
        }
    }
}
TemplatesPage.Namespace=`AventusStore`;
TemplatesPage.Tag=`as-templates-page`;
__as1(_, 'TemplatesPage', TemplatesPage);
if(!window.customElements.get('as-templates-page')){window.customElements.define('as-templates-page', TemplatesPage);Aventus.WebComponentInstance.registerDefinition(TemplatesPage);}

const UserPage = class UserPage extends Aventus.Navigation.Page {
    get 'activeTab'() {
						return this.__watch["activeTab"];
					}
					set 'activeTab'(val) {
						this.__watch["activeTab"] = val;
					}get 'user'() {
						return this.__watch["user"];
					}
					set 'user'(val) {
						this.__watch["user"] = val;
					}    __registerWatchesActions() {
    this.__addWatchesActions("activeTab");this.__addWatchesActions("user");    super.__registerWatchesActions();
}
    static __style = `:host{margin:0 auto;max-width:80rem;padding:3rem 2rem}:host .profile-header{align-items:center;display:flex;flex-direction:column;gap:1.5rem;text-align:center}:host .profile-header .avatar{border:2px solid var(--border);border-radius:9999px;height:8rem;overflow:hidden;position:relative;transition:border .2s ease-in-out;width:8rem}:host .profile-header .avatar .img{border:2px solid var(--border);border-radius:9999px;font-size:32px}:host .profile-header .username{color:var(--text-white);font-size:2.25rem;font-weight:bold;margin:0}:host .profile-header .bio{align-items:center;color:var(--text-muted);display:flex;font-size:1.125rem;gap:1rem;margin-top:.5rem}:host .profile-header .join-date{color:#64748b;font-size:.875rem;margin-top:.5rem}:host .cards-grid{display:grid;gap:2rem;grid-template-columns:1fr;margin-top:2rem}:host .list{background-color:var(--card-bg);border:1px solid var(--card-border);border-radius:.5rem;display:flex;flex-direction:column;margin-top:2rem;overflow:hidden;width:100%}:host .list .item{align-items:center;border-top:1px solid var(--card-border);display:flex;gap:16px;height:50px;padding:0 1rem}:host .list .item .role{color:var(--card-border-hover)}:host .list .item:hover{background-color:var(--card-bg-hover)}:host .list av-link:first-child .item{border-top:none}:host .empty-message{color:var(--text-muted);grid-column:span 2;padding:4rem 0;text-align:center}:host .settings-card{width:calc(100% - 32px);max-width:none}:host .settings-card .settings-card-content{display:flex;flex-direction:column;gap:1.5rem}@media(min-width: 640px){:host .profile-header{flex-direction:row;text-align:left}}@media(min-width: 768px){:host .cards-grid{grid-template-columns:1fr 1fr}}`;
    __getStatic() {
        return UserPage;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(UserPage.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="profile-header">
    <div class="avatar">
        <as-user-img class="img" _id="userpage_0"></as-user-img>
    </div>
    <div>
        <h1 class="username" _id="userpage_1"></h1>
        <p class="bio">
            <span _id="userpage_2"></span>
        </p>
        <p class="join-date" _id="userpage_3"></p>
    </div>
</div><as-tabs>
    <as-tab label="Packages" _id="userpage_4">
        <div class="cards-grid">
            <template _id="userpage_5"></template>
        </div>
    </as-tab>
    <as-tab label="Templates" _id="userpage_7">
        <div class="cards-grid">
             <template _id="userpage_8"></template>
        </div>
    </as-tab>
    <as-tab label="Organizations" _id="userpage_10">
        <div class="list">
            <template _id="userpage_11"></template>
        </div>
    </as-tab>
</as-tabs>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "userpage_1°@HTML": {
      "fct": (c) => `${c.print(c.comp.__70664b655c5ebf5512e5d15976b27ea2method4())}`,
      "once": true
    },
    "userpage_2°@HTML": {
      "fct": (c) => `${c.print(c.comp.__70664b655c5ebf5512e5d15976b27ea2method5())}`,
      "once": true
    },
    "userpage_3°@HTML": {
      "fct": (c) => `Joined on ${c.print(c.comp.__70664b655c5ebf5512e5d15976b27ea2method6())}`,
      "once": true
    },
    "userpage_4°count": {
      "fct": (c) => `${c.print(c.comp.__70664b655c5ebf5512e5d15976b27ea2method7())}`,
      "once": true
    },
    "userpage_7°count": {
      "fct": (c) => `${c.print(c.comp.__70664b655c5ebf5512e5d15976b27ea2method9())}`,
      "once": true
    },
    "userpage_10°count": {
      "fct": (c) => `${c.print(c.comp.__70664b655c5ebf5512e5d15976b27ea2method11())}`,
      "once": true
    }
  },
  "injection": [
    {
      "id": "userpage_0",
      "injectionName": "user",
      "inject": (c) => c.comp.__70664b655c5ebf5512e5d15976b27ea2method3(),
      "once": true
    }
  ]
});const templ0 = new Aventus.Template(this);templ0.setTemplate(`
                <as-package-card no_owner _id="userpage_6"></as-package-card>
            `);templ0.setActions({
  "injection": [
    {
      "id": "userpage_6",
      "injectionName": "package",
      "inject": (c) => c.comp.__70664b655c5ebf5512e5d15976b27ea2method8(c.data.p),
      "once": true
    }
  ]
});this.__getStatic().__template.addLoop({
                    anchorId: 'userpage_5',
                    template: templ0,
                simple:{data: "this.user.packages",item:"p"}});const templ1 = new Aventus.Template(this);templ1.setTemplate(`
                <as-template-card no_owner _id="userpage_9"></as-template-card>
            `);templ1.setActions({
  "injection": [
    {
      "id": "userpage_9",
      "injectionName": "template",
      "inject": (c) => c.comp.__70664b655c5ebf5512e5d15976b27ea2method10(c.data.p),
      "once": true
    }
  ]
});this.__getStatic().__template.addLoop({
                    anchorId: 'userpage_8',
                    template: templ1,
                simple:{data: "this.user.templates",item:"p"}});const templ2 = new Aventus.Template(this);templ2.setTemplate(`
                <av-link _id="userpage_12">
                    <div class="item">
                        <span class="name" _id="userpage_13"></span>
                        <span>-</span>
                        <div class="role" _id="userpage_14"></div>
                    </div>
                </av-link>
            `);templ2.setActions({
  "content": {
    "userpage_12°to": {
      "fct": (c) => `/org/${c.print(c.comp.__70664b655c5ebf5512e5d15976b27ea2method12(c.data.org))}`,
      "once": true
    },
    "userpage_13°@HTML": {
      "fct": (c) => `${c.print(c.comp.__70664b655c5ebf5512e5d15976b27ea2method12(c.data.org))}`,
      "once": true
    },
    "userpage_14°@HTML": {
      "fct": (c) => `${c.print(c.comp.__70664b655c5ebf5512e5d15976b27ea2method13(c.data.org))}`,
      "once": true
    }
  }
});this.__getStatic().__template.addLoop({
                    anchorId: 'userpage_11',
                    template: templ2,
                simple:{data: "this.user.organizations",item:"org"}}); }
    getClassName() {
        return "UserPage";
    }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["activeTab"] = undefined;w["user"] = undefined; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('activeTab');this.__correctGetter('user'); }
    async isAllowed(state, pattern, router) {
        let slugs = Aventus.Uri.getParams(pattern, state.name);
        if (slugs && slugs['id']) {
            if (slugs['id'] == Main.user?.username) {
                return "/profile";
            }
            const result = await Aventus.Process.execute(new App.Http.Controllers.User.Details.UserDetailsController().request(slugs['id']));
            if (result) {
                this.user = result;
                return true;
            }
        }
        return '/not_found';
    }
    configure() {
        return {};
    }
    __70664b655c5ebf5512e5d15976b27ea2method4() {
        return this.user.username;
    }
    __70664b655c5ebf5512e5d15976b27ea2method5() {
        return this.user.bio;
    }
    __70664b655c5ebf5512e5d15976b27ea2method6() {
        return DateTools.printDate(this.user.created_date, undefined, "en-gb");
    }
    __70664b655c5ebf5512e5d15976b27ea2method7() {
        return this.user.packages.length;
    }
    __70664b655c5ebf5512e5d15976b27ea2method9() {
        return this.user.templates.length;
    }
    __70664b655c5ebf5512e5d15976b27ea2method11() {
        return this.user.organizations.length;
    }
    __70664b655c5ebf5512e5d15976b27ea2method12(org) {
        return org.name;
    }
    __70664b655c5ebf5512e5d15976b27ea2method13(org) {
        return org.role;
    }
    __70664b655c5ebf5512e5d15976b27ea2method3() {
        return this.user;
    }
    __70664b655c5ebf5512e5d15976b27ea2method8(p) {
        return p;
    }
    __70664b655c5ebf5512e5d15976b27ea2method10(p) {
        return p;
    }
}
UserPage.Namespace=`AventusStore`;
UserPage.Tag=`as-user-page`;
__as1(_, 'UserPage', UserPage);
if(!window.customElements.get('as-user-page')){window.customElements.define('as-user-page', UserPage);Aventus.WebComponentInstance.registerDefinition(UserPage);}

const UserProfilePage = class UserProfilePage extends Aventus.Navigation.Page {
    get 'activeTab'() {
						return this.__watch["activeTab"];
					}
					set 'activeTab'(val) {
						this.__watch["activeTab"] = val;
					}get 'user'() {
						return this.__watch["user"];
					}
					set 'user'(val) {
						this.__watch["user"] = val;
					}get 'email'() {
						return this.__watch["email"];
					}
					set 'email'(val) {
						this.__watch["email"] = val;
					}    __registerWatchesActions() {
    this.__addWatchesActions("activeTab");this.__addWatchesActions("user", ((target) => {
    target.email = target.user.email;
}));this.__addWatchesActions("email");    super.__registerWatchesActions();
}
    static __style = `:host{margin:0 auto;max-width:80rem;padding:3rem 2rem}:host .profile-header{align-items:center;display:flex;flex-direction:column;gap:1.5rem;text-align:center}:host .profile-header .avatar{border:2px solid var(--border);border-radius:9999px;height:8rem;overflow:hidden;position:relative;transition:border .2s ease-in-out;width:8rem}:host .profile-header .avatar .img{border:2px solid var(--border);border-radius:9999px;font-size:32px}:host .profile-header .avatar .edit{align-items:center;background-color:rgba(0,0,0,.4);color:#fff;cursor:pointer;display:flex;inset:0;justify-content:center;opacity:0;position:absolute;transition:all .2s ease-in-out;visibility:hidden}:host .profile-header .avatar .edit mi-icon{font-size:32px}:host .profile-header .avatar .edit input{display:none}:host .profile-header .avatar:hover{border:2px solid var(--border-hover)}:host .profile-header .avatar:hover .edit{opacity:1;visibility:visible}:host .profile-header .username{color:var(--text-white);font-size:2.25rem;font-weight:bold;margin:0}:host .profile-header .bio{align-items:center;color:var(--text-muted);display:flex;font-size:1.125rem;gap:1rem;margin-top:.5rem}:host .profile-header .bio mi-icon{border-radius:4px;cursor:pointer;font-size:20px;padding:8px}:host .profile-header .bio mi-icon:hover{background-color:#334155}:host .profile-header .bio.no-bio span::after{content:"Short description";font-size:13px;font-style:italic}:host .profile-header .join-date{color:#64748b;font-size:.875rem;margin-top:.5rem}:host .cards-grid{display:grid;gap:2rem;grid-template-columns:1fr;margin-top:2rem}:host .actions{align-items:center;display:flex;justify-content:flex-end;margin-bottom:1rem;margin-top:1rem}:host .list{background-color:var(--card-bg);border:1px solid var(--card-border);border-radius:.5rem;display:flex;flex-direction:column;overflow:hidden;width:100%}:host .list .item{align-items:center;border-top:1px solid var(--card-border);display:flex;gap:16px;height:50px;padding:0 1rem}:host .list .item .role{color:var(--card-border-hover)}:host .list .item:hover{background-color:var(--card-bg-hover)}:host .list av-link:first-child .item{border-top:none}:host .empty-message{color:var(--text-muted);grid-column:span 2;padding:4rem 0;text-align:center}:host .settings-card{max-width:none;width:calc(100% - 32px)}:host .settings-card .settings-card-content{display:flex;flex-direction:column;gap:1.5rem}@media(min-width: 640px){:host .profile-header{flex-direction:row;text-align:left}}@media(min-width: 768px){:host .cards-grid{grid-template-columns:1fr 1fr}}`;
    __getStatic() {
        return UserProfilePage;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(UserProfilePage.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="profile-header">
    <div class="avatar">
        <as-user-img class="img" _id="userprofilepage_0"></as-user-img>
        <div class="edit" _id="userprofilepage_1">
            <mi-icon icon="edit"></mi-icon>
            <input type="file" accept="image/png, image/gif, image/jpeg, image/svg+xml" _id="userprofilepage_2" />
        </div>
    </div>
    <div>
        <h1 class="username" _id="userprofilepage_3"></h1>
        <p _id="userprofilepage_4">
            <span _id="userprofilepage_5"></span>
            <mi-icon icon="edit" _id="userprofilepage_6"></mi-icon>
        </p>
        <p class="join-date" _id="userprofilepage_7"></p>
    </div>
</div><as-tabs>
    <as-tab label="Packages" _id="userprofilepage_8">
        <div class="cards-grid">
            <template _id="userprofilepage_9"></template>
        </div>
    </as-tab>
    <as-tab label="Templates" _id="userprofilepage_11">
        <div class="cards-grid">
            <template _id="userprofilepage_12"></template>
        </div>
    </as-tab>
    <as-tab label="Organizations" _id="userprofilepage_14">
        <div class="actions">
            <as-button _id="userprofilepage_15">Create</as-button>
        </div>
        <div class="list">
            <template _id="userprofilepage_16"></template>
        </div>
    </as-tab>
    <as-tab label="Settings" icon="settings">
        <av-row>
            <av-col size="12" size_md="6">
                <as-card class="settings-card">
                    <div class="settings-card-content">
                        <div class="title">Update Mail</div>
                        <as-input label="Mail" _id="userprofilepage_20"></as-input>
                        <div class="btn">
                            <as-button variant="primary" _id="userprofilepage_21">Save</as-button>
                        </div>
                    </div>
                </as-card>
            </av-col>
            <av-col size="12" size_md="6">
                <as-card class="settings-card">
                    <div class="settings-card-content">
                        <div class="title">Change Password</div>
                        <as-input label="Old Password" type="password"></as-input>
                        <as-input label="New Password" type="password"></as-input>
                        <as-input label="Repeat New Password" type="password"></as-input>
                        <div class="btn">
                            <as-button variant="primary">Save</as-button>
                        </div>
                    </div>
                </as-card>
            </av-col>
        </av-row>
    </as-tab>
</as-tabs>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "elements": [
    {
      "name": "uploadPictrueEl",
      "ids": [
        "userprofilepage_2"
      ]
    },
    {
      "name": "emailInput",
      "ids": [
        "userprofilepage_20"
      ]
    }
  ],
  "content": {
    "userprofilepage_3°@HTML": {
      "fct": (c) => `${c.print(c.comp.__11865033adb591bd7ee8cecbe17eb1e3method4())}`,
      "once": true
    },
    "userprofilepage_4°class": {
      "fct": (c) => `bio ${c.print(c.comp.__11865033adb591bd7ee8cecbe17eb1e3method5())}`
    },
    "userprofilepage_5°@HTML": {
      "fct": (c) => `${c.print(c.comp.__11865033adb591bd7ee8cecbe17eb1e3method6())}`,
      "once": true
    },
    "userprofilepage_7°@HTML": {
      "fct": (c) => `Joined on ${c.print(c.comp.__11865033adb591bd7ee8cecbe17eb1e3method7())}`,
      "once": true
    },
    "userprofilepage_8°count": {
      "fct": (c) => `${c.print(c.comp.__11865033adb591bd7ee8cecbe17eb1e3method8())}`,
      "once": true
    },
    "userprofilepage_11°count": {
      "fct": (c) => `${c.print(c.comp.__11865033adb591bd7ee8cecbe17eb1e3method10())}`,
      "once": true
    },
    "userprofilepage_14°count": {
      "fct": (c) => `${c.print(c.comp.__11865033adb591bd7ee8cecbe17eb1e3method12())}`,
      "once": true
    }
  },
  "injection": [
    {
      "id": "userprofilepage_0",
      "injectionName": "user",
      "inject": (c) => c.comp.__11865033adb591bd7ee8cecbe17eb1e3method3(),
      "once": true
    }
  ],
  "bindings": [
    {
      "id": "userprofilepage_20",
      "injectionName": "value",
      "eventNames": [
        "onChange"
      ],
      "inject": (c) => c.comp.__11865033adb591bd7ee8cecbe17eb1e3method15(),
      "extract": (c, v) => c.comp.__11865033adb591bd7ee8cecbe17eb1e3method16(v),
      "once": true,
      "isCallback": true
    }
  ],
  "events": [
    {
      "eventName": "change",
      "id": "userprofilepage_2",
      "fct": (e, c) => c.comp.uploadFile(e)
    }
  ],
  "pressEvents": [
    {
      "id": "userprofilepage_1",
      "onPress": (e, pressInstance, c) => { c.comp.editPicture(e, pressInstance); }
    },
    {
      "id": "userprofilepage_6",
      "onPress": (e, pressInstance, c) => { c.comp.editBio(e, pressInstance); }
    },
    {
      "id": "userprofilepage_15",
      "onPress": (e, pressInstance, c) => { c.comp.createOrg(e, pressInstance); }
    },
    {
      "id": "userprofilepage_21",
      "onPress": (e, pressInstance, c) => { c.comp.changeEmail(e, pressInstance); }
    }
  ]
});const templ0 = new Aventus.Template(this);templ0.setTemplate(`
                <as-package-card no_owner _id="userprofilepage_10"></as-package-card>
            `);templ0.setActions({
  "injection": [
    {
      "id": "userprofilepage_10",
      "injectionName": "package",
      "inject": (c) => c.comp.__11865033adb591bd7ee8cecbe17eb1e3method9(c.data.p),
      "once": true
    }
  ]
});this.__getStatic().__template.addLoop({
                    anchorId: 'userprofilepage_9',
                    template: templ0,
                simple:{data: "this.user.packages",item:"p"}});const templ1 = new Aventus.Template(this);templ1.setTemplate(`
                <as-template-card no_owner _id="userprofilepage_13"></as-template-card>
            `);templ1.setActions({
  "injection": [
    {
      "id": "userprofilepage_13",
      "injectionName": "template",
      "inject": (c) => c.comp.__11865033adb591bd7ee8cecbe17eb1e3method11(c.data.p),
      "once": true
    }
  ]
});this.__getStatic().__template.addLoop({
                    anchorId: 'userprofilepage_12',
                    template: templ1,
                simple:{data: "this.user.templates",item:"p"}});const templ2 = new Aventus.Template(this);templ2.setTemplate(`
                <av-link _id="userprofilepage_17">
                    <div class="item">
                        <span class="name" _id="userprofilepage_18"></span>
                        <span>-</span>
                        <div class="role" _id="userprofilepage_19"></div>
                    </div>
                </av-link>
            `);templ2.setActions({
  "content": {
    "userprofilepage_17°to": {
      "fct": (c) => `/org/${c.print(c.comp.__11865033adb591bd7ee8cecbe17eb1e3method13(c.data.org))}`,
      "once": true
    },
    "userprofilepage_18°@HTML": {
      "fct": (c) => `${c.print(c.comp.__11865033adb591bd7ee8cecbe17eb1e3method13(c.data.org))}`,
      "once": true
    },
    "userprofilepage_19°@HTML": {
      "fct": (c) => `${c.print(c.comp.__11865033adb591bd7ee8cecbe17eb1e3method14(c.data.org))}`,
      "once": true
    }
  }
});this.__getStatic().__template.addLoop({
                    anchorId: 'userprofilepage_16',
                    template: templ2,
                simple:{data: "this.user.organizations",item:"org"}}); }
    getClassName() {
        return "UserProfilePage";
    }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["activeTab"] = undefined;w["user"] = undefined;w["email"] = ""; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('activeTab');this.__correctGetter('user');this.__correctGetter('email'); }
    async isAllowed(state, pattern, router) {
        if (!Main.user)
            return "/login";
        const result = await Aventus.Process.execute(new App.Http.Controllers.User.Current.UserCurrentController().request());
        if (result) {
            this.user = result;
            return true;
        }
        return '/not_found';
    }
    async changeEmail() {
        const result = await new App.Http.Controllers.User.EditEmail.UserEditEmailController().request({ email: this.email });
        if (result.result) {
            this.user = result.result;
        }
        else {
            this.emailInput.errors = result.errors.map(e => e.message);
        }
    }
    configure() {
        return {};
    }
    async editBio() {
        let p = new ModalEditBio();
        p.value = this.user.bio ?? '';
        const txt = await p.show();
        if (txt !== null) {
            const ctrl = new App.Http.Controllers.User.EditBio.UserEditBioController();
            const bio = !txt ? undefined : txt;
            const result = await Aventus.Process.execute(ctrl.request({ bio }));
            if (result) {
                this.user = result;
            }
        }
    }
    async editEmail() {
    }
    editPicture() {
        this.uploadPictrueEl.click();
    }
    async uploadFile() {
        if (this.uploadPictrueEl.files && this.uploadPictrueEl.files.length > 0) {
            const result = await Aventus.Process.execute(new App.Http.Controllers.User.EditPicture.UserEditPictureController().request({ file: this.uploadPictrueEl.files[0] }));
            if (result) {
                this.user = result;
            }
        }
    }
    async createOrg() {
        const modal = new ModalCreateOrg();
        const result = await modal.show();
        if (result) {
            this.user.organizations.push(result);
        }
    }
    __11865033adb591bd7ee8cecbe17eb1e3method4() {
        return this.user.username;
    }
    __11865033adb591bd7ee8cecbe17eb1e3method5() {
        return this.user.bio ? '' : 'no-bio';
    }
    __11865033adb591bd7ee8cecbe17eb1e3method6() {
        return this.user.bio;
    }
    __11865033adb591bd7ee8cecbe17eb1e3method7() {
        return DateTools.printDate(this.user.created_date, undefined, "en-gb");
    }
    __11865033adb591bd7ee8cecbe17eb1e3method8() {
        return this.user.packages.length;
    }
    __11865033adb591bd7ee8cecbe17eb1e3method10() {
        return this.user.templates.length;
    }
    __11865033adb591bd7ee8cecbe17eb1e3method12() {
        return this.user.organizations.length;
    }
    __11865033adb591bd7ee8cecbe17eb1e3method13(org) {
        return org.name;
    }
    __11865033adb591bd7ee8cecbe17eb1e3method14(org) {
        return org.role;
    }
    __11865033adb591bd7ee8cecbe17eb1e3method3() {
        return this.user;
    }
    __11865033adb591bd7ee8cecbe17eb1e3method9(p) {
        return p;
    }
    __11865033adb591bd7ee8cecbe17eb1e3method11(p) {
        return p;
    }
    __11865033adb591bd7ee8cecbe17eb1e3method15() {
        return this.email;
    }
    __11865033adb591bd7ee8cecbe17eb1e3method16(v) {
        if (this) {
            this.email = v;
        }
    }
}
UserProfilePage.Namespace=`AventusStore`;
UserProfilePage.Tag=`as-user-profile-page`;
__as1(_, 'UserProfilePage', UserProfilePage);
if(!window.customElements.get('as-user-profile-page')){window.customElements.define('as-user-profile-page', UserProfilePage);Aventus.WebComponentInstance.registerDefinition(UserProfilePage);}

const Alert = class Alert extends Modal {
    static __style = `:host .modal{max-height:100%}:host .content{line-break:anywhere;overflow:auto}:host .footer{display:flex;justify-content:flex-end;margin-top:1rem}`;
    __getStatic() {
        return Alert;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Alert.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="content" _id="alert_0"></div><div class="footer">
    <as-button _id="alert_1"></as-button>
</div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "alert_0°@HTML": {
      "fct": (c) => `${c.print(c.comp.__45b91fe89ba8697cec8a20f3299c82d1method0())}`,
      "once": true
    },
    "alert_1°@HTML": {
      "fct": (c) => `${c.print(c.comp.__45b91fe89ba8697cec8a20f3299c82d1method1())}`,
      "once": true
    }
  },
  "pressEvents": [
    {
      "id": "alert_1",
      "onPress": (e, pressInstance, c) => { c.comp.ok(e, pressInstance); }
    }
  ]
}); }
    getClassName() {
        return "Alert";
    }
    configure() {
        return {
            title: "I'm an alert",
            content: "lorem",
            btnTxt: "Ok",
            noClose: true
        };
    }
    ok() {
        this.resolve();
    }
    __45b91fe89ba8697cec8a20f3299c82d1method0() {
        return this.options.content;
    }
    __45b91fe89ba8697cec8a20f3299c82d1method1() {
        return this.options.btnTxt;
    }
    static async open(options) {
        const alert = new Alert();
        alert.options = { ...alert.options, ...options };
        return await Alert._show(alert);
    }
}
Alert.Namespace=`AventusStore`;
Alert.Tag=`as-alert`;
__as1(_, 'Alert', Alert);
if(!window.customElements.get('as-alert')){window.customElements.define('as-alert', Alert);Aventus.WebComponentInstance.registerDefinition(Alert);}

const LoginPage = class LoginPage extends Aventus.Navigation.PageFormRoute {
    get 'error'() {
						return this.__watch["error"];
					}
					set 'error'(val) {
						this.__watch["error"] = val;
					}get 'isLoading'() {
						return this.__watch["isLoading"];
					}
					set 'isLoading'(val) {
						this.__watch["isLoading"] = val;
					}    __registerWatchesActions() {
    this.__addWatchesActions("error");this.__addWatchesActions("isLoading");    super.__registerWatchesActions();
}
    static __style = `:host{flex-direction:column;justify-content:center;padding:3rem 1rem}:host .login-header{margin:0 auto;max-width:28rem;text-align:center;width:100%}:host .login-title{color:var(--text-color);font-size:1.875rem;font-weight:700;margin-top:1.5rem}:host .login-subtext{color:var(--text-muted);font-size:.875rem;margin-top:.5rem}:host .link-accent{color:var(--color-accent);font-weight:500;text-decoration:none}:host .link-accent:hover{color:var(--hover-accent)}:host .login-form-wrapper{margin-left:auto;margin-right:auto;margin-top:2rem;max-width:28rem;width:100%}:host .login-form-card{background-color:var(--card-bg);border:1px solid var(--card-border);border-radius:.5rem;box-shadow:0 4px 12px rgba(0,0,0,.25);padding:2rem 1rem}:host .login-form{display:flex;flex-direction:column;gap:1.5rem}:host .form-group{display:flex;flex-direction:column}:host .form-label{color:var(--text-muted);font-size:.875rem;font-weight:500;margin-bottom:.25rem}:host .form-field{margin-top:.25rem}:host .form-error{font-size:.875rem;color:var(--color-danger)}:host .form-footer{display:flex;font-size:.875rem;justify-content:flex-end}:host .btn-full{width:100%}:host([visible]){display:flex}@media(min-width: 640px){:host .login-form-card{padding:2rem 2.5rem}}`;
    __getStatic() {
        return LoginPage;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(LoginPage.__style);
        return arrStyle;
    }
    __getHtml() {super.__getHtml();
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="login-header">
    <h2 class="login-title">Sign in to your account</h2>
    <p class="login-subtext">
        <span>Or&nbsp;</span>
        <av-router-link state="/signup" class="link-accent">
            create a new account
        </av-router-link>
    </p>
</div><div class="login-form-wrapper">
    <div class="login-form-card">
        <div class="login-form">
            <as-input label="Username" id="username" type="text" autoComplete="username" _id="loginpage_0"></as-input>
            <as-input label="Password" id="password" type="password" autoComplete="current-password" _id="loginpage_1"></as-input>
            <template _id="loginpage_2"></template>
            <div class="form-footer">
                <av-router-link state="/forgot-password" class="link-accent">
                    Forgot your password?
                </av-router-link>
            </div>
            <div>
                <as-button type="submit" class="btn-full" _id="loginpage_4">
                    Sign in
                </as-button>
            </div>
        </div>
    </div>
</div>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "injection": [
    {
      "id": "loginpage_0",
      "injectionName": "form",
      "inject": (c) => c.comp.__27946d41fc0e75aee3c4ffe1584badabmethod1(),
      "once": true
    },
    {
      "id": "loginpage_1",
      "injectionName": "form",
      "inject": (c) => c.comp.__27946d41fc0e75aee3c4ffe1584badabmethod2(),
      "once": true
    },
    {
      "id": "loginpage_4",
      "injectionName": "loading",
      "inject": (c) => c.comp.__27946d41fc0e75aee3c4ffe1584badabmethod4(),
      "once": true
    }
  ],
  "events": [
    {
      "eventName": "focus",
      "id": "loginpage_0",
      "fct": (e, c) => c.comp.clearError(e)
    },
    {
      "eventName": "focus",
      "id": "loginpage_1",
      "fct": (e, c) => c.comp.clearError(e)
    }
  ]
});const templ0 = new Aventus.Template(this);templ0.setTemplate(`
                <div class="form-error">
                    <div class="error" _id="loginpage_3"></div>
                </div>
            `);templ0.setActions({
  "content": {
    "loginpage_3°@HTML": {
      "fct": (c) => `${c.print(c.comp.__27946d41fc0e75aee3c4ffe1584badabmethod3())}`,
      "once": true
    }
  }
});this.__getStatic().__template.addIf({
                    anchorId: 'loginpage_2',
                    parts: [{once: true,
                    condition: (c) => c.comp.__27946d41fc0e75aee3c4ffe1584badabmethod0(),
                    template: templ0
                }]
            }); }
    getClassName() {
        return "LoginPage";
    }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["error"] = undefined;w["isLoading"] = undefined; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__correctGetter('error');this.__correctGetter('isLoading'); }
    onResult(result) {
        if (result?.result) {
            localStorage.setItem("token", result.result);
            window.location.href = "/";
        }
    }
    route() {
        return App.Http.Controllers.Auth.Login.AuthLoginController;
    }
    configure() {
        return {};
    }
    isAllowed(state) {
        if (Main.user) {
            return "/";
        }
        return true;
    }
    formSchema() {
        return {
            username: Aventus.Form.Validators.Required,
            password: Aventus.Form.Validators.Required
        };
    }
    formConfig() {
        return {
            handleExecuteNoInputError: (errors) => {
                if (errors.some(p => p.code == 422)) {
                    this.error = "Wrong credentials";
                }
                else {
                    let msg = errors.map(p => p.message.replace(/\n/g, '<br/>')).join("<br/>");
                    Alert.open({
                        title: "Execution error",
                        content: msg,
                    });
                }
            }
        };
    }
    clearError() {
        this.error = undefined;
    }
    __27946d41fc0e75aee3c4ffe1584badabmethod3() {
        return this.error;
    }
    __27946d41fc0e75aee3c4ffe1584badabmethod0() {
        return this.error;
    }
    __27946d41fc0e75aee3c4ffe1584badabmethod1() {
        return this.form.parts.username;
    }
    __27946d41fc0e75aee3c4ffe1584badabmethod2() {
        return this.form.parts.password;
    }
    __27946d41fc0e75aee3c4ffe1584badabmethod4() {
        return this.isLoading;
    }
}
LoginPage.Namespace=`AventusStore`;
LoginPage.Tag=`as-login-page`;
__as1(_, 'LoginPage', LoginPage);
if(!window.customElements.get('as-login-page')){window.customElements.define('as-login-page', LoginPage);Aventus.WebComponentInstance.registerDefinition(LoginPage);}

const Main = class Main extends Aventus.Navigation.Router {
    static instance;
    static get user() {
        return this.instance.indexResource.user;
    }
    indexResource;
    bearer;
    onScrollChange = new Aventus.Callback();
    onRouteChange = new Aventus.Callback();
    static __style = `:host{display:flex;flex-direction:column;height:100%;position:relative;width:100%;z-index:1}:host .scroll{--scroller-right: 6px;--scroller-left: 6px;width:100%;flex-grow:1;min-height:0}:host .scroll .scroll-wrapper{display:flex;flex-direction:column;height:100%;min-height:calc(100vh - 65px)}:host .scroll .scroll-wrapper .content{flex-grow:1;min-height:0}`;
    constructor() {
        super();
        Main.instance = this;
        this.indexResource = window['indexResource'];
        this.bearer = localStorage.getItem("token");
    }
    __getStatic() {
        return Main;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Main.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<as-header></as-header><av-scrollable floating_scroll class="scroll" auto_hide _id="main_0">
    <div class="scroll-wrapper">
        <div class="content" _id="main_1"></div>
        <as-footer></as-footer>
    </div>
</av-scrollable>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "elements": [
    {
      "name": "scrollEl",
      "ids": [
        "main_0"
      ]
    },
    {
      "name": "contentEl",
      "ids": [
        "main_1"
      ]
    }
  ]
}); }
    getClassName() {
        return "Main";
    }
    addScroll() {
        this.scrollEl.onScrollChange.add((x, y) => {
            this.onScrollChange.trigger(x, y);
        });
    }
    defineRoutes() {
        this.addRoute('/', HomePage);
        this.addRoute('/packages', PackagesPage);
        this.addRoute('/packages/{id:string}', PackageDetailsPage);
        this.addRoute('/templates', TemplatesPage);
        this.addRoute('/templates/{id:string}', TemplateDetailsPage);
        this.addRoute('/user/{id:string}', UserPage);
        this.addRoute('/profile', UserProfilePage);
        this.addRoute('/org/{id:string}', OrganizationPage);
        this.addRoute('/org/{id:string}/admin', OrganizationAdminPage);
        //#region auth
        this.addRoute('/login', LoginPage);
        this.addRoute('/signup', SignupPage);
        this.addRoute('/forgot-password', ForgotPasswordPage);
        this.addRoute('/validation/success', ValidationResultPage);
        this.addRoute('/validation/failure', ValidationResultPage);
        //#endregion
    }
    postCreation() {
        super.postCreation();
        this.addScroll();
        Aventus.Toast.ToastManager.configure({
            defaultDelay: 5000,
            defaultPosition: "top right",
            defaultToast: Toast,
            heightLimitPercent: 100
        });
        Modal.configure({
            closeWithClick: false,
            closeWithEsc: false,
            rejectValue: null
        });
        Aventus.Form.Form.configure({
            handleExecuteNoInputError: (errors) => {
                if (errors.length > 0) {
                    let msg = errors.map(p => p.message.replace(/\n/g, '<br/>')).join("<br/>");
                    Alert.open({
                        title: "Execution error",
                        content: msg,
                    });
                }
            },
            handleValidateNoInputError: (errors) => {
                const li = [];
                for (let key in errors) {
                    if (errors[key]) {
                        for (let msg of errors[key]) {
                            li.push(`<li>${key} : ${msg}</li>`);
                        }
                    }
                }
                Alert.open({
                    title: "Form validation error",
                    content: `<p>The form can't be validated because of :</p><ul>${li.join("")}</ul>`
                });
            }
        });
        Aventus.HttpRequest.configure({
            beforeSend: (request) => {
                const result = new Aventus.VoidWithError();
                request.setCredentials("include");
                if (this.indexResource.user) {
                    request.setHeader("Authorization", "Bearer " + this.bearer);
                }
                return result;
            },
            responseMiddleware: (response, request) => {
                if (response.containsCode(401)) {
                    location.reload();
                }
                return response;
            }
        });
        Aventus.Process.configure({
            handleErrors: (msg) => {
                Alert.open({
                    title: "Execution error",
                    content: msg,
                });
            }
        });
        Aventus.Form.Validators.Required.msg = "Thie field {name} is required";
        this.stateManager.onAfterStateChanged(() => {
            this.onRouteChange.trigger();
        });
    }
}
Main.Namespace=`AventusStore`;
Main.Tag=`as-main`;
__as1(_, 'Main', Main);
if(!window.customElements.get('as-main')){window.customElements.define('as-main', Main);Aventus.WebComponentInstance.registerDefinition(Main);}

const Header = class Header extends Aventus.WebComponent {
    get 'is_menu_open'() { return this.getBoolAttr('is_menu_open') }
    set 'is_menu_open'(val) { this.setBoolAttr('is_menu_open', val) }get 'open_menu_mobile'() { return this.getBoolAttr('open_menu_mobile') }
    set 'open_menu_mobile'(val) { this.setBoolAttr('open_menu_mobile', val) }get 'is_ready'() { return this.getBoolAttr('is_ready') }
    set 'is_ready'(val) { this.setBoolAttr('is_ready', val) }    get 'user'() {
						return this.__watch["user"];
					}
					set 'user'(val) {
						this.__watch["user"] = val;
					}    __registerWatchesActions() {
    this.__addWatchesActions("user");    super.__registerWatchesActions();
}
    static __style = `:host{background-color:var(--header-bg);border-bottom:1px solid var(--header-color-border);opacity:0;position:relative;visibility:hidden;width:100%;z-index:50}:host .header-container{align-items:center;display:flex;height:4rem;justify-content:space-between;margin:0 auto;max-width:1280px;padding:0 2rem}:host .logo{align-items:center;display:flex;gap:.5rem;text-decoration:none}:host .logo .logo-icon{align-items:center;color:var(--color-accent);display:flex;font-size:2rem;height:2rem;justify-content:center;width:2rem}:host .logo .logo-text{color:var(--color-white);font-size:1.25rem;font-weight:bold}:host .nav-links{display:flex;gap:1.5rem}:host .nav-links .nav-link{align-items:center;color:var(--color-light);display:flex;font-size:.875rem;gap:1rem;text-decoration:none;transition:color .2s ease}:host .nav-links .nav-link mi-icon{display:none}:host .nav-links .nav-link:hover{color:var(--color-white)}:host .user-actions{align-items:center;display:flex;gap:1rem}:host .user-actions .user-menu-wrapper{position:relative}:host .user-actions .user-menu-wrapper .user-button{align-items:center;background:none;border:none;border-radius:9999px;color:var(--color-light);cursor:pointer;display:flex;gap:.5rem;outline:none}:host .user-actions .user-menu-wrapper .user-button .user-avatar{border-radius:9999px;height:2.25rem;letter-spacing:0;width:2.25rem}:host .user-actions .user-menu-wrapper .user-button mi-icon{height:1rem;transition:transform .2s ease;width:1rem}:host .user-actions .user-menu-wrapper .dropdown-menu{background-color:#1e293b;border-radius:.375rem;box-shadow:0 4px 12px rgba(0,0,0,.3);display:none;margin-top:.5rem;overflow:hidden;padding:.25rem 0;position:absolute;right:0;width:12rem;z-index:10}:host .user-actions .user-menu-wrapper .dropdown-menu .dropdown-header{border-bottom:1px solid #334155;color:var(--color-light);font-size:.875rem;padding:.5rem 1rem;width:100%}:host .user-actions .user-menu-wrapper .dropdown-menu .dropdown-header .username{color:var(--color-white);font-weight:500;font-weight:bold;margin-top:2px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}:host .user-actions .user-menu-wrapper .dropdown-menu .dropdown-item{background:none;border:none;color:var(--color-light);cursor:pointer;display:block;font-size:.875rem;padding:.5rem 1rem;text-align:left;text-decoration:none;width:100%}:host .user-actions .user-menu-wrapper .dropdown-menu .dropdown-item:hover{background-color:var(--hover-dark)}:host .user-actions .auth-links{display:flex;gap:.5rem}:host .user-actions .mobile-menu{background:none;border:none;cursor:pointer;display:none}:host .user-actions .mobile-menu .menu-icon{align-items:center;color:var(--color-white);display:flex;font-size:1.5rem;height:1.5rem;justify-content:center;width:1.5rem}:host .nav-hider{display:none;inset:0;position:fixed;z-index:3}:host .sidenav{background-color:var(--header-bg);border-left:1px solid var(--header-color-border);display:none;flex-direction:column;height:100vh;min-height:0;position:absolute;right:-300px;top:0;transition:right .3s ease-in-out;width:300px;z-index:5}:host .sidenav .connected{align-items:center;display:flex;gap:1rem;padding-left:1.5rem;padding-top:1rem}:host .sidenav .connected .user-avatar{border-radius:9999px;height:2.25rem;letter-spacing:0;width:2.25rem}:host .sidenav .links{display:flex;flex-direction:column;flex-grow:1;gap:.25rem;margin-top:4rem}:host .sidenav .links .link{align-items:center;display:flex;gap:1rem;padding:.5rem 1.5rem}:host .sidenav .links .link mi-icon{display:inline-block}:host .sidenav .connected~.links{margin-top:1.5rem}:host .sidenav .close{color:var(--color-white);position:absolute;right:1rem;top:1rem}:host .sidenav .auth-links{align-items:center;display:flex;gap:1rem;justify-content:center;margin-bottom:1rem;width:100%}:host([is_ready]){opacity:1;visibility:visible}:host([is_menu_open]) .user-actions .user-menu-wrapper .dropdown-menu{display:block}@media(max-width: 767px){:host .sidenav{display:flex}:host .nav-links{display:none}:host .user-actions .auth-links{display:none}:host .user-actions .user-menu-wrapper{display:none}:host .user-actions .mobile-menu{display:block}:host([open_menu_mobile]) .sidenav{right:0px}:host([open_menu_mobile]) .nav-hider{display:block}}`;
    __getStatic() {
        return Header;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(Header.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<div class="header-container">
    <av-link to="/" class="logo">
        <mi-icon icon="code" class="logo-icon"></mi-icon>
        <span class="logo-text">AventusJs</span>
    </av-link>
    <nav class="nav-links">
        <av-link to="/" class="nav-link">
            <span>Home</span>
        </av-link>
        <av-link to="/packages" class="nav-link">
            <span>Packages</span>
        </av-link>
        <av-link to="/templates" class="nav-link">
            <span>Templates</span>
        </av-link>
    </nav>
    <div class="user-actions">
        <template _id="header_0"></template>
        <button class="mobile-menu" _id="header_7">
            <mi-icon icon="menu" class="menu-icon"></mi-icon>
        </button>
    </div>
    <div class="sidenav">
        <mi-icon icon="close" class="close" _id="header_8"></mi-icon>
         <template _id="header_9"></template>
        <div class="links">
            <av-link to="/" class="link">
                <mi-icon icon="home"></mi-icon>
                <span>Home</span>
            </av-link>
            <av-link to="/packages" class="link">
                <mi-icon icon="package_2"></mi-icon>
                <span>Packages</span>
            </av-link>
            <av-link to="/templates" class="link">
                <mi-icon icon="responsive_layout"></mi-icon>
                <span>Templates</span>
            </av-link>
            <template _id="header_12"></template>
        </div>
        <template _id="header_14"></template>
    </div>
</div><div class="nav-hider" _id="header_15"></div>` }
    });
}
    get menuEl () { return this.shadowRoot.querySelector('[_id="header_1"]'); }    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "pressEvents": [
    {
      "id": "header_7",
      "onPress": (e, pressInstance, c) => { c.comp.openMobileNav(e, pressInstance); }
    },
    {
      "id": "header_8",
      "onPress": (e, pressInstance, c) => { c.comp.closeMobileNav(e, pressInstance); }
    },
    {
      "id": "header_15",
      "onPress": (e, pressInstance, c) => { c.comp.closeMobileNav(e, pressInstance); }
    }
  ]
});const templ0 = new Aventus.Template(this);templ0.setTemplate(`
            <div class="user-menu-wrapper" tabindex="-1" _id="header_1">
                <button class="user-button" _id="header_2">
                    <as-user-img class="user-avatar" _id="header_3"></as-user-img>
                    <mi-icon icon="keyboard_arrow_down"></mi-icon>
                </button>
                <div class="dropdown-menu">
                    <div class="dropdown-header">
                        <div>Signed in as</div>
                        <div class="username" _id="header_4"></div>
                    </div>
                    <av-link class="dropdown-item" to="/profile" _id="header_5">
                        My Profile
                    </av-link>
                    <button class="dropdown-item" _id="header_6">
                        Logout
                    </button>
                </div>
            </div>
        `);templ0.setActions({
  "content": {
    "header_4°@HTML": {
      "fct": (c) => `${c.print(c.comp.__d51db0f5204592e74b573aca2e0ef5fbmethod5())}`
    }
  },
  "injection": [
    {
      "id": "header_3",
      "injectionName": "user",
      "inject": (c) => c.comp.__d51db0f5204592e74b573aca2e0ef5fbmethod4(),
      "once": true
    }
  ],
  "events": [
    {
      "eventName": "blur",
      "id": "header_1",
      "fct": (e, c) => c.comp.closeMenu(e)
    },
    {
      "eventName": "click",
      "id": "header_5",
      "fct": (e, c) => c.comp.closeMenu(e)
    }
  ],
  "pressEvents": [
    {
      "id": "header_2",
      "onPress": (e, pressInstance, c) => { c.comp.openMenu(e, pressInstance); }
    },
    {
      "id": "header_6",
      "onPress": (e, pressInstance, c) => { c.comp.logout(e, pressInstance); }
    }
  ]
});const templ1 = new Aventus.Template(this);templ1.setTemplate(`
            <div class="auth-links">
                <av-link to="/login">
                    <as-button variant="ghost">Log In</as-button>
                </av-link>
                <av-link to="/signup">
                    <as-button variant="primary">Sign Up</as-button>
                </av-link>
            </div>
        `);this.__getStatic().__template.addIf({
                    anchorId: 'header_0',
                    parts: [{once: true,
                    condition: (c) => c.comp.__d51db0f5204592e74b573aca2e0ef5fbmethod0(),
                    template: templ0
                },{once: true,
                    condition: (c) => true,
                    template: templ1
                }]
            });const templ2 = new Aventus.Template(this);templ2.setTemplate(`
            <div class="connected">
                <as-user-img class="user-avatar" _id="header_10"></as-user-img>
                <div class="username" _id="header_11"></div>
            </div>
        `);templ2.setActions({
  "content": {
    "header_11°@HTML": {
      "fct": (c) => `${c.print(c.comp.__d51db0f5204592e74b573aca2e0ef5fbmethod5())}`
    }
  },
  "injection": [
    {
      "id": "header_10",
      "injectionName": "user",
      "inject": (c) => c.comp.__d51db0f5204592e74b573aca2e0ef5fbmethod6(),
      "once": true
    }
  ]
});this.__getStatic().__template.addIf({
                    anchorId: 'header_9',
                    parts: [{once: true,
                    condition: (c) => c.comp.__d51db0f5204592e74b573aca2e0ef5fbmethod1(),
                    template: templ2
                }]
            });const templ3 = new Aventus.Template(this);templ3.setTemplate(`
                <av-link class="link" to="/profile">
                    <mi-icon icon="person"></mi-icon>
                    <span>My Profile</span>
                </av-link>
                <div class="link" _id="header_13">
                    <mi-icon icon="exit_to_app"></mi-icon>
                    <span>Logout</span>
                </div>
            `);templ3.setActions({
  "events": [
    {
      "eventName": "click",
      "id": "header_13",
      "fct": (e, c) => c.comp.logout(e)
    }
  ]
});this.__getStatic().__template.addIf({
                    anchorId: 'header_12',
                    parts: [{once: true,
                    condition: (c) => c.comp.__d51db0f5204592e74b573aca2e0ef5fbmethod2(),
                    template: templ3
                }]
            });const templ4 = new Aventus.Template(this);templ4.setTemplate(`
            <div class="auth-links">
                <av-link to="/login">
                    <as-button variant="ghost">Log In</as-button>
                </av-link>
                <av-link to="/signup">
                    <as-button variant="primary">Sign Up</as-button>
                </av-link>
            </div>
        `);this.__getStatic().__template.addIf({
                    anchorId: 'header_14',
                    parts: [{once: true,
                    condition: (c) => c.comp.__d51db0f5204592e74b573aca2e0ef5fbmethod3(),
                    template: templ4
                }]
            }); }
    getClassName() {
        return "Header";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('is_menu_open')) { this.attributeChangedCallback('is_menu_open', false, false); }if(!this.hasAttribute('open_menu_mobile')) { this.attributeChangedCallback('open_menu_mobile', false, false); }if(!this.hasAttribute('is_ready')) { this.attributeChangedCallback('is_ready', false, false); } }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["user"] = undefined; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('is_menu_open');this.__upgradeProperty('open_menu_mobile');this.__upgradeProperty('is_ready');this.__correctGetter('user'); }
    __listBoolProps() { return ["is_menu_open","open_menu_mobile","is_ready"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    openMobileNav() {
        this.open_menu_mobile = true;
    }
    closeMobileNav() {
        this.open_menu_mobile = false;
    }
    openMenu() {
        this.is_menu_open = true;
        if (this.is_menu_open) {
            setTimeout(() => {
                this.menuEl.focus();
            }, 200);
        }
    }
    closeMenu() {
        this.is_menu_open = false;
    }
    async logout() {
        await new App.Http.Controllers.Auth.Logout.AuthLogoutController().request();
        window.location.reload();
    }
    postCreation() {
        this.user = Main.user;
        this.is_ready = true;
        Main.instance.onRouteChange.add(() => {
            this.open_menu_mobile = false;
        });
    }
    __d51db0f5204592e74b573aca2e0ef5fbmethod5() {
        return this.user?.username;
    }
    __d51db0f5204592e74b573aca2e0ef5fbmethod0() {
        return this.user;
    }
    __d51db0f5204592e74b573aca2e0ef5fbmethod1() {
        return this.user;
    }
    __d51db0f5204592e74b573aca2e0ef5fbmethod2() {
        return this.user;
    }
    __d51db0f5204592e74b573aca2e0ef5fbmethod3() {
        return !this.user;
    }
    __d51db0f5204592e74b573aca2e0ef5fbmethod4() {
        return this.user;
    }
    __d51db0f5204592e74b573aca2e0ef5fbmethod6() {
        return this.user;
    }
}
Header.Namespace=`AventusStore`;
Header.Tag=`as-header`;
__as1(_, 'Header', Header);
if(!window.customElements.get('as-header')){window.customElements.define('as-header', Header);Aventus.WebComponentInstance.registerDefinition(Header);}

const TemplateCard = class TemplateCard extends Aventus.WebComponent {
    get 'no_owner'() { return this.getBoolAttr('no_owner') }
    set 'no_owner'(val) { this.setBoolAttr('no_owner', val) }    get 'template'() {
						return this.__watch["template"];
					}
					set 'template'(val) {
						this.__watch["template"] = val;
					}    __registerWatchesActions() {
    this.__addWatchesActions("template");    super.__registerWatchesActions();
}
    static __style = `:host{display:block;height:100%}:host .template-card-link{display:contents}:host .template-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:.5rem;display:flex;flex-direction:column;height:100%;justify-content:space-between;padding:1.5rem;transition:all .2s ease-in-out}:host .template-card:hover{background:var(--card-bg-hover);border-color:var(--card-border-hover);transform:translateY(-4px)}:host .template-name{color:var(--text-white);font-size:1.25rem;font-weight:bold;margin:0}:host .template-description{color:var(--text-muted);font-size:.875rem;margin-top:.5rem}:host .template-footer{display:flex;flex-direction:column;gap:1rem;margin-top:1rem}:host .template-tags{display:flex;flex-wrap:wrap;gap:.5rem}:host .template-tags .template-tag{background-color:var(--tag-bg);border-radius:.25rem;color:var(--tag-text);cursor:pointer;font-size:.8rem;font-weight:500;padding:.5rem .75rem;transition:background-color .2s ease-in-out}:host .template-tags .template-tag:hover{background-color:var(--tag-bg-hover)}:host .template-meta{align-items:center;color:var(--text-muted);display:flex;font-size:.875rem;justify-content:space-between}:host .template-author{align-items:center;color:inherit;display:flex;gap:.5rem;text-decoration:none}:host .template-author:hover{color:var(--color-accent)}:host .author-avatar{border-radius:9999px;font-size:10px;height:1.5rem;letter-spacing:0;width:1.5rem}:host .template-downloads{align-items:center;display:flex;gap:.4rem}:host .icon-xs{align-items:center;display:flex;font-size:1rem;height:1rem;justify-content:center;width:1rem}:host([no_owner]) .template-footer{flex-direction:row}:host([no_owner]) .template-footer .template-tags{flex-grow:1;flex-wrap:wrap}:host([no_owner]) .template-footer .template-meta{flex-shrink:0}:host([no_owner]) .template-author{display:none}`;
    __getStatic() {
        return TemplateCard;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(TemplateCard.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<av-router-link class="template-card-link" _id="templatecard_0">
    <div class="template-card">
        <div>
            <h3 class="template-name" _id="templatecard_1"></h3>
            <p class="template-description" _id="templatecard_2"></p>
        </div>
        <div class="template-footer">
            <div class="template-tags">
                <template _id="templatecard_3"></template>
            </div>
            <div class="template-meta">
                <av-router-link class="template-author" _id="templatecard_5">
                    <as-user-img class="author-avatar" _id="templatecard_6"></as-user-img>
                    <span _id="templatecard_7"></span>
                </av-router-link>
                <div class="template-downloads">
                    <mi-icon icon="download" class="icon-xs"></mi-icon>
                    <span _id="templatecard_8"></span>
                </div>
            </div>
        </div>
    </div>
</av-router-link>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "templatecard_0°state": {
      "fct": (c) => `${c.print(c.comp.__8431eccc896d4a5b9e4413d318e76618method1())}`,
      "once": true
    },
    "templatecard_1°@HTML": {
      "fct": (c) => `${c.print(c.comp.__8431eccc896d4a5b9e4413d318e76618method2())}`,
      "once": true
    },
    "templatecard_2°@HTML": {
      "fct": (c) => `${c.print(c.comp.__8431eccc896d4a5b9e4413d318e76618method3())}`,
      "once": true
    },
    "templatecard_5°state": {
      "fct": (c) => `${c.print(c.comp.__8431eccc896d4a5b9e4413d318e76618method5())}`,
      "once": true
    },
    "templatecard_7°@HTML": {
      "fct": (c) => `${c.print(c.comp.__8431eccc896d4a5b9e4413d318e76618method7())}`,
      "once": true
    },
    "templatecard_8°@HTML": {
      "fct": (c) => `${c.print(c.comp.__8431eccc896d4a5b9e4413d318e76618method8())}`,
      "once": true
    }
  },
  "injection": [
    {
      "id": "templatecard_6",
      "injectionName": "user",
      "inject": (c) => c.comp.__8431eccc896d4a5b9e4413d318e76618method6(),
      "once": true
    }
  ]
});const templ0 = new Aventus.Template(this);templ0.setTemplate(` 
                    <span class="template-tag" _id="templatecard_4"></span>
                `);templ0.setActions({
  "content": {
    "templatecard_4°@HTML": {
      "fct": (c) => `${c.print(c.comp.__8431eccc896d4a5b9e4413d318e76618method4(c.data.tag))}`,
      "once": true
    }
  },
  "pressEvents": [
    {
      "id": "templatecard_4",
      "onPress": (e, pressInstance, c) => { c.comp.searchTag(e, pressInstance); }
    }
  ]
});this.__getStatic().__template.addLoop({
                    anchorId: 'templatecard_3',
                    template: templ0,
                simple:{data: "this.template.tags",item:"tag"}}); }
    getClassName() {
        return "TemplateCard";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('no_owner')) { this.attributeChangedCallback('no_owner', false, false); } }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["template"] = undefined; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('no_owner');this.__correctGetter('template'); }
    __listBoolProps() { return ["no_owner"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    getFromState() {
        if (this.template.isUser) {
            return "/user/" + this.template.fromName;
        }
        return "/org/" + this.template.fromName;
    }
    searchTag(e, press) {
        let state = new TemplatesPageState();
        state.search = "#" + press.getElement().innerHTML;
        Main.instance.navigate(state);
    }
    __8431eccc896d4a5b9e4413d318e76618method1() {
        return '/templates/' + this.template.name;
    }
    __8431eccc896d4a5b9e4413d318e76618method2() {
        return this.template.name;
    }
    __8431eccc896d4a5b9e4413d318e76618method3() {
        return this.template.description;
    }
    __8431eccc896d4a5b9e4413d318e76618method4(tag) {
        return tag;
    }
    __8431eccc896d4a5b9e4413d318e76618method5() {
        return this.getFromState();
    }
    __8431eccc896d4a5b9e4413d318e76618method7() {
        return this.template.fromName;
    }
    __8431eccc896d4a5b9e4413d318e76618method8() {
        return this.template.downloads;
    }
    __8431eccc896d4a5b9e4413d318e76618method6() {
        return { username: this.template.fromName, picture: { 'uri': this.template.fromImg } };
    }
}
TemplateCard.Namespace=`AventusStore`;
TemplateCard.Tag=`as-template-card`;
__as1(_, 'TemplateCard', TemplateCard);
if(!window.customElements.get('as-template-card')){window.customElements.define('as-template-card', TemplateCard);Aventus.WebComponentInstance.registerDefinition(TemplateCard);}

const PackageCard = class PackageCard extends Aventus.WebComponent {
    get 'no_owner'() { return this.getBoolAttr('no_owner') }
    set 'no_owner'(val) { this.setBoolAttr('no_owner', val) }    get 'package'() {
						return this.__watch["package"];
					}
					set 'package'(val) {
						this.__watch["package"] = val;
					}    __registerWatchesActions() {
    this.__addWatchesActions("package");    super.__registerWatchesActions();
}
    static __style = `:host{display:block;height:100%}:host .package-card-link{display:contents}:host .package-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:.5rem;display:flex;flex-direction:column;height:100%;justify-content:space-between;padding:1.5rem;transition:all .2s ease-in-out}:host .package-card:hover{background:var(--card-bg-hover);border-color:var(--card-border-hover);transform:translateY(-4px)}:host .package-name{color:var(--text-white);font-size:1.25rem;font-weight:bold;margin:0}:host .package-description{color:var(--text-muted);font-size:.875rem;margin-top:.5rem}:host .package-footer{display:flex;flex-direction:column;gap:1rem;margin-top:1rem}:host .package-tags{display:flex;flex-wrap:wrap;gap:.5rem}:host .package-tags .package-tag{background-color:var(--tag-bg);border-radius:.25rem;color:var(--tag-text);cursor:pointer;font-size:.8rem;font-weight:500;padding:.5rem .75rem;transition:background-color .2s ease-in-out}:host .package-tags .package-tag:hover{background-color:var(--tag-bg-hover)}:host .package-meta{align-items:center;color:var(--text-muted);display:flex;font-size:.875rem;justify-content:space-between}:host .package-author{align-items:center;color:inherit;display:flex;gap:.5rem;text-decoration:none}:host .package-author:hover{color:var(--color-accent)}:host .author-avatar{border-radius:9999px;font-size:10px;height:1.5rem;letter-spacing:0;width:1.5rem}:host .package-downloads{align-items:center;display:flex;gap:.4rem}:host .icon-xs{align-items:center;display:flex;font-size:1rem;height:1rem;justify-content:center;width:1rem}:host([no_owner]) .package-footer{flex-direction:row}:host([no_owner]) .package-footer .package-tags{flex-grow:1;flex-wrap:wrap}:host([no_owner]) .package-footer .package-meta{flex-shrink:0}:host([no_owner]) .package-author{display:none}`;
    __getStatic() {
        return PackageCard;
    }
    __getStyle() {
        let arrStyle = super.__getStyle();
        arrStyle.push(PackageCard.__style);
        return arrStyle;
    }
    __getHtml() {
    this.__getStatic().__template.setHTML({
        blocks: { 'default':`<av-router-link class="package-card-link" _id="packagecard_0">
    <div class="package-card">
        <div>
            <h3 class="package-name" _id="packagecard_1"></h3>
            <p class="package-description" _id="packagecard_2"></p>
        </div>
        <div class="package-footer">
            <div class="package-tags">
                <template _id="packagecard_3"></template>
            </div>
            <div class="package-meta">
                <av-router-link class="package-author" _id="packagecard_5">
                    <as-user-img class="author-avatar" _id="packagecard_6"></as-user-img>
                    <span _id="packagecard_7"></span>
                </av-router-link>
                <div class="package-downloads">
                    <mi-icon icon="download" class="icon-xs"></mi-icon>
                    <span _id="packagecard_8"></span>
                </div>
            </div>
        </div>
    </div>
</av-router-link>` }
    });
}
    __registerTemplateAction() { super.__registerTemplateAction();this.__getStatic().__template.setActions({
  "content": {
    "packagecard_0°state": {
      "fct": (c) => `${c.print(c.comp.__9889d5032f655f5f060fcc03aefaedc9method1())}`,
      "once": true
    },
    "packagecard_1°@HTML": {
      "fct": (c) => `${c.print(c.comp.__9889d5032f655f5f060fcc03aefaedc9method2())}`,
      "once": true
    },
    "packagecard_2°@HTML": {
      "fct": (c) => `${c.print(c.comp.__9889d5032f655f5f060fcc03aefaedc9method3())}`,
      "once": true
    },
    "packagecard_5°state": {
      "fct": (c) => `${c.print(c.comp.__9889d5032f655f5f060fcc03aefaedc9method5())}`,
      "once": true
    },
    "packagecard_7°@HTML": {
      "fct": (c) => `${c.print(c.comp.__9889d5032f655f5f060fcc03aefaedc9method7())}`,
      "once": true
    },
    "packagecard_8°@HTML": {
      "fct": (c) => `${c.print(c.comp.__9889d5032f655f5f060fcc03aefaedc9method8())}`,
      "once": true
    }
  },
  "injection": [
    {
      "id": "packagecard_6",
      "injectionName": "user",
      "inject": (c) => c.comp.__9889d5032f655f5f060fcc03aefaedc9method6(),
      "once": true
    }
  ]
});const templ0 = new Aventus.Template(this);templ0.setTemplate(` 
                    <span class="package-tag" _id="packagecard_4"></span>
                `);templ0.setActions({
  "content": {
    "packagecard_4°@HTML": {
      "fct": (c) => `${c.print(c.comp.__9889d5032f655f5f060fcc03aefaedc9method4(c.data.tag))}`,
      "once": true
    }
  },
  "pressEvents": [
    {
      "id": "packagecard_4",
      "onPress": (e, pressInstance, c) => { c.comp.searchTag(e, pressInstance); }
    }
  ]
});this.__getStatic().__template.addLoop({
                    anchorId: 'packagecard_3',
                    template: templ0,
                simple:{data: "this.package.tags",item:"tag"}}); }
    getClassName() {
        return "PackageCard";
    }
    __defaultValues() { super.__defaultValues(); if(!this.hasAttribute('no_owner')) { this.attributeChangedCallback('no_owner', false, false); } }
    __defaultValuesWatch(w) { super.__defaultValuesWatch(w); w["package"] = undefined; }
    __upgradeAttributes() { super.__upgradeAttributes(); this.__upgradeProperty('no_owner');this.__correctGetter('package'); }
    __listBoolProps() { return ["no_owner"].concat(super.__listBoolProps()).filter((v, i, a) => a.indexOf(v) === i); }
    getFromState() {
        if (this.package.isUser) {
            return "/user/" + this.package.fromName;
        }
        return "/org/" + this.package.fromName;
    }
    searchTag(e, press) {
        let state = new PackagesPageState();
        state.search = "#" + press.getElement().innerHTML;
        Main.instance.navigate(state);
    }
    __9889d5032f655f5f060fcc03aefaedc9method1() {
        return '/packages/' + this.package.name;
    }
    __9889d5032f655f5f060fcc03aefaedc9method2() {
        return this.package.name;
    }
    __9889d5032f655f5f060fcc03aefaedc9method3() {
        return this.package.description;
    }
    __9889d5032f655f5f060fcc03aefaedc9method4(tag) {
        return tag;
    }
    __9889d5032f655f5f060fcc03aefaedc9method5() {
        return this.getFromState();
    }
    __9889d5032f655f5f060fcc03aefaedc9method7() {
        return this.package.fromName;
    }
    __9889d5032f655f5f060fcc03aefaedc9method8() {
        return this.package.downloads;
    }
    __9889d5032f655f5f060fcc03aefaedc9method6() {
        return { username: this.package.fromName, picture: { 'uri': this.package.fromImg } };
    }
}
PackageCard.Namespace=`AventusStore`;
PackageCard.Tag=`as-package-card`;
__as1(_, 'PackageCard', PackageCard);
if(!window.customElements.get('as-package-card')){window.customElements.define('as-package-card', PackageCard);Aventus.WebComponentInstance.registerDefinition(PackageCard);}


for(let key in _) { AventusStore[key] = _[key] }
})(AventusStore);
